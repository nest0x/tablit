(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function n0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $h={exports:{}},Ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function PI(){if(tv)return Ml;tv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,l){var d=null;if(l!==void 0&&(d=""+l),s.key!==void 0&&(d=""+s.key),"key"in s){l={};for(var h in s)h!=="key"&&(l[h]=s[h])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:d,ref:s!==void 0?s:null,props:l}}return Ml.Fragment=e,Ml.jsx=t,Ml.jsxs=t,Ml}var nv;function kI(){return nv||(nv=1,$h.exports=PI()),$h.exports}var O=kI(),Jh={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function VI(){if(iv)return De;iv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,q={};function z(U,re,fe){this.props=U,this.context=re,this.refs=q,this.updater=fe||x}z.prototype.isReactComponent={},z.prototype.setState=function(U,re){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,re,"setState")},z.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function j(){}j.prototype=z.prototype;function H(U,re,fe){this.props=U,this.context=re,this.refs=q,this.updater=fe||x}var W=H.prototype=new j;W.constructor=H,V(W,z.prototype),W.isPureReactComponent=!0;var X=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},se=Object.prototype.hasOwnProperty;function D(U,re,fe,le,_e,Ne){return fe=Ne.ref,{$$typeof:n,type:U,key:re,ref:fe!==void 0?fe:null,props:Ne}}function w(U,re){return D(U.type,re,void 0,void 0,void 0,U.props)}function M(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function P(U){var re={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(fe){return re[fe]})}var k=/\/+/g;function F(U,re){return typeof U=="object"&&U!==null&&U.key!=null?P(""+U.key):re.toString(36)}function b(){}function ct(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(b,b):(U.status="pending",U.then(function(re){U.status==="pending"&&(U.status="fulfilled",U.value=re)},function(re){U.status==="pending"&&(U.status="rejected",U.reason=re)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Fe(U,re,fe,le,_e){var Ne=typeof U;(Ne==="undefined"||Ne==="boolean")&&(U=null);var Ce=!1;if(U===null)Ce=!0;else switch(Ne){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(U.$$typeof){case n:case e:Ce=!0;break;case v:return Ce=U._init,Fe(Ce(U._payload),re,fe,le,_e)}}if(Ce)return _e=_e(U),Ce=le===""?"."+F(U,0):le,X(_e)?(fe="",Ce!=null&&(fe=Ce.replace(k,"$&/")+"/"),Fe(_e,re,fe,"",function(Re){return Re})):_e!=null&&(M(_e)&&(_e=w(_e,fe+(_e.key==null||U&&U.key===_e.key?"":(""+_e.key).replace(k,"$&/")+"/")+Ce)),re.push(_e)),1;Ce=0;var Ct=le===""?".":le+":";if(X(U))for(var je=0;je<U.length;je++)le=U[je],Ne=Ct+F(le,je),Ce+=Fe(le,re,fe,Ne,_e);else if(je=S(U),typeof je=="function")for(U=je.call(U),je=0;!(le=U.next()).done;)le=le.value,Ne=Ct+F(le,je++),Ce+=Fe(le,re,fe,Ne,_e);else if(Ne==="object"){if(typeof U.then=="function")return Fe(ct(U),re,fe,le,_e);throw re=String(U),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function ee(U,re,fe){if(U==null)return U;var le=[],_e=0;return Fe(U,le,"","",function(Ne){return re.call(fe,Ne,_e++)}),le}function ce(U){if(U._status===-1){var re=U._result;re=re(),re.then(function(fe){(U._status===0||U._status===-1)&&(U._status=1,U._result=fe)},function(fe){(U._status===0||U._status===-1)&&(U._status=2,U._result=fe)}),U._status===-1&&(U._status=0,U._result=re)}if(U._status===1)return U._result.default;throw U._result}var pe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function ze(){}return De.Children={map:ee,forEach:function(U,re,fe){ee(U,function(){re.apply(this,arguments)},fe)},count:function(U){var re=0;return ee(U,function(){re++}),re},toArray:function(U){return ee(U,function(re){return re})||[]},only:function(U){if(!M(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},De.Component=z,De.Fragment=t,De.Profiler=s,De.PureComponent=H,De.StrictMode=i,De.Suspense=g,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,De.__COMPILER_RUNTIME={__proto__:null,c:function(U){return J.H.useMemoCache(U)}},De.cache=function(U){return function(){return U.apply(null,arguments)}},De.cloneElement=function(U,re,fe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var le=V({},U.props),_e=U.key,Ne=void 0;if(re!=null)for(Ce in re.ref!==void 0&&(Ne=void 0),re.key!==void 0&&(_e=""+re.key),re)!se.call(re,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&re.ref===void 0||(le[Ce]=re[Ce]);var Ce=arguments.length-2;if(Ce===1)le.children=fe;else if(1<Ce){for(var Ct=Array(Ce),je=0;je<Ce;je++)Ct[je]=arguments[je+2];le.children=Ct}return D(U.type,_e,void 0,void 0,Ne,le)},De.createContext=function(U){return U={$$typeof:d,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},De.createElement=function(U,re,fe){var le,_e={},Ne=null;if(re!=null)for(le in re.key!==void 0&&(Ne=""+re.key),re)se.call(re,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(_e[le]=re[le]);var Ce=arguments.length-2;if(Ce===1)_e.children=fe;else if(1<Ce){for(var Ct=Array(Ce),je=0;je<Ce;je++)Ct[je]=arguments[je+2];_e.children=Ct}if(U&&U.defaultProps)for(le in Ce=U.defaultProps,Ce)_e[le]===void 0&&(_e[le]=Ce[le]);return D(U,Ne,void 0,void 0,null,_e)},De.createRef=function(){return{current:null}},De.forwardRef=function(U){return{$$typeof:h,render:U}},De.isValidElement=M,De.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:ce}},De.memo=function(U,re){return{$$typeof:p,type:U,compare:re===void 0?null:re}},De.startTransition=function(U){var re=J.T,fe={};J.T=fe;try{var le=U(),_e=J.S;_e!==null&&_e(fe,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ze,pe)}catch(Ne){pe(Ne)}finally{J.T=re}},De.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},De.use=function(U){return J.H.use(U)},De.useActionState=function(U,re,fe){return J.H.useActionState(U,re,fe)},De.useCallback=function(U,re){return J.H.useCallback(U,re)},De.useContext=function(U){return J.H.useContext(U)},De.useDebugValue=function(){},De.useDeferredValue=function(U,re){return J.H.useDeferredValue(U,re)},De.useEffect=function(U,re,fe){var le=J.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(U,re)},De.useId=function(){return J.H.useId()},De.useImperativeHandle=function(U,re,fe){return J.H.useImperativeHandle(U,re,fe)},De.useInsertionEffect=function(U,re){return J.H.useInsertionEffect(U,re)},De.useLayoutEffect=function(U,re){return J.H.useLayoutEffect(U,re)},De.useMemo=function(U,re){return J.H.useMemo(U,re)},De.useOptimistic=function(U,re){return J.H.useOptimistic(U,re)},De.useReducer=function(U,re,fe){return J.H.useReducer(U,re,fe)},De.useRef=function(U){return J.H.useRef(U)},De.useState=function(U){return J.H.useState(U)},De.useSyncExternalStore=function(U,re,fe){return J.H.useSyncExternalStore(U,re,fe)},De.useTransition=function(){return J.H.useTransition()},De.version="19.1.1",De}var ov;function Km(){return ov||(ov=1,Jh.exports=VI()),Jh.exports}var Me=Km();const i0=n0(Me);var Kh={exports:{}},xl={},Qh={exports:{}},Xh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function UI(){return rv||(rv=1,(function(n){function e(ee,ce){var pe=ee.length;ee.push(ce);e:for(;0<pe;){var ze=pe-1>>>1,U=ee[ze];if(0<s(U,ce))ee[ze]=ce,ee[pe]=U,pe=ze;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],pe=ee.pop();if(pe!==ce){ee[0]=pe;e:for(var ze=0,U=ee.length,re=U>>>1;ze<re;){var fe=2*(ze+1)-1,le=ee[fe],_e=fe+1,Ne=ee[_e];if(0>s(le,pe))_e<U&&0>s(Ne,le)?(ee[ze]=Ne,ee[_e]=pe,ze=_e):(ee[ze]=le,ee[fe]=pe,ze=fe);else if(_e<U&&0>s(Ne,pe))ee[ze]=Ne,ee[_e]=pe,ze=_e;else break e}}return ce}function s(ee,ce){var pe=ee.sortIndex-ce.sortIndex;return pe!==0?pe:ee.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var g=[],p=[],v=1,E=null,S=3,x=!1,V=!1,q=!1,z=!1,j=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function X(ee){for(var ce=t(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=ee)i(p),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=t(p)}}function J(ee){if(q=!1,X(ee),!V)if(t(g)!==null)V=!0,se||(se=!0,F());else{var ce=t(p);ce!==null&&Fe(J,ce.startTime-ee)}}var se=!1,D=-1,w=5,M=-1;function P(){return z?!0:!(n.unstable_now()-M<w)}function k(){if(z=!1,se){var ee=n.unstable_now();M=ee;var ce=!0;try{e:{V=!1,q&&(q=!1,H(D),D=-1),x=!0;var pe=S;try{t:{for(X(ee),E=t(g);E!==null&&!(E.expirationTime>ee&&P());){var ze=E.callback;if(typeof ze=="function"){E.callback=null,S=E.priorityLevel;var U=ze(E.expirationTime<=ee);if(ee=n.unstable_now(),typeof U=="function"){E.callback=U,X(ee),ce=!0;break t}E===t(g)&&i(g),X(ee)}else i(g);E=t(g)}if(E!==null)ce=!0;else{var re=t(p);re!==null&&Fe(J,re.startTime-ee),ce=!1}}break e}finally{E=null,S=pe,x=!1}ce=void 0}}finally{ce?F():se=!1}}}var F;if(typeof W=="function")F=function(){W(k)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,ct=b.port2;b.port1.onmessage=k,F=function(){ct.postMessage(null)}}else F=function(){j(k,0)};function Fe(ee,ce){D=j(function(){ee(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(ee){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var pe=S;S=ce;try{return ee()}finally{S=pe}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var pe=S;S=ee;try{return ce()}finally{S=pe}},n.unstable_scheduleCallback=function(ee,ce,pe){var ze=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ze+pe:ze):pe=ze,ee){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=pe+U,ee={id:v++,callback:ce,priorityLevel:ee,startTime:pe,expirationTime:U,sortIndex:-1},pe>ze?(ee.sortIndex=pe,e(p,ee),t(g)===null&&ee===t(p)&&(q?(H(D),D=-1):q=!0,Fe(J,pe-ze))):(ee.sortIndex=U,e(g,ee),V||x||(V=!0,se||(se=!0,F()))),ee},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(ee){var ce=S;return function(){var pe=S;S=ce;try{return ee.apply(this,arguments)}finally{S=pe}}}})(Xh)),Xh}var sv;function LI(){return sv||(sv=1,Qh.exports=UI()),Qh.exports}var Wh={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function OI(){if(av)return tn;av=1;var n=Km();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},tn.flushSync=function(g){var p=d.T,v=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=p,i.p=v,i.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:x}):v==="script"&&i.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=h(v,p.crossOrigin);i.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},tn.requestFormReset=function(g){i.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,v){return d.H.useFormState(g,p,v)},tn.useFormStatus=function(){return d.H.useHostTransitionStatus()},tn.version="19.1.1",tn}var lv;function FI(){if(lv)return Wh.exports;lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wh.exports=OI(),Wh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function qI(){if(uv)return xl;uv=1;var n=LI(),e=Km(),t=FI();function i(o){var r="https://react.dev/errors/"+o;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+o+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function l(o){var r=o,a=o;if(o.alternate)for(;r.return;)r=r.return;else{o=r;do r=o,(r.flags&4098)!==0&&(a=r.return),o=r.return;while(o)}return r.tag===3?a:null}function d(o){if(o.tag===13){var r=o.memoizedState;if(r===null&&(o=o.alternate,o!==null&&(r=o.memoizedState)),r!==null)return r.dehydrated}return null}function h(o){if(l(o)!==o)throw Error(i(188))}function g(o){var r=o.alternate;if(!r){if(r=l(o),r===null)throw Error(i(188));return r!==o?null:o}for(var a=o,f=r;;){var y=a.return;if(y===null)break;var _=y.alternate;if(_===null){if(f=y.return,f!==null){a=f;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===a)return h(y),o;if(_===f)return h(y),r;_=_.sibling}throw Error(i(188))}if(a.return!==f.return)a=y,f=_;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,f=_;break}if(I===f){A=!0,f=y,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,f=y;break}if(I===f){A=!0,f=_,a=y;break}I=I.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==f)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?o:r}function p(o){var r=o.tag;if(r===5||r===26||r===27||r===6)return o;for(o=o.child;o!==null;){if(r=p(o),r!==null)return r;o=o.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),W=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=k&&o[k]||o["@@iterator"],typeof o=="function"?o:null)}var b=Symbol.for("react.client.reference");function ct(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===b?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case z:return"Profiler";case q:return"StrictMode";case J:return"Suspense";case se:return"SuspenseList";case M:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case W:return(o.displayName||"Context")+".Provider";case H:return(o._context.displayName||"Context")+".Consumer";case X:var r=o.render;return o=o.displayName,o||(o=r.displayName||r.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return r=o.displayName||null,r!==null?r:ct(o.type)||"Memo";case w:r=o._payload,o=o._init;try{return ct(o(r))}catch{}}return null}var Fe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ze=[],U=-1;function re(o){return{current:o}}function fe(o){0>U||(o.current=ze[U],ze[U]=null,U--)}function le(o,r){U++,ze[U]=o.current,o.current=r}var _e=re(null),Ne=re(null),Ce=re(null),Ct=re(null);function je(o,r){switch(le(Ce,r),le(Ne,o),le(_e,null),r.nodeType){case 9:case 11:o=(o=r.documentElement)&&(o=o.namespaceURI)?x_(o):0;break;default:if(o=r.tagName,r=r.namespaceURI)r=x_(r),o=D_(r,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}fe(_e),le(_e,o)}function Re(){fe(_e),fe(Ne),fe(Ce)}function ft(o){o.memoizedState!==null&&le(Ct,o);var r=_e.current,a=D_(r,o.type);r!==a&&(le(Ne,o),le(_e,a))}function dt(o){Ne.current===o&&(fe(_e),fe(Ne)),Ct.current===o&&(fe(Ct),Cl._currentValue=pe)}var Zt=Object.prototype.hasOwnProperty,Ri=n.unstable_scheduleCallback,jn=n.unstable_cancelCallback,ao=n.unstable_shouldYield,Ta=n.unstable_requestPaint,In=n.unstable_now,$f=n.unstable_getCurrentPriorityLevel,Ea=n.unstable_ImmediatePriority,Wr=n.unstable_UserBlockingPriority,er=n.unstable_NormalPriority,Jf=n.unstable_LowPriority,Zr=n.unstable_IdlePriority,Sa=n.log,fu=n.unstable_setDisableYieldValue,gt=null,Xe=null;function gn(o){if(typeof Sa=="function"&&fu(o),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(gt,o)}catch{}}var jt=Math.clz32?Math.clz32:tr,du=Math.log,Kf=Math.LN2;function tr(o){return o>>>=0,o===0?32:31-(du(o)/Kf|0)|0}var nr=256,ir=4194304;function Hn(o){var r=o&42;if(r!==0)return r;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function jr(o,r,a){var f=o.pendingLanes;if(f===0)return 0;var y=0,_=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var I=f&134217727;return I!==0?(f=I&~_,f!==0?y=Hn(f):(A&=I,A!==0?y=Hn(A):a||(a=I&~o,a!==0&&(y=Hn(a))))):(I=f&~_,I!==0?y=Hn(I):A!==0?y=Hn(A):a||(a=f&~o,a!==0&&(y=Hn(a)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,a=r&-r,_>=a||_===32&&(a&4194048)!==0)?r:y}function or(o,r){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&r)===0}function Ca(o,r){switch(o){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aa(){var o=nr;return nr<<=1,(nr&4194048)===0&&(nr=256),o}function Ia(){var o=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),o}function wi(o){for(var r=[],a=0;31>a;a++)r.push(o);return r}function Mi(o,r){o.pendingLanes|=r,r!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ra(o,r,a,f,y,_){var A=o.pendingLanes;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=a,o.entangledLanes&=a,o.errorRecoveryDisabledLanes&=a,o.shellSuspendCounter=0;var I=o.entanglements,N=o.expirationTimes,$=o.hiddenUpdates;for(a=A&~a;0<a;){var te=31-jt(a),ie=1<<te;I[te]=0,N[te]=-1;var K=$[te];if(K!==null)for($[te]=null,te=0;te<K.length;te++){var Q=K[te];Q!==null&&(Q.lane&=-536870913)}a&=~ie}f!==0&&ei(o,f,0),_!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=_&~(A&~r))}function ei(o,r,a){o.pendingLanes|=r,o.suspendedLanes&=~r;var f=31-jt(r);o.entangledLanes|=r,o.entanglements[f]=o.entanglements[f]|1073741824|a&4194090}function wa(o,r){var a=o.entangledLanes|=r;for(o=o.entanglements;a;){var f=31-jt(a),y=1<<f;y&r|o[f]&r&&(o[f]|=r),a&=~y}}function lo(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function es(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function uo(){var o=ce.p;return o!==0?o:(o=window.event,o===void 0?32:Q_(o.type))}function hu(o,r){var a=ce.p;try{return ce.p=o,r()}finally{ce.p=a}}var lt=Math.random().toString(36).slice(2),Dt="__reactFiber$"+lt,At="__reactProps$"+lt,Rn="__reactContainer$"+lt,Ma="__reactEvents$"+lt,Qf="__reactListeners$"+lt,co="__reactHandles$"+lt,mu="__reactResources$"+lt,rr="__reactMarker$"+lt;function fo(o){delete o[Dt],delete o[At],delete o[Ma],delete o[Qf],delete o[co]}function xi(o){var r=o[Dt];if(r)return r;for(var a=o.parentNode;a;){if(r=a[Rn]||a[Dt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(o=k_(o);o!==null;){if(a=o[Dt])return a;o=k_(o)}return r}o=a,a=o.parentNode}return null}function ti(o){if(o=o[Dt]||o[Rn]){var r=o.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return o}return null}function ni(o){var r=o.tag;if(r===5||r===26||r===27||r===6)return o.stateNode;throw Error(i(33))}function ln(o){var r=o[mu];return r||(r=o[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vt(o){o[rr]=!0}var xa=new Set,ts={};function Gn(o,r){Di(o,r),Di(o+"Capture",r)}function Di(o,r){for(ts[o]=r,o=0;o<r.length;o++)xa.add(r[o])}var pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gu={},sr={};function yu(o){return Zt.call(sr,o)?!0:Zt.call(gu,o)?!1:pu.test(o)?sr[o]=!0:(gu[o]=!0,!1)}function ho(o,r,a){if(yu(r))if(a===null)o.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":o.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(r);return}}o.setAttribute(r,""+a)}}function ii(o,r,a){if(a===null)o.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(r);return}o.setAttribute(r,""+a)}}function zt(o,r,a,f){if(f===null)o.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(a);return}o.setAttributeNS(r,a,""+f)}}var ar,_u;function Ni(o){if(ar===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ar=r&&r[1]||"",_u=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ar+o+_u}var ns=!1;function is(o,r){if(!o||ns)return"";ns=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Q){var K=Q}Reflect.construct(o,[],ie)}else{try{ie.call()}catch(Q){K=Q}o.call(ie.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ie=o())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=f.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var N=A.split(`
`),$=I.split(`
`);for(y=f=0;f<N.length&&!N[f].includes("DetermineComponentFrameRoot");)f++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(f===N.length||y===$.length)for(f=N.length-1,y=$.length-1;1<=f&&0<=y&&N[f]!==$[y];)y--;for(;1<=f&&0<=y;f--,y--)if(N[f]!==$[y]){if(f!==1||y!==1)do if(f--,y--,0>y||N[f]!==$[y]){var te=`
`+N[f].replace(" at new "," at ");return o.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",o.displayName)),te}while(1<=f&&0<=y);break}}}finally{ns=!1,Error.prepareStackTrace=a}return(a=o?o.displayName||o.name:"")?Ni(a):""}function Da(o){switch(o.tag){case 26:case 27:case 5:return Ni(o.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return is(o.type,!1);case 11:return is(o.type.render,!1);case 1:return is(o.type,!0);case 31:return Ni("Activity");default:return""}}function os(o){try{var r="";do r+=Da(o),o=o.return;while(o);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function un(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Na(o){var r=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Xf(o){var r=Na(o)?"checked":"value",a=Object.getOwnPropertyDescriptor(o.constructor.prototype,r),f=""+o[r];if(!o.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,_=a.set;return Object.defineProperty(o,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){f=""+A,_.call(this,A)}}),Object.defineProperty(o,r,{enumerable:a.enumerable}),{getValue:function(){return f},setValue:function(A){f=""+A},stopTracking:function(){o._valueTracker=null,delete o[r]}}}}function rs(o){o._valueTracker||(o._valueTracker=Xf(o))}function ba(o){if(!o)return!1;var r=o._valueTracker;if(!r)return!0;var a=r.getValue(),f="";return o&&(f=Na(o)?o.checked?"true":"false":o.value),o=f,o!==a?(r.setValue(o),!0):!1}function lr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Wf=/[\n"\\]/g;function It(o){return o.replace(Wf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function yn(o,r,a,f,y,_,A,I){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),r!=null?A==="number"?(r===0&&o.value===""||o.value!=r)&&(o.value=""+un(r)):o.value!==""+un(r)&&(o.value=""+un(r)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),r!=null?mo(o,A,un(r)):a!=null?mo(o,A,un(a)):f!=null&&o.removeAttribute("value"),y==null&&_!=null&&(o.defaultChecked=!!_),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+un(I):o.removeAttribute("name")}function ur(o,r,a,f,y,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),r!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||r!=null))return;a=a!=null?""+un(a):"",r=r!=null?""+un(r):a,I||r===o.value||(o.value=r),o.defaultValue=r}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=I?o.checked:!!f,o.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A)}function mo(o,r,a){r==="number"&&lr(o.ownerDocument)===o||o.defaultValue===""+a||(o.defaultValue=""+a)}function bi(o,r,a,f){if(o=o.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<o.length;a++)y=r.hasOwnProperty("$"+o[a].value),o[a].selected!==y&&(o[a].selected=y),y&&f&&(o[a].defaultSelected=!0)}else{for(a=""+un(a),r=null,y=0;y<o.length;y++){if(o[y].value===a){o[y].selected=!0,f&&(o[y].defaultSelected=!0);return}r!==null||o[y].disabled||(r=o[y])}r!==null&&(r.selected=!0)}}function et(o,r,a){if(r!=null&&(r=""+un(r),r!==o.value&&(o.value=r),a==null)){o.defaultValue!==r&&(o.defaultValue=r);return}o.defaultValue=a!=null?""+un(a):""}function cr(o,r,a,f){if(r==null){if(f!=null){if(a!=null)throw Error(i(92));if(Fe(f)){if(1<f.length)throw Error(i(93));f=f[0]}a=f}a==null&&(a=""),r=a}a=un(r),o.defaultValue=a,f=o.textContent,f===a&&f!==""&&f!==null&&(o.value=f)}function wn(o,r){if(r){var a=o.firstChild;if(a&&a===o.lastChild&&a.nodeType===3){a.nodeValue=r;return}}o.textContent=r}var fr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vu(o,r,a){var f=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?f?o.setProperty(r,""):r==="float"?o.cssFloat="":o[r]="":f?o.setProperty(r,a):typeof a!="number"||a===0||fr.has(r)?r==="float"?o.cssFloat=a:o[r]=(""+a).trim():o[r]=a+"px"}function Pa(o,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(o=o.style,a!=null){for(var f in a)!a.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var y in r)f=r[y],r.hasOwnProperty(y)&&a[y]!==f&&vu(o,y,f)}else for(var _ in r)r.hasOwnProperty(_)&&vu(o,_,r[_])}function ka(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ss(o){return jf.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Pi=null;function Mn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ki=null,Vi=null;function Va(o){var r=ti(o);if(r&&(o=r.stateNode)){var a=o[At]||null;e:switch(o=r.stateNode,r.type){case"input":if(yn(o,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=o;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+It(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var f=a[r];if(f!==o&&f.form===o.form){var y=f[At]||null;if(!y)throw Error(i(90));yn(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)f=a[r],f.form===o.form&&ba(f)}break e;case"textarea":et(o,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&bi(o,!!a.multiple,r,!1)}}}var oi=!1;function Tu(o,r,a){if(oi)return o(r,a);oi=!0;try{var f=o(r);return f}finally{if(oi=!1,(ki!==null||Vi!==null)&&(hc(),ki&&(r=ki,o=Vi,Vi=ki=null,Va(r),o)))for(r=0;r<o.length;r++)Va(o[r])}}function dr(o,r){var a=o.stateNode;if(a===null)return null;var f=a[At]||null;if(f===null)return null;a=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xn=!1;if(zn)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){xn=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{xn=!1}var ri=null,po=null,Ui=null;function Ua(){if(Ui)return Ui;var o,r=po,a=r.length,f,y="value"in ri?ri.value:ri.textContent,_=y.length;for(o=0;o<a&&r[o]===y[o];o++);var A=a-o;for(f=1;f<=A&&r[a-f]===y[_-f];f++);return Ui=y.slice(o,1<f?1-f:void 0)}function si(o){var r=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&r===13&&(o=13)):o=r,o===10&&(o=13),32<=o||o===13?o:0}function ai(){return!0}function La(){return!1}function Lt(o){function r(a,f,y,_,A){this._reactName=a,this._targetInst=y,this.type=f,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(a=o[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ai:La,this.isPropagationStopped=La,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),r}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},as=Lt(Ke),mr=v({},Ke,{view:0,detail:0}),Eu=Lt(mr),ls,us,li,pr=v({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==li&&(li&&o.type==="mousemove"?(ls=o.screenX-li.screenX,us=o.screenY-li.screenY):us=ls=0,li=o),ls)},movementY:function(o){return"movementY"in o?o.movementY:us}}),Dn=Lt(pr),Su=v({},pr,{dataTransfer:0}),ed=Lt(Su),gr=v({},mr,{relatedTarget:0}),cs=Lt(gr),Oa=v({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),fs=Lt(Oa),Cu=v({},Ke,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ds=Lt(Cu),td=v({},Ke,{data:0}),Fa=Lt(td),yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qa(o){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(o):(o=Iu[o])?!!r[o]:!1}function _r(){return qa}var Ru=v({},mr,{key:function(o){if(o.key){var r=yr[o.key]||o.key;if(r!=="Unidentified")return r}return o.type==="keypress"?(o=si(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Au[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(o){return o.type==="keypress"?si(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?si(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),hs=Lt(Ru),wu=v({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ba=Lt(wu),Li=v({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r}),Mu=Lt(Li),xu=v({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),Du=Lt(xu),Nu=v({},pr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ms=Lt(Nu),cn=v({},Ke,{newState:0,oldState:0}),bu=Lt(cn),Pu=[9,13,27,32],ui=zn&&"CompositionEvent"in window,m=null;zn&&"documentMode"in document&&(m=document.documentMode);var T=zn&&"TextEvent"in window&&!m,C=zn&&(!ui||m&&8<m&&11>=m),R=" ",G=!1;function Z(o,r){switch(o){case"keyup":return Pu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var qe=!1;function Nt(o,r){switch(o){case"compositionend":return ue(r);case"keypress":return r.which!==32?null:(G=!0,R);case"textInput":return o=r.data,o===R&&G?null:o;default:return null}}function Be(o,r){if(qe)return o==="compositionend"||!ui&&Z(o,r)?(o=Ua(),Ui=po=ri=null,qe=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return C&&r.locale!=="ko"?null:r.data;default:return null}}var Ot={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bt(o){var r=o&&o.nodeName&&o.nodeName.toLowerCase();return r==="input"?!!Ot[o.type]:r==="textarea"}function Oi(o,r,a,f){ki?Vi?Vi.push(f):Vi=[f]:ki=f,r=vc(r,"onChange"),0<r.length&&(a=new as("onChange","change",null,a,f),o.push({event:a,listeners:r}))}var Yt=null,ci=null;function Ha(o){A_(o,0)}function ku(o){var r=ni(o);if(ba(r))return o}function Yp(o,r){if(o==="change")return r}var $p=!1;if(zn){var nd;if(zn){var id="oninput"in document;if(!id){var Jp=document.createElement("div");Jp.setAttribute("oninput","return;"),id=typeof Jp.oninput=="function"}nd=id}else nd=!1;$p=nd&&(!document.documentMode||9<document.documentMode)}function Kp(){Yt&&(Yt.detachEvent("onpropertychange",Qp),ci=Yt=null)}function Qp(o){if(o.propertyName==="value"&&ku(ci)){var r=[];Oi(r,ci,o,Mn(o)),Tu(Ha,r)}}function uA(o,r,a){o==="focusin"?(Kp(),Yt=r,ci=a,Yt.attachEvent("onpropertychange",Qp)):o==="focusout"&&Kp()}function cA(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ku(ci)}function fA(o,r){if(o==="click")return ku(r)}function dA(o,r){if(o==="input"||o==="change")return ku(r)}function hA(o,r){return o===r&&(o!==0||1/o===1/r)||o!==o&&r!==r}var _n=typeof Object.is=="function"?Object.is:hA;function Ga(o,r){if(_n(o,r))return!0;if(typeof o!="object"||o===null||typeof r!="object"||r===null)return!1;var a=Object.keys(o),f=Object.keys(r);if(a.length!==f.length)return!1;for(f=0;f<a.length;f++){var y=a[f];if(!Zt.call(r,y)||!_n(o[y],r[y]))return!1}return!0}function Xp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Wp(o,r){var a=Xp(o);o=0;for(var f;a;){if(a.nodeType===3){if(f=o+a.textContent.length,o<=r&&f>=r)return{node:a,offset:r-o};o=f}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xp(a)}}function Zp(o,r){return o&&r?o===r?!0:o&&o.nodeType===3?!1:r&&r.nodeType===3?Zp(o,r.parentNode):"contains"in o?o.contains(r):o.compareDocumentPosition?!!(o.compareDocumentPosition(r)&16):!1:!1}function jp(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var r=lr(o.document);r instanceof o.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)o=r.contentWindow;else break;r=lr(o.document)}return r}function od(o){var r=o&&o.nodeName&&o.nodeName.toLowerCase();return r&&(r==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||r==="textarea"||o.contentEditable==="true")}var mA=zn&&"documentMode"in document&&11>=document.documentMode,ps=null,rd=null,za=null,sd=!1;function eg(o,r,a){var f=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sd||ps==null||ps!==lr(f)||(f=ps,"selectionStart"in f&&od(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),za&&Ga(za,f)||(za=f,f=vc(rd,"onSelect"),0<f.length&&(r=new as("onSelect","select",null,r,a),o.push({event:r,listeners:f}),r.target=ps)))}function vr(o,r){var a={};return a[o.toLowerCase()]=r.toLowerCase(),a["Webkit"+o]="webkit"+r,a["Moz"+o]="moz"+r,a}var gs={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionrun:vr("Transition","TransitionRun"),transitionstart:vr("Transition","TransitionStart"),transitioncancel:vr("Transition","TransitionCancel"),transitionend:vr("Transition","TransitionEnd")},ad={},tg={};zn&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Tr(o){if(ad[o])return ad[o];if(!gs[o])return o;var r=gs[o],a;for(a in r)if(r.hasOwnProperty(a)&&a in tg)return ad[o]=r[a];return o}var ng=Tr("animationend"),ig=Tr("animationiteration"),og=Tr("animationstart"),pA=Tr("transitionrun"),gA=Tr("transitionstart"),yA=Tr("transitioncancel"),rg=Tr("transitionend"),sg=new Map,ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ld.push("scrollEnd");function Yn(o,r){sg.set(o,r),Gn(r,[o])}var ag=new WeakMap;function Nn(o,r){if(typeof o=="object"&&o!==null){var a=ag.get(o);return a!==void 0?a:(r={value:o,source:r,stack:os(r)},ag.set(o,r),r)}return{value:o,source:r,stack:os(r)}}var bn=[],ys=0,ud=0;function Vu(){for(var o=ys,r=ud=ys=0;r<o;){var a=bn[r];bn[r++]=null;var f=bn[r];bn[r++]=null;var y=bn[r];bn[r++]=null;var _=bn[r];if(bn[r++]=null,f!==null&&y!==null){var A=f.pending;A===null?y.next=y:(y.next=A.next,A.next=y),f.pending=y}_!==0&&lg(a,y,_)}}function Uu(o,r,a,f){bn[ys++]=o,bn[ys++]=r,bn[ys++]=a,bn[ys++]=f,ud|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function cd(o,r,a,f){return Uu(o,r,a,f),Lu(o)}function _s(o,r){return Uu(o,null,null,r),Lu(o)}function lg(o,r,a){o.lanes|=a;var f=o.alternate;f!==null&&(f.lanes|=a);for(var y=!1,_=o.return;_!==null;)_.childLanes|=a,f=_.alternate,f!==null&&(f.childLanes|=a),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(y=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,y&&r!==null&&(y=31-jt(a),o=_.hiddenUpdates,f=o[y],f===null?o[y]=[r]:f.push(r),r.lane=a|536870912),_):null}function Lu(o){if(50<pl)throw pl=0,gh=null,Error(i(185));for(var r=o.return;r!==null;)o=r,r=o.return;return o.tag===3?o.stateNode:null}var vs={};function _A(o,r,a,f){this.tag=o,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(o,r,a,f){return new _A(o,r,a,f)}function fd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Fi(o,r){var a=o.alternate;return a===null?(a=vn(o.tag,r,o.key,o.mode),a.elementType=o.elementType,a.type=o.type,a.stateNode=o.stateNode,a.alternate=o,o.alternate=a):(a.pendingProps=r,a.type=o.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=o.flags&65011712,a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=o.sibling,a.index=o.index,a.ref=o.ref,a.refCleanup=o.refCleanup,a}function ug(o,r){o.flags&=65011714;var a=o.alternate;return a===null?(o.childLanes=0,o.lanes=r,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o}function Ou(o,r,a,f,y,_){var A=0;if(f=o,typeof o=="function")fd(o)&&(A=1);else if(typeof o=="string")A=TI(o,a,_e.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case M:return o=vn(31,a,r,y),o.elementType=M,o.lanes=_,o;case V:return Er(a.children,y,_,r);case q:A=8,y|=24;break;case z:return o=vn(12,a,r,y|2),o.elementType=z,o.lanes=_,o;case J:return o=vn(13,a,r,y),o.elementType=J,o.lanes=_,o;case se:return o=vn(19,a,r,y),o.elementType=se,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case j:case W:A=10;break e;case H:A=9;break e;case X:A=11;break e;case D:A=14;break e;case w:A=16,f=null;break e}A=29,a=Error(i(130,o===null?"null":typeof o,"")),f=null}return r=vn(A,a,r,y),r.elementType=o,r.type=f,r.lanes=_,r}function Er(o,r,a,f){return o=vn(7,o,f,r),o.lanes=a,o}function dd(o,r,a){return o=vn(6,o,null,r),o.lanes=a,o}function hd(o,r,a){return r=vn(4,o.children!==null?o.children:[],o.key,r),r.lanes=a,r.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},r}var Ts=[],Es=0,Fu=null,qu=0,Pn=[],kn=0,Sr=null,qi=1,Bi="";function Cr(o,r){Ts[Es++]=qu,Ts[Es++]=Fu,Fu=o,qu=r}function cg(o,r,a){Pn[kn++]=qi,Pn[kn++]=Bi,Pn[kn++]=Sr,Sr=o;var f=qi;o=Bi;var y=32-jt(f)-1;f&=~(1<<y),a+=1;var _=32-jt(r)+y;if(30<_){var A=y-y%5;_=(f&(1<<A)-1).toString(32),f>>=A,y-=A,qi=1<<32-jt(r)+y|a<<y|f,Bi=_+o}else qi=1<<_|a<<y|f,Bi=o}function md(o){o.return!==null&&(Cr(o,1),cg(o,1,0))}function pd(o){for(;o===Fu;)Fu=Ts[--Es],Ts[Es]=null,qu=Ts[--Es],Ts[Es]=null;for(;o===Sr;)Sr=Pn[--kn],Pn[kn]=null,Bi=Pn[--kn],Pn[kn]=null,qi=Pn[--kn],Pn[kn]=null}var fn=null,yt=null,$e=!1,Ar=null,fi=!1,gd=Error(i(519));function Ir(o){var r=Error(i(418,""));throw Ja(Nn(r,o)),gd}function fg(o){var r=o.stateNode,a=o.type,f=o.memoizedProps;switch(r[Dt]=o,r[At]=f,a){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(a=0;a<yl.length;a++)Ve(yl[a],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Ve("invalid",r),ur(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),rs(r);break;case"select":Ve("invalid",r);break;case"textarea":Ve("invalid",r),cr(r,f.value,f.defaultValue,f.children),rs(r)}a=f.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||f.suppressHydrationWarning===!0||M_(r.textContent,a)?(f.popover!=null&&(Ve("beforetoggle",r),Ve("toggle",r)),f.onScroll!=null&&Ve("scroll",r),f.onScrollEnd!=null&&Ve("scrollend",r),f.onClick!=null&&(r.onclick=Tc),r=!0):r=!1,r||Ir(o)}function dg(o){for(fn=o.return;fn;)switch(fn.tag){case 5:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:fn=fn.return}}function Ya(o){if(o!==fn)return!1;if(!$e)return dg(o),$e=!0,!1;var r=o.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=o.type,a=!(a!=="form"&&a!=="button")||bh(o.type,o.memoizedProps)),a=!a),a&&yt&&Ir(o),dg(o),r===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,r=0;o;){if(o.nodeType===8)if(a=o.data,a==="/$"){if(r===0){yt=Jn(o.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;o=o.nextSibling}yt=null}}else r===27?(r=yt,No(o.type)?(o=Uh,Uh=null,yt=o):yt=r):yt=fn?Jn(o.stateNode.nextSibling):null;return!0}function $a(){yt=fn=null,$e=!1}function hg(){var o=Ar;return o!==null&&(mn===null?mn=o:mn.push.apply(mn,o),Ar=null),o}function Ja(o){Ar===null?Ar=[o]:Ar.push(o)}var yd=re(null),Rr=null,Hi=null;function go(o,r,a){le(yd,r._currentValue),r._currentValue=a}function Gi(o){o._currentValue=yd.current,fe(yd)}function _d(o,r,a){for(;o!==null;){var f=o.alternate;if((o.childLanes&r)!==r?(o.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),o===a)break;o=o.return}}function vd(o,r,a,f){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var _=y.dependencies;if(_!==null){var A=y.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=y;for(var N=0;N<r.length;N++)if(I.context===r[N]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),_d(_.return,a,o),f||(A=null);break e}_=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),_d(A,a,o),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===o){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Ka(o,r,a,f){o=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=y.type;_n(y.pendingProps.value,A.value)||(o!==null?o.push(I):o=[I])}}else if(y===Ct.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Cl):o=[Cl])}y=y.return}o!==null&&vd(r,o,a,f),r.flags|=262144}function Bu(o){for(o=o.firstContext;o!==null;){if(!_n(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function wr(o){Rr=o,Hi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function en(o){return mg(Rr,o)}function Hu(o,r){return Rr===null&&wr(o),mg(o,r)}function mg(o,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Hi===null){if(o===null)throw Error(i(308));Hi=r,o.dependencies={lanes:0,firstContext:r},o.flags|=524288}else Hi=Hi.next=r;return a}var vA=typeof AbortController<"u"?AbortController:function(){var o=[],r=this.signal={aborted:!1,addEventListener:function(a,f){o.push(f)}};this.abort=function(){r.aborted=!0,o.forEach(function(a){return a()})}},TA=n.unstable_scheduleCallback,EA=n.unstable_NormalPriority,Pt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Td(){return{controller:new vA,data:new Map,refCount:0}}function Qa(o){o.refCount--,o.refCount===0&&TA(EA,function(){o.controller.abort()})}var Xa=null,Ed=0,Ss=0,Cs=null;function SA(o,r){if(Xa===null){var a=Xa=[];Ed=0,Ss=Ch(),Cs={status:"pending",value:void 0,then:function(f){a.push(f)}}}return Ed++,r.then(pg,pg),r}function pg(){if(--Ed===0&&Xa!==null){Cs!==null&&(Cs.status="fulfilled");var o=Xa;Xa=null,Ss=0,Cs=null;for(var r=0;r<o.length;r++)(0,o[r])()}}function CA(o,r){var a=[],f={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return o.then(function(){f.status="fulfilled",f.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(f.status="rejected",f.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),f}var gg=ee.S;ee.S=function(o,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&SA(o,r),gg!==null&&gg(o,r)};var Mr=re(null);function Sd(){var o=Mr.current;return o!==null?o:rt.pooledCache}function Gu(o,r){r===null?le(Mr,Mr.current):le(Mr,r.pool)}function yg(){var o=Sd();return o===null?null:{parent:Pt._currentValue,pool:o}}var Wa=Error(i(460)),_g=Error(i(474)),zu=Error(i(542)),Cd={then:function(){}};function vg(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Yu(){}function Tg(o,r,a){switch(a=o[a],a===void 0?o.push(r):a!==r&&(r.then(Yu,Yu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw o=r.reason,Sg(o),o;default:if(typeof r.status=="string")r.then(Yu,Yu);else{if(o=rt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=r,o.status="pending",o.then(function(f){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=f}},function(f){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw o=r.reason,Sg(o),o}throw Za=r,Wa}}var Za=null;function Eg(){if(Za===null)throw Error(i(459));var o=Za;return Za=null,o}function Sg(o){if(o===Wa||o===zu)throw Error(i(483))}var yo=!1;function Ad(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(o,r){o=o.updateQueue,r.updateQueue===o&&(r.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function _o(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function vo(o,r,a){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(We&2)!==0){var y=f.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),f.pending=r,r=Lu(o),lg(o,null,a),r}return Uu(o,f,r,a),Lu(o)}function ja(o,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var f=r.lanes;f&=o.pendingLanes,a|=f,r.lanes=a,wa(o,a)}}function Rd(o,r){var a=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,a===f)){var y=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?y=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?y=_=r:_=_.next=r}else y=_=r;a={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:f.shared,callbacks:f.callbacks},o.updateQueue=a;return}o=a.lastBaseUpdate,o===null?a.firstBaseUpdate=r:o.next=r,a.lastBaseUpdate=r}var wd=!1;function el(){if(wd){var o=Cs;if(o!==null)throw o}}function tl(o,r,a,f){wd=!1;var y=o.updateQueue;yo=!1;var _=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var N=I,$=N.next;N.next=null,A===null?_=$:A.next=$,A=N;var te=o.alternate;te!==null&&(te=te.updateQueue,I=te.lastBaseUpdate,I!==A&&(I===null?te.firstBaseUpdate=$:I.next=$,te.lastBaseUpdate=N))}if(_!==null){var ie=y.baseState;A=0,te=$=N=null,I=_;do{var K=I.lane&-536870913,Q=K!==I.lane;if(Q?(He&K)===K:(f&K)===K){K!==0&&K===Ss&&(wd=!0),te!==null&&(te=te.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ae=o,Te=I;K=r;var it=a;switch(Te.tag){case 1:if(Ae=Te.payload,typeof Ae=="function"){ie=Ae.call(it,ie,K);break e}ie=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Te.payload,K=typeof Ae=="function"?Ae.call(it,ie,K):Ae,K==null)break e;ie=v({},ie,K);break e;case 2:yo=!0}}K=I.callback,K!==null&&(o.flags|=64,Q&&(o.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:I.tag,payload:I.payload,callback:I.callback,next:null},te===null?($=te=Q,N=ie):te=te.next=Q,A|=K;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Q=I,I=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);te===null&&(N=ie),y.baseState=N,y.firstBaseUpdate=$,y.lastBaseUpdate=te,_===null&&(y.shared.lanes=0),wo|=A,o.lanes=A,o.memoizedState=ie}}function Cg(o,r){if(typeof o!="function")throw Error(i(191,o));o.call(r)}function Ag(o,r){var a=o.callbacks;if(a!==null)for(o.callbacks=null,o=0;o<a.length;o++)Cg(a[o],r)}var As=re(null),$u=re(0);function Ig(o,r){o=Xi,le($u,o),le(As,r),Xi=o|r.baseLanes}function Md(){le($u,Xi),le(As,As.current)}function xd(){Xi=$u.current,fe(As),fe($u)}var To=0,be=null,tt=null,Rt=null,Ju=!1,Is=!1,xr=!1,Ku=0,nl=0,Rs=null,AA=0;function Tt(){throw Error(i(321))}function Dd(o,r){if(r===null)return!1;for(var a=0;a<r.length&&a<o.length;a++)if(!_n(o[a],r[a]))return!1;return!0}function Nd(o,r,a,f,y,_){return To=_,be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=o===null||o.memoizedState===null?ly:uy,xr=!1,_=a(f,y),xr=!1,Is&&(_=wg(r,a,f,y)),Rg(o),_}function Rg(o){ee.H=ec;var r=tt!==null&&tt.next!==null;if(To=0,Rt=tt=be=null,Ju=!1,nl=0,Rs=null,r)throw Error(i(300));o===null||Ft||(o=o.dependencies,o!==null&&Bu(o)&&(Ft=!0))}function wg(o,r,a,f){be=o;var y=0;do{if(Is&&(Rs=null),nl=0,Is=!1,25<=y)throw Error(i(301));if(y+=1,Rt=tt=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ee.H=NA,_=r(a,f)}while(Is);return _}function IA(){var o=ee.H,r=o.useState()[0];return r=typeof r.then=="function"?il(r):r,o=o.useState()[0],(tt!==null?tt.memoizedState:null)!==o&&(be.flags|=1024),r}function bd(){var o=Ku!==0;return Ku=0,o}function Pd(o,r,a){r.updateQueue=o.updateQueue,r.flags&=-2053,o.lanes&=~a}function kd(o){if(Ju){for(o=o.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Ju=!1}To=0,Rt=tt=be=null,Is=!1,nl=Ku=0,Rs=null}function dn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?be.memoizedState=Rt=o:Rt=Rt.next=o,Rt}function wt(){if(tt===null){var o=be.alternate;o=o!==null?o.memoizedState:null}else o=tt.next;var r=Rt===null?be.memoizedState:Rt.next;if(r!==null)Rt=r,tt=o;else{if(o===null)throw be.alternate===null?Error(i(467)):Error(i(310));tt=o,o={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Rt===null?be.memoizedState=Rt=o:Rt=Rt.next=o}return Rt}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function il(o){var r=nl;return nl+=1,Rs===null&&(Rs=[]),o=Tg(Rs,o,r),r=be,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?ly:uy),o}function Qu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return il(o);if(o.$$typeof===W)return en(o)}throw Error(i(438,String(o)))}function Ud(o){var r=null,a=be.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var f=be.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Vd(),be.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(o),f=0;f<o;f++)a[f]=P;return r.index++,a}function zi(o,r){return typeof r=="function"?r(o):r}function Xu(o){var r=wt();return Ld(r,tt,o)}function Ld(o,r,a){var f=o.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=a;var y=o.baseQueue,_=f.pending;if(_!==null){if(y!==null){var A=y.next;y.next=_.next,_.next=A}r.baseQueue=y=_,f.pending=null}if(_=o.baseState,y===null)o.memoizedState=_;else{r=y.next;var I=A=null,N=null,$=r,te=!1;do{var ie=$.lane&-536870913;if(ie!==$.lane?(He&ie)===ie:(To&ie)===ie){var K=$.revertLane;if(K===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ie===Ss&&(te=!0);else if((To&K)===K){$=$.next,K===Ss&&(te=!0);continue}else ie={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},N===null?(I=N=ie,A=_):N=N.next=ie,be.lanes|=K,wo|=K;ie=$.action,xr&&a(_,ie),_=$.hasEagerState?$.eagerState:a(_,ie)}else K={lane:ie,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},N===null?(I=N=K,A=_):N=N.next=K,be.lanes|=ie,wo|=ie;$=$.next}while($!==null&&$!==r);if(N===null?A=_:N.next=I,!_n(_,o.memoizedState)&&(Ft=!0,te&&(a=Cs,a!==null)))throw a;o.memoizedState=_,o.baseState=A,o.baseQueue=N,f.lastRenderedState=_}return y===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function Od(o){var r=wt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=o;var f=a.dispatch,y=a.pending,_=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do _=o(_,A.action),A=A.next;while(A!==y);_n(_,r.memoizedState)||(Ft=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),a.lastRenderedState=_}return[_,f]}function Mg(o,r,a){var f=be,y=wt(),_=$e;if(_){if(a===void 0)throw Error(i(407));a=a()}else a=r();var A=!_n((tt||y).memoizedState,a);A&&(y.memoizedState=a,Ft=!0),y=y.queue;var I=Ng.bind(null,f,y,o);if(ol(2048,8,I,[o]),y.getSnapshot!==r||A||Rt!==null&&Rt.memoizedState.tag&1){if(f.flags|=2048,ws(9,Wu(),Dg.bind(null,f,y,a,r),null),rt===null)throw Error(i(349));_||(To&124)!==0||xg(f,r,a)}return a}function xg(o,r,a){o.flags|=16384,o={getSnapshot:r,value:a},r=be.updateQueue,r===null?(r=Vd(),be.updateQueue=r,r.stores=[o]):(a=r.stores,a===null?r.stores=[o]:a.push(o))}function Dg(o,r,a,f){r.value=a,r.getSnapshot=f,bg(r)&&Pg(o)}function Ng(o,r,a){return a(function(){bg(r)&&Pg(o)})}function bg(o){var r=o.getSnapshot;o=o.value;try{var a=r();return!_n(o,a)}catch{return!0}}function Pg(o){var r=_s(o,2);r!==null&&An(r,o,2)}function Fd(o){var r=dn();if(typeof o=="function"){var a=o;if(o=a(),xr){gn(!0);try{a()}finally{gn(!1)}}}return r.memoizedState=r.baseState=o,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:o},r}function kg(o,r,a,f){return o.baseState=a,Ld(o,tt,typeof f=="function"?f:zi)}function RA(o,r,a,f,y){if(ju(o))throw Error(i(485));if(o=r.action,o!==null){var _={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};ee.T!==null?a(!0):_.isTransition=!1,f(_),a=r.pending,a===null?(_.next=r.pending=_,Vg(r,_)):(_.next=a.next,r.pending=a.next=_)}}function Vg(o,r){var a=r.action,f=r.payload,y=o.state;if(r.isTransition){var _=ee.T,A={};ee.T=A;try{var I=a(y,f),N=ee.S;N!==null&&N(A,I),Ug(o,r,I)}catch($){qd(o,r,$)}finally{ee.T=_}}else try{_=a(y,f),Ug(o,r,_)}catch($){qd(o,r,$)}}function Ug(o,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(f){Lg(o,r,f)},function(f){return qd(o,r,f)}):Lg(o,r,a)}function Lg(o,r,a){r.status="fulfilled",r.value=a,Og(r),o.state=a,r=o.pending,r!==null&&(a=r.next,a===r?o.pending=null:(a=a.next,r.next=a,Vg(o,a)))}function qd(o,r,a){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=a,Og(r),r=r.next;while(r!==f)}o.action=null}function Og(o){o=o.listeners;for(var r=0;r<o.length;r++)(0,o[r])()}function Fg(o,r){return r}function qg(o,r){if($e){var a=rt.formState;if(a!==null){e:{var f=be;if($e){if(yt){t:{for(var y=yt,_=fi;y.nodeType!==8;){if(!_){y=null;break t}if(y=Jn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){yt=Jn(y.nextSibling),f=y.data==="F!";break e}}Ir(f)}f=!1}f&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fg,lastRenderedState:r},a.queue=f,a=ry.bind(null,be,f),f.dispatch=a,f=Fd(!1),_=Yd.bind(null,be,!1,f.queue),f=dn(),y={state:r,dispatch:null,action:o,pending:null},f.queue=y,a=RA.bind(null,be,y,_,a),y.dispatch=a,f.memoizedState=o,[r,a,!1]}function Bg(o){var r=wt();return Hg(r,tt,o)}function Hg(o,r,a){if(r=Ld(o,r,Fg)[0],o=Xu(zi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=il(r)}catch(A){throw A===Wa?zu:A}else f=r;r=wt();var y=r.queue,_=y.dispatch;return a!==r.memoizedState&&(be.flags|=2048,ws(9,Wu(),wA.bind(null,y,a),null)),[f,_,o]}function wA(o,r){o.action=r}function Gg(o){var r=wt(),a=tt;if(a!==null)return Hg(r,a,o);wt(),r=r.memoizedState,a=wt();var f=a.queue.dispatch;return a.memoizedState=o,[r,f,!1]}function ws(o,r,a,f){return o={tag:o,create:a,deps:f,inst:r,next:null},r=be.updateQueue,r===null&&(r=Vd(),be.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=o.next=o:(f=a.next,a.next=o,o.next=f,r.lastEffect=o),o}function Wu(){return{destroy:void 0,resource:void 0}}function zg(){return wt().memoizedState}function Zu(o,r,a,f){var y=dn();f=f===void 0?null:f,be.flags|=o,y.memoizedState=ws(1|r,Wu(),a,f)}function ol(o,r,a,f){var y=wt();f=f===void 0?null:f;var _=y.memoizedState.inst;tt!==null&&f!==null&&Dd(f,tt.memoizedState.deps)?y.memoizedState=ws(r,_,a,f):(be.flags|=o,y.memoizedState=ws(1|r,_,a,f))}function Yg(o,r){Zu(8390656,8,o,r)}function $g(o,r){ol(2048,8,o,r)}function Jg(o,r){return ol(4,2,o,r)}function Kg(o,r){return ol(4,4,o,r)}function Qg(o,r){if(typeof r=="function"){o=o();var a=r(o);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return o=o(),r.current=o,function(){r.current=null}}function Xg(o,r,a){a=a!=null?a.concat([o]):null,ol(4,4,Qg.bind(null,r,o),a)}function Bd(){}function Wg(o,r){var a=wt();r=r===void 0?null:r;var f=a.memoizedState;return r!==null&&Dd(r,f[1])?f[0]:(a.memoizedState=[o,r],o)}function Zg(o,r){var a=wt();r=r===void 0?null:r;var f=a.memoizedState;if(r!==null&&Dd(r,f[1]))return f[0];if(f=o(),xr){gn(!0);try{o()}finally{gn(!1)}}return a.memoizedState=[f,r],f}function Hd(o,r,a){return a===void 0||(To&1073741824)!==0?o.memoizedState=r:(o.memoizedState=a,o=t_(),be.lanes|=o,wo|=o,a)}function jg(o,r,a,f){return _n(a,r)?a:As.current!==null?(o=Hd(o,a,f),_n(o,r)||(Ft=!0),o):(To&42)===0?(Ft=!0,o.memoizedState=a):(o=t_(),be.lanes|=o,wo|=o,r)}function ey(o,r,a,f,y){var _=ce.p;ce.p=_!==0&&8>_?_:8;var A=ee.T,I={};ee.T=I,Yd(o,!1,r,a);try{var N=y(),$=ee.S;if($!==null&&$(I,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var te=CA(N,f);rl(o,r,te,Cn(o))}else rl(o,r,f,Cn(o))}catch(ie){rl(o,r,{then:function(){},status:"rejected",reason:ie},Cn())}finally{ce.p=_,ee.T=A}}function MA(){}function Gd(o,r,a,f){if(o.tag!==5)throw Error(i(476));var y=ty(o).queue;ey(o,y,r,pe,a===null?MA:function(){return ny(o),a(f)})}function ty(o){var r=o.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:pe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},o.memoizedState=r,o=o.alternate,o!==null&&(o.memoizedState=r),r}function ny(o){var r=ty(o).next.queue;rl(o,r,{},Cn())}function zd(){return en(Cl)}function iy(){return wt().memoizedState}function oy(){return wt().memoizedState}function xA(o){for(var r=o.return;r!==null;){switch(r.tag){case 24:case 3:var a=Cn();o=_o(a);var f=vo(r,o,a);f!==null&&(An(f,r,a),ja(f,r,a)),r={cache:Td()},o.payload=r;return}r=r.return}}function DA(o,r,a){var f=Cn();a={lane:f,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ju(o)?sy(r,a):(a=cd(o,r,a,f),a!==null&&(An(a,o,f),ay(a,r,f)))}function ry(o,r,a){var f=Cn();rl(o,r,a,f)}function rl(o,r,a,f){var y={lane:f,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ju(o))sy(r,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var A=r.lastRenderedState,I=_(A,a);if(y.hasEagerState=!0,y.eagerState=I,_n(I,A))return Uu(o,r,y,0),rt===null&&Vu(),!1}catch{}finally{}if(a=cd(o,r,y,f),a!==null)return An(a,o,f),ay(a,r,f),!0}return!1}function Yd(o,r,a,f){if(f={lane:2,revertLane:Ch(),action:f,hasEagerState:!1,eagerState:null,next:null},ju(o)){if(r)throw Error(i(479))}else r=cd(o,a,f,2),r!==null&&An(r,o,2)}function ju(o){var r=o.alternate;return o===be||r!==null&&r===be}function sy(o,r){Is=Ju=!0;var a=o.pending;a===null?r.next=r:(r.next=a.next,a.next=r),o.pending=r}function ay(o,r,a){if((a&4194048)!==0){var f=r.lanes;f&=o.pendingLanes,a|=f,r.lanes=a,wa(o,a)}}var ec={readContext:en,use:Qu,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},ly={readContext:en,use:Qu,useCallback:function(o,r){return dn().memoizedState=[o,r===void 0?null:r],o},useContext:en,useEffect:Yg,useImperativeHandle:function(o,r,a){a=a!=null?a.concat([o]):null,Zu(4194308,4,Qg.bind(null,r,o),a)},useLayoutEffect:function(o,r){return Zu(4194308,4,o,r)},useInsertionEffect:function(o,r){Zu(4,2,o,r)},useMemo:function(o,r){var a=dn();r=r===void 0?null:r;var f=o();if(xr){gn(!0);try{o()}finally{gn(!1)}}return a.memoizedState=[f,r],f},useReducer:function(o,r,a){var f=dn();if(a!==void 0){var y=a(r);if(xr){gn(!0);try{a(r)}finally{gn(!1)}}}else y=r;return f.memoizedState=f.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},f.queue=o,o=o.dispatch=DA.bind(null,be,o),[f.memoizedState,o]},useRef:function(o){var r=dn();return o={current:o},r.memoizedState=o},useState:function(o){o=Fd(o);var r=o.queue,a=ry.bind(null,be,r);return r.dispatch=a,[o.memoizedState,a]},useDebugValue:Bd,useDeferredValue:function(o,r){var a=dn();return Hd(a,o,r)},useTransition:function(){var o=Fd(!1);return o=ey.bind(null,be,o.queue,!0,!1),dn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,r,a){var f=be,y=dn();if($e){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),rt===null)throw Error(i(349));(He&124)!==0||xg(f,r,a)}y.memoizedState=a;var _={value:a,getSnapshot:r};return y.queue=_,Yg(Ng.bind(null,f,_,o),[o]),f.flags|=2048,ws(9,Wu(),Dg.bind(null,f,_,a,r),null),a},useId:function(){var o=dn(),r=rt.identifierPrefix;if($e){var a=Bi,f=qi;a=(f&~(1<<32-jt(f)-1)).toString(32)+a,r="«"+r+"R"+a,a=Ku++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=AA++,r="«"+r+"r"+a.toString(32)+"»";return o.memoizedState=r},useHostTransitionStatus:zd,useFormState:qg,useActionState:qg,useOptimistic:function(o){var r=dn();r.memoizedState=r.baseState=o;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Yd.bind(null,be,!0,a),a.dispatch=r,[o,r]},useMemoCache:Ud,useCacheRefresh:function(){return dn().memoizedState=xA.bind(null,be)}},uy={readContext:en,use:Qu,useCallback:Wg,useContext:en,useEffect:$g,useImperativeHandle:Xg,useInsertionEffect:Jg,useLayoutEffect:Kg,useMemo:Zg,useReducer:Xu,useRef:zg,useState:function(){return Xu(zi)},useDebugValue:Bd,useDeferredValue:function(o,r){var a=wt();return jg(a,tt.memoizedState,o,r)},useTransition:function(){var o=Xu(zi)[0],r=wt().memoizedState;return[typeof o=="boolean"?o:il(o),r]},useSyncExternalStore:Mg,useId:iy,useHostTransitionStatus:zd,useFormState:Bg,useActionState:Bg,useOptimistic:function(o,r){var a=wt();return kg(a,tt,o,r)},useMemoCache:Ud,useCacheRefresh:oy},NA={readContext:en,use:Qu,useCallback:Wg,useContext:en,useEffect:$g,useImperativeHandle:Xg,useInsertionEffect:Jg,useLayoutEffect:Kg,useMemo:Zg,useReducer:Od,useRef:zg,useState:function(){return Od(zi)},useDebugValue:Bd,useDeferredValue:function(o,r){var a=wt();return tt===null?Hd(a,o,r):jg(a,tt.memoizedState,o,r)},useTransition:function(){var o=Od(zi)[0],r=wt().memoizedState;return[typeof o=="boolean"?o:il(o),r]},useSyncExternalStore:Mg,useId:iy,useHostTransitionStatus:zd,useFormState:Gg,useActionState:Gg,useOptimistic:function(o,r){var a=wt();return tt!==null?kg(a,tt,o,r):(a.baseState=o,[o,a.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:oy},Ms=null,sl=0;function tc(o){var r=sl;return sl+=1,Ms===null&&(Ms=[]),Tg(Ms,o,r)}function al(o,r){r=r.props.ref,o.ref=r!==void 0?r:null}function nc(o,r){throw r.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(r),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":o)))}function cy(o){var r=o._init;return r(o._payload)}function fy(o){function r(B,L){if(o){var Y=B.deletions;Y===null?(B.deletions=[L],B.flags|=16):Y.push(L)}}function a(B,L){if(!o)return null;for(;L!==null;)r(B,L),L=L.sibling;return null}function f(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function y(B,L){return B=Fi(B,L),B.index=0,B.sibling=null,B}function _(B,L,Y){return B.index=Y,o?(Y=B.alternate,Y!==null?(Y=Y.index,Y<L?(B.flags|=67108866,L):Y):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function A(B){return o&&B.alternate===null&&(B.flags|=67108866),B}function I(B,L,Y,ne){return L===null||L.tag!==6?(L=dd(Y,B.mode,ne),L.return=B,L):(L=y(L,Y),L.return=B,L)}function N(B,L,Y,ne){var he=Y.type;return he===V?te(B,L,Y.props.children,ne,Y.key):L!==null&&(L.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===w&&cy(he)===L.type)?(L=y(L,Y.props),al(L,Y),L.return=B,L):(L=Ou(Y.type,Y.key,Y.props,null,B.mode,ne),al(L,Y),L.return=B,L)}function $(B,L,Y,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==Y.containerInfo||L.stateNode.implementation!==Y.implementation?(L=hd(Y,B.mode,ne),L.return=B,L):(L=y(L,Y.children||[]),L.return=B,L)}function te(B,L,Y,ne,he){return L===null||L.tag!==7?(L=Er(Y,B.mode,ne,he),L.return=B,L):(L=y(L,Y),L.return=B,L)}function ie(B,L,Y){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=dd(""+L,B.mode,Y),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return Y=Ou(L.type,L.key,L.props,null,B.mode,Y),al(Y,L),Y.return=B,Y;case x:return L=hd(L,B.mode,Y),L.return=B,L;case w:var ne=L._init;return L=ne(L._payload),ie(B,L,Y)}if(Fe(L)||F(L))return L=Er(L,B.mode,Y,null),L.return=B,L;if(typeof L.then=="function")return ie(B,tc(L),Y);if(L.$$typeof===W)return ie(B,Hu(B,L),Y);nc(B,L)}return null}function K(B,L,Y,ne){var he=L!==null?L.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return he!==null?null:I(B,L,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return Y.key===he?N(B,L,Y,ne):null;case x:return Y.key===he?$(B,L,Y,ne):null;case w:return he=Y._init,Y=he(Y._payload),K(B,L,Y,ne)}if(Fe(Y)||F(Y))return he!==null?null:te(B,L,Y,ne,null);if(typeof Y.then=="function")return K(B,L,tc(Y),ne);if(Y.$$typeof===W)return K(B,L,Hu(B,Y),ne);nc(B,Y)}return null}function Q(B,L,Y,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(Y)||null,I(L,B,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:return B=B.get(ne.key===null?Y:ne.key)||null,N(L,B,ne,he);case x:return B=B.get(ne.key===null?Y:ne.key)||null,$(L,B,ne,he);case w:var Pe=ne._init;return ne=Pe(ne._payload),Q(B,L,Y,ne,he)}if(Fe(ne)||F(ne))return B=B.get(Y)||null,te(L,B,ne,he,null);if(typeof ne.then=="function")return Q(B,L,Y,tc(ne),he);if(ne.$$typeof===W)return Q(B,L,Y,Hu(L,ne),he);nc(L,ne)}return null}function Ae(B,L,Y,ne){for(var he=null,Pe=null,ge=L,Ee=L=0,Bt=null;ge!==null&&Ee<Y.length;Ee++){ge.index>Ee?(Bt=ge,ge=null):Bt=ge.sibling;var Ye=K(B,ge,Y[Ee],ne);if(Ye===null){ge===null&&(ge=Bt);break}o&&ge&&Ye.alternate===null&&r(B,ge),L=_(Ye,L,Ee),Pe===null?he=Ye:Pe.sibling=Ye,Pe=Ye,ge=Bt}if(Ee===Y.length)return a(B,ge),$e&&Cr(B,Ee),he;if(ge===null){for(;Ee<Y.length;Ee++)ge=ie(B,Y[Ee],ne),ge!==null&&(L=_(ge,L,Ee),Pe===null?he=ge:Pe.sibling=ge,Pe=ge);return $e&&Cr(B,Ee),he}for(ge=f(ge);Ee<Y.length;Ee++)Bt=Q(ge,B,Ee,Y[Ee],ne),Bt!==null&&(o&&Bt.alternate!==null&&ge.delete(Bt.key===null?Ee:Bt.key),L=_(Bt,L,Ee),Pe===null?he=Bt:Pe.sibling=Bt,Pe=Bt);return o&&ge.forEach(function(Uo){return r(B,Uo)}),$e&&Cr(B,Ee),he}function Te(B,L,Y,ne){if(Y==null)throw Error(i(151));for(var he=null,Pe=null,ge=L,Ee=L=0,Bt=null,Ye=Y.next();ge!==null&&!Ye.done;Ee++,Ye=Y.next()){ge.index>Ee?(Bt=ge,ge=null):Bt=ge.sibling;var Uo=K(B,ge,Ye.value,ne);if(Uo===null){ge===null&&(ge=Bt);break}o&&ge&&Uo.alternate===null&&r(B,ge),L=_(Uo,L,Ee),Pe===null?he=Uo:Pe.sibling=Uo,Pe=Uo,ge=Bt}if(Ye.done)return a(B,ge),$e&&Cr(B,Ee),he;if(ge===null){for(;!Ye.done;Ee++,Ye=Y.next())Ye=ie(B,Ye.value,ne),Ye!==null&&(L=_(Ye,L,Ee),Pe===null?he=Ye:Pe.sibling=Ye,Pe=Ye);return $e&&Cr(B,Ee),he}for(ge=f(ge);!Ye.done;Ee++,Ye=Y.next())Ye=Q(ge,B,Ee,Ye.value,ne),Ye!==null&&(o&&Ye.alternate!==null&&ge.delete(Ye.key===null?Ee:Ye.key),L=_(Ye,L,Ee),Pe===null?he=Ye:Pe.sibling=Ye,Pe=Ye);return o&&ge.forEach(function(bI){return r(B,bI)}),$e&&Cr(B,Ee),he}function it(B,L,Y,ne){if(typeof Y=="object"&&Y!==null&&Y.type===V&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:e:{for(var he=Y.key;L!==null;){if(L.key===he){if(he=Y.type,he===V){if(L.tag===7){a(B,L.sibling),ne=y(L,Y.props.children),ne.return=B,B=ne;break e}}else if(L.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===w&&cy(he)===L.type){a(B,L.sibling),ne=y(L,Y.props),al(ne,Y),ne.return=B,B=ne;break e}a(B,L);break}else r(B,L);L=L.sibling}Y.type===V?(ne=Er(Y.props.children,B.mode,ne,Y.key),ne.return=B,B=ne):(ne=Ou(Y.type,Y.key,Y.props,null,B.mode,ne),al(ne,Y),ne.return=B,B=ne)}return A(B);case x:e:{for(he=Y.key;L!==null;){if(L.key===he)if(L.tag===4&&L.stateNode.containerInfo===Y.containerInfo&&L.stateNode.implementation===Y.implementation){a(B,L.sibling),ne=y(L,Y.children||[]),ne.return=B,B=ne;break e}else{a(B,L);break}else r(B,L);L=L.sibling}ne=hd(Y,B.mode,ne),ne.return=B,B=ne}return A(B);case w:return he=Y._init,Y=he(Y._payload),it(B,L,Y,ne)}if(Fe(Y))return Ae(B,L,Y,ne);if(F(Y)){if(he=F(Y),typeof he!="function")throw Error(i(150));return Y=he.call(Y),Te(B,L,Y,ne)}if(typeof Y.then=="function")return it(B,L,tc(Y),ne);if(Y.$$typeof===W)return it(B,L,Hu(B,Y),ne);nc(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,L!==null&&L.tag===6?(a(B,L.sibling),ne=y(L,Y),ne.return=B,B=ne):(a(B,L),ne=dd(Y,B.mode,ne),ne.return=B,B=ne),A(B)):a(B,L)}return function(B,L,Y,ne){try{sl=0;var he=it(B,L,Y,ne);return Ms=null,he}catch(ge){if(ge===Wa||ge===zu)throw ge;var Pe=vn(29,ge,null,B.mode);return Pe.lanes=ne,Pe.return=B,Pe}finally{}}}var xs=fy(!0),dy=fy(!1),Vn=re(null),di=null;function Eo(o){var r=o.alternate;le(kt,kt.current&1),le(Vn,o),di===null&&(r===null||As.current!==null||r.memoizedState!==null)&&(di=o)}function hy(o){if(o.tag===22){if(le(kt,kt.current),le(Vn,o),di===null){var r=o.alternate;r!==null&&r.memoizedState!==null&&(di=o)}}else So()}function So(){le(kt,kt.current),le(Vn,Vn.current)}function Yi(o){fe(Vn),di===o&&(di=null),fe(kt)}var kt=re(0);function ic(o){for(var r=o;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Vh(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break;for(;r.sibling===null;){if(r.return===null||r.return===o)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $d(o,r,a,f){r=o.memoizedState,a=a(f,r),a=a==null?r:v({},r,a),o.memoizedState=a,o.lanes===0&&(o.updateQueue.baseState=a)}var Jd={enqueueSetState:function(o,r,a){o=o._reactInternals;var f=Cn(),y=_o(f);y.payload=r,a!=null&&(y.callback=a),r=vo(o,y,f),r!==null&&(An(r,o,f),ja(r,o,f))},enqueueReplaceState:function(o,r,a){o=o._reactInternals;var f=Cn(),y=_o(f);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=vo(o,y,f),r!==null&&(An(r,o,f),ja(r,o,f))},enqueueForceUpdate:function(o,r){o=o._reactInternals;var a=Cn(),f=_o(a);f.tag=2,r!=null&&(f.callback=r),r=vo(o,f,a),r!==null&&(An(r,o,a),ja(r,o,a))}};function my(o,r,a,f,y,_,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,_,A):r.prototype&&r.prototype.isPureReactComponent?!Ga(a,f)||!Ga(y,_):!0}function py(o,r,a,f){o=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,f),r.state!==o&&Jd.enqueueReplaceState(r,r.state,null)}function Dr(o,r){var a=r;if("ref"in r){a={};for(var f in r)f!=="ref"&&(a[f]=r[f])}if(o=o.defaultProps){a===r&&(a=v({},a));for(var y in o)a[y]===void 0&&(a[y]=o[y])}return a}var oc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function gy(o){oc(o)}function yy(o){console.error(o)}function _y(o){oc(o)}function rc(o,r){try{var a=o.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function vy(o,r,a){try{var f=o.onCaughtError;f(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Kd(o,r,a){return a=_o(a),a.tag=3,a.payload={element:null},a.callback=function(){rc(o,r)},a}function Ty(o){return o=_o(o),o.tag=3,o}function Ey(o,r,a,f){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var _=f.value;o.payload=function(){return y(_)},o.callback=function(){vy(r,a,f)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){vy(r,a,f),typeof y!="function"&&(Mo===null?Mo=new Set([this]):Mo.add(this));var I=f.stack;this.componentDidCatch(f.value,{componentStack:I!==null?I:""})})}function bA(o,r,a,f,y){if(a.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=a.alternate,r!==null&&Ka(r,a,y,!0),a=Vn.current,a!==null){switch(a.tag){case 13:return di===null?_h():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=y,f===Cd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([f]):r.add(f),Th(o,f,y)),!1;case 22:return a.flags|=65536,f===Cd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([f]):a.add(f)),Th(o,f,y)),!1}throw Error(i(435,a.tag))}return Th(o,f,y),_h(),!1}if($e)return r=Vn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,f!==gd&&(o=Error(i(422),{cause:f}),Ja(Nn(o,a)))):(f!==gd&&(r=Error(i(423),{cause:f}),Ja(Nn(r,a))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,f=Nn(f,a),y=Kd(o.stateNode,f,y),Rd(o,y),_t!==4&&(_t=2)),!1;var _=Error(i(520),{cause:f});if(_=Nn(_,a),ml===null?ml=[_]:ml.push(_),_t!==4&&(_t=2),r===null)return!0;f=Nn(f,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,o=y&-y,a.lanes|=o,o=Kd(a.stateNode,f,o),Rd(a,o),!1;case 1:if(r=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Mo===null||!Mo.has(_))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Ty(y),Ey(y,o,a,f),Rd(a,y),!1}a=a.return}while(a!==null);return!1}var Sy=Error(i(461)),Ft=!1;function $t(o,r,a,f){r.child=o===null?dy(r,null,a,f):xs(r,o.child,a,f)}function Cy(o,r,a,f,y){a=a.render;var _=r.ref;if("ref"in f){var A={};for(var I in f)I!=="ref"&&(A[I]=f[I])}else A=f;return wr(r),f=Nd(o,r,a,A,_,y),I=bd(),o!==null&&!Ft?(Pd(o,r,y),$i(o,r,y)):($e&&I&&md(r),r.flags|=1,$t(o,r,f,y),r.child)}function Ay(o,r,a,f,y){if(o===null){var _=a.type;return typeof _=="function"&&!fd(_)&&_.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=_,Iy(o,r,_,f,y)):(o=Ou(a.type,null,f,r,r.mode,y),o.ref=r.ref,o.return=r,r.child=o)}if(_=o.child,!nh(o,y)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Ga,a(A,f)&&o.ref===r.ref)return $i(o,r,y)}return r.flags|=1,o=Fi(_,f),o.ref=r.ref,o.return=r,r.child=o}function Iy(o,r,a,f,y){if(o!==null){var _=o.memoizedProps;if(Ga(_,f)&&o.ref===r.ref)if(Ft=!1,r.pendingProps=f=_,nh(o,y))(o.flags&131072)!==0&&(Ft=!0);else return r.lanes=o.lanes,$i(o,r,y)}return Qd(o,r,a,f,y)}function Ry(o,r,a){var f=r.pendingProps,y=f.children,_=o!==null?o.memoizedState:null;if(f.mode==="hidden"){if((r.flags&128)!==0){if(f=_!==null?_.baseLanes|a:a,o!==null){for(y=r.child=o.child,_=0;y!==null;)_=_|y.lanes|y.childLanes,y=y.sibling;r.childLanes=_&~f}else r.childLanes=0,r.child=null;return wy(o,r,f,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},o!==null&&Gu(r,_!==null?_.cachePool:null),_!==null?Ig(r,_):Md(),hy(r);else return r.lanes=r.childLanes=536870912,wy(o,r,_!==null?_.baseLanes|a:a,a)}else _!==null?(Gu(r,_.cachePool),Ig(r,_),So(),r.memoizedState=null):(o!==null&&Gu(r,null),Md(),So());return $t(o,r,y,a),r.child}function wy(o,r,a,f){var y=Sd();return y=y===null?null:{parent:Pt._currentValue,pool:y},r.memoizedState={baseLanes:a,cachePool:y},o!==null&&Gu(r,null),Md(),hy(r),o!==null&&Ka(o,r,f,!0),null}function sc(o,r){var a=r.ref;if(a===null)o!==null&&o.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(o===null||o.ref!==a)&&(r.flags|=4194816)}}function Qd(o,r,a,f,y){return wr(r),a=Nd(o,r,a,f,void 0,y),f=bd(),o!==null&&!Ft?(Pd(o,r,y),$i(o,r,y)):($e&&f&&md(r),r.flags|=1,$t(o,r,a,y),r.child)}function My(o,r,a,f,y,_){return wr(r),r.updateQueue=null,a=wg(r,f,a,y),Rg(o),f=bd(),o!==null&&!Ft?(Pd(o,r,_),$i(o,r,_)):($e&&f&&md(r),r.flags|=1,$t(o,r,a,_),r.child)}function xy(o,r,a,f,y){if(wr(r),r.stateNode===null){var _=vs,A=a.contextType;typeof A=="object"&&A!==null&&(_=en(A)),_=new a(f,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Jd,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=f,_.state=r.memoizedState,_.refs={},Ad(r),A=a.contextType,_.context=typeof A=="object"&&A!==null?en(A):vs,_.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&($d(r,a,A,f),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Jd.enqueueReplaceState(_,_.state,null),tl(r,f,_,y),el(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(o===null){_=r.stateNode;var I=r.memoizedProps,N=Dr(a,I);_.props=N;var $=_.context,te=a.contextType;A=vs,typeof te=="object"&&te!==null&&(A=en(te));var ie=a.getDerivedStateFromProps;te=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||$!==A)&&py(r,_,f,A),yo=!1;var K=r.memoizedState;_.state=K,tl(r,f,_,y),el(),$=r.memoizedState,I||K!==$||yo?(typeof ie=="function"&&($d(r,a,ie,f),$=r.memoizedState),(N=yo||my(r,a,N,f,K,$,A))?(te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=$),_.props=f,_.state=$,_.context=A,f=N):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{_=r.stateNode,Id(o,r),A=r.memoizedProps,te=Dr(a,A),_.props=te,ie=r.pendingProps,K=_.context,$=a.contextType,N=vs,typeof $=="object"&&$!==null&&(N=en($)),I=a.getDerivedStateFromProps,($=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ie||K!==N)&&py(r,_,f,N),yo=!1,K=r.memoizedState,_.state=K,tl(r,f,_,y),el();var Q=r.memoizedState;A!==ie||K!==Q||yo||o!==null&&o.dependencies!==null&&Bu(o.dependencies)?(typeof I=="function"&&($d(r,a,I,f),Q=r.memoizedState),(te=yo||my(r,a,te,f,K,Q,N)||o!==null&&o.dependencies!==null&&Bu(o.dependencies))?($||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,Q,N),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,Q,N)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===o.memoizedProps&&K===o.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&K===o.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=Q),_.props=f,_.state=Q,_.context=N,f=te):(typeof _.componentDidUpdate!="function"||A===o.memoizedProps&&K===o.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&K===o.memoizedState||(r.flags|=1024),f=!1)}return _=f,sc(o,r),f=(r.flags&128)!==0,_||f?(_=r.stateNode,a=f&&typeof a.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,o!==null&&f?(r.child=xs(r,o.child,null,y),r.child=xs(r,null,a,y)):$t(o,r,a,y),r.memoizedState=_.state,o=r.child):o=$i(o,r,y),o}function Dy(o,r,a,f){return $a(),r.flags|=256,$t(o,r,a,f),r.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wd(o){return{baseLanes:o,cachePool:yg()}}function Zd(o,r,a){return o=o!==null?o.childLanes&~a:0,r&&(o|=Un),o}function Ny(o,r,a){var f=r.pendingProps,y=!1,_=(r.flags&128)!==0,A;if((A=_)||(A=o!==null&&o.memoizedState===null?!1:(kt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,o===null){if($e){if(y?Eo(r):So(),$e){var I=yt,N;if(N=I){e:{for(N=I,I=fi;N.nodeType!==8;){if(!I){I=null;break e}if(N=Jn(N.nextSibling),N===null){I=null;break e}}I=N}I!==null?(r.memoizedState={dehydrated:I,treeContext:Sr!==null?{id:qi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},N=vn(18,null,null,0),N.stateNode=I,N.return=r,r.child=N,fn=r,yt=null,N=!0):N=!1}N||Ir(r)}if(I=r.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Vh(I)?r.lanes=32:r.lanes=536870912,null;Yi(r)}return I=f.children,f=f.fallback,y?(So(),y=r.mode,I=ac({mode:"hidden",children:I},y),f=Er(f,y,a,null),I.return=r,f.return=r,I.sibling=f,r.child=I,y=r.child,y.memoizedState=Wd(a),y.childLanes=Zd(o,A,a),r.memoizedState=Xd,f):(Eo(r),jd(r,I))}if(N=o.memoizedState,N!==null&&(I=N.dehydrated,I!==null)){if(_)r.flags&256?(Eo(r),r.flags&=-257,r=eh(o,r,a)):r.memoizedState!==null?(So(),r.child=o.child,r.flags|=128,r=null):(So(),y=f.fallback,I=r.mode,f=ac({mode:"visible",children:f.children},I),y=Er(y,I,a,null),y.flags|=2,f.return=r,y.return=r,f.sibling=y,r.child=f,xs(r,o.child,null,a),f=r.child,f.memoizedState=Wd(a),f.childLanes=Zd(o,A,a),r.memoizedState=Xd,r=y);else if(Eo(r),Vh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var $=A.dgst;A=$,f=Error(i(419)),f.stack="",f.digest=A,Ja({value:f,source:null,stack:null}),r=eh(o,r,a)}else if(Ft||Ka(o,r,a,!1),A=(a&o.childLanes)!==0,Ft||A){if(A=rt,A!==null&&(f=a&-a,f=(f&42)!==0?1:lo(f),f=(f&(A.suspendedLanes|a))!==0?0:f,f!==0&&f!==N.retryLane))throw N.retryLane=f,_s(o,f),An(A,o,f),Sy;I.data==="$?"||_h(),r=eh(o,r,a)}else I.data==="$?"?(r.flags|=192,r.child=o.child,r=null):(o=N.treeContext,yt=Jn(I.nextSibling),fn=r,$e=!0,Ar=null,fi=!1,o!==null&&(Pn[kn++]=qi,Pn[kn++]=Bi,Pn[kn++]=Sr,qi=o.id,Bi=o.overflow,Sr=r),r=jd(r,f.children),r.flags|=4096);return r}return y?(So(),y=f.fallback,I=r.mode,N=o.child,$=N.sibling,f=Fi(N,{mode:"hidden",children:f.children}),f.subtreeFlags=N.subtreeFlags&65011712,$!==null?y=Fi($,y):(y=Er(y,I,a,null),y.flags|=2),y.return=r,f.return=r,f.sibling=y,r.child=f,f=y,y=r.child,I=o.child.memoizedState,I===null?I=Wd(a):(N=I.cachePool,N!==null?($=Pt._currentValue,N=N.parent!==$?{parent:$,pool:$}:N):N=yg(),I={baseLanes:I.baseLanes|a,cachePool:N}),y.memoizedState=I,y.childLanes=Zd(o,A,a),r.memoizedState=Xd,f):(Eo(r),a=o.child,o=a.sibling,a=Fi(a,{mode:"visible",children:f.children}),a.return=r,a.sibling=null,o!==null&&(A=r.deletions,A===null?(r.deletions=[o],r.flags|=16):A.push(o)),r.child=a,r.memoizedState=null,a)}function jd(o,r){return r=ac({mode:"visible",children:r},o.mode),r.return=o,o.child=r}function ac(o,r){return o=vn(22,o,null,r),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function eh(o,r,a){return xs(r,o.child,null,a),o=jd(r,r.pendingProps.children),o.flags|=2,r.memoizedState=null,o}function by(o,r,a){o.lanes|=r;var f=o.alternate;f!==null&&(f.lanes|=r),_d(o.return,r,a)}function th(o,r,a,f,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:a,tailMode:y}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=a,_.tailMode=y)}function Py(o,r,a){var f=r.pendingProps,y=f.revealOrder,_=f.tail;if($t(o,r,f.children,a),f=kt.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=r.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&by(o,a,r);else if(o.tag===19)by(o,a,r);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}f&=1}switch(le(kt,f),y){case"forwards":for(a=r.child,y=null;a!==null;)o=a.alternate,o!==null&&ic(o)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),th(r,!1,y,a,_);break;case"backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(o=y.alternate,o!==null&&ic(o)===null){r.child=y;break}o=y.sibling,y.sibling=a,a=y,y=o}th(r,!0,a,null,_);break;case"together":th(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function $i(o,r,a){if(o!==null&&(r.dependencies=o.dependencies),wo|=r.lanes,(a&r.childLanes)===0)if(o!==null){if(Ka(o,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(o!==null&&r.child!==o.child)throw Error(i(153));if(r.child!==null){for(o=r.child,a=Fi(o,o.pendingProps),r.child=a,a.return=r;o.sibling!==null;)o=o.sibling,a=a.sibling=Fi(o,o.pendingProps),a.return=r;a.sibling=null}return r.child}function nh(o,r){return(o.lanes&r)!==0?!0:(o=o.dependencies,!!(o!==null&&Bu(o)))}function PA(o,r,a){switch(r.tag){case 3:je(r,r.stateNode.containerInfo),go(r,Pt,o.memoizedState.cache),$a();break;case 27:case 5:ft(r);break;case 4:je(r,r.stateNode.containerInfo);break;case 10:go(r,r.type,r.memoizedProps.value);break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(Eo(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Ny(o,r,a):(Eo(r),o=$i(o,r,a),o!==null?o.sibling:null);Eo(r);break;case 19:var y=(o.flags&128)!==0;if(f=(a&r.childLanes)!==0,f||(Ka(o,r,a,!1),f=(a&r.childLanes)!==0),y){if(f)return Py(o,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(kt,kt.current),f)break;return null;case 22:case 23:return r.lanes=0,Ry(o,r,a);case 24:go(r,Pt,o.memoizedState.cache)}return $i(o,r,a)}function ky(o,r,a){if(o!==null)if(o.memoizedProps!==r.pendingProps)Ft=!0;else{if(!nh(o,a)&&(r.flags&128)===0)return Ft=!1,PA(o,r,a);Ft=(o.flags&131072)!==0}else Ft=!1,$e&&(r.flags&1048576)!==0&&cg(r,qu,r.index);switch(r.lanes=0,r.tag){case 16:e:{o=r.pendingProps;var f=r.elementType,y=f._init;if(f=y(f._payload),r.type=f,typeof f=="function")fd(f)?(o=Dr(f,o),r.tag=1,r=xy(null,r,f,o,a)):(r.tag=0,r=Qd(null,r,f,o,a));else{if(f!=null){if(y=f.$$typeof,y===X){r.tag=11,r=Cy(null,r,f,o,a);break e}else if(y===D){r.tag=14,r=Ay(null,r,f,o,a);break e}}throw r=ct(f)||f,Error(i(306,r,""))}}return r;case 0:return Qd(o,r,r.type,r.pendingProps,a);case 1:return f=r.type,y=Dr(f,r.pendingProps),xy(o,r,f,y,a);case 3:e:{if(je(r,r.stateNode.containerInfo),o===null)throw Error(i(387));f=r.pendingProps;var _=r.memoizedState;y=_.element,Id(o,r),tl(r,f,null,a);var A=r.memoizedState;if(f=A.cache,go(r,Pt,f),f!==_.cache&&vd(r,[Pt],a,!0),el(),f=A.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=Dy(o,r,f,a);break e}else if(f!==y){y=Nn(Error(i(424)),r),Ja(y),r=Dy(o,r,f,a);break e}else{switch(o=r.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(yt=Jn(o.firstChild),fn=r,$e=!0,Ar=null,fi=!0,a=dy(r,null,f,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($a(),f===y){r=$i(o,r,a);break e}$t(o,r,f,a)}r=r.child}return r;case 26:return sc(o,r),o===null?(a=O_(r.type,null,r.pendingProps,null))?r.memoizedState=a:$e||(a=r.type,o=r.pendingProps,f=Ec(Ce.current).createElement(a),f[Dt]=r,f[At]=o,Kt(f,a,o),vt(f),r.stateNode=f):r.memoizedState=O_(r.type,o.memoizedProps,r.pendingProps,o.memoizedState),null;case 27:return ft(r),o===null&&$e&&(f=r.stateNode=V_(r.type,r.pendingProps,Ce.current),fn=r,fi=!0,y=yt,No(r.type)?(Uh=y,yt=Jn(f.firstChild)):yt=y),$t(o,r,r.pendingProps.children,a),sc(o,r),o===null&&(r.flags|=4194304),r.child;case 5:return o===null&&$e&&((y=f=yt)&&(f=aI(f,r.type,r.pendingProps,fi),f!==null?(r.stateNode=f,fn=r,yt=Jn(f.firstChild),fi=!1,y=!0):y=!1),y||Ir(r)),ft(r),y=r.type,_=r.pendingProps,A=o!==null?o.memoizedProps:null,f=_.children,bh(y,_)?f=null:A!==null&&bh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Nd(o,r,IA,null,null,a),Cl._currentValue=y),sc(o,r),$t(o,r,f,a),r.child;case 6:return o===null&&$e&&((o=a=yt)&&(a=lI(a,r.pendingProps,fi),a!==null?(r.stateNode=a,fn=r,yt=null,o=!0):o=!1),o||Ir(r)),null;case 13:return Ny(o,r,a);case 4:return je(r,r.stateNode.containerInfo),f=r.pendingProps,o===null?r.child=xs(r,null,f,a):$t(o,r,f,a),r.child;case 11:return Cy(o,r,r.type,r.pendingProps,a);case 7:return $t(o,r,r.pendingProps,a),r.child;case 8:return $t(o,r,r.pendingProps.children,a),r.child;case 12:return $t(o,r,r.pendingProps.children,a),r.child;case 10:return f=r.pendingProps,go(r,r.type,f.value),$t(o,r,f.children,a),r.child;case 9:return y=r.type._context,f=r.pendingProps.children,wr(r),y=en(y),f=f(y),r.flags|=1,$t(o,r,f,a),r.child;case 14:return Ay(o,r,r.type,r.pendingProps,a);case 15:return Iy(o,r,r.type,r.pendingProps,a);case 19:return Py(o,r,a);case 31:return f=r.pendingProps,a=r.mode,f={mode:f.mode,children:f.children},o===null?(a=ac(f,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Fi(o.child,f),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Ry(o,r,a);case 24:return wr(r),f=en(Pt),o===null?(y=Sd(),y===null&&(y=rt,_=Td(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=a),y=_),r.memoizedState={parent:f,cache:y},Ad(r),go(r,Pt,y)):((o.lanes&a)!==0&&(Id(o,r),tl(r,null,null,a),el()),y=o.memoizedState,_=r.memoizedState,y.parent!==f?(y={parent:f,cache:f},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),go(r,Pt,f)):(f=_.cache,go(r,Pt,f),f!==y.cache&&vd(r,[Pt],a,!0))),$t(o,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ji(o){o.flags|=4}function Vy(o,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!G_(r)){if(r=Vn.current,r!==null&&((He&4194048)===He?di!==null:(He&62914560)!==He&&(He&536870912)===0||r!==di))throw Za=Cd,_g;o.flags|=8192}}function lc(o,r){r!==null&&(o.flags|=4),o.flags&16384&&(r=o.tag!==22?Ia():536870912,o.lanes|=r,Ps|=r)}function ll(o,r){if(!$e)switch(o.tailMode){case"hidden":r=o.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?o.tail=null:a.sibling=null;break;case"collapsed":a=o.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?r||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function ht(o){var r=o.alternate!==null&&o.alternate.child===o.child,a=0,f=0;if(r)for(var y=o.child;y!==null;)a|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)a|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=f,o.childLanes=a,r}function kA(o,r,a){var f=r.pendingProps;switch(pd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(r),null;case 1:return ht(r),null;case 3:return a=r.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Gi(Pt),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(o===null||o.child===null)&&(Ya(r)?Ji(r):o===null||o.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,hg())),ht(r),null;case 26:return a=r.memoizedState,o===null?(Ji(r),a!==null?(ht(r),Vy(r,a)):(ht(r),r.flags&=-16777217)):a?a!==o.memoizedState?(Ji(r),ht(r),Vy(r,a)):(ht(r),r.flags&=-16777217):(o.memoizedProps!==f&&Ji(r),ht(r),r.flags&=-16777217),null;case 27:dt(r),a=Ce.current;var y=r.type;if(o!==null&&r.stateNode!=null)o.memoizedProps!==f&&Ji(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return ht(r),null}o=_e.current,Ya(r)?fg(r):(o=V_(y,f,a),r.stateNode=o,Ji(r))}return ht(r),null;case 5:if(dt(r),a=r.type,o!==null&&r.stateNode!=null)o.memoizedProps!==f&&Ji(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return ht(r),null}if(o=_e.current,Ya(r))fg(r);else{switch(y=Ec(Ce.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof f.is=="string"?y.createElement("select",{is:f.is}):y.createElement("select"),f.multiple?o.multiple=!0:f.size&&(o.size=f.size);break;default:o=typeof f.is=="string"?y.createElement(a,{is:f.is}):y.createElement(a)}}o[Dt]=r,o[At]=f;e:for(y=r.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}r.stateNode=o;e:switch(Kt(o,a,f),a){case"button":case"input":case"select":case"textarea":o=!!f.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ji(r)}}return ht(r),r.flags&=-16777217,null;case 6:if(o&&r.stateNode!=null)o.memoizedProps!==f&&Ji(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(i(166));if(o=Ce.current,Ya(r)){if(o=r.stateNode,a=r.memoizedProps,f=null,y=fn,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}o[Dt]=r,o=!!(o.nodeValue===a||f!==null&&f.suppressHydrationWarning===!0||M_(o.nodeValue,a)),o||Ir(r)}else o=Ec(o).createTextNode(f),o[Dt]=r,r.stateNode=o}return ht(r),null;case 13:if(f=r.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=Ya(r),f!==null&&f.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Dt]=r}else $a(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ht(r),y=!1}else y=hg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Yi(r),r):(Yi(r),null)}if(Yi(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=f!==null,o=o!==null&&o.memoizedState!==null,a){f=r.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool);var _=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==y&&(f.flags|=2048)}return a!==o&&a&&(r.child.flags|=8192),lc(r,r.updateQueue),ht(r),null;case 4:return Re(),o===null&&wh(r.stateNode.containerInfo),ht(r),null;case 10:return Gi(r.type),ht(r),null;case 19:if(fe(kt),y=r.memoizedState,y===null)return ht(r),null;if(f=(r.flags&128)!==0,_=y.rendering,_===null)if(f)ll(y,!1);else{if(_t!==0||o!==null&&(o.flags&128)!==0)for(o=r.child;o!==null;){if(_=ic(o),_!==null){for(r.flags|=128,ll(y,!1),o=_.updateQueue,r.updateQueue=o,lc(r,o),r.subtreeFlags=0,o=a,a=r.child;a!==null;)ug(a,o),a=a.sibling;return le(kt,kt.current&1|2),r.child}o=o.sibling}y.tail!==null&&In()>fc&&(r.flags|=128,f=!0,ll(y,!1),r.lanes=4194304)}else{if(!f)if(o=ic(_),o!==null){if(r.flags|=128,f=!0,o=o.updateQueue,r.updateQueue=o,lc(r,o),ll(y,!0),y.tail===null&&y.tailMode==="hidden"&&!_.alternate&&!$e)return ht(r),null}else 2*In()-y.renderingStartTime>fc&&a!==536870912&&(r.flags|=128,f=!0,ll(y,!1),r.lanes=4194304);y.isBackwards?(_.sibling=r.child,r.child=_):(o=y.last,o!==null?o.sibling=_:r.child=_,y.last=_)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=In(),r.sibling=null,o=kt.current,le(kt,f?o&1|2:o&1),r):(ht(r),null);case 22:case 23:return Yi(r),xd(),f=r.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(a&536870912)!==0&&(r.flags&128)===0&&(ht(r),r.subtreeFlags&6&&(r.flags|=8192)):ht(r),a=r.updateQueue,a!==null&&lc(r,a.retryQueue),a=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==a&&(r.flags|=2048),o!==null&&fe(Mr),null;case 24:return a=null,o!==null&&(a=o.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Gi(Pt),ht(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function VA(o,r){switch(pd(r),r.tag){case 1:return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 3:return Gi(Pt),Re(),o=r.flags,(o&65536)!==0&&(o&128)===0?(r.flags=o&-65537|128,r):null;case 26:case 27:case 5:return dt(r),null;case 13:if(Yi(r),o=r.memoizedState,o!==null&&o.dehydrated!==null){if(r.alternate===null)throw Error(i(340));$a()}return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 19:return fe(kt),null;case 4:return Re(),null;case 10:return Gi(r.type),null;case 22:case 23:return Yi(r),xd(),o!==null&&fe(Mr),o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 24:return Gi(Pt),null;case 25:return null;default:return null}}function Uy(o,r){switch(pd(r),r.tag){case 3:Gi(Pt),Re();break;case 26:case 27:case 5:dt(r);break;case 4:Re();break;case 13:Yi(r);break;case 19:fe(kt);break;case 10:Gi(r.type);break;case 22:case 23:Yi(r),xd(),o!==null&&fe(Mr);break;case 24:Gi(Pt)}}function ul(o,r){try{var a=r.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var y=f.next;a=y;do{if((a.tag&o)===o){f=void 0;var _=a.create,A=a.inst;f=_(),A.destroy=f}a=a.next}while(a!==y)}}catch(I){ot(r,r.return,I)}}function Co(o,r,a){try{var f=r.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var _=y.next;f=_;do{if((f.tag&o)===o){var A=f.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=r;var N=a,$=I;try{$()}catch(te){ot(y,N,te)}}}f=f.next}while(f!==_)}}catch(te){ot(r,r.return,te)}}function Ly(o){var r=o.updateQueue;if(r!==null){var a=o.stateNode;try{Ag(r,a)}catch(f){ot(o,o.return,f)}}}function Oy(o,r,a){a.props=Dr(o.type,o.memoizedProps),a.state=o.memoizedState;try{a.componentWillUnmount()}catch(f){ot(o,r,f)}}function cl(o,r){try{var a=o.ref;if(a!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof a=="function"?o.refCleanup=a(f):a.current=f}}catch(y){ot(o,r,y)}}function hi(o,r){var a=o.ref,f=o.refCleanup;if(a!==null)if(typeof f=="function")try{f()}catch(y){ot(o,r,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){ot(o,r,y)}else a.current=null}function Fy(o){var r=o.type,a=o.memoizedProps,f=o.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&f.focus();break e;case"img":a.src?f.src=a.src:a.srcSet&&(f.srcset=a.srcSet)}}catch(y){ot(o,o.return,y)}}function ih(o,r,a){try{var f=o.stateNode;nI(f,o.type,a,r),f[At]=r}catch(y){ot(o,o.return,y)}}function qy(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&No(o.type)||o.tag===4}function oh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||qy(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&No(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function rh(o,r,a){var f=o.tag;if(f===5||f===6)o=o.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(o,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(o),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Tc));else if(f!==4&&(f===27&&No(o.type)&&(a=o.stateNode,r=null),o=o.child,o!==null))for(rh(o,r,a),o=o.sibling;o!==null;)rh(o,r,a),o=o.sibling}function uc(o,r,a){var f=o.tag;if(f===5||f===6)o=o.stateNode,r?a.insertBefore(o,r):a.appendChild(o);else if(f!==4&&(f===27&&No(o.type)&&(a=o.stateNode),o=o.child,o!==null))for(uc(o,r,a),o=o.sibling;o!==null;)uc(o,r,a),o=o.sibling}function By(o){var r=o.stateNode,a=o.memoizedProps;try{for(var f=o.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Kt(r,f,a),r[Dt]=o,r[At]=a}catch(_){ot(o,o.return,_)}}var Ki=!1,Et=!1,sh=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,qt=null;function UA(o,r){if(o=o.containerInfo,Dh=wc,o=jp(o),od(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{a=(a=o.ownerDocument)&&a.defaultView||window;var f=a.getSelection&&a.getSelection();if(f&&f.rangeCount!==0){a=f.anchorNode;var y=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,N=-1,$=0,te=0,ie=o,K=null;t:for(;;){for(var Q;ie!==a||y!==0&&ie.nodeType!==3||(I=A+y),ie!==_||f!==0&&ie.nodeType!==3||(N=A+f),ie.nodeType===3&&(A+=ie.nodeValue.length),(Q=ie.firstChild)!==null;)K=ie,ie=Q;for(;;){if(ie===o)break t;if(K===a&&++$===y&&(I=A),K===_&&++te===f&&(N=A),(Q=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=Q}a=I===-1||N===-1?null:{start:I,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nh={focusedElem:o,selectionRange:a},wc=!1,qt=r;qt!==null;)if(r=qt,o=r.child,(r.subtreeFlags&1024)!==0&&o!==null)o.return=r,qt=o;else for(;qt!==null;){switch(r=qt,_=r.alternate,o=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,a=r,y=_.memoizedProps,_=_.memoizedState,f=a.stateNode;try{var Ae=Dr(a.type,y,a.elementType===a.type);o=f.getSnapshotBeforeUpdate(Ae,_),f.__reactInternalSnapshotBeforeUpdate=o}catch(Te){ot(a,a.return,Te)}}break;case 3:if((o&1024)!==0){if(o=r.stateNode.containerInfo,a=o.nodeType,a===9)kh(o);else if(a===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":kh(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=r.sibling,o!==null){o.return=r.return,qt=o;break}qt=r.return}}function Gy(o,r,a){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Ao(o,a),f&4&&ul(5,a);break;case 1:if(Ao(o,a),f&4)if(o=a.stateNode,r===null)try{o.componentDidMount()}catch(A){ot(a,a.return,A)}else{var y=Dr(a.type,r.memoizedProps);r=r.memoizedState;try{o.componentDidUpdate(y,r,o.__reactInternalSnapshotBeforeUpdate)}catch(A){ot(a,a.return,A)}}f&64&&Ly(a),f&512&&cl(a,a.return);break;case 3:if(Ao(o,a),f&64&&(o=a.updateQueue,o!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ag(o,r)}catch(A){ot(a,a.return,A)}}break;case 27:r===null&&f&4&&By(a);case 26:case 5:Ao(o,a),r===null&&f&4&&Fy(a),f&512&&cl(a,a.return);break;case 12:Ao(o,a);break;case 13:Ao(o,a),f&4&&$y(o,a),f&64&&(o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(a=YA.bind(null,a),uI(o,a))));break;case 22:if(f=a.memoizedState!==null||Ki,!f){r=r!==null&&r.memoizedState!==null||Et,y=Ki;var _=Et;Ki=f,(Et=r)&&!_?Io(o,a,(a.subtreeFlags&8772)!==0):Ao(o,a),Ki=y,Et=_}break;case 30:break;default:Ao(o,a)}}function zy(o){var r=o.alternate;r!==null&&(o.alternate=null,zy(r)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(r=o.stateNode,r!==null&&fo(r)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var ut=null,hn=!1;function Qi(o,r,a){for(a=a.child;a!==null;)Yy(o,r,a),a=a.sibling}function Yy(o,r,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(gt,a)}catch{}switch(a.tag){case 26:Et||hi(a,r),Qi(o,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Et||hi(a,r);var f=ut,y=hn;No(a.type)&&(ut=a.stateNode,hn=!1),Qi(o,r,a),vl(a.stateNode),ut=f,hn=y;break;case 5:Et||hi(a,r);case 6:if(f=ut,y=hn,ut=null,Qi(o,r,a),ut=f,hn=y,ut!==null)if(hn)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(a.stateNode)}catch(_){ot(a,r,_)}else try{ut.removeChild(a.stateNode)}catch(_){ot(a,r,_)}break;case 18:ut!==null&&(hn?(o=ut,P_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.stateNode),wl(o)):P_(ut,a.stateNode));break;case 4:f=ut,y=hn,ut=a.stateNode.containerInfo,hn=!0,Qi(o,r,a),ut=f,hn=y;break;case 0:case 11:case 14:case 15:Et||Co(2,a,r),Et||Co(4,a,r),Qi(o,r,a);break;case 1:Et||(hi(a,r),f=a.stateNode,typeof f.componentWillUnmount=="function"&&Oy(a,r,f)),Qi(o,r,a);break;case 21:Qi(o,r,a);break;case 22:Et=(f=Et)||a.memoizedState!==null,Qi(o,r,a),Et=f;break;default:Qi(o,r,a)}}function $y(o,r){if(r.memoizedState===null&&(o=r.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{wl(o)}catch(a){ot(r,r.return,a)}}function LA(o){switch(o.tag){case 13:case 19:var r=o.stateNode;return r===null&&(r=o.stateNode=new Hy),r;case 22:return o=o.stateNode,r=o._retryCache,r===null&&(r=o._retryCache=new Hy),r;default:throw Error(i(435,o.tag))}}function ah(o,r){var a=LA(o);r.forEach(function(f){var y=$A.bind(null,o,f);a.has(f)||(a.add(f),f.then(y,y))})}function Tn(o,r){var a=r.deletions;if(a!==null)for(var f=0;f<a.length;f++){var y=a[f],_=o,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(No(I.type)){ut=I.stateNode,hn=!1;break e}break;case 5:ut=I.stateNode,hn=!1;break e;case 3:case 4:ut=I.stateNode.containerInfo,hn=!0;break e}I=I.return}if(ut===null)throw Error(i(160));Yy(_,A,y),ut=null,hn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Jy(r,o),r=r.sibling}var $n=null;function Jy(o,r){var a=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Tn(r,o),En(o),f&4&&(Co(3,o,o.return),ul(3,o),Co(5,o,o.return));break;case 1:Tn(r,o),En(o),f&512&&(Et||a===null||hi(a,a.return)),f&64&&Ki&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(a=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=a===null?f:a.concat(f))));break;case 26:var y=$n;if(Tn(r,o),En(o),f&512&&(Et||a===null||hi(a,a.return)),f&4){var _=a!==null?a.memoizedState:null;if(f=o.memoizedState,a===null)if(f===null)if(o.stateNode===null){e:{f=o.type,a=o.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":_=y.getElementsByTagName("title")[0],(!_||_[rr]||_[Dt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(f),y.head.insertBefore(_,y.querySelector("head > title"))),Kt(_,f,a),_[Dt]=o,vt(_),f=_;break e;case"link":var A=B_("link","href",y).get(f+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=y.createElement(f),Kt(_,f,a),y.head.appendChild(_);break;case"meta":if(A=B_("meta","content",y).get(f+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=y.createElement(f),Kt(_,f,a),y.head.appendChild(_);break;default:throw Error(i(468,f))}_[Dt]=o,vt(_),f=_}o.stateNode=f}else H_(y,o.type,o.stateNode);else o.stateNode=q_(y,f,o.memoizedProps);else _!==f?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,f===null?H_(y,o.type,o.stateNode):q_(y,f,o.memoizedProps)):f===null&&o.stateNode!==null&&ih(o,o.memoizedProps,a.memoizedProps)}break;case 27:Tn(r,o),En(o),f&512&&(Et||a===null||hi(a,a.return)),a!==null&&f&4&&ih(o,o.memoizedProps,a.memoizedProps);break;case 5:if(Tn(r,o),En(o),f&512&&(Et||a===null||hi(a,a.return)),o.flags&32){y=o.stateNode;try{wn(y,"")}catch(Q){ot(o,o.return,Q)}}f&4&&o.stateNode!=null&&(y=o.memoizedProps,ih(o,y,a!==null?a.memoizedProps:y)),f&1024&&(sh=!0);break;case 6:if(Tn(r,o),En(o),f&4){if(o.stateNode===null)throw Error(i(162));f=o.memoizedProps,a=o.stateNode;try{a.nodeValue=f}catch(Q){ot(o,o.return,Q)}}break;case 3:if(Ac=null,y=$n,$n=Sc(r.containerInfo),Tn(r,o),$n=y,En(o),f&4&&a!==null&&a.memoizedState.isDehydrated)try{wl(r.containerInfo)}catch(Q){ot(o,o.return,Q)}sh&&(sh=!1,Ky(o));break;case 4:f=$n,$n=Sc(o.stateNode.containerInfo),Tn(r,o),En(o),$n=f;break;case 12:Tn(r,o),En(o);break;case 13:Tn(r,o),En(o),o.child.flags&8192&&o.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hh=In()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,ah(o,f)));break;case 22:y=o.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,$=Ki,te=Et;if(Ki=$||y,Et=te||N,Tn(r,o),Et=te,Ki=$,En(o),f&8192)e:for(r=o.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||N||Ki||Et||Nr(o)),a=null,r=o;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(_=N.stateNode,y)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=N.stateNode;var ie=N.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){ot(N,N.return,Q)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=y?"":N.memoizedProps}catch(Q){ot(N,N.return,Q)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===o)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=o.updateQueue,f!==null&&(a=f.retryQueue,a!==null&&(f.retryQueue=null,ah(o,a))));break;case 19:Tn(r,o),En(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,ah(o,f)));break;case 30:break;case 21:break;default:Tn(r,o),En(o)}}function En(o){var r=o.flags;if(r&2){try{for(var a,f=o.return;f!==null;){if(qy(f)){a=f;break}f=f.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var y=a.stateNode,_=oh(o);uc(o,_,y);break;case 5:var A=a.stateNode;a.flags&32&&(wn(A,""),a.flags&=-33);var I=oh(o);uc(o,I,A);break;case 3:case 4:var N=a.stateNode.containerInfo,$=oh(o);rh(o,$,N);break;default:throw Error(i(161))}}catch(te){ot(o,o.return,te)}o.flags&=-3}r&4096&&(o.flags&=-4097)}function Ky(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var r=o;Ky(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),o=o.sibling}}function Ao(o,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Gy(o,r.alternate,r),r=r.sibling}function Nr(o){for(o=o.child;o!==null;){var r=o;switch(r.tag){case 0:case 11:case 14:case 15:Co(4,r,r.return),Nr(r);break;case 1:hi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Oy(r,r.return,a),Nr(r);break;case 27:vl(r.stateNode);case 26:case 5:hi(r,r.return),Nr(r);break;case 22:r.memoizedState===null&&Nr(r);break;case 30:Nr(r);break;default:Nr(r)}o=o.sibling}}function Io(o,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,y=o,_=r,A=_.flags;switch(_.tag){case 0:case 11:case 15:Io(y,_,a),ul(4,_);break;case 1:if(Io(y,_,a),f=_,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){ot(f,f.return,$)}if(f=_,y=f.updateQueue,y!==null){var I=f.stateNode;try{var N=y.shared.hiddenCallbacks;if(N!==null)for(y.shared.hiddenCallbacks=null,y=0;y<N.length;y++)Cg(N[y],I)}catch($){ot(f,f.return,$)}}a&&A&64&&Ly(_),cl(_,_.return);break;case 27:By(_);case 26:case 5:Io(y,_,a),a&&f===null&&A&4&&Fy(_),cl(_,_.return);break;case 12:Io(y,_,a);break;case 13:Io(y,_,a),a&&A&4&&$y(y,_);break;case 22:_.memoizedState===null&&Io(y,_,a),cl(_,_.return);break;case 30:break;default:Io(y,_,a)}r=r.sibling}}function lh(o,r){var a=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(o!=null&&o.refCount++,a!=null&&Qa(a))}function uh(o,r){o=null,r.alternate!==null&&(o=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==o&&(r.refCount++,o!=null&&Qa(o))}function mi(o,r,a,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Qy(o,r,a,f),r=r.sibling}function Qy(o,r,a,f){var y=r.flags;switch(r.tag){case 0:case 11:case 15:mi(o,r,a,f),y&2048&&ul(9,r);break;case 1:mi(o,r,a,f);break;case 3:mi(o,r,a,f),y&2048&&(o=null,r.alternate!==null&&(o=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==o&&(r.refCount++,o!=null&&Qa(o)));break;case 12:if(y&2048){mi(o,r,a,f),o=r.stateNode;try{var _=r.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,r.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(N){ot(r,r.return,N)}}else mi(o,r,a,f);break;case 13:mi(o,r,a,f);break;case 23:break;case 22:_=r.stateNode,A=r.alternate,r.memoizedState!==null?_._visibility&2?mi(o,r,a,f):fl(o,r):_._visibility&2?mi(o,r,a,f):(_._visibility|=2,Ds(o,r,a,f,(r.subtreeFlags&10256)!==0)),y&2048&&lh(A,r);break;case 24:mi(o,r,a,f),y&2048&&uh(r.alternate,r);break;default:mi(o,r,a,f)}}function Ds(o,r,a,f,y){for(y=y&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var _=o,A=r,I=a,N=f,$=A.flags;switch(A.tag){case 0:case 11:case 15:Ds(_,A,I,N,y),ul(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?Ds(_,A,I,N,y):fl(_,A):(te._visibility|=2,Ds(_,A,I,N,y)),y&&$&2048&&lh(A.alternate,A);break;case 24:Ds(_,A,I,N,y),y&&$&2048&&uh(A.alternate,A);break;default:Ds(_,A,I,N,y)}r=r.sibling}}function fl(o,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=o,f=r,y=f.flags;switch(f.tag){case 22:fl(a,f),y&2048&&lh(f.alternate,f);break;case 24:fl(a,f),y&2048&&uh(f.alternate,f);break;default:fl(a,f)}r=r.sibling}}var dl=8192;function Ns(o){if(o.subtreeFlags&dl)for(o=o.child;o!==null;)Xy(o),o=o.sibling}function Xy(o){switch(o.tag){case 26:Ns(o),o.flags&dl&&o.memoizedState!==null&&SI($n,o.memoizedState,o.memoizedProps);break;case 5:Ns(o);break;case 3:case 4:var r=$n;$n=Sc(o.stateNode.containerInfo),Ns(o),$n=r;break;case 22:o.memoizedState===null&&(r=o.alternate,r!==null&&r.memoizedState!==null?(r=dl,dl=16777216,Ns(o),dl=r):Ns(o));break;default:Ns(o)}}function Wy(o){var r=o.alternate;if(r!==null&&(o=r.child,o!==null)){r.child=null;do r=o.sibling,o.sibling=null,o=r;while(o!==null)}}function hl(o){var r=o.deletions;if((o.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var f=r[a];qt=f,jy(f,o)}Wy(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Zy(o),o=o.sibling}function Zy(o){switch(o.tag){case 0:case 11:case 15:hl(o),o.flags&2048&&Co(9,o,o.return);break;case 3:hl(o);break;case 12:hl(o);break;case 22:var r=o.stateNode;o.memoizedState!==null&&r._visibility&2&&(o.return===null||o.return.tag!==13)?(r._visibility&=-3,cc(o)):hl(o);break;default:hl(o)}}function cc(o){var r=o.deletions;if((o.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var f=r[a];qt=f,jy(f,o)}Wy(o)}for(o=o.child;o!==null;){switch(r=o,r.tag){case 0:case 11:case 15:Co(8,r,r.return),cc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,cc(r));break;default:cc(r)}o=o.sibling}}function jy(o,r){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:Co(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var f=a.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Qa(a.memoizedState.cache)}if(f=a.child,f!==null)f.return=a,qt=f;else e:for(a=o;qt!==null;){f=qt;var y=f.sibling,_=f.return;if(zy(f),f===a){qt=null;break e}if(y!==null){y.return=_,qt=y;break e}qt=_}}}var OA={getCacheForType:function(o){var r=en(Pt),a=r.data.get(o);return a===void 0&&(a=o(),r.data.set(o,a)),a}},FA=typeof WeakMap=="function"?WeakMap:Map,We=0,rt=null,ke=null,He=0,Ze=0,Sn=null,Ro=!1,bs=!1,ch=!1,Xi=0,_t=0,wo=0,br=0,fh=0,Un=0,Ps=0,ml=null,mn=null,dh=!1,hh=0,fc=1/0,dc=null,Mo=null,Jt=0,xo=null,ks=null,Vs=0,mh=0,ph=null,e_=null,pl=0,gh=null;function Cn(){if((We&2)!==0&&He!==0)return He&-He;if(ee.T!==null){var o=Ss;return o!==0?o:Ch()}return uo()}function t_(){Un===0&&(Un=(He&536870912)===0||$e?Aa():536870912);var o=Vn.current;return o!==null&&(o.flags|=32),Un}function An(o,r,a){(o===rt&&(Ze===2||Ze===9)||o.cancelPendingCommit!==null)&&(Us(o,0),Do(o,He,Un,!1)),Mi(o,a),((We&2)===0||o!==rt)&&(o===rt&&((We&2)===0&&(br|=a),_t===4&&Do(o,He,Un,!1)),pi(o))}function n_(o,r,a){if((We&6)!==0)throw Error(i(327));var f=!a&&(r&124)===0&&(r&o.expiredLanes)===0||or(o,r),y=f?HA(o,r):vh(o,r,!0),_=f;do{if(y===0){bs&&!f&&Do(o,r,0,!1);break}else{if(a=o.current.alternate,_&&!qA(a)){y=vh(o,r,!1),_=!1;continue}if(y===2){if(_=r,o.errorRecoveryDisabledLanes&_)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var I=o;y=ml;var N=I.current.memoizedState.isDehydrated;if(N&&(Us(I,A).flags|=256),A=vh(I,A,!1),A!==2){if(ch&&!N){I.errorRecoveryDisabledLanes|=_,br|=_,y=4;break e}_=mn,mn=y,_!==null&&(mn===null?mn=_:mn.push.apply(mn,_))}y=A}if(_=!1,y!==2)continue}}if(y===1){Us(o,0),Do(o,r,0,!0);break}e:{switch(f=o,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Do(f,r,Un,!Ro);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=hh+300-In(),10<y)){if(Do(f,r,Un,!Ro),jr(f,0,!0)!==0)break e;f.timeoutHandle=N_(i_.bind(null,f,a,mn,dc,dh,r,Un,br,Ps,Ro,_,2,-0,0),y);break e}i_(f,a,mn,dc,dh,r,Un,br,Ps,Ro,_,0,-0,0)}}break}while(!0);pi(o)}function i_(o,r,a,f,y,_,A,I,N,$,te,ie,K,Q){if(o.timeoutHandle=-1,ie=r.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(Sl={stylesheets:null,count:0,unsuspend:EI},Xy(r),ie=CI(),ie!==null)){o.cancelPendingCommit=ie(c_.bind(null,o,r,_,a,f,y,A,I,N,te,1,K,Q)),Do(o,_,A,!$);return}c_(o,r,_,a,f,y,A,I,N)}function qA(o){for(var r=o;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var f=0;f<a.length;f++){var y=a[f],_=y.getSnapshot;y=y.value;try{if(!_n(_(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===o)break;for(;r.sibling===null;){if(r.return===null||r.return===o)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Do(o,r,a,f){r&=~fh,r&=~br,o.suspendedLanes|=r,o.pingedLanes&=~r,f&&(o.warmLanes|=r),f=o.expirationTimes;for(var y=r;0<y;){var _=31-jt(y),A=1<<_;f[_]=-1,y&=~A}a!==0&&ei(o,a,r)}function hc(){return(We&6)===0?(gl(0),!1):!0}function yh(){if(ke!==null){if(Ze===0)var o=ke.return;else o=ke,Hi=Rr=null,kd(o),Ms=null,sl=0,o=ke;for(;o!==null;)Uy(o.alternate,o),o=o.return;ke=null}}function Us(o,r){var a=o.timeoutHandle;a!==-1&&(o.timeoutHandle=-1,oI(a)),a=o.cancelPendingCommit,a!==null&&(o.cancelPendingCommit=null,a()),yh(),rt=o,ke=a=Fi(o.current,null),He=r,Ze=0,Sn=null,Ro=!1,bs=or(o,r),ch=!1,Ps=Un=fh=br=wo=_t=0,mn=ml=null,dh=!1,(r&8)!==0&&(r|=r&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=r;0<f;){var y=31-jt(f),_=1<<y;r|=o[y],f&=~_}return Xi=r,Vu(),a}function o_(o,r){be=null,ee.H=ec,r===Wa||r===zu?(r=Eg(),Ze=3):r===_g?(r=Eg(),Ze=4):Ze=r===Sy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Sn=r,ke===null&&(_t=1,rc(o,Nn(r,o.current)))}function r_(){var o=ee.H;return ee.H=ec,o===null?ec:o}function s_(){var o=ee.A;return ee.A=OA,o}function _h(){_t=4,Ro||(He&4194048)!==He&&Vn.current!==null||(bs=!0),(wo&134217727)===0&&(br&134217727)===0||rt===null||Do(rt,He,Un,!1)}function vh(o,r,a){var f=We;We|=2;var y=r_(),_=s_();(rt!==o||He!==r)&&(dc=null,Us(o,r)),r=!1;var A=_t;e:do try{if(Ze!==0&&ke!==null){var I=ke,N=Sn;switch(Ze){case 8:yh(),A=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(r=!0);var $=Ze;if(Ze=0,Sn=null,Ls(o,I,N,$),a&&bs){A=0;break e}break;default:$=Ze,Ze=0,Sn=null,Ls(o,I,N,$)}}BA(),A=_t;break}catch(te){o_(o,te)}while(!0);return r&&o.shellSuspendCounter++,Hi=Rr=null,We=f,ee.H=y,ee.A=_,ke===null&&(rt=null,He=0,Vu()),A}function BA(){for(;ke!==null;)a_(ke)}function HA(o,r){var a=We;We|=2;var f=r_(),y=s_();rt!==o||He!==r?(dc=null,fc=In()+500,Us(o,r)):bs=or(o,r);e:do try{if(Ze!==0&&ke!==null){r=ke;var _=Sn;t:switch(Ze){case 1:Ze=0,Sn=null,Ls(o,r,_,1);break;case 2:case 9:if(vg(_)){Ze=0,Sn=null,l_(r);break}r=function(){Ze!==2&&Ze!==9||rt!==o||(Ze=7),pi(o)},_.then(r,r);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:vg(_)?(Ze=0,Sn=null,l_(r)):(Ze=0,Sn=null,Ls(o,r,_,7));break;case 5:var A=null;switch(ke.tag){case 26:A=ke.memoizedState;case 5:case 27:var I=ke;if(!A||G_(A)){Ze=0,Sn=null;var N=I.sibling;if(N!==null)ke=N;else{var $=I.return;$!==null?(ke=$,mc($)):ke=null}break t}}Ze=0,Sn=null,Ls(o,r,_,5);break;case 6:Ze=0,Sn=null,Ls(o,r,_,6);break;case 8:yh(),_t=6;break e;default:throw Error(i(462))}}GA();break}catch(te){o_(o,te)}while(!0);return Hi=Rr=null,ee.H=f,ee.A=y,We=a,ke!==null?0:(rt=null,He=0,Vu(),_t)}function GA(){for(;ke!==null&&!ao();)a_(ke)}function a_(o){var r=ky(o.alternate,o,Xi);o.memoizedProps=o.pendingProps,r===null?mc(o):ke=r}function l_(o){var r=o,a=r.alternate;switch(r.tag){case 15:case 0:r=My(a,r,r.pendingProps,r.type,void 0,He);break;case 11:r=My(a,r,r.pendingProps,r.type.render,r.ref,He);break;case 5:kd(r);default:Uy(a,r),r=ke=ug(r,Xi),r=ky(a,r,Xi)}o.memoizedProps=o.pendingProps,r===null?mc(o):ke=r}function Ls(o,r,a,f){Hi=Rr=null,kd(r),Ms=null,sl=0;var y=r.return;try{if(bA(o,y,r,a,He)){_t=1,rc(o,Nn(a,o.current)),ke=null;return}}catch(_){if(y!==null)throw ke=y,_;_t=1,rc(o,Nn(a,o.current)),ke=null;return}r.flags&32768?($e||f===1?o=!0:bs||(He&536870912)!==0?o=!1:(Ro=o=!0,(f===2||f===9||f===3||f===6)&&(f=Vn.current,f!==null&&f.tag===13&&(f.flags|=16384))),u_(r,o)):mc(r)}function mc(o){var r=o;do{if((r.flags&32768)!==0){u_(r,Ro);return}o=r.return;var a=kA(r.alternate,r,Xi);if(a!==null){ke=a;return}if(r=r.sibling,r!==null){ke=r;return}ke=r=o}while(r!==null);_t===0&&(_t=5)}function u_(o,r){do{var a=VA(o.alternate,o);if(a!==null){a.flags&=32767,ke=a;return}if(a=o.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(o=o.sibling,o!==null)){ke=o;return}ke=o=a}while(o!==null);_t=6,ke=null}function c_(o,r,a,f,y,_,A,I,N){o.cancelPendingCommit=null;do pc();while(Jt!==0);if((We&6)!==0)throw Error(i(327));if(r!==null){if(r===o.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=ud,Ra(o,a,_,A,I,N),o===rt&&(ke=rt=null,He=0),ks=r,xo=o,Vs=a,mh=_,ph=y,e_=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,JA(er,function(){return p_(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=ee.T,ee.T=null,y=ce.p,ce.p=2,A=We,We|=4;try{UA(o,r,a)}finally{We=A,ce.p=y,ee.T=f}}Jt=1,f_(),d_(),h_()}}function f_(){if(Jt===1){Jt=0;var o=xo,r=ks,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=ee.T,ee.T=null;var f=ce.p;ce.p=2;var y=We;We|=4;try{Jy(r,o);var _=Nh,A=jp(o.containerInfo),I=_.focusedElem,N=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&Zp(I.ownerDocument.documentElement,I)){if(N!==null&&od(I)){var $=N.start,te=N.end;if(te===void 0&&(te=$),"selectionStart"in I)I.selectionStart=$,I.selectionEnd=Math.min(te,I.value.length);else{var ie=I.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Ae=I.textContent.length,Te=Math.min(N.start,Ae),it=N.end===void 0?Te:Math.min(N.end,Ae);!Q.extend&&Te>it&&(A=it,it=Te,Te=A);var B=Wp(I,Te),L=Wp(I,it);if(B&&L&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==L.node||Q.focusOffset!==L.offset)){var Y=ie.createRange();Y.setStart(B.node,B.offset),Q.removeAllRanges(),Te>it?(Q.addRange(Y),Q.extend(L.node,L.offset)):(Y.setEnd(L.node,L.offset),Q.addRange(Y))}}}}for(ie=[],Q=I;Q=Q.parentNode;)Q.nodeType===1&&ie.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var ne=ie[I];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}wc=!!Dh,Nh=Dh=null}finally{We=y,ce.p=f,ee.T=a}}o.current=r,Jt=2}}function d_(){if(Jt===2){Jt=0;var o=xo,r=ks,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=ee.T,ee.T=null;var f=ce.p;ce.p=2;var y=We;We|=4;try{Gy(o,r.alternate,r)}finally{We=y,ce.p=f,ee.T=a}}Jt=3}}function h_(){if(Jt===4||Jt===3){Jt=0,Ta();var o=xo,r=ks,a=Vs,f=e_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Jt=5:(Jt=0,ks=xo=null,m_(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(Mo=null),es(a),r=r.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(gt,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=ee.T,y=ce.p,ce.p=2,ee.T=null;try{for(var _=o.onRecoverableError,A=0;A<f.length;A++){var I=f[A];_(I.value,{componentStack:I.stack})}}finally{ee.T=r,ce.p=y}}(Vs&3)!==0&&pc(),pi(o),y=o.pendingLanes,(a&4194090)!==0&&(y&42)!==0?o===gh?pl++:(pl=0,gh=o):pl=0,gl(0)}}function m_(o,r){(o.pooledCacheLanes&=r)===0&&(r=o.pooledCache,r!=null&&(o.pooledCache=null,Qa(r)))}function pc(o){return f_(),d_(),h_(),p_()}function p_(){if(Jt!==5)return!1;var o=xo,r=mh;mh=0;var a=es(Vs),f=ee.T,y=ce.p;try{ce.p=32>a?32:a,ee.T=null,a=ph,ph=null;var _=xo,A=Vs;if(Jt=0,ks=xo=null,Vs=0,(We&6)!==0)throw Error(i(331));var I=We;if(We|=4,Zy(_.current),Qy(_,_.current,A,a),We=I,gl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(gt,_)}catch{}return!0}finally{ce.p=y,ee.T=f,m_(o,r)}}function g_(o,r,a){r=Nn(a,r),r=Kd(o.stateNode,r,2),o=vo(o,r,2),o!==null&&(Mi(o,2),pi(o))}function ot(o,r,a){if(o.tag===3)g_(o,o,a);else for(;r!==null;){if(r.tag===3){g_(r,o,a);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Mo===null||!Mo.has(f))){o=Nn(a,o),a=Ty(2),f=vo(r,a,2),f!==null&&(Ey(a,f,r,o),Mi(f,2),pi(f));break}}r=r.return}}function Th(o,r,a){var f=o.pingCache;if(f===null){f=o.pingCache=new FA;var y=new Set;f.set(r,y)}else y=f.get(r),y===void 0&&(y=new Set,f.set(r,y));y.has(a)||(ch=!0,y.add(a),o=zA.bind(null,o,r,a),r.then(o,o))}function zA(o,r,a){var f=o.pingCache;f!==null&&f.delete(r),o.pingedLanes|=o.suspendedLanes&a,o.warmLanes&=~a,rt===o&&(He&a)===a&&(_t===4||_t===3&&(He&62914560)===He&&300>In()-hh?(We&2)===0&&Us(o,0):fh|=a,Ps===He&&(Ps=0)),pi(o)}function y_(o,r){r===0&&(r=Ia()),o=_s(o,r),o!==null&&(Mi(o,r),pi(o))}function YA(o){var r=o.memoizedState,a=0;r!==null&&(a=r.retryLane),y_(o,a)}function $A(o,r){var a=0;switch(o.tag){case 13:var f=o.stateNode,y=o.memoizedState;y!==null&&(a=y.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(r),y_(o,a)}function JA(o,r){return Ri(o,r)}var gc=null,Os=null,Eh=!1,yc=!1,Sh=!1,Pr=0;function pi(o){o!==Os&&o.next===null&&(Os===null?gc=Os=o:Os=Os.next=o),yc=!0,Eh||(Eh=!0,QA())}function gl(o,r){if(!Sh&&yc){Sh=!0;do for(var a=!1,f=gc;f!==null;){if(o!==0){var y=f.pendingLanes;if(y===0)var _=0;else{var A=f.suspendedLanes,I=f.pingedLanes;_=(1<<31-jt(42|o)+1)-1,_&=y&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,E_(f,_))}else _=He,_=jr(f,f===rt?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(_&3)===0||or(f,_)||(a=!0,E_(f,_));f=f.next}while(a);Sh=!1}}function KA(){__()}function __(){yc=Eh=!1;var o=0;Pr!==0&&(iI()&&(o=Pr),Pr=0);for(var r=In(),a=null,f=gc;f!==null;){var y=f.next,_=v_(f,r);_===0?(f.next=null,a===null?gc=y:a.next=y,y===null&&(Os=a)):(a=f,(o!==0||(_&3)!==0)&&(yc=!0)),f=y}gl(o)}function v_(o,r){for(var a=o.suspendedLanes,f=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var A=31-jt(_),I=1<<A,N=y[A];N===-1?((I&a)===0||(I&f)!==0)&&(y[A]=Ca(I,r)):N<=r&&(o.expiredLanes|=I),_&=~I}if(r=rt,a=He,a=jr(o,o===r?a:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,a===0||o===r&&(Ze===2||Ze===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&jn(f),o.callbackNode=null,o.callbackPriority=0;if((a&3)===0||or(o,a)){if(r=a&-a,r===o.callbackPriority)return r;switch(f!==null&&jn(f),es(a)){case 2:case 8:a=Wr;break;case 32:a=er;break;case 268435456:a=Zr;break;default:a=er}return f=T_.bind(null,o),a=Ri(a,f),o.callbackPriority=r,o.callbackNode=a,r}return f!==null&&f!==null&&jn(f),o.callbackPriority=2,o.callbackNode=null,2}function T_(o,r){if(Jt!==0&&Jt!==5)return o.callbackNode=null,o.callbackPriority=0,null;var a=o.callbackNode;if(pc()&&o.callbackNode!==a)return null;var f=He;return f=jr(o,o===rt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:(n_(o,f,r),v_(o,In()),o.callbackNode!=null&&o.callbackNode===a?T_.bind(null,o):null)}function E_(o,r){if(pc())return null;n_(o,r,!0)}function QA(){rI(function(){(We&6)!==0?Ri(Ea,KA):__()})}function Ch(){return Pr===0&&(Pr=Aa()),Pr}function S_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ss(""+o)}function C_(o,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,o.id&&a.setAttribute("form",o.id),r.parentNode.insertBefore(a,r),o=new FormData(o),a.parentNode.removeChild(a),o}function XA(o,r,a,f,y){if(r==="submit"&&a&&a.stateNode===y){var _=S_((y[At]||null).action),A=f.submitter;A&&(r=(r=A[At]||null)?S_(r.formAction):A.getAttribute("formAction"),r!==null&&(_=r,A=null));var I=new as("action","action",null,f,y);o.push({event:I,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Pr!==0){var N=A?C_(y,A):new FormData(y);Gd(a,{pending:!0,data:N,method:y.method,action:_},null,N)}}else typeof _=="function"&&(I.preventDefault(),N=A?C_(y,A):new FormData(y),Gd(a,{pending:!0,data:N,method:y.method,action:_},_,N))},currentTarget:y}]})}}for(var Ah=0;Ah<ld.length;Ah++){var Ih=ld[Ah],WA=Ih.toLowerCase(),ZA=Ih[0].toUpperCase()+Ih.slice(1);Yn(WA,"on"+ZA)}Yn(ng,"onAnimationEnd"),Yn(ig,"onAnimationIteration"),Yn(og,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(pA,"onTransitionRun"),Yn(gA,"onTransitionStart"),Yn(yA,"onTransitionCancel"),Yn(rg,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yl));function A_(o,r){r=(r&4)!==0;for(var a=0;a<o.length;a++){var f=o[a],y=f.event;f=f.listeners;e:{var _=void 0;if(r)for(var A=f.length-1;0<=A;A--){var I=f[A],N=I.instance,$=I.currentTarget;if(I=I.listener,N!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=$;try{_(y)}catch(te){oc(te)}y.currentTarget=null,_=N}else for(A=0;A<f.length;A++){if(I=f[A],N=I.instance,$=I.currentTarget,I=I.listener,N!==_&&y.isPropagationStopped())break e;_=I,y.currentTarget=$;try{_(y)}catch(te){oc(te)}y.currentTarget=null,_=N}}}}function Ve(o,r){var a=r[Ma];a===void 0&&(a=r[Ma]=new Set);var f=o+"__bubble";a.has(f)||(I_(r,o,2,!1),a.add(f))}function Rh(o,r,a){var f=0;r&&(f|=4),I_(a,o,f,r)}var _c="_reactListening"+Math.random().toString(36).slice(2);function wh(o){if(!o[_c]){o[_c]=!0,xa.forEach(function(a){a!=="selectionchange"&&(jA.has(a)||Rh(a,!1,o),Rh(a,!0,o))});var r=o.nodeType===9?o:o.ownerDocument;r===null||r[_c]||(r[_c]=!0,Rh("selectionchange",!1,r))}}function I_(o,r,a,f){switch(Q_(r)){case 2:var y=RI;break;case 8:y=wI;break;default:y=Bh}a=y.bind(null,r,a,o),y=void 0,!xn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),f?y!==void 0?o.addEventListener(r,a,{capture:!0,passive:y}):o.addEventListener(r,a,!0):y!==void 0?o.addEventListener(r,a,{passive:y}):o.addEventListener(r,a,!1)}function Mh(o,r,a,f,y){var _=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var I=f.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=f.return;A!==null;){var N=A.tag;if((N===3||N===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=xi(I),A===null)return;if(N=A.tag,N===5||N===6||N===26||N===27){f=_=A;continue e}I=I.parentNode}}f=f.return}Tu(function(){var $=_,te=Mn(a),ie=[];e:{var K=sg.get(o);if(K!==void 0){var Q=as,Ae=o;switch(o){case"keypress":if(si(a)===0)break e;case"keydown":case"keyup":Q=hs;break;case"focusin":Ae="focus",Q=cs;break;case"focusout":Ae="blur",Q=cs;break;case"beforeblur":case"afterblur":Q=cs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=ed;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Mu;break;case ng:case ig:case og:Q=fs;break;case rg:Q=Du;break;case"scroll":case"scrollend":Q=Eu;break;case"wheel":Q=ms;break;case"copy":case"cut":case"paste":Q=ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Ba;break;case"toggle":case"beforetoggle":Q=bu}var Te=(r&4)!==0,it=!Te&&(o==="scroll"||o==="scrollend"),B=Te?K!==null?K+"Capture":null:K;Te=[];for(var L=$,Y;L!==null;){var ne=L;if(Y=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Y===null||B===null||(ne=dr(L,B),ne!=null&&Te.push(_l(L,ne,Y))),it)break;L=L.return}0<Te.length&&(K=new Q(K,Ae,null,a,te),ie.push({event:K,listeners:Te}))}}if((r&7)===0){e:{if(K=o==="mouseover"||o==="pointerover",Q=o==="mouseout"||o==="pointerout",K&&a!==Pi&&(Ae=a.relatedTarget||a.fromElement)&&(xi(Ae)||Ae[Rn]))break e;if((Q||K)&&(K=te.window===te?te:(K=te.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Ae=a.relatedTarget||a.toElement,Q=$,Ae=Ae?xi(Ae):null,Ae!==null&&(it=l(Ae),Te=Ae.tag,Ae!==it||Te!==5&&Te!==27&&Te!==6)&&(Ae=null)):(Q=null,Ae=$),Q!==Ae)){if(Te=Dn,ne="onMouseLeave",B="onMouseEnter",L="mouse",(o==="pointerout"||o==="pointerover")&&(Te=Ba,ne="onPointerLeave",B="onPointerEnter",L="pointer"),it=Q==null?K:ni(Q),Y=Ae==null?K:ni(Ae),K=new Te(ne,L+"leave",Q,a,te),K.target=it,K.relatedTarget=Y,ne=null,xi(te)===$&&(Te=new Te(B,L+"enter",Ae,a,te),Te.target=Y,Te.relatedTarget=it,ne=Te),it=ne,Q&&Ae)t:{for(Te=Q,B=Ae,L=0,Y=Te;Y;Y=Fs(Y))L++;for(Y=0,ne=B;ne;ne=Fs(ne))Y++;for(;0<L-Y;)Te=Fs(Te),L--;for(;0<Y-L;)B=Fs(B),Y--;for(;L--;){if(Te===B||B!==null&&Te===B.alternate)break t;Te=Fs(Te),B=Fs(B)}Te=null}else Te=null;Q!==null&&R_(ie,K,Q,Te,!1),Ae!==null&&it!==null&&R_(ie,it,Ae,Te,!0)}}e:{if(K=$?ni($):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var he=Yp;else if(bt(K))if($p)he=dA;else{he=cA;var Pe=uA}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?$&&ka($.elementType)&&(he=Yp):he=fA;if(he&&(he=he(o,$))){Oi(ie,he,a,te);break e}Pe&&Pe(o,K,$),o==="focusout"&&$&&K.type==="number"&&$.memoizedProps.value!=null&&mo(K,"number",K.value)}switch(Pe=$?ni($):window,o){case"focusin":(bt(Pe)||Pe.contentEditable==="true")&&(ps=Pe,rd=$,za=null);break;case"focusout":za=rd=ps=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,eg(ie,a,te);break;case"selectionchange":if(mA)break;case"keydown":case"keyup":eg(ie,a,te)}var ge;if(ui)e:{switch(o){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else qe?Z(o,a)&&(Ee="onCompositionEnd"):o==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(C&&a.locale!=="ko"&&(qe||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&qe&&(ge=Ua()):(ri=te,po="value"in ri?ri.value:ri.textContent,qe=!0)),Pe=vc($,Ee),0<Pe.length&&(Ee=new Fa(Ee,o,null,a,te),ie.push({event:Ee,listeners:Pe}),ge?Ee.data=ge:(ge=ue(a),ge!==null&&(Ee.data=ge)))),(ge=T?Nt(o,a):Be(o,a))&&(Ee=vc($,"onBeforeInput"),0<Ee.length&&(Pe=new Fa("onBeforeInput","beforeinput",null,a,te),ie.push({event:Pe,listeners:Ee}),Pe.data=ge)),XA(ie,o,$,a,te)}A_(ie,r)})}function _l(o,r,a){return{instance:o,listener:r,currentTarget:a}}function vc(o,r){for(var a=r+"Capture",f=[];o!==null;){var y=o,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=dr(o,a),y!=null&&f.unshift(_l(o,y,_)),y=dr(o,r),y!=null&&f.push(_l(o,y,_))),o.tag===3)return f;o=o.return}return[]}function Fs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function R_(o,r,a,f,y){for(var _=r._reactName,A=[];a!==null&&a!==f;){var I=a,N=I.alternate,$=I.stateNode;if(I=I.tag,N!==null&&N===f)break;I!==5&&I!==26&&I!==27||$===null||(N=$,y?($=dr(a,_),$!=null&&A.unshift(_l(a,$,N))):y||($=dr(a,_),$!=null&&A.push(_l(a,$,N)))),a=a.return}A.length!==0&&o.push({event:r,listeners:A})}var eI=/\r\n?/g,tI=/\u0000|\uFFFD/g;function w_(o){return(typeof o=="string"?o:""+o).replace(eI,`
`).replace(tI,"")}function M_(o,r){return r=w_(r),w_(o)===r}function Tc(){}function nt(o,r,a,f,y,_){switch(a){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||wn(o,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&wn(o,""+f);break;case"className":ii(o,"class",f);break;case"tabIndex":ii(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(o,a,f);break;case"style":Pa(o,f,_);break;case"data":if(r!=="object"){ii(o,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||a!=="href")){o.removeAttribute(a);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(a);break}f=ss(""+f),o.setAttribute(a,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(r!=="input"&&nt(o,r,"name",y.name,y,null),nt(o,r,"formEncType",y.formEncType,y,null),nt(o,r,"formMethod",y.formMethod,y,null),nt(o,r,"formTarget",y.formTarget,y,null)):(nt(o,r,"encType",y.encType,y,null),nt(o,r,"method",y.method,y,null),nt(o,r,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(a);break}f=ss(""+f),o.setAttribute(a,f);break;case"onClick":f!=null&&(o.onclick=Tc);break;case"onScroll":f!=null&&Ve("scroll",o);break;case"onScrollEnd":f!=null&&Ve("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=a}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}a=ss(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,""+f):o.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,""):o.removeAttribute(a);break;case"capture":case"download":f===!0?o.setAttribute(a,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,f):o.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(a,f):o.removeAttribute(a);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(a):o.setAttribute(a,f);break;case"popover":Ve("beforetoggle",o),Ve("toggle",o),ho(o,"popover",f);break;case"xlinkActuate":zt(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":zt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":zt(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":zt(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":zt(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":zt(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":zt(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":zt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":zt(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":ho(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Zf.get(a)||a,ho(o,a,f))}}function xh(o,r,a,f,y,_){switch(a){case"style":Pa(o,f,_);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=a}}break;case"children":typeof f=="string"?wn(o,f):(typeof f=="number"||typeof f=="bigint")&&wn(o,""+f);break;case"onScroll":f!=null&&Ve("scroll",o);break;case"onScrollEnd":f!=null&&Ve("scrollend",o);break;case"onClick":f!=null&&(o.onclick=Tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ts.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),_=o[At]||null,_=_!=null?_[a]:null,typeof _=="function"&&o.removeEventListener(r,_,y),typeof f=="function")){typeof _!="function"&&_!==null&&(a in o?o[a]=null:o.hasAttribute(a)&&o.removeAttribute(a)),o.addEventListener(r,f,y);break e}a in o?o[a]=f:f===!0?o.setAttribute(a,""):ho(o,a,f)}}}function Kt(o,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",o),Ve("load",o);var f=!1,y=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:nt(o,r,_,A,a,null)}}y&&nt(o,r,"srcSet",a.srcSet,a,null),f&&nt(o,r,"src",a.src,a,null);return;case"input":Ve("invalid",o);var I=_=A=y=null,N=null,$=null;for(f in a)if(a.hasOwnProperty(f)){var te=a[f];if(te!=null)switch(f){case"name":y=te;break;case"type":A=te;break;case"checked":N=te;break;case"defaultChecked":$=te;break;case"value":_=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,r));break;default:nt(o,r,f,te,a,null)}}ur(o,_,I,N,$,A,y,!1),rs(o);return;case"select":Ve("invalid",o),f=A=_=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":f=I;default:nt(o,r,y,I,a,null)}r=_,a=A,o.multiple=!!f,r!=null?bi(o,!!f,r,!1):a!=null&&bi(o,!!f,a,!0);return;case"textarea":Ve("invalid",o),_=y=f=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":f=I;break;case"defaultValue":y=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:nt(o,r,A,I,a,null)}cr(o,f,y,_),rs(o);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(f=a[N],f!=null))switch(N){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:nt(o,r,N,f,a,null)}return;case"dialog":Ve("beforetoggle",o),Ve("toggle",o),Ve("cancel",o),Ve("close",o);break;case"iframe":case"object":Ve("load",o);break;case"video":case"audio":for(f=0;f<yl.length;f++)Ve(yl[f],o);break;case"image":Ve("error",o),Ve("load",o);break;case"details":Ve("toggle",o);break;case"embed":case"source":case"link":Ve("error",o),Ve("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(f=a[$],f!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:nt(o,r,$,f,a,null)}return;default:if(ka(r)){for(te in a)a.hasOwnProperty(te)&&(f=a[te],f!==void 0&&xh(o,r,te,f,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(f=a[I],f!=null&&nt(o,r,I,f,a,null))}function nI(o,r,a,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,A=null,I=null,N=null,$=null,te=null;for(Q in a){var ie=a[Q];if(a.hasOwnProperty(Q)&&ie!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":N=ie;default:f.hasOwnProperty(Q)||nt(o,r,Q,null,f,ie)}}for(var K in f){var Q=f[K];if(ie=a[K],f.hasOwnProperty(K)&&(Q!=null||ie!=null))switch(K){case"type":_=Q;break;case"name":y=Q;break;case"checked":$=Q;break;case"defaultChecked":te=Q;break;case"value":A=Q;break;case"defaultValue":I=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ie&&nt(o,r,K,Q,f,ie)}}yn(o,A,I,N,$,te,_,y);return;case"select":Q=A=I=K=null;for(_ in a)if(N=a[_],a.hasOwnProperty(_)&&N!=null)switch(_){case"value":break;case"multiple":Q=N;default:f.hasOwnProperty(_)||nt(o,r,_,null,f,N)}for(y in f)if(_=f[y],N=a[y],f.hasOwnProperty(y)&&(_!=null||N!=null))switch(y){case"value":K=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==N&&nt(o,r,y,_,f,N)}r=I,a=A,f=Q,K!=null?bi(o,!!a,K,!1):!!f!=!!a&&(r!=null?bi(o,!!a,r,!0):bi(o,!!a,a?[]:"",!1));return;case"textarea":Q=K=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!f.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:nt(o,r,I,null,f,y)}for(A in f)if(y=f[A],_=a[A],f.hasOwnProperty(A)&&(y!=null||_!=null))switch(A){case"value":K=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&nt(o,r,A,y,f,_)}et(o,K,Q);return;case"option":for(var Ae in a)if(K=a[Ae],a.hasOwnProperty(Ae)&&K!=null&&!f.hasOwnProperty(Ae))switch(Ae){case"selected":o.selected=!1;break;default:nt(o,r,Ae,null,f,K)}for(N in f)if(K=f[N],Q=a[N],f.hasOwnProperty(N)&&K!==Q&&(K!=null||Q!=null))switch(N){case"selected":o.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:nt(o,r,N,K,f,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)K=a[Te],a.hasOwnProperty(Te)&&K!=null&&!f.hasOwnProperty(Te)&&nt(o,r,Te,null,f,K);for($ in f)if(K=f[$],Q=a[$],f.hasOwnProperty($)&&K!==Q&&(K!=null||Q!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:nt(o,r,$,K,f,Q)}return;default:if(ka(r)){for(var it in a)K=a[it],a.hasOwnProperty(it)&&K!==void 0&&!f.hasOwnProperty(it)&&xh(o,r,it,void 0,f,K);for(te in f)K=f[te],Q=a[te],!f.hasOwnProperty(te)||K===Q||K===void 0&&Q===void 0||xh(o,r,te,K,f,Q);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!f.hasOwnProperty(B)&&nt(o,r,B,null,f,K);for(ie in f)K=f[ie],Q=a[ie],!f.hasOwnProperty(ie)||K===Q||K==null&&Q==null||nt(o,r,ie,K,f,Q)}var Dh=null,Nh=null;function Ec(o){return o.nodeType===9?o:o.ownerDocument}function x_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D_(o,r){if(o===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&r==="foreignObject"?0:o}function bh(o,r){return o==="textarea"||o==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ph=null;function iI(){var o=window.event;return o&&o.type==="popstate"?o===Ph?!1:(Ph=o,!0):(Ph=null,!1)}var N_=typeof setTimeout=="function"?setTimeout:void 0,oI=typeof clearTimeout=="function"?clearTimeout:void 0,b_=typeof Promise=="function"?Promise:void 0,rI=typeof queueMicrotask=="function"?queueMicrotask:typeof b_<"u"?function(o){return b_.resolve(null).then(o).catch(sI)}:N_;function sI(o){setTimeout(function(){throw o})}function No(o){return o==="head"}function P_(o,r){var a=r,f=0,y=0;do{var _=a.nextSibling;if(o.removeChild(a),_&&_.nodeType===8)if(a=_.data,a==="/$"){if(0<f&&8>f){a=f;var A=o.ownerDocument;if(a&1&&vl(A.documentElement),a&2&&vl(A.body),a&4)for(a=A.head,vl(a),A=a.firstChild;A;){var I=A.nextSibling,N=A.nodeName;A[rr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&A.rel.toLowerCase()==="stylesheet"||a.removeChild(A),A=I}}if(y===0){o.removeChild(_),wl(r);return}y--}else a==="$"||a==="$?"||a==="$!"?y++:f=a.charCodeAt(0)-48;else f=0;a=_}while(a);wl(r)}function kh(o){var r=o.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kh(a),fo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}o.removeChild(a)}}function aI(o,r,a,f){for(;o.nodeType===1;){var y=a;if(o.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[rr])switch(r){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(r==="input"&&o.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=Jn(o.nextSibling),o===null)break}return null}function lI(o,r,a){if(r==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!a||(o=Jn(o.nextSibling),o===null))return null;return o}function Vh(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function uI(o,r){var a=o.ownerDocument;if(o.data!=="$?"||a.readyState==="complete")r();else{var f=function(){r(),a.removeEventListener("DOMContentLoaded",f)};a.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function Jn(o){for(;o!=null;o=o.nextSibling){var r=o.nodeType;if(r===1||r===3)break;if(r===8){if(r=o.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return o}var Uh=null;function k_(o){o=o.previousSibling;for(var r=0;o;){if(o.nodeType===8){var a=o.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return o;r--}else a==="/$"&&r++}o=o.previousSibling}return null}function V_(o,r,a){switch(r=Ec(a),o){case"html":if(o=r.documentElement,!o)throw Error(i(452));return o;case"head":if(o=r.head,!o)throw Error(i(453));return o;case"body":if(o=r.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function vl(o){for(var r=o.attributes;r.length;)o.removeAttributeNode(r[0]);fo(o)}var Ln=new Map,U_=new Set;function Sc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Wi=ce.d;ce.d={f:cI,r:fI,D:dI,C:hI,L:mI,m:pI,X:yI,S:gI,M:_I};function cI(){var o=Wi.f(),r=hc();return o||r}function fI(o){var r=ti(o);r!==null&&r.tag===5&&r.type==="form"?ny(r):Wi.r(o)}var qs=typeof document>"u"?null:document;function L_(o,r,a){var f=qs;if(f&&typeof r=="string"&&r){var y=It(r);y='link[rel="'+o+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),U_.has(y)||(U_.add(y),o={rel:o,crossOrigin:a,href:r},f.querySelector(y)===null&&(r=f.createElement("link"),Kt(r,"link",o),vt(r),f.head.appendChild(r)))}}function dI(o){Wi.D(o),L_("dns-prefetch",o,null)}function hI(o,r){Wi.C(o,r),L_("preconnect",o,r)}function mI(o,r,a){Wi.L(o,r,a);var f=qs;if(f&&o&&r){var y='link[rel="preload"][as="'+It(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+It(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+It(a.imageSizes)+'"]')):y+='[href="'+It(o)+'"]';var _=y;switch(r){case"style":_=Bs(o);break;case"script":_=Hs(o)}Ln.has(_)||(o=v({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:o,as:r},a),Ln.set(_,o),f.querySelector(y)!==null||r==="style"&&f.querySelector(Tl(_))||r==="script"&&f.querySelector(El(_))||(r=f.createElement("link"),Kt(r,"link",o),vt(r),f.head.appendChild(r)))}}function pI(o,r){Wi.m(o,r);var a=qs;if(a&&o){var f=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+It(f)+'"][href="'+It(o)+'"]',_=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Hs(o)}if(!Ln.has(_)&&(o=v({rel:"modulepreload",href:o},r),Ln.set(_,o),a.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(El(_)))return}f=a.createElement("link"),Kt(f,"link",o),vt(f),a.head.appendChild(f)}}}function gI(o,r,a){Wi.S(o,r,a);var f=qs;if(f&&o){var y=ln(f).hoistableStyles,_=Bs(o);r=r||"default";var A=y.get(_);if(!A){var I={loading:0,preload:null};if(A=f.querySelector(Tl(_)))I.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":r},a),(a=Ln.get(_))&&Lh(o,a);var N=A=f.createElement("link");vt(N),Kt(N,"link",o),N._p=new Promise(function($,te){N.onload=$,N.onerror=te}),N.addEventListener("load",function(){I.loading|=1}),N.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Cc(A,r,f)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(_,A)}}}function yI(o,r){Wi.X(o,r);var a=qs;if(a&&o){var f=ln(a).hoistableScripts,y=Hs(o),_=f.get(y);_||(_=a.querySelector(El(y)),_||(o=v({src:o,async:!0},r),(r=Ln.get(y))&&Oh(o,r),_=a.createElement("script"),vt(_),Kt(_,"link",o),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(y,_))}}function _I(o,r){Wi.M(o,r);var a=qs;if(a&&o){var f=ln(a).hoistableScripts,y=Hs(o),_=f.get(y);_||(_=a.querySelector(El(y)),_||(o=v({src:o,async:!0,type:"module"},r),(r=Ln.get(y))&&Oh(o,r),_=a.createElement("script"),vt(_),Kt(_,"link",o),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},f.set(y,_))}}function O_(o,r,a,f){var y=(y=Ce.current)?Sc(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Bs(a.href),a=ln(y).hoistableStyles,f=a.get(r),f||(f={type:"style",instance:null,count:0,state:null},a.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){o=Bs(a.href);var _=ln(y).hoistableStyles,A=_.get(o);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,A),(_=y.querySelector(Tl(o)))&&!_._p&&(A.instance=_,A.state.loading=5),Ln.has(o)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(o,a),_||vI(y,o,a,A.state))),r&&f===null)throw Error(i(528,""));return A}if(r&&f!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Hs(a),a=ln(y).hoistableScripts,f=a.get(r),f||(f={type:"script",instance:null,count:0,state:null},a.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function Bs(o){return'href="'+It(o)+'"'}function Tl(o){return'link[rel="stylesheet"]['+o+"]"}function F_(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function vI(o,r,a,f){o.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=o.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Kt(r,"link",a),vt(r),o.head.appendChild(r))}function Hs(o){return'[src="'+It(o)+'"]'}function El(o){return"script[async]"+o}function q_(o,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var f=o.querySelector('style[data-href~="'+It(a.href)+'"]');if(f)return r.instance=f,vt(f),f;var y=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),vt(f),Kt(f,"style",y),Cc(f,a.precedence,o),r.instance=f;case"stylesheet":y=Bs(a.href);var _=o.querySelector(Tl(y));if(_)return r.state.loading|=4,r.instance=_,vt(_),_;f=F_(a),(y=Ln.get(y))&&Lh(f,y),_=(o.ownerDocument||o).createElement("link"),vt(_);var A=_;return A._p=new Promise(function(I,N){A.onload=I,A.onerror=N}),Kt(_,"link",f),r.state.loading|=4,Cc(_,a.precedence,o),r.instance=_;case"script":return _=Hs(a.src),(y=o.querySelector(El(_)))?(r.instance=y,vt(y),y):(f=a,(y=Ln.get(_))&&(f=v({},a),Oh(f,y)),o=o.ownerDocument||o,y=o.createElement("script"),vt(y),Kt(y,"link",f),o.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Cc(f,a.precedence,o));return r.instance}function Cc(o,r,a){for(var f=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,_=y,A=0;A<f.length;A++){var I=f[A];if(I.dataset.precedence===r)_=I;else if(_!==y)break}_?_.parentNode.insertBefore(o,_.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(o,r.firstChild))}function Lh(o,r){o.crossOrigin==null&&(o.crossOrigin=r.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=r.referrerPolicy),o.title==null&&(o.title=r.title)}function Oh(o,r){o.crossOrigin==null&&(o.crossOrigin=r.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=r.referrerPolicy),o.integrity==null&&(o.integrity=r.integrity)}var Ac=null;function B_(o,r,a){if(Ac===null){var f=new Map,y=Ac=new Map;y.set(a,f)}else y=Ac,f=y.get(a),f||(f=new Map,y.set(a,f));if(f.has(o))return f;for(f.set(o,null),a=a.getElementsByTagName(o),y=0;y<a.length;y++){var _=a[y];if(!(_[rr]||_[Dt]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(r)||"";A=o+A;var I=f.get(A);I?I.push(_):f.set(A,[_])}}return f}function H_(o,r,a){o=o.ownerDocument||o,o.head.insertBefore(a,r==="title"?o.querySelector("head > title"):null)}function TI(o,r,a){if(a===1||r.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return o=r.disabled,typeof r.precedence=="string"&&o==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function G_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Sl=null;function EI(){}function SI(o,r,a){if(Sl===null)throw Error(i(475));var f=Sl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var y=Bs(a.href),_=o.querySelector(Tl(y));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(f.count++,f=Ic.bind(f),o.then(f,f)),r.state.loading|=4,r.instance=_,vt(_);return}_=o.ownerDocument||o,a=F_(a),(y=Ln.get(y))&&Lh(a,y),_=_.createElement("link"),vt(_);var A=_;A._p=new Promise(function(I,N){A.onload=I,A.onerror=N}),Kt(_,"link",a),r.instance=_}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(f.count++,r=Ic.bind(f),o.addEventListener("load",r),o.addEventListener("error",r))}}function CI(){if(Sl===null)throw Error(i(475));var o=Sl;return o.stylesheets&&o.count===0&&Fh(o,o.stylesheets),0<o.count?function(r){var a=setTimeout(function(){if(o.stylesheets&&Fh(o,o.stylesheets),o.unsuspend){var f=o.unsuspend;o.unsuspend=null,f()}},6e4);return o.unsuspend=r,function(){o.unsuspend=null,clearTimeout(a)}}:null}function Ic(){if(this.count--,this.count===0){if(this.stylesheets)Fh(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Rc=null;function Fh(o,r){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Rc=new Map,r.forEach(AI,o),Rc=null,Ic.call(o))}function AI(o,r){if(!(r.state.loading&4)){var a=Rc.get(o);if(a)var f=a.get(null);else{a=new Map,Rc.set(o,a);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var A=y[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),f=A)}f&&a.set(null,f)}y=r.instance,A=y.getAttribute("data-precedence"),_=a.get(A)||f,_===f&&a.set(null,y),a.set(A,y),this.count++,f=Ic.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),_?_.parentNode.insertBefore(y,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),r.state.loading|=4}}var Cl={$$typeof:W,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function II(o,r,a,f,y,_,A,I){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wi(0),this.hiddenUpdates=wi(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function z_(o,r,a,f,y,_,A,I,N,$,te,ie){return o=new II(o,r,a,A,I,N,$,ie),r=1,_===!0&&(r|=24),_=vn(3,null,null,r),o.current=_,_.stateNode=o,r=Td(),r.refCount++,o.pooledCache=r,r.refCount++,_.memoizedState={element:f,isDehydrated:a,cache:r},Ad(_),o}function Y_(o){return o?(o=vs,o):vs}function $_(o,r,a,f,y,_){y=Y_(y),f.context===null?f.context=y:f.pendingContext=y,f=_o(r),f.payload={element:a},_=_===void 0?null:_,_!==null&&(f.callback=_),a=vo(o,f,r),a!==null&&(An(a,o,r),ja(a,o,r))}function J_(o,r){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var a=o.retryLane;o.retryLane=a!==0&&a<r?a:r}}function qh(o,r){J_(o,r),(o=o.alternate)&&J_(o,r)}function K_(o){if(o.tag===13){var r=_s(o,67108864);r!==null&&An(r,o,67108864),qh(o,67108864)}}var wc=!0;function RI(o,r,a,f){var y=ee.T;ee.T=null;var _=ce.p;try{ce.p=2,Bh(o,r,a,f)}finally{ce.p=_,ee.T=y}}function wI(o,r,a,f){var y=ee.T;ee.T=null;var _=ce.p;try{ce.p=8,Bh(o,r,a,f)}finally{ce.p=_,ee.T=y}}function Bh(o,r,a,f){if(wc){var y=Hh(f);if(y===null)Mh(o,r,f,Mc,a),X_(o,f);else if(xI(y,o,r,a,f))f.stopPropagation();else if(X_(o,f),r&4&&-1<MI.indexOf(o)){for(;y!==null;){var _=ti(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=Hn(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var N=1<<31-jt(A);I.entanglements[1]|=N,A&=~N}pi(_),(We&6)===0&&(fc=In()+500,gl(0))}}break;case 13:I=_s(_,2),I!==null&&An(I,_,2),hc(),qh(_,2)}if(_=Hh(f),_===null&&Mh(o,r,f,Mc,a),_===y)break;y=_}y!==null&&f.stopPropagation()}else Mh(o,r,f,null,a)}}function Hh(o){return o=Mn(o),Gh(o)}var Mc=null;function Gh(o){if(Mc=null,o=xi(o),o!==null){var r=l(o);if(r===null)o=null;else{var a=r.tag;if(a===13){if(o=d(r),o!==null)return o;o=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;o=null}else r!==o&&(o=null)}}return Mc=o,null}function Q_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($f()){case Ea:return 2;case Wr:return 8;case er:case Jf:return 32;case Zr:return 268435456;default:return 32}default:return 32}}var zh=!1,bo=null,Po=null,ko=null,Al=new Map,Il=new Map,Vo=[],MI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(o,r){switch(o){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":Po=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Al.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(r.pointerId)}}function Rl(o,r,a,f,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:r,domEventName:a,eventSystemFlags:f,nativeEvent:_,targetContainers:[y]},r!==null&&(r=ti(r),r!==null&&K_(r)),o):(o.eventSystemFlags|=f,r=o.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),o)}function xI(o,r,a,f,y){switch(r){case"focusin":return bo=Rl(bo,o,r,a,f,y),!0;case"dragenter":return Po=Rl(Po,o,r,a,f,y),!0;case"mouseover":return ko=Rl(ko,o,r,a,f,y),!0;case"pointerover":var _=y.pointerId;return Al.set(_,Rl(Al.get(_)||null,o,r,a,f,y)),!0;case"gotpointercapture":return _=y.pointerId,Il.set(_,Rl(Il.get(_)||null,o,r,a,f,y)),!0}return!1}function W_(o){var r=xi(o.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){o.blockedOn=r,hu(o.priority,function(){if(a.tag===13){var f=Cn();f=lo(f);var y=_s(a,f);y!==null&&An(y,a,f),qh(a,f)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){o.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}o.blockedOn=null}function xc(o){if(o.blockedOn!==null)return!1;for(var r=o.targetContainers;0<r.length;){var a=Hh(o.nativeEvent);if(a===null){a=o.nativeEvent;var f=new a.constructor(a.type,a);Pi=f,a.target.dispatchEvent(f),Pi=null}else return r=ti(a),r!==null&&K_(r),o.blockedOn=a,!1;r.shift()}return!0}function Z_(o,r,a){xc(o)&&a.delete(r)}function DI(){zh=!1,bo!==null&&xc(bo)&&(bo=null),Po!==null&&xc(Po)&&(Po=null),ko!==null&&xc(ko)&&(ko=null),Al.forEach(Z_),Il.forEach(Z_)}function Dc(o,r){o.blockedOn===r&&(o.blockedOn=null,zh||(zh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,DI)))}var Nc=null;function j_(o){Nc!==o&&(Nc=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nc===o&&(Nc=null);for(var r=0;r<o.length;r+=3){var a=o[r],f=o[r+1],y=o[r+2];if(typeof f!="function"){if(Gh(f||a)===null)continue;break}var _=ti(a);_!==null&&(o.splice(r,3),r-=3,Gd(_,{pending:!0,data:y,method:a.method,action:f},f,y))}}))}function wl(o){function r(N){return Dc(N,o)}bo!==null&&Dc(bo,o),Po!==null&&Dc(Po,o),ko!==null&&Dc(ko,o),Al.forEach(r),Il.forEach(r);for(var a=0;a<Vo.length;a++){var f=Vo[a];f.blockedOn===o&&(f.blockedOn=null)}for(;0<Vo.length&&(a=Vo[0],a.blockedOn===null);)W_(a),a.blockedOn===null&&Vo.shift();if(a=(o.ownerDocument||o).$$reactFormReplay,a!=null)for(f=0;f<a.length;f+=3){var y=a[f],_=a[f+1],A=y[At]||null;if(typeof _=="function")A||j_(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(y=_,A=_[At]||null)I=A.formAction;else if(Gh(y)!==null)continue}else I=A.action;typeof I=="function"?a[f+1]=I:(a.splice(f,3),f-=3),j_(a)}}}function Yh(o){this._internalRoot=o}bc.prototype.render=Yh.prototype.render=function(o){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,f=Cn();$_(a,f,o,r,null,null)},bc.prototype.unmount=Yh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var r=o.containerInfo;$_(o.current,2,null,o,null,null),hc(),r[Rn]=null}};function bc(o){this._internalRoot=o}bc.prototype.unstable_scheduleHydration=function(o){if(o){var r=uo();o={blockedOn:null,target:o,priority:r};for(var a=0;a<Vo.length&&r!==0&&r<Vo[a].priority;a++);Vo.splice(a,0,o),a===0&&W_(o)}};var ev=e.version;if(ev!=="19.1.1")throw Error(i(527,ev,"19.1.1"));ce.findDOMNode=function(o){var r=o._reactInternals;if(r===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=g(r),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var NI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{gt=Pc.inject(NI),Xe=Pc}catch{}}return xl.createRoot=function(o,r){if(!s(o))throw Error(i(299));var a=!1,f="",y=gy,_=yy,A=_y,I=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks)),r=z_(o,1,!1,null,null,a,f,y,_,A,I,null),o[Rn]=r.current,wh(o),new Yh(r)},xl.hydrateRoot=function(o,r,a){if(!s(o))throw Error(i(299));var f=!1,y="",_=gy,A=yy,I=_y,N=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),r=z_(o,1,!0,r,a??null,f,y,_,A,I,N,$),r.context=Y_(null),a=r.current,f=Cn(),f=lo(f),y=_o(f),y.callback=null,vo(a,y,f),a=f,r.current.lanes=a,Mi(r,a),pi(r),o[Rn]=r.current,wh(o),new bc(r)},xl.version="19.1.1",xl}var cv;function BI(){if(cv)return Kh.exports;cv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kh.exports=qI(),Kh.exports}var HI=BI();const GI=n0(HI),Gl=["月","火","水","木","金","土","日"],Hc=["bg-sky-500","bg-emerald-500","bg-indigo-500","bg-pink-500","bg-blue-600","bg-teal-500","bg-purple-500","bg-rose-500"],zI=["gemini-2.5-flash","gemini-2.5-flash-lite"],YI="gemini-2.5-flash",$I=()=>{};var fv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},JI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[i++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],d=n[t++],h=n[t++],g=((s&7)<<18|(l&63)<<12|(d&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],d=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(l&63)<<6|d&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const l=n[s],d=s+1<n.length,h=d?n[s+1]:0,g=s+2<n.length,p=g?n[s+2]:0,v=l>>2,E=(l&3)<<4|h>>4;let S=(h&15)<<2|p>>6,x=p&63;g||(x=64,d||(S=64)),i.push(t[v],t[E],t[S],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(o0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||h==null||p==null||E==null)throw new KI;const S=l<<2|h>>4;if(i.push(S),p!==64){const x=h<<4&240|p>>2;if(i.push(x),E!==64){const V=p<<6&192|E;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class KI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QI=function(n){const e=o0(n);return r0.encodeByteArray(e,!0)},nf=function(n){return QI(n).replace(/\./g,"")},s0=function(n){try{return r0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=()=>XI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof fv>"u")return;const n=fv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&s0(n[1]);return e&&JSON.parse(e)},Rf=()=>{try{return $I()||WI()||ZI()||jI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},a0=n=>{var e,t;return(t=(e=Rf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},eR=n=>{const e=a0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},l0=()=>{var n;return(n=Rf())==null?void 0:n.config},u0=n=>{var e;return(e=Rf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function c0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nf(JSON.stringify(t)),nf(JSON.stringify(d)),""].join(".")}const Vl={};function iR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?n.emulator.push(e):n.prod.push(e);return n}function oR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dv=!1;function f0(n,e){if(typeof window>"u"||typeof document>"u"||!ua(window.location.host)||Vl[n]===e||Vl[n]||dv)return;Vl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=iR().prod.length>0;function d(){const S=document.getElementById(i);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{dv=!0,d()},S}function v(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=oR(i),x=t("text"),V=document.getElementById(x)||document.createElement("span"),q=t("learnmore"),z=document.getElementById(q)||document.createElement("a"),j=t("preprendIcon"),H=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;h(W),v(z,q);const X=p();g(H,j),W.append(H,V,z,X),document.body.appendChild(W)}l?(V.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function sR(){var e;const n=(e=Rf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cR(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fR(){return!sR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function hR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="FirebaseError";class Zn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mR,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],d=l?pR(l,i):"Error",h=`${this.serviceName}: ${d} (${s}).`;return new Zn(s,h,i)}}function pR(n,e){return n.replace(gR,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const gR=/\{\$([^}]+)}/g;function yR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Fr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const l=n[s],d=e[s];if(hv(l)&&hv(d)){if(!Fr(l,d))return!1}else if(l!==d)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function hv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _R(n,e){const t=new vR(n,e);return t.subscribe.bind(t)}class vR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");TR(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Zh),s.error===void 0&&(s.error=Zh),s.complete===void 0&&(s.complete=Zh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(n){return n&&n._delegate?n._delegate:n}class qr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new tR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CR(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});i.resolve(l)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&d.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const l=this.instances.get(i);return l&&e(l,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(n){return n===kr?void 0:n}function CR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ER(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const IR={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},RR=Ue.INFO,wR={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},MR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=wR[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=MR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const xR=(n,e)=>e.some(t=>n instanceof t);let mv,pv;function DR(){return mv||(mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return pv||(pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d0=new WeakMap,dm=new WeakMap,h0=new WeakMap,jh=new WeakMap,Xm=new WeakMap;function bR(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(Go(n.result)),s()},d=()=>{i(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&d0.set(t,n)}).catch(()=>{}),Xm.set(e,n),e}function PR(n){if(dm.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),s()},d=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});dm.set(n,e)}let hm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||h0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Go(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kR(n){hm=n(hm)}function VR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(em(this),e,...t);return h0.set(i,e.sort?e.sort():[e]),Go(i)}:NR().includes(n)?function(...e){return n.apply(em(this),e),Go(d0.get(this))}:function(...e){return Go(n.apply(em(this),e))}}function UR(n){return typeof n=="function"?VR(n):(n instanceof IDBTransaction&&PR(n),xR(n,DR())?new Proxy(n,hm):n)}function Go(n){if(n instanceof IDBRequest)return bR(n);if(jh.has(n))return jh.get(n);const e=UR(n);return e!==n&&(jh.set(n,e),Xm.set(e,n)),e}const em=n=>Xm.get(n);function LR(n,e,{blocked:t,upgrade:i,blocking:s,terminated:l}={}){const d=indexedDB.open(n,e),h=Go(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Go(d.result),g.oldVersion,g.newVersion,Go(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{l&&g.addEventListener("close",()=>l()),s&&g.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const OR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],tm=new Map;function gv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=FR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||OR.includes(t)))return;const l=async function(d,...h){const g=this.transaction(d,s?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&g.done]))[0]};return tm.set(e,l),l}kR(n=>({...n,get:(e,t,i)=>gv(e,t)||n.get(e,t,i),has:(e,t)=>!!gv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function BR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mm="@firebase/app",yv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Qm("@firebase/app"),HR="@firebase/app-compat",GR="@firebase/analytics-compat",zR="@firebase/analytics",YR="@firebase/app-check-compat",$R="@firebase/app-check",JR="@firebase/auth",KR="@firebase/auth-compat",QR="@firebase/database",XR="@firebase/data-connect",WR="@firebase/database-compat",ZR="@firebase/functions",jR="@firebase/functions-compat",ew="@firebase/installations",tw="@firebase/installations-compat",nw="@firebase/messaging",iw="@firebase/messaging-compat",ow="@firebase/performance",rw="@firebase/performance-compat",sw="@firebase/remote-config",aw="@firebase/remote-config-compat",lw="@firebase/storage",uw="@firebase/storage-compat",cw="@firebase/firestore",fw="@firebase/ai",dw="@firebase/firestore-compat",hw="firebase",mw="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",pw={[mm]:"fire-core",[HR]:"fire-core-compat",[zR]:"fire-analytics",[GR]:"fire-analytics-compat",[$R]:"fire-app-check",[YR]:"fire-app-check-compat",[JR]:"fire-auth",[KR]:"fire-auth-compat",[QR]:"fire-rtdb",[XR]:"fire-data-connect",[WR]:"fire-rtdb-compat",[ZR]:"fire-fn",[jR]:"fire-fn-compat",[ew]:"fire-iid",[tw]:"fire-iid-compat",[nw]:"fire-fcm",[iw]:"fire-fcm-compat",[ow]:"fire-perf",[rw]:"fire-perf-compat",[sw]:"fire-rc",[aw]:"fire-rc-compat",[lw]:"fire-gcs",[uw]:"fire-gcs-compat",[cw]:"fire-fst",[dw]:"fire-fst-compat",[fw]:"fire-vertex","fire-js":"fire-js",[hw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Map,gw=new Map,gm=new Map;function _v(n,e){try{n.container.addComponent(e)}catch(t){no.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ta(n){const e=n.name;if(gm.has(e))return no.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,n);for(const t of of.values())_v(t,n);for(const t of gw.values())_v(t,n);return!0}function Wm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new eu("app","Firebase",yw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=mw;function m0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:pm,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw zo.create("bad-app-name",{appName:String(s)});if(t||(t=l0()),!t)throw zo.create("no-options");const l=of.get(s);if(l){if(Fr(t,l.options)&&Fr(i,l.config))return l;throw zo.create("duplicate-app",{appName:s})}const d=new AR(s);for(const g of gm.values())d.addComponent(g);const h=new _w(t,i,d);return of.set(s,h),h}function p0(n=pm){const e=of.get(n);if(!e&&n===pm&&l0())return m0();if(!e)throw zo.create("no-app",{appName:n});return e}function Yo(n,e,t){let i=pw[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const d=[`Unable to register library "${i}" with version "${e}":`];s&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),no.warn(d.join(" "));return}ta(new qr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="firebase-heartbeat-database",Tw=1,zl="firebase-heartbeat-store";let nm=null;function g0(){return nm||(nm=LR(vw,Tw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zl)}catch(t){console.warn(t)}}}}).catch(n=>{throw zo.create("idb-open",{originalErrorMessage:n.message})})),nm}async function Ew(n){try{const t=(await g0()).transaction(zl),i=await t.objectStore(zl).get(y0(n));return await t.done,i}catch(e){if(e instanceof Zn)no.warn(e.message);else{const t=zo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});no.warn(t.message)}}}async function vv(n,e){try{const i=(await g0()).transaction(zl,"readwrite");await i.objectStore(zl).put(e,y0(n)),await i.done}catch(t){if(t instanceof Zn)no.warn(t.message);else{const i=zo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});no.warn(i.message)}}}function y0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=1024,Cw=30;class Aw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Rw(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>Cw){const d=ww(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){no.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tv(),{heartbeatsToSend:i,unsentEntries:s}=Iw(this._heartbeatsCache.heartbeats),l=nf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return no.warn(t),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function Iw(n,e=Sw){const t=[];let i=n.slice();for(const s of n){const l=t.find(d=>d.agent===s.agent);if(l){if(l.dates.push(s.date),Ev(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Ev(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Rw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?hR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ew(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ev(n){return nf(JSON.stringify({version:2,heartbeats:n})).length}function ww(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n){ta(new qr("platform-logger",e=>new qR(e),"PRIVATE")),ta(new qr("heartbeat",e=>new Aw(e),"PRIVATE")),Yo(mm,yv,n),Yo(mm,yv,"esm2020"),Yo("fire-js","")}Mw("");var xw="firebase",Dw="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yo(xw,Dw,"app");function _0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nw=_0,v0=new eu("auth","Firebase",_0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Qm("@firebase/auth");function bw(n,...e){rf.logLevel<=Ue.WARN&&rf.warn(`Auth (${ca}): ${n}`,...e)}function Gc(n,...e){rf.logLevel<=Ue.ERROR&&rf.error(`Auth (${ca}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(n,...e){throw jm(n,...e)}function Wn(n,...e){return jm(n,...e)}function Zm(n,e,t){const i={...Nw(),[e]:t};return new eu("auth","Firebase",i).create(e,{appName:n.name})}function Lr(n){return Zm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pw(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Si(n,"argument-error"),Zm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return v0.create(n,...e)}function Ie(n,e,...t){if(!n)throw jm(e,...t)}function ji(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gc(e),new Error(e)}function io(n,e){n||ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function kw(){return Sv()==="http:"||Sv()==="https:"}function Sv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kw()||lR()||"connection"in navigator)?navigator.onLine:!0}function Uw(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t){this.shortDelay=e,this.longDelay=t,io(t>e,"Short delay should be less than long delay!"),this.isMobile=rR()||uR()}get(){return Vw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n,e){io(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fw=new nu(3e4,6e4);function tp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function fa(n,e,t,i,s={}){return E0(n,s,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const h=tu({key:n.config.apiKey,...d}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:g,...l};return aR()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&ua(n.emulatorConfig.host)&&(p.credentials="include"),T0.fetch()(await S0(n,n.config.apiHost,t,h),p)})}async function E0(n,e,t){n._canInitEmulator=!1;const i={...Lw,...e};try{const s=new Bw(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw kc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const h=l.ok?d.errorMessage:d.error.message,[g,p]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(n,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw kc(n,"email-already-in-use",d);if(g==="USER_DISABLED")throw kc(n,"user-disabled",d);const v=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Zm(n,v,p);Si(n,v)}}catch(s){if(s instanceof Zn)throw s;Si(n,"network-request-failed",{message:String(s)})}}async function qw(n,e,t,i,s={}){const l=await fa(n,e,t,i,s);return"mfaPendingCredential"in l&&Si(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function S0(n,e,t,i){const s=`${e}${t}?${i}`,l=n,d=l.config.emulator?ep(n.config,s):`${n.config.apiScheme}://${s}`;return Ow.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}class Bw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Wn(this.auth,"network-request-failed")),Fw.get())})}}function kc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Wn(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(n,e){return fa(n,"POST","/v1/accounts:delete",e)}async function sf(n,e){return fa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gw(n,e=!1){const t=Bn(n),i=await t.getIdToken(e),s=np(i);Ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:s,token:i,authTime:Ul(im(s.auth_time)),issuedAtTime:Ul(im(s.iat)),expirationTime:Ul(im(s.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function im(n){return Number(n)*1e3}function np(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Gc("JWT malformed, contained fewer than 3 sections"),null;try{const s=s0(t);return s?JSON.parse(s):(Gc("Failed to decode base64 JWT payload"),null)}catch(s){return Gc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Cv(n){const e=np(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Zn&&zw(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function zw({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ul(this.lastLoginAt),this.creationTime=Ul(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(n){var E;const e=n.auth,t=await n.getIdToken(),i=await Yl(n,sf(e,{idToken:t}));Ie(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?C0(s.providerUserInfo):[],d=Jw(n.providerData,l),h=n.isAnonymous,g=!(n.email&&s.passwordHash)&&!(d!=null&&d.length),p=h?g:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:d,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function $w(n){const e=Bn(n);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Jw(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function C0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(n,e){const t=await E0(n,{},async()=>{const i=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,d=await S0(n,s,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:h,body:i};return n.emulatorConfig&&ua(n.emulatorConfig.host)&&(g.credentials="include"),T0.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Qw(n,e){return fa(n,"POST","/v2/accounts:revokeToken",tp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=Cv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:l}=await Kw(e,t);this.updateTokensAndExpiration(i,s,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:l}=t,d=new Ks;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),s&&(Ie(typeof s=="string","internal-error",{appName:e}),d.accessToken=s),l&&(Ie(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ks,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new Yw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _m(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Yl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Gw(this,e)}reload(){return $w(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await af(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Lr(this.auth));const e=await this.getIdToken();return await Yl(this,Hw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,h=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:x,providerData:V,stsTokenManager:q}=t;Ie(E&&q,e,"internal-error");const z=Ks.fromJSON(this.name,q);Ie(typeof E=="string",e,"internal-error"),Lo(i,e.name),Lo(s,e.name),Ie(typeof S=="boolean",e,"internal-error"),Ie(typeof x=="boolean",e,"internal-error"),Lo(l,e.name),Lo(d,e.name),Lo(h,e.name),Lo(g,e.name),Lo(p,e.name),Lo(v,e.name);const j=new Qn({uid:E,auth:e,email:s,emailVerified:S,displayName:i,isAnonymous:x,photoURL:d,phoneNumber:l,tenantId:h,stsTokenManager:z,createdAt:p,lastLoginAt:v});return V&&Array.isArray(V)&&(j.providerData=V.map(H=>({...H}))),g&&(j._redirectEventId=g),j}static async _fromIdTokenResponse(e,t,i=!1){const s=new Ks;s.updateFromServerResponse(t);const l=new Qn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await af(l),l}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Ie(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?C0(s.providerUserInfo):[],d=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),h=new Ks;h.updateFromIdToken(i);const g=new Qn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:d}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function eo(n){io(n instanceof Function,"Expected a class definition");let e=Av.get(n);return e?(io(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Av.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A0.type="NONE";const Iv=A0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(n,e,t){return`firebase:${n}:${e}:${t}`}class Qs{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:l}=this.auth;this.fullUserKey=zc(this.userKey,s.apiKey,l),this.fullPersistenceKey=zc("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sf(this.auth,{idToken:e}).catch(()=>{});return t?Qn._fromGetAccountInfoResponse(this.auth,t,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Qs(eo(Iv),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=s[0]||eo(Iv);const d=zc(i,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(d);if(v){let E;if(typeof v=="string"){const S=await sf(e,{idToken:v}).catch(()=>{});if(!S)break;E=await Qn._fromGetAccountInfoResponse(e,S,v)}else E=Qn._fromJSON(e,v);p!==l&&(h=E),l=p;break}}catch{}const g=s.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Qs(l,e,i):(l=g[0],h&&await l._set(d,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(d)}catch{}})),new Qs(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D0(e))return"Blackberry";if(N0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||w0(e))&&!e.includes("edge/"))return"Chrome";if(x0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function I0(n=an()){return/firefox\//i.test(n)}function R0(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function w0(n=an()){return/crios\//i.test(n)}function M0(n=an()){return/iemobile/i.test(n)}function x0(n=an()){return/android/i.test(n)}function D0(n=an()){return/blackberry/i.test(n)}function N0(n=an()){return/webos/i.test(n)}function ip(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Xw(n=an()){var e;return ip(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Ww(){return cR()&&document.documentMode===10}function b0(n=an()){return ip(n)||x0(n)||N0(n)||D0(n)||/windows phone/i.test(n)||M0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(n,e=[]){let t;switch(n){case"Browser":t=Rv(an());break;case"Worker":t=`${Rv(an())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ca}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,h)=>{try{const g=e(l);d(g)}catch(g){h(g)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(n,e={}){return fa(n,"GET","/v2/passwordPolicy",tp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=6;class tM{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??eM,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new Zw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=eo(t)),this._initializationPromise=this.queue(async()=>{var i,s,l;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sf(this,{idToken:e}),i=await Qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Kn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===h)&&(g!=null&&g.user)&&(i=g.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Lr(this));const t=e?Bn(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jw(this),t=new tM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Qw(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&eo(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[eo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(h,this,"internal-error"),h.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,s);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&bw(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wf(n){return Bn(n)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iM(n){op=n}function oM(n){return op.loadJS(n)}function rM(){return op.gapiScript}function sM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(n,e){const t=Wm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Fr(l,e??{}))return s;Si(s,"already-initialized")}return t.initialize({options:e})}function lM(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(eo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function uM(n,e,t){const i=wf(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,l=k0(e),{host:d,port:h}=cM(e),g=h===null?"":`:${h}`,p={url:`${l}//${d}${g}/`},v=Object.freeze({host:d,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Fr(p,i.config.emulator)&&Fr(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,ua(d)?(c0(`${l}//${d}${g}`),f0("Auth",!0)):fM()}function k0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cM(n){const e=k0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const l=s[1];return{host:l,port:Mv(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:Mv(d)}}}function Mv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ji("not implemented")}_getIdTokenResponse(e){return ji("not implemented")}_linkToIdToken(e,t){return ji("not implemented")}_getReauthenticationResolver(e){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(n,e){return qw(n,"POST","/v1/accounts:signInWithIdp",tp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="http://localhost";class Br extends V0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Si("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...l}=t;if(!i||!s)return null;const d=new Br(i,s);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Xs(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Xs(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xs(e,t)}buildRequest(){const e={requestUri:dM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends iu{constructor(){super("facebook.com")}static credential(e){return Br._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch{return null}}}Oo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Br._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Zi.credential(t,i)}catch{return null}}}Zi.GOOGLE_SIGN_IN_METHOD="google.com";Zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends iu{constructor(){super("github.com")}static credential(e){return Br._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.GITHUB_SIGN_IN_METHOD="github.com";Fo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends iu{constructor(){super("twitter.com")}static credential(e,t){return Br._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qo.credential(t,i)}catch{return null}}}qo.TWITTER_SIGN_IN_METHOD="twitter.com";qo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const l=await Qn._fromIdTokenResponse(e,i,s),d=xv(i);return new na({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=xv(i);return new na({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function xv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends Zn{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new lf(e,t,i,s)}}function U0(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?lf._fromErrorAndOperation(n,l,e,i):l})}async function hM(n,e,t=!1){const i=await Yl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return na._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(n,e,t=!1){const{auth:i}=n;if(Kn(i.app))return Promise.reject(Lr(i));const s="reauthenticate";try{const l=await Yl(n,U0(i,s,e,n),t);Ie(l.idToken,i,"internal-error");const d=np(l.idToken);Ie(d,i,"internal-error");const{sub:h}=d;return Ie(n.uid===h,i,"user-mismatch"),na._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Si(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(n,e,t=!1){if(Kn(n.app))return Promise.reject(Lr(n));const i="signIn",s=await U0(n,i,e),l=await na._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(l.user),l}function gM(n,e,t,i){return Bn(n).onIdTokenChanged(e,t,i)}function yM(n,e,t){return Bn(n).beforeAuthStateChanged(e,t)}function _M(n,e,t,i){return Bn(n).onAuthStateChanged(e,t,i)}function vM(n){return Bn(n).signOut()}const uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=1e3,EM=10;class O0 extends L0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=b0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,h,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);Ww()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,EM):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},TM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}O0.type="LOCAL";const SM=O0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends L0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}F0.type="SESSION";const q0=F0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Mf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:l}=t.data,d=this.handlersMap[s];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(d).map(async p=>p(t.origin,l)),g=await CM(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,d;return new Promise((h,g)=>{const p=sp("",20);s.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),s.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return window}function IM(n){yi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(){return typeof yi().WorkerGlobalScope<"u"&&typeof yi().importScripts=="function"}async function RM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function MM(){return B0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebaseLocalStorageDb",xM=1,cf="firebaseLocalStorage",G0="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xf(n,e){return n.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function DM(){const n=indexedDB.deleteDatabase(H0);return new ou(n).toPromise()}function vm(){const n=indexedDB.open(H0,xM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(cf,{keyPath:G0})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(cf)?e(i):(i.close(),await DM(),e(await vm()))})})}async function Dv(n,e,t){const i=xf(n,!0).put({[G0]:e,value:t});return new ou(i).toPromise()}async function NM(n,e){const t=xf(n,!1).get(e),i=await new ou(t).toPromise();return i===void 0?null:i.value}function Nv(n,e){const t=xf(n,!0).delete(e);return new ou(t).toPromise()}const bM=800,PM=3;class z0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>PM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mf._getInstance(MM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await RM(),!this.activeServiceWorker)return;this.sender=new AM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vm();return await Dv(e,uf,"1"),await Nv(e,uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Dv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>NM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=xf(s,!1).getAll();return new ou(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z0.type="LOCAL";const kM=z0;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(n,e){return e?eo(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends V0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VM(n){return pM(n.auth,new ap(n),n.bypassAuthState)}function UM(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),mM(t,new ap(n),n.bypassAuthState)}async function LM(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),hM(t,new ap(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t,i,s,l=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:l,error:d,type:h}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VM;case"linkViaPopup":case"linkViaRedirect":return LM;case"reauthViaPopup":case"reauthViaRedirect":return UM;default:Si(this.auth,"internal-error")}}resolve(e){io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){io(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new nu(2e3,1e4);async function FM(n,e,t){if(Kn(n.app))return Promise.reject(Wn(n,"operation-not-supported-in-this-environment"));const i=wf(n);Pw(n,e,rp);const s=Y0(i,t);return new Vr(i,"signInViaPopup",e,s).executeNotNull()}class Vr extends $0{constructor(e,t,i,s,l){super(e,t,s,l),this.provider=i,this.authWindow=null,this.pollId=null,Vr.currentPopupAction&&Vr.currentPopupAction.cancel(),Vr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){io(this.filter.length===1,"Popup operations only handle one event");const e=sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OM.get())};e()}}Vr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="pendingRedirect",Yc=new Map;class BM extends $0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const i=await HM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HM(n,e){const t=YM(e),i=zM(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function GM(n,e){Yc.set(n._key(),e)}function zM(n){return eo(n._redirectPersistence)}function YM(n){return zc(qM,n.config.apiKey,n.name)}async function $M(n,e,t=!1){if(Kn(n.app))return Promise.reject(Lr(n));const i=wf(n),s=Y0(i,e),d=await new BM(i,s,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=600*1e3;class KM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!J0(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Wn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JM&&this.cachedEventUids.clear(),this.cachedEventUids.has(bv(e))}saveEventToCache(e){this.cachedEventUids.add(bv(e)),this.lastProcessedEventTime=Date.now()}}function bv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function J0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(n,e={}){return fa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZM=/^https?/;async function jM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await XM(n);for(const t of e)try{if(e1(t))return}catch{}Si(n,"unauthorized-domain")}function e1(n){const e=ym(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!ZM.test(t))return!1;if(WM.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new nu(3e4,6e4);function Pv(){const n=yi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function n1(n){return new Promise((e,t)=>{var s,l,d;function i(){Pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pv(),t(Wn(n,"network-request-failed"))},timeout:t1.get()})}if((l=(s=yi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((d=yi().gapi)!=null&&d.load)i();else{const h=sM("iframefcb");return yi()[h]=()=>{gapi.load?i():t(Wn(n,"network-request-failed"))},oM(`${rM()}?onload=${h}`).catch(g=>t(g))}}).catch(e=>{throw $c=null,e})}let $c=null;function i1(n){return $c=$c||n1(n),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new nu(5e3,15e3),r1="__/auth/iframe",s1="emulator/auth/iframe",a1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u1(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ep(e,s1):`https://${n.config.authDomain}/${r1}`,i={apiKey:e.apiKey,appName:n.name,v:ca},s=l1.get(n.config.apiHost);s&&(i.eid=s);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${tu(i).slice(1)}`}async function c1(n){const e=await i1(n),t=yi().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:u1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a1,dontclear:!0},i=>new Promise(async(s,l)=>{await i.restyle({setHideOnLeave:!1});const d=Wn(n,"network-request-failed"),h=yi().setTimeout(()=>{l(d)},o1.get());function g(){yi().clearTimeout(h),s(i)}i.ping(g).then(g,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d1=500,h1=600,m1="_blank",p1="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g1(n,e,t,i=d1,s=h1){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const g={...f1,width:i.toString(),height:s.toString(),top:l,left:d},p=an().toLowerCase();t&&(h=w0(p)?m1:t),I0(p)&&(e=e||p1,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[x,V])=>`${S}${x}=${V},`,"");if(Xw(p)&&h!=="_self")return y1(e||"",h),new kv(null);const E=window.open(e||"",h,v);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new kv(E)}function y1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="__/auth/handler",v1="emulator/auth/handler",T1=encodeURIComponent("fac");async function Vv(n,e,t,i,s,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ca,eventId:s};if(e instanceof rp){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",yR(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))d[v]=E}if(e instanceof iu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(d.scopes=v.join(","))}n.tenantId&&(d.tid=n.tenantId);const h=d;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const g=await n._getAppCheckToken(),p=g?`#${T1}=${encodeURIComponent(g)}`:"";return`${E1(n)}?${tu(h).slice(1)}${p}`}function E1({config:n}){return n.emulator?ep(n,v1):`https://${n.authDomain}/${_1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="webStorageSupport";class S1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q0,this._completeRedirectFn=$M,this._overrideRedirectResult=GM}async _openPopup(e,t,i,s){var d;io((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const l=await Vv(e,t,i,ym(),s);return g1(e,l,sp())}async _openRedirect(e,t,i,s){await this._originValidation(e);const l=await Vv(e,t,i,ym(),s);return IM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(io(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await c1(e),i=new KM(e);return t.register("authEvent",s=>(Ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(om,{type:om},s=>{var d;const l=(d=s==null?void 0:s[0])==null?void 0:d[om];l!==void 0&&t(!!l),Si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return b0()||R0()||ip()}}const C1=S1;var Uv="@firebase/auth",Lv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R1(n){ta(new qr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=i.options;Ie(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P0(n)},p=new nM(i,s,l,g);return lM(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ta(new qr("auth-internal",e=>{const t=wf(e.getProvider("auth").getImmediate());return(i=>new A1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yo(Uv,Lv,I1(n)),Yo(Uv,Lv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=300,M1=u0("authIdTokenMaxAge")||w1;let Ov=null;const x1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>M1)return;const s=t==null?void 0:t.token;Ov!==s&&(Ov=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function D1(n=p0()){const e=Wm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=aM(n,{popupRedirectResolver:C1,persistence:[kM,SM,q0]}),i=u0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=x1(l.toString());yM(t,d,()=>d(t.currentUser)),gM(t,h=>d(h))}}const s=a0("auth");return s&&uM(t,`http://${s}`),t}function N1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}iM({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const l=Wn("internal-error");l.customData=s,t(l)},i.type="text/javascript",i.charset="UTF-8",N1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R1("Browser");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,K0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function M(){}M.prototype=w.prototype,D.D=w.prototype,D.prototype=new M,D.prototype.constructor=D,D.C=function(P,k,F){for(var b=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)b[ct-2]=arguments[ct];return w.prototype[k].apply(P,b)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,w,M){M||(M=0);var P=Array(16);if(typeof w=="string")for(var k=0;16>k;++k)P[k]=w.charCodeAt(M++)|w.charCodeAt(M++)<<8|w.charCodeAt(M++)<<16|w.charCodeAt(M++)<<24;else for(k=0;16>k;++k)P[k]=w[M++]|w[M++]<<8|w[M++]<<16|w[M++]<<24;w=D.g[0],M=D.g[1],k=D.g[2];var F=D.g[3],b=w+(F^M&(k^F))+P[0]+3614090360&4294967295;w=M+(b<<7&4294967295|b>>>25),b=F+(k^w&(M^k))+P[1]+3905402710&4294967295,F=w+(b<<12&4294967295|b>>>20),b=k+(M^F&(w^M))+P[2]+606105819&4294967295,k=F+(b<<17&4294967295|b>>>15),b=M+(w^k&(F^w))+P[3]+3250441966&4294967295,M=k+(b<<22&4294967295|b>>>10),b=w+(F^M&(k^F))+P[4]+4118548399&4294967295,w=M+(b<<7&4294967295|b>>>25),b=F+(k^w&(M^k))+P[5]+1200080426&4294967295,F=w+(b<<12&4294967295|b>>>20),b=k+(M^F&(w^M))+P[6]+2821735955&4294967295,k=F+(b<<17&4294967295|b>>>15),b=M+(w^k&(F^w))+P[7]+4249261313&4294967295,M=k+(b<<22&4294967295|b>>>10),b=w+(F^M&(k^F))+P[8]+1770035416&4294967295,w=M+(b<<7&4294967295|b>>>25),b=F+(k^w&(M^k))+P[9]+2336552879&4294967295,F=w+(b<<12&4294967295|b>>>20),b=k+(M^F&(w^M))+P[10]+4294925233&4294967295,k=F+(b<<17&4294967295|b>>>15),b=M+(w^k&(F^w))+P[11]+2304563134&4294967295,M=k+(b<<22&4294967295|b>>>10),b=w+(F^M&(k^F))+P[12]+1804603682&4294967295,w=M+(b<<7&4294967295|b>>>25),b=F+(k^w&(M^k))+P[13]+4254626195&4294967295,F=w+(b<<12&4294967295|b>>>20),b=k+(M^F&(w^M))+P[14]+2792965006&4294967295,k=F+(b<<17&4294967295|b>>>15),b=M+(w^k&(F^w))+P[15]+1236535329&4294967295,M=k+(b<<22&4294967295|b>>>10),b=w+(k^F&(M^k))+P[1]+4129170786&4294967295,w=M+(b<<5&4294967295|b>>>27),b=F+(M^k&(w^M))+P[6]+3225465664&4294967295,F=w+(b<<9&4294967295|b>>>23),b=k+(w^M&(F^w))+P[11]+643717713&4294967295,k=F+(b<<14&4294967295|b>>>18),b=M+(F^w&(k^F))+P[0]+3921069994&4294967295,M=k+(b<<20&4294967295|b>>>12),b=w+(k^F&(M^k))+P[5]+3593408605&4294967295,w=M+(b<<5&4294967295|b>>>27),b=F+(M^k&(w^M))+P[10]+38016083&4294967295,F=w+(b<<9&4294967295|b>>>23),b=k+(w^M&(F^w))+P[15]+3634488961&4294967295,k=F+(b<<14&4294967295|b>>>18),b=M+(F^w&(k^F))+P[4]+3889429448&4294967295,M=k+(b<<20&4294967295|b>>>12),b=w+(k^F&(M^k))+P[9]+568446438&4294967295,w=M+(b<<5&4294967295|b>>>27),b=F+(M^k&(w^M))+P[14]+3275163606&4294967295,F=w+(b<<9&4294967295|b>>>23),b=k+(w^M&(F^w))+P[3]+4107603335&4294967295,k=F+(b<<14&4294967295|b>>>18),b=M+(F^w&(k^F))+P[8]+1163531501&4294967295,M=k+(b<<20&4294967295|b>>>12),b=w+(k^F&(M^k))+P[13]+2850285829&4294967295,w=M+(b<<5&4294967295|b>>>27),b=F+(M^k&(w^M))+P[2]+4243563512&4294967295,F=w+(b<<9&4294967295|b>>>23),b=k+(w^M&(F^w))+P[7]+1735328473&4294967295,k=F+(b<<14&4294967295|b>>>18),b=M+(F^w&(k^F))+P[12]+2368359562&4294967295,M=k+(b<<20&4294967295|b>>>12),b=w+(M^k^F)+P[5]+4294588738&4294967295,w=M+(b<<4&4294967295|b>>>28),b=F+(w^M^k)+P[8]+2272392833&4294967295,F=w+(b<<11&4294967295|b>>>21),b=k+(F^w^M)+P[11]+1839030562&4294967295,k=F+(b<<16&4294967295|b>>>16),b=M+(k^F^w)+P[14]+4259657740&4294967295,M=k+(b<<23&4294967295|b>>>9),b=w+(M^k^F)+P[1]+2763975236&4294967295,w=M+(b<<4&4294967295|b>>>28),b=F+(w^M^k)+P[4]+1272893353&4294967295,F=w+(b<<11&4294967295|b>>>21),b=k+(F^w^M)+P[7]+4139469664&4294967295,k=F+(b<<16&4294967295|b>>>16),b=M+(k^F^w)+P[10]+3200236656&4294967295,M=k+(b<<23&4294967295|b>>>9),b=w+(M^k^F)+P[13]+681279174&4294967295,w=M+(b<<4&4294967295|b>>>28),b=F+(w^M^k)+P[0]+3936430074&4294967295,F=w+(b<<11&4294967295|b>>>21),b=k+(F^w^M)+P[3]+3572445317&4294967295,k=F+(b<<16&4294967295|b>>>16),b=M+(k^F^w)+P[6]+76029189&4294967295,M=k+(b<<23&4294967295|b>>>9),b=w+(M^k^F)+P[9]+3654602809&4294967295,w=M+(b<<4&4294967295|b>>>28),b=F+(w^M^k)+P[12]+3873151461&4294967295,F=w+(b<<11&4294967295|b>>>21),b=k+(F^w^M)+P[15]+530742520&4294967295,k=F+(b<<16&4294967295|b>>>16),b=M+(k^F^w)+P[2]+3299628645&4294967295,M=k+(b<<23&4294967295|b>>>9),b=w+(k^(M|~F))+P[0]+4096336452&4294967295,w=M+(b<<6&4294967295|b>>>26),b=F+(M^(w|~k))+P[7]+1126891415&4294967295,F=w+(b<<10&4294967295|b>>>22),b=k+(w^(F|~M))+P[14]+2878612391&4294967295,k=F+(b<<15&4294967295|b>>>17),b=M+(F^(k|~w))+P[5]+4237533241&4294967295,M=k+(b<<21&4294967295|b>>>11),b=w+(k^(M|~F))+P[12]+1700485571&4294967295,w=M+(b<<6&4294967295|b>>>26),b=F+(M^(w|~k))+P[3]+2399980690&4294967295,F=w+(b<<10&4294967295|b>>>22),b=k+(w^(F|~M))+P[10]+4293915773&4294967295,k=F+(b<<15&4294967295|b>>>17),b=M+(F^(k|~w))+P[1]+2240044497&4294967295,M=k+(b<<21&4294967295|b>>>11),b=w+(k^(M|~F))+P[8]+1873313359&4294967295,w=M+(b<<6&4294967295|b>>>26),b=F+(M^(w|~k))+P[15]+4264355552&4294967295,F=w+(b<<10&4294967295|b>>>22),b=k+(w^(F|~M))+P[6]+2734768916&4294967295,k=F+(b<<15&4294967295|b>>>17),b=M+(F^(k|~w))+P[13]+1309151649&4294967295,M=k+(b<<21&4294967295|b>>>11),b=w+(k^(M|~F))+P[4]+4149444226&4294967295,w=M+(b<<6&4294967295|b>>>26),b=F+(M^(w|~k))+P[11]+3174756917&4294967295,F=w+(b<<10&4294967295|b>>>22),b=k+(w^(F|~M))+P[2]+718787259&4294967295,k=F+(b<<15&4294967295|b>>>17),b=M+(F^(k|~w))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(k+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+F&4294967295}i.prototype.u=function(D,w){w===void 0&&(w=D.length);for(var M=w-this.blockSize,P=this.B,k=this.h,F=0;F<w;){if(k==0)for(;F<=M;)s(this,D,F),F+=this.blockSize;if(typeof D=="string"){for(;F<w;)if(P[k++]=D.charCodeAt(F++),k==this.blockSize){s(this,P),k=0;break}}else for(;F<w;)if(P[k++]=D[F++],k==this.blockSize){s(this,P),k=0;break}}this.h=k,this.o+=w},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;var M=8*this.o;for(w=D.length-8;w<D.length;++w)D[w]=M&255,M/=256;for(this.u(D),D=Array(16),w=M=0;4>w;++w)for(var P=0;32>P;P+=8)D[M++]=this.g[w]>>>P&255;return D};function l(D,w){var M=h;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=w(D)}function d(D,w){this.h=w;for(var M=[],P=!0,k=D.length-1;0<=k;k--){var F=D[k]|0;P&&F==w||(M[k]=F,P=!1)}this.g=M}var h={};function g(D){return-128<=D&&128>D?l(D,function(w){return new d([w|0],0>w?-1:0)}):new d([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return z(p(-D));for(var w=[],M=1,P=0;D>=M;P++)w[P]=D/M|0,M*=4294967296;return new d(w,0)}function v(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return z(v(D.substring(1),w));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=p(Math.pow(w,8)),P=E,k=0;k<D.length;k+=8){var F=Math.min(8,D.length-k),b=parseInt(D.substring(k,k+F),w);8>F?(F=p(Math.pow(w,F)),P=P.j(F).add(p(b))):(P=P.j(M),P=P.add(p(b)))}return P}var E=g(0),S=g(1),x=g(16777216);n=d.prototype,n.m=function(){if(q(this))return-z(this).m();for(var D=0,w=1,M=0;M<this.g.length;M++){var P=this.i(M);D+=(0<=P?P:4294967296+P)*w,w*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(V(this))return"0";if(q(this))return"-"+z(this).toString(D);for(var w=p(Math.pow(D,6)),M=this,P="";;){var k=X(M,w).g;M=j(M,k.j(w));var F=((0<M.g.length?M.g[0]:M.h)>>>0).toString(D);if(M=k,V(M))return F+P;for(;6>F.length;)F="0"+F;P=F+P}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function V(D){if(D.h!=0)return!1;for(var w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function q(D){return D.h==-1}n.l=function(D){return D=j(this,D),q(D)?-1:V(D)?0:1};function z(D){for(var w=D.g.length,M=[],P=0;P<w;P++)M[P]=~D.g[P];return new d(M,~D.h).add(S)}n.abs=function(){return q(this)?z(this):this},n.add=function(D){for(var w=Math.max(this.g.length,D.g.length),M=[],P=0,k=0;k<=w;k++){var F=P+(this.i(k)&65535)+(D.i(k)&65535),b=(F>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);P=b>>>16,F&=65535,b&=65535,M[k]=b<<16|F}return new d(M,M[M.length-1]&-2147483648?-1:0)};function j(D,w){return D.add(z(w))}n.j=function(D){if(V(this)||V(D))return E;if(q(this))return q(D)?z(this).j(z(D)):z(z(this).j(D));if(q(D))return z(this.j(z(D)));if(0>this.l(x)&&0>D.l(x))return p(this.m()*D.m());for(var w=this.g.length+D.g.length,M=[],P=0;P<2*w;P++)M[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<D.g.length;k++){var F=this.i(P)>>>16,b=this.i(P)&65535,ct=D.i(k)>>>16,Fe=D.i(k)&65535;M[2*P+2*k]+=b*Fe,H(M,2*P+2*k),M[2*P+2*k+1]+=F*Fe,H(M,2*P+2*k+1),M[2*P+2*k+1]+=b*ct,H(M,2*P+2*k+1),M[2*P+2*k+2]+=F*ct,H(M,2*P+2*k+2)}for(P=0;P<w;P++)M[P]=M[2*P+1]<<16|M[2*P];for(P=w;P<2*w;P++)M[P]=0;return new d(M,0)};function H(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function W(D,w){this.g=D,this.h=w}function X(D,w){if(V(w))throw Error("division by zero");if(V(D))return new W(E,E);if(q(D))return w=X(z(D),w),new W(z(w.g),z(w.h));if(q(w))return w=X(D,z(w)),new W(z(w.g),w.h);if(30<D.g.length){if(q(D)||q(w))throw Error("slowDivide_ only works with positive integers.");for(var M=S,P=w;0>=P.l(D);)M=J(M),P=J(P);var k=se(M,1),F=se(P,1);for(P=se(P,2),M=se(M,2);!V(P);){var b=F.add(P);0>=b.l(D)&&(k=k.add(M),F=b),P=se(P,1),M=se(M,1)}return w=j(D,k.j(w)),new W(k,w)}for(k=E;0<=D.l(w);){for(M=Math.max(1,Math.floor(D.m()/w.m())),P=Math.ceil(Math.log(M)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),F=p(M),b=F.j(w);q(b)||0<b.l(D);)M-=P,F=p(M),b=F.j(w);V(F)&&(F=S),k=k.add(F),D=j(D,b)}return new W(k,D)}n.A=function(D){return X(this,D).h},n.and=function(D){for(var w=Math.max(this.g.length,D.g.length),M=[],P=0;P<w;P++)M[P]=this.i(P)&D.i(P);return new d(M,this.h&D.h)},n.or=function(D){for(var w=Math.max(this.g.length,D.g.length),M=[],P=0;P<w;P++)M[P]=this.i(P)|D.i(P);return new d(M,this.h|D.h)},n.xor=function(D){for(var w=Math.max(this.g.length,D.g.length),M=[],P=0;P<w;P++)M[P]=this.i(P)^D.i(P);return new d(M,this.h^D.h)};function J(D){for(var w=D.g.length+1,M=[],P=0;P<w;P++)M[P]=D.i(P)<<1|D.i(P-1)>>>31;return new d(M,D.h)}function se(D,w){var M=w>>5;w%=32;for(var P=D.g.length-M,k=[],F=0;F<P;F++)k[F]=0<w?D.i(F+M)>>>w|D.i(F+M+1)<<32-w:D.i(F+M);return new d(k,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,K0=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=v,$o=d}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q0,Nl,X0,Jc,Tm,W0,Z0,j0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,T,C){return m==Array.prototype||m==Object.prototype||(m[T]=C.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vc=="object"&&Vc];for(var T=0;T<m.length;++T){var C=m[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function s(m,T){if(T)e:{var C=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var G=m[R];if(!(G in C))break e;C=C[G]}m=m[m.length-1],R=C[m],T=T(R),T!=R&&T!=null&&e(C,m,{configurable:!0,writable:!0,value:T})}}function l(m,T){m instanceof String&&(m+="");var C=0,R=!1,G={next:function(){if(!R&&C<m.length){var Z=C++;return{value:T(Z,m[Z]),done:!1}}return R=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(m){return m||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},h=this||self;function g(m){var T=typeof m;return T=T!="object"?T:m?Array.isArray(m)?"array":T:"null",T=="array"||T=="object"&&typeof m.length=="number"}function p(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function v(m,T,C){return m.call.apply(m.bind,arguments)}function E(m,T,C){if(!m)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,R),m.apply(T,G)}}return function(){return m.apply(T,arguments)}}function S(m,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function x(m,T){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function V(m,T){function C(){}C.prototype=T.prototype,m.aa=T.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(R,G,Z){for(var ue=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ue[qe-2]=arguments[qe];return T.prototype[G].apply(R,ue)}}function q(m){const T=m.length;if(0<T){const C=Array(T);for(let R=0;R<T;R++)C[R]=m[R];return C}return[]}function z(m,T){for(let C=1;C<arguments.length;C++){const R=arguments[C];if(g(R)){const G=m.length||0,Z=R.length||0;m.length=G+Z;for(let ue=0;ue<Z;ue++)m[G+ue]=R[ue]}else m.push(R)}}class j{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function H(m){return/^[\s\xa0]*$/.test(m)}function W(){var m=h.navigator;return m&&(m=m.userAgent)?m:""}function X(m){return X[" "](m),m}X[" "]=function(){};var J=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function se(m,T,C){for(const R in m)T.call(C,m[R],R,m)}function D(m,T){for(const C in m)T.call(void 0,m[C],C,m)}function w(m){const T={};for(const C in m)T[C]=m[C];return T}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(m,T){let C,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(C in R)m[C]=R[C];for(let Z=0;Z<M.length;Z++)C=M[Z],Object.prototype.hasOwnProperty.call(R,C)&&(m[C]=R[C])}}function k(m){var T=1;m=m.split(":");const C=[];for(;0<T&&m.length;)C.push(m.shift()),T--;return m.length&&C.push(m.join(":")),C}function F(m){h.setTimeout(()=>{throw m},0)}function b(){var m=ze;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class ct{constructor(){this.h=this.g=null}add(T,C){const R=Fe.get();R.set(T,C),this.h?this.h.next=R:this.g=R,this.h=R}}var Fe=new j(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,pe=!1,ze=new ct,U=()=>{const m=h.Promise.resolve(void 0);ce=()=>{m.then(re)}};var re=()=>{for(var m;m=b();){try{m.h.call(m.g)}catch(C){F(C)}var T=Fe;T.j(m),100>T.h&&(T.h++,m.next=T.g,T.g=m)}pe=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};h.addEventListener("test",C,T),h.removeEventListener("test",C,T)}catch{}return m})();function Ne(m,T){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget){if(J){e:{try{X(T.nodeName);var G=!0;break e}catch{}G=!1}G||(T=null)}}else C=="mouseover"?T=m.fromElement:C=="mouseout"&&(T=m.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ce[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ne.aa.h.call(this)}}V(Ne,le);var Ce={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),je=0;function Re(m,T,C,R,G){this.listener=m,this.proxy=null,this.src=T,this.type=C,this.capture=!!R,this.ha=G,this.key=++je,this.da=this.fa=!1}function ft(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function dt(m){this.src=m,this.g={},this.h=0}dt.prototype.add=function(m,T,C,R,G){var Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);var ue=Ri(m,T,R,G);return-1<ue?(T=m[ue],C||(T.fa=!1)):(T=new Re(T,this.src,Z,!!R,G),T.fa=C,m.push(T)),T};function Zt(m,T){var C=T.type;if(C in m.g){var R=m.g[C],G=Array.prototype.indexOf.call(R,T,void 0),Z;(Z=0<=G)&&Array.prototype.splice.call(R,G,1),Z&&(ft(T),m.g[C].length==0&&(delete m.g[C],m.h--))}}function Ri(m,T,C,R){for(var G=0;G<m.length;++G){var Z=m[G];if(!Z.da&&Z.listener==T&&Z.capture==!!C&&Z.ha==R)return G}return-1}var jn="closure_lm_"+(1e6*Math.random()|0),ao={};function Ta(m,T,C,R,G){if(Array.isArray(T)){for(var Z=0;Z<T.length;Z++)Ta(m,T[Z],C,R,G);return null}return C=fu(C),m&&m[Ct]?m.K(T,C,p(R)?!!R.capture:!1,G):In(m,T,C,!1,R,G)}function In(m,T,C,R,G,Z){if(!T)throw Error("Invalid event type");var ue=p(G)?!!G.capture:!!G,qe=Zr(m);if(qe||(m[jn]=qe=new dt(m)),C=qe.add(T,C,R,ue,Z),C.proxy)return C;if(R=$f(),C.proxy=R,R.src=m,R.listener=C,m.addEventListener)_e||(G=ue),G===void 0&&(G=!1),m.addEventListener(T.toString(),R,G);else if(m.attachEvent)m.attachEvent(er(T.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function $f(){function m(C){return T.call(m.src,m.listener,C)}const T=Jf;return m}function Ea(m,T,C,R,G){if(Array.isArray(T))for(var Z=0;Z<T.length;Z++)Ea(m,T[Z],C,R,G);else R=p(R)?!!R.capture:!!R,C=fu(C),m&&m[Ct]?(m=m.i,T=String(T).toString(),T in m.g&&(Z=m.g[T],C=Ri(Z,C,R,G),-1<C&&(ft(Z[C]),Array.prototype.splice.call(Z,C,1),Z.length==0&&(delete m.g[T],m.h--)))):m&&(m=Zr(m))&&(T=m.g[T.toString()],m=-1,T&&(m=Ri(T,C,R,G)),(C=-1<m?T[m]:null)&&Wr(C))}function Wr(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[Ct])Zt(T.i,m);else{var C=m.type,R=m.proxy;T.removeEventListener?T.removeEventListener(C,R,m.capture):T.detachEvent?T.detachEvent(er(C),R):T.addListener&&T.removeListener&&T.removeListener(R),(C=Zr(T))?(Zt(C,m),C.h==0&&(C.src=null,T[jn]=null)):ft(m)}}}function er(m){return m in ao?ao[m]:ao[m]="on"+m}function Jf(m,T){if(m.da)m=!0;else{T=new Ne(T,this);var C=m.listener,R=m.ha||m.src;m.fa&&Wr(m),m=C.call(R,T)}return m}function Zr(m){return m=m[jn],m instanceof dt?m:null}var Sa="__closure_events_fn_"+(1e9*Math.random()>>>0);function fu(m){return typeof m=="function"?m:(m[Sa]||(m[Sa]=function(T){return m.handleEvent(T)}),m[Sa])}function gt(){fe.call(this),this.i=new dt(this),this.M=this,this.F=null}V(gt,fe),gt.prototype[Ct]=!0,gt.prototype.removeEventListener=function(m,T,C,R){Ea(this,m,T,C,R)};function Xe(m,T){var C,R=m.F;if(R)for(C=[];R;R=R.F)C.push(R);if(m=m.M,R=T.type||T,typeof T=="string")T=new le(T,m);else if(T instanceof le)T.target=T.target||m;else{var G=T;T=new le(R,m),P(T,G)}if(G=!0,C)for(var Z=C.length-1;0<=Z;Z--){var ue=T.g=C[Z];G=gn(ue,R,!0,T)&&G}if(ue=T.g=m,G=gn(ue,R,!0,T)&&G,G=gn(ue,R,!1,T)&&G,C)for(Z=0;Z<C.length;Z++)ue=T.g=C[Z],G=gn(ue,R,!1,T)&&G}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var m=this.i,T;for(T in m.g){for(var C=m.g[T],R=0;R<C.length;R++)ft(C[R]);delete m.g[T],m.h--}}this.F=null},gt.prototype.K=function(m,T,C,R){return this.i.add(String(m),T,!1,C,R)},gt.prototype.L=function(m,T,C,R){return this.i.add(String(m),T,!0,C,R)};function gn(m,T,C,R){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();for(var G=!0,Z=0;Z<T.length;++Z){var ue=T[Z];if(ue&&!ue.da&&ue.capture==C){var qe=ue.listener,Nt=ue.ha||ue.src;ue.fa&&Zt(m.i,ue),G=qe.call(Nt,R)!==!1&&G}}return G&&!R.defaultPrevented}function jt(m,T,C){if(typeof m=="function")C&&(m=S(m,C));else if(m&&typeof m.handleEvent=="function")m=S(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:h.setTimeout(m,T||0)}function du(m){m.g=jt(()=>{m.g=null,m.i&&(m.i=!1,du(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class Kf extends fe{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:du(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(m){fe.call(this),this.h=m,this.g={}}V(tr,fe);var nr=[];function ir(m){se(m.g,function(T,C){this.g.hasOwnProperty(C)&&Wr(T)},m),m.g={}}tr.prototype.N=function(){tr.aa.N.call(this),ir(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=h.JSON.stringify,jr=h.JSON.parse,or=class{stringify(m){return h.JSON.stringify(m,void 0)}parse(m){return h.JSON.parse(m,void 0)}};function Ca(){}Ca.prototype.h=null;function Aa(m){return m.h||(m.h=m.i())}function Ia(){}var wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){le.call(this,"d")}V(Mi,le);function Ra(){le.call(this,"c")}V(Ra,le);var ei={},wa=null;function lo(){return wa=wa||new gt}ei.La="serverreachability";function es(m){le.call(this,ei.La,m)}V(es,le);function uo(m){const T=lo();Xe(T,new es(T))}ei.STAT_EVENT="statevent";function hu(m,T){le.call(this,ei.STAT_EVENT,m),this.stat=T}V(hu,le);function lt(m){const T=lo();Xe(T,new hu(T,m))}ei.Ma="timingevent";function Dt(m,T){le.call(this,ei.Ma,m),this.size=T}V(Dt,le);function At(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){m()},T)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function Ma(m,T,C,R,G,Z){m.info(function(){if(m.g)if(Z)for(var ue="",qe=Z.split("&"),Nt=0;Nt<qe.length;Nt++){var Be=qe[Nt].split("=");if(1<Be.length){var Ot=Be[0];Be=Be[1];var bt=Ot.split("_");ue=2<=bt.length&&bt[1]=="type"?ue+(Ot+"="+Be+"&"):ue+(Ot+"=redacted&")}}else ue=null;else ue=Z;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+T+`
`+C+`
`+ue})}function Qf(m,T,C,R,G,Z,ue){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+T+`
`+C+`
`+Z+" "+ue})}function co(m,T,C,R){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+rr(m,C)+(R?" "+R:"")})}function mu(m,T){m.info(function(){return"TIMEOUT: "+T})}Rn.prototype.info=function(){};function rr(m,T){if(!m.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var R=C[m];if(!(2>R.length)){var G=R[1];if(Array.isArray(G)&&!(1>G.length)){var Z=G[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ue=1;ue<G.length;ue++)G[ue]=""}}}}return Hn(C)}catch{return T}}var fo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ni(){}V(ni,Ca),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},ti=new ni;function ln(m,T,C,R){this.j=m,this.i=T,this.l=C,this.R=R||1,this.U=new tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var xa={},ts={};function Gn(m,T,C){m.L=1,m.v=cr(yn(T)),m.m=C,m.P=!0,Di(m,null)}function Di(m,T){m.F=Date.now(),sr(m),m.A=yn(m.v);var C=m.A,R=m.R;Array.isArray(R)||(R=[String(R)]),Va(C.i,"t",R),m.C=0,C=m.j.J,m.h=new vt,m.g=Du(m.j,C?T:null,!m.m),0<m.O&&(m.M=new Kf(S(m.Y,m,m.g),m.O)),T=m.U,C=m.g,R=m.ca;var G="readystatechange";Array.isArray(G)||(G&&(nr[0]=G.toString()),G=nr);for(var Z=0;Z<G.length;Z++){var ue=Ta(C,G[Z],R||T.handleEvent,!1,T.h||T);if(!ue)break;T.g[ue.key]=ue}T=m.H?w(m.H):{},m.m?(m.u||(m.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,T)):(m.u="GET",m.g.ea(m.A,m.u,null,T)),uo(),Ma(m.i,m.u,m.A,m.l,m.R,m.m)}ln.prototype.ca=function(m){m=m.target;const T=this.M;T&&Dn(m)==3?T.j():this.Y(m)},ln.prototype.Y=function(m){try{if(m==this.g)e:{const bt=Dn(this.g);var T=this.g.Ba();const Oi=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||Su(this.g)))){this.J||bt!=4||T==7||(T==8||0>=Oi?uo(3):uo(2)),ho(this);var C=this.g.Z();this.X=C;t:if(pu(this)){var R=Su(this.g);m="";var G=R.length,Z=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ii(this);var ue="";break t}this.h.i=new h.TextDecoder}for(T=0;T<G;T++)this.h.h=!0,m+=this.h.i.decode(R[T],{stream:!(Z&&T==G-1)});R.length=0,this.h.g+=m,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=C==200,Qf(this.i,this.u,this.A,this.l,this.R,bt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Nt=this.g;if((qe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(qe)){var Be=qe;break t}}Be=null}if(C=Be)co(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ar(this,C);else{this.o=!1,this.s=3,lt(12),zt(this),ii(this);break e}}if(this.P){C=!0;let Yt;for(;!this.J&&this.C<ue.length;)if(Yt=gu(this,ue),Yt==ts){bt==4&&(this.s=4,lt(14),C=!1),co(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==xa){this.s=4,lt(15),co(this.i,this.l,ue,"[Invalid Chunk]"),C=!1;break}else co(this.i,this.l,Yt,null),ar(this,Yt);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||ue.length!=0||this.h.h||(this.s=1,lt(16),C=!1),this.o=this.o&&C,!C)co(this.i,this.l,ue,"[Invalid Chunked Response]"),zt(this),ii(this);else if(0<ue.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),_r(Ot),Ot.M=!0,lt(11))}}else co(this.i,this.l,ue,null),ar(this,ue);bt==4&&zt(this),this.o&&!this.J&&(bt==4?wu(this.j,this):(this.o=!1,sr(this)))}else ed(this.g),C==400&&0<ue.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),zt(this),ii(this)}}}catch{}finally{}};function pu(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function gu(m,T){var C=m.C,R=T.indexOf(`
`,C);return R==-1?ts:(C=Number(T.substring(C,R)),isNaN(C)?xa:(R+=1,R+C>T.length?ts:(T=T.slice(R,R+C),m.C=R+C,T)))}ln.prototype.cancel=function(){this.J=!0,zt(this)};function sr(m){m.S=Date.now()+m.I,yu(m,m.I)}function yu(m,T){if(m.B!=null)throw Error("WatchDog timer not null");m.B=At(S(m.ba,m),T)}function ho(m){m.B&&(h.clearTimeout(m.B),m.B=null)}ln.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(mu(this.i,this.A),this.L!=2&&(uo(),lt(17)),zt(this),this.s=2,ii(this)):yu(this,this.S-m)};function ii(m){m.j.G==0||m.J||wu(m.j,m)}function zt(m){ho(m);var T=m.M;T&&typeof T.ma=="function"&&T.ma(),m.M=null,ir(m.U),m.g&&(T=m.g,m.g=null,T.abort(),T.ma())}function ar(m,T){try{var C=m.j;if(C.G!=0&&(C.g==m||Da(C.h,m))){if(!m.K&&Da(C.h,m)&&C.G==3){try{var R=C.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)hs(C),fs(C);else break e;qa(C),lt(18)}}else C.za=G[1],0<C.za-C.T&&37500>G[2]&&C.F&&C.v==0&&!C.C&&(C.C=At(S(C.Za,C),6e3));if(1>=is(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Li(C,11)}else if((m.K||C.g==m)&&hs(C),!H(T))for(G=C.Da.g.parse(T),T=0;T<G.length;T++){let Be=G[T];if(C.T=Be[0],Be=Be[1],C.G==2)if(Be[0]=="c"){C.K=Be[1],C.ia=Be[2];const Ot=Be[3];Ot!=null&&(C.la=Ot,C.j.info("VER="+C.la));const bt=Be[4];bt!=null&&(C.Aa=bt,C.j.info("SVER="+C.Aa));const Oi=Be[5];Oi!=null&&typeof Oi=="number"&&0<Oi&&(R=1.5*Oi,C.L=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const Yt=m.g;if(Yt){const ci=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ci){var Z=R.h;Z.g||ci.indexOf("spdy")==-1&&ci.indexOf("quic")==-1&&ci.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(os(Z,Z.h),Z.h=null))}if(R.D){const Ha=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(R.ya=Ha,et(R.I,R.D,Ha))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),R=C;var ue=m;if(R.qa=xu(R,R.J?R.ia:null,R.W),ue.K){un(R.h,ue);var qe=ue,Nt=R.L;Nt&&(qe.I=Nt),qe.B&&(ho(qe),sr(qe)),R.g=ue}else Iu(R);0<C.i.length&&ds(C)}else Be[0]!="stop"&&Be[0]!="close"||Li(C,7);else C.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Li(C,7):Oa(C):Be[0]!="noop"&&C.l&&C.l.ta(Be),C.v=0)}}uo(4)}catch{}}var _u=class{constructor(m,T){this.g=m,this.map=T}};function Ni(m){this.l=m||10,h.PerformanceNavigationTiming?(m=h.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ns(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function is(m){return m.h?1:m.g?m.g.size:0}function Da(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function os(m,T){m.g?m.g.add(T):m.h=T}function un(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}Ni.prototype.cancel=function(){if(this.i=Na(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Na(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const C of m.g.values())T=T.concat(C.D);return T}return q(m.i)}function Xf(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(g(m)){for(var T=[],C=m.length,R=0;R<C;R++)T.push(m[R]);return T}T=[],C=0;for(R in m)T[C++]=m[R];return T}function rs(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(g(m)||typeof m=="string"){var T=[];m=m.length;for(var C=0;C<m;C++)T.push(C);return T}T=[],C=0;for(const R in m)T[C++]=R;return T}}}function ba(m,T){if(m.forEach&&typeof m.forEach=="function")m.forEach(T,void 0);else if(g(m)||typeof m=="string")Array.prototype.forEach.call(m,T,void 0);else for(var C=rs(m),R=Xf(m),G=R.length,Z=0;Z<G;Z++)T.call(void 0,R[Z],C&&C[Z],m)}var lr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wf(m,T){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var R=m[C].indexOf("="),G=null;if(0<=R){var Z=m[C].substring(0,R);G=m[C].substring(R+1)}else Z=m[C];T(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function It(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof It){this.h=m.h,ur(this,m.j),this.o=m.o,this.g=m.g,mo(this,m.s),this.l=m.l;var T=m.i,C=new Pi;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),bi(this,C),this.m=m.m}else m&&(T=String(m).match(lr))?(this.h=!1,ur(this,T[1]||"",!0),this.o=wn(T[2]||""),this.g=wn(T[3]||"",!0),mo(this,T[4]),this.l=wn(T[5]||"",!0),bi(this,T[6]||"",!0),this.m=wn(T[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}It.prototype.toString=function(){var m=[],T=this.j;T&&m.push(fr(T,Pa,!0),":");var C=this.g;return(C||T=="file")&&(m.push("//"),(T=this.o)&&m.push(fr(T,Pa,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(fr(C,C.charAt(0)=="/"?Zf:ka,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",fr(C,ss)),m.join("")};function yn(m){return new It(m)}function ur(m,T,C){m.j=C?wn(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function mo(m,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);m.s=T}else m.s=null}function bi(m,T,C){T instanceof Pi?(m.i=T,Tu(m.i,m.h)):(C||(T=fr(T,jf)),m.i=new Pi(T,m.h))}function et(m,T,C){m.i.set(T,C)}function cr(m){return et(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function wn(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function fr(m,T,C){return typeof m=="string"?(m=encodeURI(m).replace(T,vu),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function vu(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Pa=/[#\/\?@]/g,ka=/[#\?:]/g,Zf=/[#\?]/g,jf=/[#\?@]/g,ss=/#/g;function Pi(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Mn(m){m.g||(m.g=new Map,m.h=0,m.i&&Wf(m.i,function(T,C){m.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Pi.prototype,n.add=function(m,T){Mn(this),this.i=null,m=oi(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(T),this.h+=1,this};function ki(m,T){Mn(m),T=oi(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function Vi(m,T){return Mn(m),T=oi(m,T),m.g.has(T)}n.forEach=function(m,T){Mn(this),this.g.forEach(function(C,R){C.forEach(function(G){m.call(T,G,R,this)},this)},this)},n.na=function(){Mn(this);const m=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let R=0;R<T.length;R++){const G=m[R];for(let Z=0;Z<G.length;Z++)C.push(T[R])}return C},n.V=function(m){Mn(this);let T=[];if(typeof m=="string")Vi(this,m)&&(T=T.concat(this.g.get(oi(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)T=T.concat(m[C])}return T},n.set=function(m,T){return Mn(this),this.i=null,m=oi(this,m),Vi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=this.V(m),0<m.length?String(m[0]):T):T};function Va(m,T,C){ki(m,T),0<C.length&&(m.i=null,m.g.set(oi(m,T),q(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var R=T[C];const Z=encodeURIComponent(String(R)),ue=this.V(R);for(R=0;R<ue.length;R++){var G=Z;ue[R]!==""&&(G+="="+encodeURIComponent(String(ue[R]))),m.push(G)}}return this.i=m.join("&")};function oi(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function Tu(m,T){T&&!m.j&&(Mn(m),m.i=null,m.g.forEach(function(C,R){var G=R.toLowerCase();R!=G&&(ki(this,R),Va(this,G,C))},m)),m.j=T}function dr(m,T){const C=new Rn;if(h.Image){const R=new Image;R.onload=x(xn,C,"TestLoadImage: loaded",!0,T,R),R.onerror=x(xn,C,"TestLoadImage: error",!1,T,R),R.onabort=x(xn,C,"TestLoadImage: abort",!1,T,R),R.ontimeout=x(xn,C,"TestLoadImage: timeout",!1,T,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else T(!1)}function zn(m,T){const C=new Rn,R=new AbortController,G=setTimeout(()=>{R.abort(),xn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:R.signal}).then(Z=>{clearTimeout(G),Z.ok?xn(C,"TestPingServer: ok",!0,T):xn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(G),xn(C,"TestPingServer: error",!1,T)})}function xn(m,T,C,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(C)}catch{}}function hr(){this.g=new or}function ri(m,T,C){const R=C||"";try{ba(m,function(G,Z){let ue=G;p(G)&&(ue=Hn(G)),T.push(R+Z+"="+encodeURIComponent(ue))})}catch(G){throw T.push(R+"type="+encodeURIComponent("_badmap")),G}}function po(m){this.l=m.Ub||null,this.j=m.eb||!1}V(po,Ca),po.prototype.g=function(){return new Ui(this.l,this.j)},po.prototype.i=(function(m){return function(){return m}})({});function Ui(m,T){gt.call(this),this.D=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Ui,gt),n=Ui.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=T,this.readyState=1,ai(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(T.body=m),(this.D||h).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ua(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ua(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?si(this):ai(this),this.readyState==3&&Ua(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,si(this))},n.Qa=function(m){this.g&&(this.response=m,si(this))},n.ga=function(){this.g&&si(this)};function si(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ai(m)}n.setRequestHeader=function(m,T){this.u.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=T.next();return m.join(`\r
`)};function ai(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function La(m){let T="";return se(m,function(C,R){T+=R,T+=":",T+=C,T+=`\r
`}),T}function Lt(m,T,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=La(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):et(m,T,C))}function Ke(m){gt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Ke,gt);var as=/^https?$/i,mr=["POST","PUT"];n=Ke.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,T,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?Aa(this.o):Aa(ti),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(Z){Eu(this,Z);return}if(m=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)C.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Z of R.keys())C.set(Z,R.get(Z));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=h.FormData&&m instanceof h.FormData,!(0<=Array.prototype.indexOf.call(mr,T,void 0))||R||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ue]of C)this.g.setRequestHeader(Z,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pr(this),this.u=!0,this.g.send(m),this.u=!1}catch(Z){Eu(this,Z)}};function Eu(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.m=5,ls(m),li(m)}function ls(m){m.A||(m.A=!0,Xe(m,"complete"),Xe(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Xe(this,"complete"),Xe(this,"abort"),li(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?us(this):this.bb())},n.bb=function(){us(this)};function us(m){if(m.h&&typeof d<"u"&&(!m.v[1]||Dn(m)!=4||m.Z()!=2)){if(m.u&&Dn(m)==4)jt(m.Ea,0,m);else if(Xe(m,"readystatechange"),Dn(m)==4){m.h=!1;try{const ue=m.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var R;if(R=ue===0){var G=String(m.D).match(lr)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),R=!as.test(G?G.toLowerCase():"")}C=R}if(C)Xe(m,"complete"),Xe(m,"success");else{m.m=6;try{var Z=2<Dn(m)?m.g.statusText:""}catch{Z=""}m.l=Z+" ["+m.Z()+"]",ls(m)}}finally{li(m)}}}}function li(m,T){if(m.g){pr(m);const C=m.g,R=m.v[0]?()=>{}:null;m.g=null,m.v=null,T||Xe(m,"ready");try{C.onreadystatechange=R}catch{}}}function pr(m){m.I&&(h.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Dn(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),jr(T)}};function Su(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ed(m){const T={};m=(m.g&&2<=Dn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(H(m[R]))continue;var C=k(m[R]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Z=T[G]||[];T[G]=Z,Z.push(C)}D(T,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gr(m,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||T}function cs(m){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gr("baseRetryDelayMs",5e3,m),this.cb=gr("retryDelaySeedMs",1e4,m),this.Wa=gr("forwardChannelMaxRetries",2,m),this.wa=gr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(m&&m.concurrentRequestLimit),this.Da=new hr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=cs.prototype,n.la=8,n.G=1,n.connect=function(m,T,C,R){lt(0),this.W=m,this.H=T||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.I=xu(this,null,this.W),ds(this)};function Oa(m){if(Cu(m),m.G==3){var T=m.U++,C=yn(m.I);if(et(C,"SID",m.K),et(C,"RID",T),et(C,"TYPE","terminate"),yr(m,C),T=new ln(m,m.j,T),T.L=2,T.v=cr(yn(C)),C=!1,h.navigator&&h.navigator.sendBeacon)try{C=h.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&h.Image&&(new Image().src=T.v,C=!0),C||(T.g=Du(T.j,null),T.g.ea(T.v)),T.F=Date.now(),sr(T)}Mu(m)}function fs(m){m.g&&(_r(m),m.g.cancel(),m.g=null)}function Cu(m){fs(m),m.u&&(h.clearTimeout(m.u),m.u=null),hs(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&h.clearTimeout(m.s),m.s=null)}function ds(m){if(!ns(m.h)&&!m.s){m.s=!0;var T=m.Ga;ce||U(),pe||(ce(),pe=!0),ze.add(T,m),m.B=0}}function td(m,T){return is(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=T.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=At(S(m.Ga,m,T),Ba(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const G=new ln(this,this.j,m);let Z=this.o;if(this.S&&(Z?(Z=w(Z),P(Z,this.S)):Z=this.S),this.m!==null||this.O||(G.H=Z,Z=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=Au(this,G,T),C=yn(this.I),et(C,"RID",m),et(C,"CVER",22),this.D&&et(C,"X-HTTP-Session-Id",this.D),yr(this,C),Z&&(this.O?T="headers="+encodeURIComponent(String(La(Z)))+"&"+T:this.m&&Lt(C,this.m,Z)),os(this.h,G),this.Ua&&et(C,"TYPE","init"),this.P?(et(C,"$req",T),et(C,"SID","null"),G.T=!0,Gn(G,C,null)):Gn(G,C,T),this.G=2}}else this.G==3&&(m?Fa(this,m):this.i.length==0||ns(this.h)||Fa(this))};function Fa(m,T){var C;T?C=T.l:C=m.U++;const R=yn(m.I);et(R,"SID",m.K),et(R,"RID",C),et(R,"AID",m.T),yr(m,R),m.m&&m.o&&Lt(R,m.m,m.o),C=new ln(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),T&&(m.i=T.D.concat(m.i)),T=Au(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),os(m.h,C),Gn(C,R,T)}function yr(m,T){m.H&&se(m.H,function(C,R){et(T,R,C)}),m.l&&ba({},function(C,R){et(T,R,C)})}function Au(m,T,C){C=Math.min(m.i.length,C);var R=m.l?S(m.l.Na,m.l,m):null;e:{var G=m.i;let Z=-1;for(;;){const ue=["count="+C];Z==-1?0<C?(Z=G[0].g,ue.push("ofs="+Z)):Z=0:ue.push("ofs="+Z);let qe=!0;for(let Nt=0;Nt<C;Nt++){let Be=G[Nt].g;const Ot=G[Nt].map;if(Be-=Z,0>Be)Z=Math.max(0,G[Nt].g-100),qe=!1;else try{ri(Ot,ue,"req"+Be+"_")}catch{R&&R(Ot)}}if(qe){R=ue.join("&");break e}}}return m=m.i.splice(0,C),T.D=m,R}function Iu(m){if(!m.g&&!m.u){m.Y=1;var T=m.Fa;ce||U(),pe||(ce(),pe=!0),ze.add(T,m),m.v=0}}function qa(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=At(S(m.Fa,m),Ba(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Ru(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=At(S(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),fs(this),Ru(this))};function _r(m){m.A!=null&&(h.clearTimeout(m.A),m.A=null)}function Ru(m){m.g=new ln(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var T=yn(m.qa);et(T,"RID","rpc"),et(T,"SID",m.K),et(T,"AID",m.T),et(T,"CI",m.F?"0":"1"),!m.F&&m.ja&&et(T,"TO",m.ja),et(T,"TYPE","xmlhttp"),yr(m,T),m.m&&m.o&&Lt(T,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=cr(yn(T)),C.m=null,C.P=!0,Di(C,m)}n.Za=function(){this.C!=null&&(this.C=null,fs(this),qa(this),lt(19))};function hs(m){m.C!=null&&(h.clearTimeout(m.C),m.C=null)}function wu(m,T){var C=null;if(m.g==T){hs(m),_r(m),m.g=null;var R=2}else if(Da(m.h,T))C=T.D,un(m.h,T),R=1;else return;if(m.G!=0){if(T.o)if(R==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var G=m.B;R=lo(),Xe(R,new Dt(R,C)),ds(m)}else Iu(m);else if(G=T.s,G==3||G==0&&0<T.X||!(R==1&&td(m,T)||R==2&&qa(m)))switch(C&&0<C.length&&(T=m.h,T.i=T.i.concat(C)),G){case 1:Li(m,5);break;case 4:Li(m,10);break;case 3:Li(m,6);break;default:Li(m,2)}}}function Ba(m,T){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*T}function Li(m,T){if(m.j.info("Error code "+T),T==2){var C=S(m.fb,m),R=m.Xa;const G=!R;R=new It(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ur(R,"https"),cr(R),G?dr(R.toString(),C):zn(R.toString(),C)}else lt(2);m.G=0,m.l&&m.l.sa(T),Mu(m),Cu(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Mu(m){if(m.G=0,m.ka=[],m.l){const T=Na(m.h);(T.length!=0||m.i.length!=0)&&(z(m.ka,T),z(m.ka,m.i),m.h.i.length=0,q(m.i),m.i.length=0),m.l.ra()}}function xu(m,T,C){var R=C instanceof It?yn(C):new It(C);if(R.g!="")T&&(R.g=T+"."+R.g),mo(R,R.s);else{var G=h.location;R=G.protocol,T=T?T+"."+G.hostname:G.hostname,G=+G.port;var Z=new It(null);R&&ur(Z,R),T&&(Z.g=T),G&&mo(Z,G),C&&(Z.l=C),R=Z}return C=m.D,T=m.ya,C&&T&&et(R,C,T),et(R,"VER",m.la),yr(m,R),R}function Du(m,T,C){if(T&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Ca&&!m.pa?new Ke(new po({eb:C})):new Ke(m.pa),T.Ha(m.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}n=Nu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ms(){}ms.prototype.g=function(m,T){return new cn(m,T)};function cn(m,T){gt.call(this),this.g=new cs(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(m?m["X-WebChannel-Client-Profile"]=T.va:m={"X-WebChannel-Client-Profile":T.va}),this.g.S=m,(m=T&&T.Sb)&&!H(m)&&(this.g.m=m),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!H(T)&&(this.g.D=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new ui(this)}V(cn,gt),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Oa(this.g)},cn.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=Hn(m),m=C);T.i.push(new _u(T.Ya++,m)),T.G==3&&ds(T)},cn.prototype.N=function(){this.g.l=null,delete this.j,Oa(this.g),delete this.g,cn.aa.N.call(this)};function bu(m){Mi.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const C in T){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}V(bu,Mi);function Pu(){Ra.call(this),this.status=1}V(Pu,Ra);function ui(m){this.g=m}V(ui,Nu),ui.prototype.ua=function(){Xe(this.g,"a")},ui.prototype.ta=function(m){Xe(this.g,new bu(m))},ui.prototype.sa=function(m){Xe(this.g,new Pu)},ui.prototype.ra=function(){Xe(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,j0=function(){return new ms},Z0=function(){return lo()},W0=ei,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fo.NO_ERROR=0,fo.TIMEOUT=8,fo.HTTP_ERROR=6,Jc=fo,xi.COMPLETE="complete",X0=xi,Ia.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Nl=Ia,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Q0=Ke}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore",Bv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Qm("@firebase/firestore");function Gs(){return Hr.logLevel}function de(n,...e){if(Hr.logLevel<=Ue.DEBUG){const t=e.map(lp);Hr.debug(`Firestore (${da}): ${n}`,...t)}}function oo(n,...e){if(Hr.logLevel<=Ue.ERROR){const t=e.map(lp);Hr.error(`Firestore (${da}): ${n}`,...t)}}function ia(n,...e){if(Hr.logLevel<=Ue.WARN){const t=e.map(lp);Hr.warn(`Firestore (${da}): ${n}`,...t)}}function lp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,eS(n,i,t)}function eS(n,e,t){let i=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw oo(i),new Error(i)}function Qe(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||eS(e,s,i)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class P1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class k1{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Jo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Jo,e.enqueueRetryable((()=>s(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await s(this.currentUser)}))},h=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>h(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Jo)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new tS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class V1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new V1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const s=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=O1(40);for(let l=0;l<s.length;++l)i.length<20&&s[l]<t&&(i+=e.charAt(s[l]%62))}return i}}function Le(n,e){return n<e?-1:n>e?1:0}function Em(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),l=e.charAt(i);if(s!==l)return rm(s)===rm(l)?Le(s,l):rm(s)?1:-1}return Le(n.length,e.length)}const F1=55296,q1=57343;function rm(n){const e=n.charCodeAt(0);return e>=F1&&e<=q1}function oa(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="__name__";class gi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const l=gi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const i=gi.isNumericId(e),s=gi.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?gi.extractNumericId(e).compare(gi.extractNumericId(t)):Em(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $o.fromString(e.substring(4,e.length-2))}}class mt extends gi{construct(e,t,i){return new mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const B1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends gi{construct(e,t,i){return new Xt(e,t,i)}static isValidIdentifier(e){return B1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gv}static keyField(){return new Xt([Gv])}static fromServerFormat(e){const t=[];let i="",s=0;const l=()=>{if(i.length===0)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,s+=2}else h==="`"?(d=!d,s++):h!=="."||d?(i+=h,s++):(l(),s++)}if(l(),d)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(mt.fromString(e))}static fromName(e){return new ve(mt.fromString(e).popFirst(5))}static empty(){return new ve(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function G1(n,e,t,i){if(e===!0&&i===!0)throw new ye(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zv(n){if(!ve.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function $l(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cp(n);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ru(n,e){if(!nS(n))throw new ye(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const d=n[i];if(s&&typeof d!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ye(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=-62135596800,$v=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*$v);return new at(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Yv)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$v}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ru(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:xt("string",at._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new at(0,0))}static max(){return new we(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function z1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=we.fromTimestamp(i===1e9?new at(t+1,0):new at(t,i));return new Ko(s,ve.empty(),e)}function Y1(n){return new Ko(n.readTime,n.key,Jl)}class Ko{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ko(we.min(),ve.empty(),Jl)}static max(){return new Ko(we.max(),ve.empty(),Jl)}}function $1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==J1)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((i,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,i)=>{t(e)}))}static reject(e){return new oe(((t,i)=>{i(e)}))}static waitFor(e){return new oe(((t,i)=>{let s=0,l=0,d=!1;e.forEach((h=>{++s,h.next((()=>{++l,d&&l===s&&t()}),(g=>i(g)))})),d=!0,l===s&&t()}))}static or(e){let t=oe.resolve(!1);for(const i of e)t=t.next((s=>s?oe.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,l)=>{i.push(t.call(this,s,l))})),this.waitFor(i)}static mapArray(e,t){return new oe(((i,s)=>{const l=e.length,d=new Array(l);let h=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((v=>{d[p]=v,++h,h===l&&i(d)}),(v=>s(v)))}}))}static doWhile(e,t){return new oe(((i,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):i()};l()}))}}function Q1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ma(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=-1;function Nf(n){return n==null}function ff(n){return n===0&&1/n==-1/0}function X1(n){return typeof n=="number"&&Number.isInteger(n)&&!ff(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="";function W1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Jv(e)),e=Z1(n.get(t),e);return Jv(e)}function Z1(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case iS:t+="";break;default:t+=l}}return t}function Jv(n){return n+iS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}}class Uc{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,i,s,l){this.key=e,this.value=t,this.color=i??Qt.RED,this.left=s??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,l){return new Qt(e??this.key,t??this.value,i??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const l=i(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,i),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Qt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,s,l){return this}insert(e,t,i){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Xn([])}unionWith(e){let t=new Ut(Xt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new rS("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let d=0;d<s.length;++d)l+=String.fromCharCode(s[d]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const j1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=j1.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xo(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="server_timestamp",aS="__type__",lS="__previous_value__",uS="__local_write_time__";function dp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[aS])==null?void 0:i.stringValue)===sS}function bf(n){const e=n.mapValue.fields[lS];return dp(e)?bf(e):e}function Kl(n){const e=Qo(n.mapValue.fields[uS].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,i,s,l,d,h,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const df="(default)";class Ql{constructor(e,t){this.projectId=e,this.database=t||df}static empty(){return new Ql("","")}get isDefaultDatabase(){return this.database===df}isEqual(e){return e instanceof Ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="__type__",tx="__max__",Lc={mapValue:{}},fS="__vector__",hf="value";function Wo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dp(n)?4:ix(n)?9007199254740991:nx(n)?10:11:Se(28295,{value:n})}function Ci(n,e){if(n===e)return!0;const t=Wo(n);if(t!==Wo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kl(n).isEqual(Kl(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const d=Qo(s.timestampValue),h=Qo(l.timestampValue);return d.seconds===h.seconds&&d.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Xo(s.bytesValue).isEqual(Xo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return St(s.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return St(s.integerValue)===St(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const d=St(s.doubleValue),h=St(l.doubleValue);return d===h?ff(d)===ff(h):isNaN(d)&&isNaN(h)}return!1})(n,e);case 9:return oa(n.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return(function(s,l){const d=s.mapValue.fields||{},h=l.mapValue.fields||{};if(Kv(d)!==Kv(h))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(h[g]===void 0||!Ci(d[g],h[g])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function Xl(n,e){return(n.values||[]).find((t=>Ci(t,e)))!==void 0}function ra(n,e){if(n===e)return 0;const t=Wo(n),i=Wo(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(l,d){const h=St(l.integerValue||l.doubleValue),g=St(d.integerValue||d.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1})(n,e);case 3:return Xv(n.timestampValue,e.timestampValue);case 4:return Xv(Kl(n),Kl(e));case 5:return Em(n.stringValue,e.stringValue);case 6:return(function(l,d){const h=Xo(l),g=Xo(d);return h.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,d){const h=l.split("/"),g=d.split("/");for(let p=0;p<h.length&&p<g.length;p++){const v=Le(h[p],g[p]);if(v!==0)return v}return Le(h.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,d){const h=Le(St(l.latitude),St(d.latitude));return h!==0?h:Le(St(l.longitude),St(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Wv(n.arrayValue,e.arrayValue);case 10:return(function(l,d){var S,x,V,q;const h=l.fields||{},g=d.fields||{},p=(S=h[hf])==null?void 0:S.arrayValue,v=(x=g[hf])==null?void 0:x.arrayValue,E=Le(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((q=v==null?void 0:v.values)==null?void 0:q.length)||0);return E!==0?E:Wv(p,v)})(n.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Lc.mapValue&&d===Lc.mapValue)return 0;if(l===Lc.mapValue)return 1;if(d===Lc.mapValue)return-1;const h=l.fields||{},g=Object.keys(h),p=d.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const S=Em(g[E],v[E]);if(S!==0)return S;const x=ra(h[g[E]],p[v[E]]);if(x!==0)return x}return Le(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Xv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=Qo(n),i=Qo(e),s=Le(t.seconds,i.seconds);return s!==0?s:Le(t.nanos,i.nanos)}function Wv(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const l=ra(t[s],i[s]);if(l)return l}return Le(t.length,i.length)}function sa(n){return Sm(n)}function Sm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Qo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const l of t.values||[])s?s=!1:i+=",",i+=Sm(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const d of i)l?l=!1:s+=",",s+=`${d}:${Sm(t.fields[d])}`;return s+"}"})(n.mapValue):Se(61005,{value:n})}function Kc(n){switch(Wo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bf(n);return e?16+Kc(e):16;case 5:return 2*n.stringValue.length;case 6:return Xo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,l)=>s+Kc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Yr(i.fields,((l,d)=>{s+=l.length+Kc(d)})),s})(n.mapValue);default:throw Se(13486,{value:n})}}function Cm(n){return!!n&&"integerValue"in n}function hp(n){return!!n&&"arrayValue"in n}function Zv(n){return!!n&&"nullValue"in n}function jv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qc(n){return!!n&&"mapValue"in n}function nx(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cS])==null?void 0:i.stringValue)===fS}function Ll(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Yr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ll(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ll(n.arrayValue.values[t]);return e}return{...n}}function ix(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Qc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(t)}setAll(e){let t=Xt.emptyPath(),i={},s=[];e.forEach(((d,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,i,s),i={},s=[],t=h.popLast()}d?i[h.lastSegment()]=Ll(d):s.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,s)}delete(e){const t=this.field(e.popLast());Qc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Qc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Yr(t,((s,l)=>e[s]=l));for(const s of i)delete e[s]}clone(){return new On(Ll(this.value))}}function dS(n){const e=[];return Yr(n.fields,((t,i)=>{const s=new Xt([t]);if(Qc(i)){const l=dS(i.mapValue).fields;if(l.length===0)e.push(s);else for(const d of l)e.push(s.child(d))}else e.push(s)})),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,i,s,l,d,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=l,this.data=d,this.documentState=h}static newInvalidDocument(e){return new rn(e,0,we.min(),we.min(),we.min(),On.empty(),0)}static newFoundDocument(e,t,i,s){return new rn(e,1,t,we.min(),i,s,0)}static newNoDocument(e,t){return new rn(e,2,t,we.min(),we.min(),On.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,we.min(),we.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.position=e,this.inclusive=t}}function eT(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const l=e[s],d=n.position[s];if(l.field.isKeyField()?i=ve.comparator(ve.fromName(d.referenceValue),t.key):i=ra(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function tT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ci(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t="asc"){this.field=e,this.dir=t}}function ox(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{}class Vt extends hS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sx(e,t,i):t==="array-contains"?new ux(e,i):t==="in"?new cx(e,i):t==="not-in"?new fx(e,i):t==="array-contains-any"?new dx(e,i):new Vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ax(e,i):new lx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ra(t,this.value)):t!==null&&Wo(this.value)===Wo(t)&&this.matchesComparison(ra(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends hS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ai(e,t)}matches(e){return mS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mS(n){return n.op==="and"}function pS(n){return rx(n)&&mS(n)}function rx(n){for(const e of n.filters)if(e instanceof Ai)return!1;return!0}function Am(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+sa(n.value);if(pS(n))return n.filters.map((e=>Am(e))).join(",");{const e=n.filters.map((t=>Am(t))).join(",");return`${n.op}(${e})`}}function gS(n,e){return n instanceof Vt?(function(i,s){return s instanceof Vt&&i.op===s.op&&i.field.isEqual(s.field)&&Ci(i.value,s.value)})(n,e):n instanceof Ai?(function(i,s){return s instanceof Ai&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((l,d,h)=>l&&gS(d,s.filters[h])),!0):!1})(n,e):void Se(19439)}function yS(n){return n instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${sa(t.value)}`})(n):n instanceof Ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(yS).join(" ,")+"}"})(n):"Filter"}class sx extends Vt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class ax extends Vt{constructor(e,t){super(e,"in",t),this.keys=_S("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lx extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=_S("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _S(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class ux extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hp(t)&&Xl(t.arrayValue,this.value)}}class cx extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xl(this.value.arrayValue,t)}}class fx extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xl(this.value.arrayValue,t)}}class dx extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Xl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t=null,i=[],s=[],l=null,d=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=l,this.startAt=d,this.endAt=h,this.Te=null}}function nT(n,e=null,t=[],i=[],s=null,l=null,d=null){return new hx(n,e,t,i,s,l,d)}function mp(n){const e=xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Am(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>sa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>sa(i))).join(",")),e.Te=t}return e.Te}function pp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ox(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tT(n.startAt,e.startAt)&&tT(n.endAt,e.endAt)}function Im(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t=null,i=[],s=[],l=null,d="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=l,this.limitType=d,this.startAt=h,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mx(n,e,t,i,s,l,d,h){return new Pf(n,e,t,i,s,l,d,h)}function gp(n){return new Pf(n)}function iT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function px(n){return n.collectionGroup!==null}function Ol(n){const e=xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let h=new Ut(Xt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pf(l,i))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new pf(Xt.keyField(),i))}return e.Ie}function _i(n){const e=xe(n);return e.Ee||(e.Ee=gx(e,Ol(n))),e.Ee}function gx(n,e){if(n.limitType==="F")return nT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new pf(s.field,l)}));const t=n.endAt?new mf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mf(n.startAt.position,n.startAt.inclusive):null;return nT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Rm(n,e,t){return new Pf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kf(n,e){return pp(_i(n),_i(e))&&n.limitType===e.limitType}function vS(n){return`${mp(_i(n))}|lt:${n.limitType}`}function zs(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>yS(s))).join(", ")}]`),Nf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>sa(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>sa(s))).join(",")),`Target(${i})`})(_i(n))}; limitType=${n.limitType})`}function Vf(n,e){return e.isFoundDocument()&&(function(i,s){const l=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,s){for(const l of Ol(i))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const l of i.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(d,h,g){const p=eT(d,h,g);return d.inclusive?p<=0:p<0})(i.startAt,Ol(i),s)||i.endAt&&!(function(d,h,g){const p=eT(d,h,g);return d.inclusive?p>=0:p>0})(i.endAt,Ol(i),s))})(n,e)}function yx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TS(n){return(e,t)=>{let i=!1;for(const s of Ol(n)){const l=_x(s,e,t);if(l!==0)return l;i=i||s.field.isKeyField()}return 0}}function _x(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,d,h){const g=d.data.field(l),p=h.data.field(l);return g!==null&&p!==null?ra(g,p):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,l]of i)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,((t,i)=>{for(const[s,l]of i)e(s,l)}))}isEmpty(){return oS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new pt(ve.comparator);function ro(){return vx}const ES=new pt(ve.comparator);function bl(...n){let e=ES;for(const t of n)e=e.insert(t.key,t);return e}function SS(n){let e=ES;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ur(){return Fl()}function CS(){return Fl()}function Fl(){return new $r((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Tx=new pt(ve.comparator),Ex=new Ut(ve.comparator);function Oe(...n){let e=Ex;for(const t of n)e=e.add(t);return e}const Sx=new Ut(Le);function Cx(){return Sx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ff(e)?"-0":e}}function AS(n){return{integerValue:""+n}}function Ax(n,e){return X1(e)?AS(e):yp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this._=void 0}}function Ix(n,e,t){return n instanceof gf?(function(s,l){const d={fields:{[aS]:{stringValue:sS},[uS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&dp(l)&&(l=bf(l)),l&&(d.fields[lS]=l),{mapValue:d}})(t,e):n instanceof Wl?RS(n,e):n instanceof Zl?wS(n,e):(function(s,l){const d=IS(s,l),h=oT(d)+oT(s.Ae);return Cm(d)&&Cm(s.Ae)?AS(h):yp(s.serializer,h)})(n,e)}function Rx(n,e,t){return n instanceof Wl?RS(n,e):n instanceof Zl?wS(n,e):t}function IS(n,e){return n instanceof yf?(function(i){return Cm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class gf extends Uf{}class Wl extends Uf{constructor(e){super(),this.elements=e}}function RS(n,e){const t=MS(e);for(const i of n.elements)t.some((s=>Ci(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Zl extends Uf{constructor(e){super(),this.elements=e}}function wS(n,e){let t=MS(e);for(const i of n.elements)t=t.filter((s=>!Ci(s,i)));return{arrayValue:{values:t}}}class yf extends Uf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oT(n){return St(n.integerValue||n.doubleValue)}function MS(n){return hp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function wx(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Wl&&s instanceof Wl||i instanceof Zl&&s instanceof Zl?oa(i.elements,s.elements,Ci):i instanceof yf&&s instanceof yf?Ci(i.Ae,s.Ae):i instanceof gf&&s instanceof gf})(n.transform,e.transform)}class Mx{constructor(e,t){this.version=e,this.transformResults=t}}class to{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new to}static exists(e){return new to(void 0,e)}static updateTime(e){return new to(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Lf{}function xS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new NS(n.key,to.none()):new su(n.key,n.data,to.none());{const t=n.data,i=On.empty();let s=new Ut(Xt.comparator);for(let l of e.fields)if(!s.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),s=s.add(l)}return new Jr(n.key,i,new Xn(s.toArray()),to.none())}}function xx(n,e,t){n instanceof su?(function(s,l,d){const h=s.value.clone(),g=sT(s.fieldTransforms,l,d.transformResults);h.setAll(g),l.convertToFoundDocument(d.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Jr?(function(s,l,d){if(!Xc(s.precondition,l))return void l.convertToUnknownDocument(d.version);const h=sT(s.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(DS(s)),g.setAll(h),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(n,e,t):(function(s,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function ql(n,e,t,i){return n instanceof su?(function(l,d,h,g){if(!Xc(l.precondition,d))return h;const p=l.value.clone(),v=aT(l.fieldTransforms,g,d);return p.setAll(v),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof Jr?(function(l,d,h,g){if(!Xc(l.precondition,d))return h;const p=aT(l.fieldTransforms,g,d),v=d.data;return v.setAll(DS(l)),v.setAll(p),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,d,h){return Xc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):h})(n,e,t)}function Dx(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),l=IS(i.transform,s||null);l!=null&&(t===null&&(t=On.empty()),t.set(i.field,l))}return t||null}function rT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&oa(i,s,((l,d)=>wx(l,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class su extends Lf{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Jr extends Lf{constructor(e,t,i,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function DS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function sT(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const l=n[s],d=l.transform,h=e.data.field(l.field);i.set(l.field,Rx(d,h,t[s]))}return i}function aT(n,e,t){const i=new Map;for(const s of n){const l=s.transform,d=t.data.field(s.field);i.set(s.field,Ix(l,d,e))}return i}class NS extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nx extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&xx(l,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ql(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ql(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=CS();return this.mutations.forEach((s=>{const l=e.get(s.key),d=l.overlayedDocument;let h=this.applyToLocalView(d,l.mutatedFields);h=t.has(s.key)?null:h;const g=xS(d,h);g!==null&&i.set(s.key,g),d.isValidDocument()||d.convertToNoDocument(we.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,((t,i)=>rT(t,i)))&&oa(this.baseMutations,e.baseMutations,((t,i)=>rT(t,i)))}}class _p{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return Tx})();const l=e.mutations;for(let d=0;d<l.length;d++)s=s.insert(l[d].key,i[d].version);return new _p(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Ge;function Vx(n){switch(n){case ae.OK:return Se(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function bS(n){if(n===void 0)return oo("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Mt.OK:return ae.OK;case Mt.CANCELLED:return ae.CANCELLED;case Mt.UNKNOWN:return ae.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return ae.INTERNAL;case Mt.UNAVAILABLE:return ae.UNAVAILABLE;case Mt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Mt.NOT_FOUND:return ae.NOT_FOUND;case Mt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Mt.ABORTED:return ae.ABORTED;case Mt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Mt.DATA_LOSS:return ae.DATA_LOSS;default:return Se(39323,{code:n})}}(Ge=Mt||(Mt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=new $o([4294967295,4294967295],0);function lT(n){const e=Ux().encode(n),t=new K0;return t.update(e),new Uint8Array(t.digest())}function uT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new $o([t,i],0),new $o([s,l],0)]}class vp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Pl(`Invalid padding: ${t}`);if(i<0)throw new Pl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$o.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply($o.fromNumber(i)));return s.compare(Lx)===1&&(s=new $o([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lT(e),[i,s]=uT(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(i,s,l);if(!this.we(d))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new vp(l,s,t);return i.forEach((h=>d.insert(h))),d}insert(e){if(this.ge===0)return;const t=lT(e),[i,s]=uT(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(i,s,l);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,i,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,au.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Of(we.min(),s,new pt(Le),ro(),Oe())}}class au{constructor(e,t,i,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new au(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class PS{constructor(e,t){this.targetId=e,this.Ce=t}}class kS{constructor(e,t,i=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class cT{constructor(){this.ve=0,this.Fe=fT(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),i=Oe();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Se(38017,{changeType:l})}})),new au(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=fT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ox{constructor(e){this.Ge=e,this.ze=new Map,this.je=ro(),this.Je=Oc(),this.He=Oc(),this.Ye=new pt(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Im(l))if(i===0){const d=new ve(l.path);this.et(t,d,rn.newNoDocument(d,we.min()))}else Qe(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const h=this.ut(e),g=h?this.ct(h,e,d):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:l=0}=t;let d,h;try{d=Xo(i).toUint8Array()}catch(g){if(g instanceof rS)return ia("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new vp(d,s,l)}catch(g){return ia(g instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((l=>{const d=this.Ge.ht(),h=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const h=this.ot(d);if(h){if(l.current&&Im(h.target)){const g=new ve(h.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,rn.newNoDocument(g,e))}l.Be&&(t.set(d,l.ke()),l.qe())}}));let i=Oe();this.He.forEach(((l,d)=>{let h=!0;d.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const s=new Of(e,t,this.Ye,this.je,i);return this.je=ro(),this.Je=Oc(),this.He=Oc(),this.Ye=new pt(Le),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new cT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ut(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ut(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Oc(){return new pt(ve.comparator)}function fT(){return new pt(ve.comparator)}const Fx={asc:"ASCENDING",desc:"DESCENDING"},qx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bx={and:"AND",or:"OR"};class Hx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wm(n,e){return n.useProto3Json||Nf(e)?e:{value:e}}function _f(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Gx(n,e){return _f(n,e.toTimestamp())}function vi(n){return Qe(!!n,49232),we.fromTimestamp((function(t){const i=Qo(t);return new at(i.seconds,i.nanos)})(n))}function Tp(n,e){return Mm(n,e).canonicalString()}function Mm(n,e){const t=(function(s){return new mt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function US(n){const e=mt.fromString(n);return Qe(BS(e),10190,{key:e.toString()}),e}function xm(n,e){return Tp(n.databaseId,e.path)}function sm(n,e){const t=US(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(OS(t))}function LS(n,e){return Tp(n.databaseId,e)}function zx(n){const e=US(n);return e.length===4?mt.emptyPath():OS(e)}function Dm(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OS(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dT(n,e,t){return{name:xm(n,e),fields:t.value.mapValue.fields}}function Yx(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Se(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,h=d&&(function(p){const v=p.code===void 0?ae.UNKNOWN:bS(p.code);return new ye(v,p.message||"")})(d);t=new kS(i,s,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sm(n,i.document.name),l=vi(i.document.updateTime),d=i.document.createTime?vi(i.document.createTime):we.min(),h=new On({mapValue:{fields:i.document.fields}}),g=rn.newFoundDocument(s,l,d,h),p=i.targetIds||[],v=i.removedTargetIds||[];t=new Wc(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sm(n,i.document),l=i.readTime?vi(i.readTime):we.min(),d=rn.newNoDocument(s,l),h=i.removedTargetIds||[];t=new Wc([],h,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sm(n,i.document),l=i.removedTargetIds||[];t=new Wc([],l,s,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:l}=i,d=new kx(s,l),h=i.targetId;t=new PS(h,d)}}return t}function $x(n,e){let t;if(e instanceof su)t={update:dT(n,e.key,e.value)};else if(e instanceof NS)t={delete:xm(n,e.key)};else if(e instanceof Jr)t={update:dT(n,e.key,e.data),updateMask:tD(e.fieldMask)};else{if(!(e instanceof Nx))return Se(16599,{Vt:e.type});t={verify:xm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const h=d.transform;if(h instanceof gf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Wl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Zl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof yf)return{fieldPath:d.field.canonicalString(),increment:h.Ae};throw Se(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:Gx(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function Jx(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(s,l){let d=s.updateTime?vi(s.updateTime):vi(l);return d.isEqual(we.min())&&(d=vi(l)),new Mx(d,s.transformResults||[])})(t,e)))):[]}function Kx(n,e){return{documents:[LS(n,e.path)]}}function Qx(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=LS(n,s);const l=(function(p){if(p.length!==0)return qS(Ai.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:Ys(S.field),direction:Zx(S.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const h=wm(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function Xx(n){let e=zx(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Qe(i===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const S=FS(E);return S instanceof Ai&&pS(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(E){return E.map((S=>(function(V){return new pf($s(V.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(E){let S;return S=typeof E=="object"?E.value:E,Nf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,x=E.values||[];return new mf(x,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,x=E.values||[];return new mf(x,S)})(t.endAt)),mx(e,s,d,l,h,"F",g,p)}function Wx(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=$s(t.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=$s(t.unaryFilter.field);return Vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=$s(t.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=$s(t.unaryFilter.field);return Vt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Vt.create($s(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ai.create(t.compositeFilter.filters.map((i=>FS(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function Zx(n){return Fx[n]}function jx(n){return qx[n]}function eD(n){return Bx[n]}function Ys(n){return{fieldPath:n.canonicalString()}}function $s(n){return Xt.fromServerFormat(n.fieldPath)}function qS(n){return n instanceof Vt?(function(t){if(t.op==="=="){if(jv(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NAN"}};if(Zv(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jv(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NOT_NAN"}};if(Zv(t.value))return{unaryFilter:{field:Ys(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(t.field),op:jx(t.op),value:t.value}}})(n):n instanceof Ai?(function(t){const i=t.getFilters().map((s=>qS(s)));return i.length===1?i[0]:{compositeFilter:{op:eD(t.op),filters:i}}})(n):Se(54877,{filter:n})}function tD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t,i,s,l=we.min(),d=we.min(),h=Wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new Bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.yt=e}}function iD(n){const e=Xx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.Cn=new rD}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ko.min())}updateCollectionGroup(e,t,i){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class rD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ut(mt.comparator),l=!s.has(i);return this.index[t]=s.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ut(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HS=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(HS,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new aa(0)}static cr(){return new aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="LruGarbageCollector",sD=1048576;function pT([n,e],[t,i]){const s=Le(n,t);return s===0?Le(e,i):s}class aD{constructor(e){this.Ir=e,this.buffer=new Ut(pT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();pT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(mT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ma(t)?de(mT,"Ignoring IndexedDB error during garbage collection: ",t):await ha(t)}await this.Vr(3e5)}))}}class uD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Df.ce);const i=new aD(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(hT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,l,d,h,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,d=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,h=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(p=Date.now(),Gs()<=Ue.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${s} in `+(h-d)+`ms
	Removed ${l} targets in `+(g-h)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function cD(n,e){return new uD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.changes=new $r((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?oe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&ql(i.mutation,s,Xn.empty(),at.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const s=Ur();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((l=>{let d=bl();return l.forEach(((h,g)=>{d=d.insert(h,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=Ur();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const s=[];return i.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((d,h)=>{t.set(d,h)}))}))}computeViews(e,t,i,s){let l=ro();const d=Fl(),h=(function(){return Fl()})();return t.forEach(((g,p)=>{const v=i.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof Jr)?l=l.insert(p.key,p):v!==void 0?(d.set(p.key,v.mutation.getFieldMask()),ql(v.mutation,p,v.mutation.getFieldMask(),at.now())):d.set(p.key,Xn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,v)=>d.set(p,v))),t.forEach(((p,v)=>h.set(p,new dD(v,d.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=Fl();let s=new pt(((d,h)=>d-h)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const h of d)h.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=i.get(g)||Xn.empty();v=h.applyToLocalView(p,v),i.set(g,v);const E=(s.get(h.batchId)||Oe()).add(g);s=s.insert(h.batchId,E)}))})).next((()=>{const d=[],h=s.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),p=g.key,v=g.value,E=CS();v.forEach((S=>{if(!l.has(S)){const x=xS(t.get(S),i.get(S));x!==null&&E.set(S,x),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,E))}return oe.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):px(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((l=>{const d=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-l.size):oe.resolve(Ur());let h=Jl,g=l;return d.next((p=>oe.forEach(p,((v,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),l.get(v)?oe.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,Oe()))).next((v=>({batchId:h,changes:SS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let s=bl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const l=t.collectionGroup;let d=bl();return this.indexManager.getCollectionParents(e,l).next((h=>oe.forEach(h,(g=>{const p=(function(E,S){return new Pf(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next((v=>{v.forEach(((E,S)=>{d=d.insert(E,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,s)))).next((d=>{l.forEach(((g,p)=>{const v=p.getKey();d.get(v)===null&&(d=d.insert(v,rn.newInvalidDocument(v)))}));let h=bl();return d.forEach(((g,p)=>{const v=l.get(g);v!==void 0&&ql(v.mutation,p,Xn.empty(),at.now()),Vf(t,p)&&(h=h.insert(g,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:vi(s.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:iD(s.bundledQuery),readTime:vi(s.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.overlays=new pt(ve.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ur();return oe.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&i.set(s,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),oe.resolve()}getOverlaysForCollection(e,t,i){const s=Ur(),l=t.length+1,d=new ve(t.child("")),h=this.overlays.getIteratorFrom(d);for(;h.hasNext();){const g=h.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>i&&s.set(g.getKey(),g)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let l=new pt(((p,v)=>p-v));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let v=l.get(p.largestBatchId);v===null&&(v=Ur(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=Ur(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>h.set(p,v))),!(h.size()>=s)););return oe.resolve(h)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const d=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new Px(t,i));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this.Qr=new Ut(Ht.$r),this.Ur=new Ut(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ht(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ve(new mt([])),i=new Ht(t,e),s=new Ht(t,e+1),l=[];return this.Ur.forEachInRange([i,s],(d=>{this.Gr(d),l.push(d.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new mt([])),i=new Ht(t,e),s=new Ht(t,e+1);let l=Oe();return this.Ur.forEachInRange([i,s],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Ht(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Ht.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new bx(l,t,i,s);this.mutationQueue.push(d);for(const h of s)this.Zr=this.Zr.add(new Ht(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),l=s<0?0:s;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?fp:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ht(t,0),s=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,s],(d=>{const h=this.Xr(d.Yr);l.push(h)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ut(Le);return t.forEach((s=>{const l=new Ht(s,0),d=new Ht(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,d],(h=>{i=i.add(h.Yr)}))})),oe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let l=i;ve.isDocumentKey(l)||(l=l.child(""));const d=new Ht(new ve(l),0);let h=new Ut(Le);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(g.Yr)),!0)}),d),oe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return oe.forEach(t.mutations,(s=>{const l=new Ht(s.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ht(t,0),s=this.Zr.firstAfterOrEqual(i);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.ri=e,this.docs=(function(){return new pt(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),l=s?s.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return oe.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let i=ro();return t.forEach((s=>{const l=this.docs.get(s);i=i.insert(s,l?l.document.mutableCopy():rn.newInvalidDocument(s))})),oe.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let l=ro();const d=t.path,h=new ve(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||$1(Y1(v),i)<=0||(s.has(v.key)||Vf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,i,s){Se(9500)}ii(e,t){return oe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new vD(this)}getSize(e){return oe.resolve(this.size)}}class vD extends fD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.persistence=e,this.si=new $r((t=>mp(t)),pp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Ep,this.targetCount=0,this.ai=aa.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new aa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,i){let s=0;const l=[];return this.si.forEach(((d,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(d),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),oe.waitFor(l).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return oe.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),oe.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((d=>{l.push(s.markPotentiallyOrphaned(e,d))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return oe.resolve(i)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Df(0),this.li=!1,this.li=!0,this.hi=new gD,this.referenceDelegate=e(this),this.Pi=new TD(this),this.indexManager=new oD,this.remoteDocumentCache=(function(s){return new _D(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new nD(t),this.Ii=new mD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new yD(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const s=new ED(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class ED extends K1{constructor(e){super(),this.currentSequenceNumber=e}}class Sp{constructor(e){this.persistence=e,this.Ri=new Ep,this.Vi=null}static mi(e){return new Sp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),oe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(i=>{const s=ve.fromPath(i);return this.gi(e,s).next((l=>{l||t.removeEntry(s,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vf{constructor(e,t){this.persistence=e,this.pi=new $r((i=>W1(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=cD(this,t)}static mi(e,t){return new vf(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((i,s)=>this.br(e,i,s).next((l=>l?oe.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ii(e,(d=>this.br(e,d,t).next((h=>{h||(i++,l.removeEntry(d,we.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kc(e.data.value)),t}br(e,t,i){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return oe.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Oe(),s=Oe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Cp(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fR()?8:Q1(an())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const l={result:null};return this.ys(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ws(e,t,s,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new SD;return this.Ss(e,t,d).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,d,h.size)}))})).next((()=>l.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Gs()<=Ue.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",zs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Gs()<=Ue.DEBUG&&de("QueryEngine","Query:",zs(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Gs()<=Ue.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",zs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(t))):oe.resolve())}ys(e,t){if(iT(t))return oe.resolve(null);let i=_i(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Rm(t,null,"F"),i=_i(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=Oe(...l);return this.ps.getDocuments(e,d).next((h=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.Ds(t,h);return this.Cs(t,p,d,g.readTime)?this.ys(e,Rm(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,i,s){return iT(t)||s.isEqual(we.min())?oe.resolve(null):this.ps.getDocuments(e,i).next((l=>{const d=this.Ds(t,l);return this.Cs(t,d,i,s)?oe.resolve(null):(Gs()<=Ue.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zs(t)),this.vs(e,d,t,z1(s,Jl)).next((h=>h)))}))}Ds(e,t){let i=new Ut(TS(e));return t.forEach(((s,l)=>{Vf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Ss(e,t,i){return Gs()<=Ue.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",zs(t)),this.ps.getDocumentsMatchingQuery(e,t,Ko.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="LocalStore",AD=3e8;class ID{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new pt(Le),this.xs=new $r((l=>mp(l)),pp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function RD(n,e,t,i){return new ID(n,e,t,i)}async function zS(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((l=>(s=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],h=[];let g=Oe();for(const p of s){d.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of l){h.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(i,g).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:h})))}))}))}function wD(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,g,p,v){const E=p.batch,S=E.keys();let x=oe.resolve();return S.forEach((V=>{x=x.next((()=>v.getEntry(g,V))).next((q=>{const z=p.docVersions.get(V);Qe(z!==null,48541),q.version.compareTo(z)<0&&(E.applyToRemoteDocument(q,p),q.isValidDocument()&&(q.setReadTime(p.commitVersion),v.addEntry(q)))}))})),x.next((()=>h.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let g=Oe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(g=g.add(h.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function YS(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function MD(n,e){const t=xe(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((v,E)=>{const S=s.get(E);if(!S)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let x=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(Wt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,i)),s=s.insert(E,x),(function(q,z,j){return q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=AD?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(S,x,v)&&h.push(t.Pi.updateTargetData(l,x))}));let g=ro(),p=Oe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(xD(l,d,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!i.isEqual(we.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(v)}return oe.waitFor(h).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=s,l)))}function xD(n,e,t){let i=Oe(),s=Oe();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let d=ro();return t.forEach(((h,g)=>{const p=l.get(h);g.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(h,g.readTime),d=d.insert(h,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),d=d.insert(h,g)):de(Ap,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",g.version)})),{ks:d,qs:s}}))}function DD(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=fp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function ND(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((l=>l?(s=l,oe.resolve(s)):t.Pi.allocateTargetId(i).next((d=>(s=new Bo(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Nm(n,e,t){const i=xe(n),s=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!ma(d))throw d;de(Ap,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function gT(n,e,t){const i=xe(n);let s=we.min(),l=Oe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,p,v){const E=xe(g),S=E.xs.get(v);return S!==void 0?oe.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,v)})(i,d,_i(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,h.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?s:we.min(),t?l:Oe()))).next((h=>(bD(i,yx(e),h),{documents:h,Qs:l})))))}function bD(n,e,t){let i=n.Os.get(e)||we.min();t.forEach(((s,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class yT{constructor(){this.activeTargetIds=Cx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PD{constructor(){this.Mo=new yT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="ConnectivityMonitor";class vT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(_T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(_T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc=null;function bm(){return Fc===null?Fc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fc++,"0x"+Fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="RestConnection",VD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class UD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===df?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,l){const d=bm(),h=this.zo(e,t.toUriEncodedString());de(am,`Sending RPC '${e}' ${d}:`,h,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,s,l);const{host:p}=new URL(h),v=ua(p);return this.Jo(e,h,g,i,v).then((E=>(de(am,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw ia(am,`RPC '${e}' ${d} failed with error: `,E,"url: ",h,"request:",i),E}))}Ho(e,t,i,s,l,d){return this.Go(e,t,i,s,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+da})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),i&&i.headers.forEach(((s,l)=>e[l]=s))}zo(e,t){const i=VD[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class OD extends UD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,l){const d=bm();return new Promise(((h,g)=>{const p=new Q0;p.setWithCredentials(!0),p.listenOnce(X0.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Jc.NO_ERROR:const E=p.getResponseJson();de(nn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),h(E);break;case Jc.TIMEOUT:de(nn,`RPC '${e}' ${d} timed out`),g(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const S=p.getStatus();if(de(nn,`RPC '${e}' ${d} failed with status:`,S,"response text:",p.getResponseText()),S>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const V=x==null?void 0:x.error;if(V&&V.status&&V.message){const q=(function(j){const H=j.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(H)>=0?H:ae.UNKNOWN})(V.status);g(new ye(q,V.message))}else g(new ye(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{de(nn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(s);de(nn,`RPC '${e}' ${d} sending request:`,s),p.send(t,"POST",v,i,15)}))}T_(e,t,i){const s=bm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=j0(),h=Z0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const v=l.join("");de(nn,`Creating RPC '${e}' stream ${s}: ${v}`,g);const E=d.createWebChannel(v,g);this.I_(E);let S=!1,x=!1;const V=new LD({Yo:z=>{x?de(nn,`Not sending because RPC '${e}' stream ${s} is closed:`,z):(S||(de(nn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),de(nn,`RPC '${e}' stream ${s} sending:`,z),E.send(z))},Zo:()=>E.close()}),q=(z,j,H)=>{z.listen(j,(W=>{try{H(W)}catch(X){setTimeout((()=>{throw X}),0)}}))};return q(E,Nl.EventType.OPEN,(()=>{x||(de(nn,`RPC '${e}' stream ${s} transport opened.`),V.o_())})),q(E,Nl.EventType.CLOSE,(()=>{x||(x=!0,de(nn,`RPC '${e}' stream ${s} transport closed`),V.a_(),this.E_(E))})),q(E,Nl.EventType.ERROR,(z=>{x||(x=!0,ia(nn,`RPC '${e}' stream ${s} transport errored. Name:`,z.name,"Message:",z.message),V.a_(new ye(ae.UNAVAILABLE,"The operation could not be completed")))})),q(E,Nl.EventType.MESSAGE,(z=>{var j;if(!x){const H=z.data[0];Qe(!!H,16349);const W=H,X=(W==null?void 0:W.error)||((j=W[0])==null?void 0:j.error);if(X){de(nn,`RPC '${e}' stream ${s} received error:`,X);const J=X.status;let se=(function(M){const P=Mt[M];if(P!==void 0)return bS(P)})(J),D=X.message;se===void 0&&(se=ae.INTERNAL,D="Unknown error status: "+J+" with message "+X.message),x=!0,V.a_(new ye(se,D)),E.close()}else de(nn,`RPC '${e}' stream ${s} received:`,H),V.u_(H)}})),q(h,W0.STAT_EVENT,(z=>{z.stat===Tm.PROXY?de(nn,`RPC '${e}' stream ${s} detected buffering proxy`):z.stat===Tm.NOPROXY&&de(nn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n){return new Hx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t,i=1e3,s=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="PersistentStream";class JS{constructor(e,t,i,s,l,d,h,g){this.Mi=e,this.S_=i,this.b_=s,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(oo(t.toString()),oo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new ye(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(TT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(TT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FD extends JS{constructor(e,t,i,s,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Yx(this.serializer,e),i=(function(l){if(!("targetChange"in l))return we.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?we.min():d.readTime?vi(d.readTime):we.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Dm(this.serializer),t.addTarget=(function(l,d){let h;const g=d.target;if(h=Im(g)?{documents:Kx(l,g)}:{query:Qx(l,g).ft},h.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){h.resumeToken=VS(l,d.resumeToken);const p=wm(l,d.expectedCount);p!==null&&(h.expectedCount=p)}else if(d.snapshotVersion.compareTo(we.min())>0){h.readTime=_f(l,d.snapshotVersion.toTimestamp());const p=wm(l,d.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const i=Wx(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Dm(this.serializer),t.removeTarget=e,this.q_(t)}}class qD extends JS{constructor(e,t,i,s,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,d),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Jx(e.writeResults,e.commitTime),i=vi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Dm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$x(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{}class HD extends BD{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Go(e,Mm(t,i),s,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(ae.UNKNOWN,l.toString())}))}Ho(e,t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,h])=>this.connection.Ho(e,Mm(t,i),s,d,h,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(ae.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class GD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oo(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="RemoteStore";class zD{constructor(e,t,i,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Kr(this)&&(de(Gr,"Restarting streams for network reachability change."),await(async function(g){const p=xe(g);p.Ea.add(4),await lu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await qf(p)})(this))}))})),this.Ra=new GD(i,s)}}async function qf(n){if(Kr(n))for(const e of n.da)await e(!0)}async function lu(n){for(const e of n.da)await e(!1)}function KS(n,e){const t=xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mp(t)?wp(t):pa(t).O_()&&Rp(t,e))}function Ip(n,e){const t=xe(n),i=pa(t);t.Ia.delete(e),i.O_()&&QS(t,e),t.Ia.size===0&&(i.O_()?i.L_():Kr(t)&&t.Ra.set("Unknown"))}function Rp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pa(n).Y_(e)}function QS(n,e){n.Va.Ue(e),pa(n).Z_(e)}function wp(n){n.Va=new Ox({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),pa(n).start(),n.Ra.ua()}function Mp(n){return Kr(n)&&!pa(n).x_()&&n.Ia.size>0}function Kr(n){return xe(n).Ea.size===0}function XS(n){n.Va=void 0}async function YD(n){n.Ra.set("Online")}async function $D(n){n.Ia.forEach(((e,t)=>{Rp(n,e)}))}async function JD(n,e){XS(n),Mp(n)?(n.Ra.ha(e),wp(n)):n.Ra.set("Unknown")}async function KD(n,e,t){if(n.Ra.set("Online"),e instanceof kS&&e.state===2&&e.cause)try{await(async function(s,l){const d=l.cause;for(const h of l.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,d),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(i){de(Gr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Tf(n,i)}else if(e instanceof Wc?n.Va.Ze(e):e instanceof PS?n.Va.st(e):n.Va.tt(e),!t.isEqual(we.min()))try{const i=await YS(n.localStore);t.compareTo(i)>=0&&await(function(l,d){const h=l.Va.Tt(d);return h.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(g.resumeToken,d))}})),h.targetMismatches.forEach(((g,p)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),QS(l,g);const E=new Bo(v.target,g,p,v.sequenceNumber);Rp(l,E)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){de(Gr,"Failed to raise snapshot:",i),await Tf(n,i)}}async function Tf(n,e,t){if(!ma(e))throw e;n.Ea.add(1),await lu(n),n.Ra.set("Offline"),t||(t=()=>YS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Gr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await qf(n)}))}function WS(n,e){return e().catch((t=>Tf(n,t,e)))}async function Bf(n){const e=xe(n),t=Zo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fp;for(;QD(e);)try{const s=await DD(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,XD(e,s)}catch(s){await Tf(e,s)}ZS(e)&&jS(e)}function QD(n){return Kr(n)&&n.Ta.length<10}function XD(n,e){n.Ta.push(e);const t=Zo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ZS(n){return Kr(n)&&!Zo(n).x_()&&n.Ta.length>0}function jS(n){Zo(n).start()}async function WD(n){Zo(n).ra()}async function ZD(n){const e=Zo(n);for(const t of n.Ta)e.ea(t.mutations)}async function jD(n,e,t){const i=n.Ta.shift(),s=_p.from(i,e,t);await WS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Bf(n)}async function eN(n,e){e&&Zo(n).X_&&await(async function(i,s){if((function(d){return Vx(d)&&d!==ae.ABORTED})(s.code)){const l=i.Ta.shift();Zo(i).B_(),await WS(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Bf(i)}})(n,e),ZS(n)&&jS(n)}async function ET(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),de(Gr,"RemoteStore received new credentials");const i=Kr(t);t.Ea.add(3),await lu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qf(t)}async function tN(n,e){const t=xe(n);e?(t.Ea.delete(2),await qf(t)):e||(t.Ea.add(2),await lu(t),t.Ra.set("Unknown"))}function pa(n){return n.ma||(n.ma=(function(t,i,s){const l=xe(t);return l.sa(),new FD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Xo:YD.bind(null,n),t_:$D.bind(null,n),r_:JD.bind(null,n),H_:KD.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Mp(n)?wp(n):n.Ra.set("Unknown")):(await n.ma.stop(),XS(n))}))),n.ma}function Zo(n){return n.fa||(n.fa=(function(t,i,s){const l=xe(t);return l.sa(),new qD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:WD.bind(null,n),r_:eN.bind(null,n),ta:ZD.bind(null,n),na:jD.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Bf(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Gr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,i,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=l,this.deferred=new Jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,l){const d=Date.now()+i,h=new xp(e,t,d,s,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dp(n,e){if(oo("AsyncQueue",`${e}: ${n}`),ma(n))return new ye(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{static emptySet(e){return new Ws(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=bl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ws;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.ga=new pt(ve.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class la{constructor(e,t,i,s,l,d,h,g,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,l){const d=[];return t.forEach((h=>{d.push({type:0,doc:h})})),new la(e,t,Ws.emptySet(t),d,i,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iN{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=xe(t),l=s.queries;s.queries=CT(),l.forEach(((d,h)=>{for(const g of h.Sa)g.onError(i)}))})(this,new ye(ae.ABORTED,"Firestore shutting down"))}}function CT(){return new $r((n=>vS(n)),kf)}async function oN(n,e){const t=xe(n);let i=3;const s=e.query;let l=t.queries.get(s);l?!l.ba()&&e.Da()&&(i=2):(l=new nN,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(d){const h=Dp(d,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Np(t)}async function rN(n,e){const t=xe(n),i=e.query;let s=3;const l=t.queries.get(i);if(l){const d=l.Sa.indexOf(e);d>=0&&(l.Sa.splice(d,1),l.Sa.length===0?s=e.Da()?0:1:!l.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function sN(n,e){const t=xe(n);let i=!1;for(const s of e){const l=s.query,d=t.queries.get(l);if(d){for(const h of d.Sa)h.Fa(s)&&(i=!0);d.wa=s}}i&&Np(t)}function aN(n,e,t){const i=xe(n),s=i.queries.get(e);if(s)for(const l of s.Sa)l.onError(t);i.queries.delete(e)}function Np(n){n.Ca.forEach((e=>{e.next()}))}var Pm,AT;(AT=Pm||(Pm={})).Ma="default",AT.Cache="cache";class lN{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new la(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class uN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=TS(e),this.tu=new Ws(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ST,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=s,h=!1;const g=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const S=s.get(v),x=Vf(this.query,E)?E:null,V=!!S&&this.mutatedKeys.has(S.key),q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let z=!1;S&&x?S.data.isEqual(x.data)?V!==q&&(i.track({type:3,doc:x}),z=!0):this.su(S,x)||(i.track({type:2,doc:x}),z=!0,(g&&this.eu(x,g)>0||p&&this.eu(x,p)<0)&&(h=!0)):!S&&x?(i.track({type:0,doc:x}),z=!0):S&&!x&&(i.track({type:1,doc:S}),z=!0,(g||p)&&(h=!0)),z&&(x?(d=d.add(x),l=q?l.add(v):l.delete(v)):(d=d.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{tu:d,iu:i,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,E)=>(function(x,V){const q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:z})}};return q(x)-q(V)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(i),s=s??!1;const h=t&&!s?this._u():[],g=this.Xa.size===0&&this.current&&!s?1:0,p=g!==this.Za;return this.Za=g,d.length!==0||p?{snapshot:new la(this.query,e.tu,l,d,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ST,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new tC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new eC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return la.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bp="SyncEngine";class cN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class fN{constructor(e){this.key=e,this.hu=!1}}class dN{constructor(e,t,i,s,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new $r((h=>vS(h)),kf),this.Iu=new Map,this.Eu=new Set,this.du=new pt(ve.comparator),this.Au=new Map,this.Ru=new Ep,this.Vu={},this.mu=new Map,this.fu=aa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hN(n,e,t=!0){const i=aC(n);let s;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await nC(i,e,t,!0),s}async function mN(n,e){const t=aC(n);await nC(t,e,!0,!1)}async function nC(n,e,t,i){const s=await ND(n.localStore,_i(e)),l=s.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await pN(n,e,l,d==="current",s.resumeToken)),n.isPrimaryClient&&t&&KS(n.remoteStore,s),h}async function pN(n,e,t,i,s){n.pu=(E,S,x)=>(async function(q,z,j,H){let W=z.view.ru(j);W.Cs&&(W=await gT(q.localStore,z.query,!1).then((({documents:D})=>z.view.ru(D,W))));const X=H&&H.targetChanges.get(z.targetId),J=H&&H.targetMismatches.get(z.targetId)!=null,se=z.view.applyChanges(W,q.isPrimaryClient,X,J);return RT(q,z.targetId,se.au),se.snapshot})(n,E,S,x);const l=await gT(n.localStore,e,!0),d=new uN(e,l.Qs),h=d.ru(l.documents),g=au.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=d.applyChanges(h,n.isPrimaryClient,g);RT(n,t,p.au);const v=new cN(e,t,d);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function gN(n,e,t){const i=xe(n),s=i.Tu.get(e),l=i.Iu.get(s.targetId);if(l.length>1)return i.Iu.set(s.targetId,l.filter((d=>!kf(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Nm(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Ip(i.remoteStore,s.targetId),km(i,s.targetId)})).catch(ha)):(km(i,s.targetId),await Nm(i.localStore,s.targetId,!0))}async function yN(n,e){const t=xe(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(t.remoteStore,i.targetId))}async function _N(n,e,t){const i=IN(n);try{const s=await(function(d,h){const g=xe(d),p=at.now(),v=h.reduce(((x,V)=>x.add(V.key)),Oe());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let V=ro(),q=Oe();return g.Ns.getEntries(x,v).next((z=>{V=z,V.forEach(((j,H)=>{H.isValidDocument()||(q=q.add(j))}))})).next((()=>g.localDocuments.getOverlayedDocuments(x,V))).next((z=>{E=z;const j=[];for(const H of h){const W=Dx(H,E.get(H.key).overlayedDocument);W!=null&&j.push(new Jr(H.key,W,dS(W.value.mapValue),to.exists(!0)))}return g.mutationQueue.addMutationBatch(x,p,j,h)})).next((z=>{S=z;const j=z.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(x,z.batchId,j)}))})).then((()=>({batchId:S.batchId,changes:SS(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(d,h,g){let p=d.Vu[d.currentUser.toKey()];p||(p=new pt(Le)),p=p.insert(h,g),d.Vu[d.currentUser.toKey()]=p})(i,s.batchId,t),await uu(i,s.changes),await Bf(i.remoteStore)}catch(s){const l=Dp(s,"Failed to persist write");t.reject(l)}}async function iC(n,e){const t=xe(n);try{const i=await MD(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const d=t.Au.get(l);d&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?d.hu=!0:s.modifiedDocuments.size>0?Qe(d.hu,14607):s.removedDocuments.size>0&&(Qe(d.hu,42227),d.hu=!1))})),await uu(t,i,e)}catch(i){await ha(i)}}function IT(n,e,t){const i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((l,d)=>{const h=d.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(d,h){const g=xe(d);g.onlineState=h;let p=!1;g.queries.forEach(((v,E)=>{for(const S of E.Sa)S.va(h)&&(p=!0)})),p&&Np(g)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vN(n,e,t){const i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),l=s&&s.key;if(l){let d=new pt(ve.comparator);d=d.insert(l,rn.newNoDocument(l,we.min()));const h=Oe().add(l),g=new Of(we.min(),new Map,new pt(Le),d,h);await iC(i,g),i.du=i.du.remove(l),i.Au.delete(e),Pp(i)}else await Nm(i.localStore,e,!1).then((()=>km(i,e,t))).catch(ha)}async function TN(n,e){const t=xe(n),i=e.batch.batchId;try{const s=await wD(t.localStore,e);rC(t,i,null),oC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await uu(t,s)}catch(s){await ha(s)}}async function EN(n,e,t){const i=xe(n);try{const s=await(function(d,h){const g=xe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,h).next((E=>(Qe(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,h))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(i.localStore,e);rC(i,e,t),oC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await uu(i,s)}catch(s){await ha(s)}}function oC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function rC(n,e,t){const i=xe(n);let s=i.Vu[i.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||sC(n,i)}))}function sC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ip(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Pp(n))}function RT(n,e,t){for(const i of t)i instanceof eC?(n.Ru.addReference(i.key,e),SN(n,i)):i instanceof tC?(de(bp,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||sC(n,i.key)):Se(19791,{wu:i})}function SN(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(de(bp,"New document in limbo: "+t),n.Eu.add(i),Pp(n))}function Pp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(mt.fromString(e)),i=n.fu.next();n.Au.set(i,new fN(t)),n.du=n.du.insert(t,i),KS(n.remoteStore,new Bo(_i(gp(t.path)),i,"TargetPurposeLimboResolution",Df.ce))}}async function uu(n,e,t){const i=xe(n),s=[],l=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,g)=>{d.push(i.pu(g,e,t).then((p=>{var v;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){s.push(p);const E=Cp.As(g.targetId,p);l.push(E)}})))})),await Promise.all(d),i.Pu.H_(s),await(async function(g,p){const v=xe(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>oe.forEach(p,(S=>oe.forEach(S.Es,(x=>v.persistence.referenceDelegate.addReference(E,S.targetId,x))).next((()=>oe.forEach(S.ds,(x=>v.persistence.referenceDelegate.removeReference(E,S.targetId,x)))))))))}catch(E){if(!ma(E))throw E;de(Ap,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const x=v.Ms.get(S),V=x.snapshotVersion,q=x.withLastLimboFreeSnapshotVersion(V);v.Ms=v.Ms.insert(S,q)}}})(i.localStore,l))}async function CN(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){de(bp,"User change. New user:",e.toKey());const i=await zS(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((h=>{h.forEach((g=>{g.reject(new ye(ae.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await uu(t,i.Ls)}}function AN(n,e){const t=xe(n),i=t.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let s=Oe();const l=t.Iu.get(e);if(!l)return s;for(const d of l){const h=t.Tu.get(d);s=s.unionWith(h.view.nu)}return s}}function aC(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vN.bind(null,e),e.Pu.H_=sN.bind(null,e.eventManager),e.Pu.yu=aN.bind(null,e.eventManager),e}function IN(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EN.bind(null,e),e}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return RD(this.persistence,new CD,e.initialUser,this.serializer)}Cu(e){return new GS(Sp.mi,this.serializer)}Du(e){return new PD}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class RN extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof vf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new lD(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new GS((i=>vf.mi(i,t)),this.serializer)}}class Vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>IT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=CN.bind(null,this.syncEngine),await tN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iN})()}createDatastore(e){const t=Ff(e.databaseInfo.databaseId),i=(function(l){return new OD(l)})(e.databaseInfo);return(function(l,d,h,g){return new HD(l,d,h,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,l,d,h){return new zD(i,s,l,d,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>IT(this.syncEngine,t,0)),(function(){return vT.v()?new vT:new kD})())}createSyncEngine(e,t){return(function(s,l,d,h,g,p,v){const E=new dN(s,l,d,h,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=xe(s);de(Gr,"RemoteStore shutting down."),l.Ea.add(5),await lu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="FirestoreClient";class MN{constructor(e,t,i,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=on.UNAUTHENTICATED,this.clientId=up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{de(jo,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(de(jo,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Dp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function um(n,e){n.asyncQueue.verifyOperationInProgress(),de(jo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await zS(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function wT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await xN(n);de(jo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>ET(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>ET(e.remoteStore,s))),n._onlineComponents=e}async function xN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(jo,"Using user provided OfflineComponentProvider");try{await um(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ia("Error using user provided cache. Falling back to memory cache: "+t),await um(n,new Ef)}}else de(jo,"Using default OfflineComponentProvider"),await um(n,new RN(void 0));return n._offlineComponents}async function lC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(jo,"Using user provided OnlineComponentProvider"),await wT(n,n._uninitializedComponentsProvider._online)):(de(jo,"Using default OnlineComponentProvider"),await wT(n,new Vm))),n._onlineComponents}function DN(n){return lC(n).then((e=>e.syncEngine))}async function NN(n){const e=await lC(n),t=e.eventManager;return t.onListen=hN.bind(null,e.syncEngine),t.onUnlisten=gN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yN.bind(null,e.syncEngine),t}function bN(n,e,t={}){const i=new Jo;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,h,g,p){const v=new wN({next:S=>{v.Nu(),d.enqueueAndForget((()=>rN(l,E)));const x=S.docs.has(h);!x&&S.fromCache?p.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&g&&g.source==="server"?p.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new lN(gp(h.path),v,{includeMetadataChanges:!0,qa:!0});return oN(l,E)})(await NN(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firestore.googleapis.com",xT=!0;class DT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cC,this.ssl=xT}else this.host=e.host,this.ssl=e.ssl??xT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sD)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new b1;switch(i.type){case"firstParty":return new U1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=MT.get(t);i&&(de("ComponentProvider","Removing Datastore"),MT.delete(t),i.terminate())})(this),Promise.resolve()}}function PN(n,e,t,i={}){var p;n=$l(n,kp);const s=ua(e),l=n._getSettings(),d={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(c0(`https://${h}`),f0("Firestore",!0)),l.host!==cC&&l.host!==h&&ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:h,ssl:s,emulatorOptions:i};if(!Fr(g,d)&&(n._setSettings(g),i.mockUserToken)){let v,E;if(typeof i.mockUserToken=="string")v=i.mockUserToken,E=on.MOCK_USER;else{v=nR(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(S)}n._authCredentials=new P1(new tS(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vp(this.firestore,e,this._query)}}class Gt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ru(t,Gt._jsonSchema))return new Gt(e,i||null,new ve(mt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:xt("string",Gt._jsonSchemaVersion),referencePath:xt("string")};class jl extends Vp{constructor(e,t,i){super(e,t,gp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ve(e))}withConverter(e){return new jl(this.firestore,e,this._path)}}function fC(n,e,...t){if(n=Bn(n),arguments.length===1&&(e=up.newId()),H1("doc","path",e),n instanceof kp){const i=mt.fromString(e,...t);return zv(i),new Gt(n,null,new ve(i))}{if(!(n instanceof Gt||n instanceof jl))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return zv(i),new Gt(n.firestore,n instanceof jl?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="AsyncQueue";class bT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const i=lm();i&&de(NT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=lm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Jo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ma(e))throw e;de(NT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,oo("INTERNAL UNHANDLED ERROR: ",PT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=xp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Se(47125,{Pc:PT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function PT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Up extends kp{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new bT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function kN(n,e){const t=typeof n=="object"?n:p0(),i=typeof n=="string"?n:df,s=Wm(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const l=eR("firestore");l&&PN(s,...l)}return s}function dC(n){if(n._terminated)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VN(n),n._firestoreClient}function VN(n){var i,s,l;const e=n._freezeSettings(),t=(function(h,g,p,v){return new ex(h,g,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,uC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new MN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const g=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(Wt.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ru(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:xt("string",Fn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(ru(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:xt("string",Ti._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ru(e,Ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ei(e.vectorValues);throw new ye(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:xt("string",Ei._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=/^__.*__$/;class LN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}function mC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class Op{constructor(e,t,i,s,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Op({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mC(this.Ac)&&UN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ON{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ff(e)}Cc(e,t,i,s=!1){return new Op({Ac:e,methodName:t,Dc:i,path:Xt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FN(n){const e=n._freezeSettings(),t=Ff(n._databaseId);return new ON(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qN(n,e,t,i,s,l={}){const d=n.Cc(l.merge||l.mergeFields?2:0,e,t,s);_C("Data must be an object, but it was:",d,i);const h=gC(i,d);let g,p;if(l.merge)g=new Xn(d.fieldMask),p=d.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=BN(e,E,t);if(!d.contains(S))throw new ye(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);GN(v,S)||v.push(S)}g=new Xn(v),p=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=d.fieldTransforms;return new LN(new On(h),g,p)}function pC(n,e){if(yC(n=Bn(n)))return _C("Unsupported field value:",e,n),gC(n,e);if(n instanceof hC)return(function(i,s){if(!mC(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const l=[];let d=0;for(const h of i){let g=pC(h,s.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(n,e)}return(function(i,s){if((i=Bn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ax(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=at.fromDate(i);return{timestampValue:_f(s.serializer,l)}}if(i instanceof at){const l=new at(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_f(s.serializer,l)}}if(i instanceof Ti)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:VS(s.serializer,i._byteString)};if(i instanceof Gt){const l=s.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw s.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Tp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Ei)return(function(d,h){return{mapValue:{fields:{[cS]:{stringValue:fS},[hf]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return yp(h.serializer,p)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${cp(i)}`)})(n,e)}function gC(n,e){const t={};return oS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(n,((i,s)=>{const l=pC(s,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function yC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof Ti||n instanceof Fn||n instanceof Gt||n instanceof hC||n instanceof Ei)}function _C(n,e,t){if(!yC(t)||!nS(t)){const i=cp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function BN(n,e,t){if((e=Bn(e))instanceof Lp)return e._internalPath;if(typeof e=="string")return vC(n,e);throw Sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const HN=new RegExp("[~\\*/\\[\\]]");function vC(n,e,t){if(e.search(HN)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lp(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sf(n,e,t,i,s){const l=i&&!i.isEmpty(),d=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${i}`),d&&(g+=` in document ${s}`),g+=")"),new ye(ae.INVALID_ARGUMENT,h+n+g)}function GN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t,i,s,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(EC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zN extends TC{data(){return super.data()}}function EC(n,e){return typeof e=="string"?vC(n,e):e instanceof Lp?e._internalPath:e._delegate._internalPath}class YN{convertValue(e,t="none"){switch(Wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Yr(e,((s,l)=>{i[s]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,s,l;const t=(l=(s=(i=e.fields)==null?void 0:i[hf].arrayValue)==null?void 0:s.values)==null?void 0:l.map((d=>St(d.doubleValue)));return new Ei(t)}convertGeoPoint(e){return new Ti(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=bf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const t=Qo(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mt.fromString(e);Qe(BS(i),9688,{name:e});const s=new Ql(i.get(1),i.get(3)),l=new ve(i.popFirst(5));return s.isEqual(t)||oo(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class kl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Or extends TC{constructor(e,t,i,s,l,d){super(e,t,i,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(EC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Or._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:xt("string",Or._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class Zc extends Or{data(e={}){return super.data(e)}}class Bl{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new kl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Zc(this._firestore,this._userDataWriter,i.key,i,new kl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map((h=>{const g=new Zc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new kl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const g=new Zc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new kl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,v=-1;return h.type!==0&&(p=d.indexOf(h.doc.key),d=d.delete(h.doc.key)),h.type!==1&&(d=d.add(h.doc),v=d.indexOf(h.doc.key)),{type:JN(h.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n){n=$l(n,Gt);const e=$l(n.firestore,Up);return bN(dC(e),n._key).then((t=>ZN(e,n,t)))}Bl._jsonSchemaVersion="firestore/querySnapshot/1.0",Bl._jsonSchema={type:xt("string",Bl._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class QN extends YN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function XN(n,e,t){n=$l(n,Gt);const i=$l(n.firestore,Up),s=$N(n.converter,e);return WN(i,[qN(FN(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,to.none())])}function WN(n,e){return(function(i,s){const l=new Jo;return i.asyncQueue.enqueueAndForget((async()=>_N(await DN(i),s,l))),l.promise})(dC(n),e)}function ZN(n,e,t){const i=t.docs.get(e._key),s=new QN(n);return new Or(n,s,e._key,i,new kl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){da=s})(ca),ta(new qr("firestore",((i,{instanceIdentifier:s,options:l})=>{const d=i.getProvider("app").getImmediate(),h=new Up(new k1(i.getProvider("auth-internal")),new L1(d,i.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ql(p.options.projectId,v)})(d,s),d);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Yo(qv,Bv,e),Yo(qv,Bv,"esm2020")})();const Um={apiKey:"AIzaSyBQPhgF-vn3-4_zcjfVPo5igOzX8NkKKt8",authDomain:"tablit-b6e78.firebaseapp.com",projectId:"tablit-b6e78",storageBucket:"tablit-b6e78.appspot.com",messagingSenderId:"993416386108",appId:"1:993416386108:web:1e6d42be34beb6a8efd539",measurementId:"G-YJP77FD8GZ"},SC=m0(Um),Fp=D1(SC),CC=kN(SC),AC=new Zi;AC.setCustomParameters({prompt:"select_account"});const IC=n=>({uid:n.uid,displayName:n.displayName,photoURL:n.photoURL}),jN=n=>{const e={};return Array.isArray(n)&&n.forEach((t,i)=>{Array.isArray(t)&&t.forEach((s,l)=>{s&&s.length>0&&(e[`${i}-${l}`]=s)})}),e},eb=(n,e)=>{const i=e.periods||7,s=Array(7).fill(0).map(()=>Array(i).fill(0).map(()=>[]));if(!n)return s;for(const l in n){const[d,h]=l.split("-").map(Number);d<7&&h<i&&(s[d][h]=n[l])}return s},RC=(n,e)=>{throw console.error(`Firestore ${e} Error:`,n),n instanceof Zn&&(n.code==="permission-denied"?alert(`Firestore アクセス権限エラー (permission-denied)

データベースへのアクセスが拒否されました。
これは、Firestoreのセキュリティルールが原因で、ログイン中のユーザーにデータの読み書きが許可されていないことを意味します。

--- 解決手順：セキュリティルールの更新 ---

✅ 1. Firebaseコンソールを開きます: https://console.firebase.google.com/
✅ 2. あなたのプロジェクト (${Um.projectId}) を選択 > 左側のメニューから「Firestore Database」をクリックします。
✅ 3. 上部にある「ルール」タブを選択します。
✅ 4. エディタに表示されている既存のルールをすべて削除し、以下のルールに置き換えてください:

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      // ログインしているユーザーは、自分のデータのみ読み書きできます。
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}

✅ 5. 「公開」ボタンをクリックして、新しいルールを保存します。

このルールは、「ログインしているユーザーは、自分自身のデータ（ドキュメント）のみを読み書きできる」というもので、安全なデータアクセスの基本です。

ルールを更新後、アプリケーションをリロードしてください。`):(n.code==="unavailable"||n.message.includes("offline")||n.message.includes("Failed to get document"))&&alert(`Firestore 接続エラー

データベースとの通信に失敗しました。
これは多くの場合、FirebaseプロジェクトでFirestoreデータベースが有効になっていないことが原因です。

--- 設定確認チェックリスト ---

✅ 1. Firestore データベースを作成しましたか？
   - Firebaseコンソールを開きます: https://console.firebase.google.com/
   - あなたのプロジェクト (${Um.projectId}) を選択 > 左側のメニューから「Firestore Database」をクリックします。
   - 「データベースの作成」ボタンが表示される場合、クリックしてデータベースを初期化してください。
   - モード選択では「テストモードで開始する」を選ぶと開発がスムーズです。
   - リージョン（ロケーション）を選択します（例: asia-northeast1）。一度選択すると変更できないためご注意ください。

✅ 2. APIが有効になっていますか？
   - 通常、データベースを作成すると自動で有効になります。
   - 確認ページ: https://console.cloud.google.com/apis/library/firestore.googleapis.com
   - 対象のプロジェクトで「Cloud Firestore API」が有効になっていることを確認してください。

上記を確認後、アプリケーションをリロードして再度お試しください。`)),n},tb=async()=>{try{const n=await FM(Fp,AC);return IC(n.user)}catch(n){throw n instanceof Zn?(console.error("Firebase Auth Error:",{code:n.code,message:n.message}),n.code==="auth/popup-blocked"?alert("ログイン用のポップアップがブラウザにブロックされました。ポップアップを許可してから、もう一度お試しください。"):n.code==="auth/popup-closed-by-user"?console.log("Login popup was closed by the user."):n.code==="auth/configuration-not-found"?alert(`Googleログイン設定エラー (auth/configuration-not-found)

Firebaseプロジェクトの認証設定が完了していないようです。
コードの修正は不要です。以下の手順でFirebaseコンソールの設定を確認してください。

--- 設定確認チェックリスト ---

✅ 1. Google サインインの有効化
   - Firebaseコンソールを開きます: https://console.firebase.google.com/
   - プロジェクトを選択 > 「Authentication」 > 「Sign-in method」タブ
   - プロバイダーリストから「Google」を選択し、「有効にする」スイッチがオンになっていることを確認してください。

✅ 2. 承認済みドメインの確認
   - 「Authentication」 > 「Settings」タブ
   - 「承認済みドメイン」セクションに、アプリを実行しているドメイン（例: localhost）がリストに含まれていることを確認してください。なければ追加します。

✅ 3. Firebase構成キーの確認
   - プロジェクト設定（歯車アイコン） > 「全般」タブ
   - 「マイアプリ」セクションでウェブアプリを選択し、表示される 'firebaseConfig' の値が、プロジェクト内の 'firebaseConfig.ts' ファイルの内容と完全に一致しているか確認してください。

上記3点を確認後、再度ログインをお試しください。`):alert("ログイン中にエラーが発生しました。コンソールで詳細を確認してください。")):(console.error("An unexpected error occurred during sign-in:",n),alert("予期せぬエラーが発生しました。")),n}},nb=()=>vM(Fp),ib=n=>_M(Fp,e=>{n(e?IC(e):null)}),ob=async(n,e)=>{try{const t={...e,timetables:e.timetables.map(s=>({...s,grid:jN(s.grid)}))},i=fC(CC,"users",n);await XN(i,{timetableData:t})}catch(t){RC(t,"保存")}},rb=async n=>{try{const e=fC(CC,"users",n),t=await KN(e);if(t.exists()){const i=t.data().timetableData;return{...i,timetables:i.timetables.map(l=>({...l,grid:eb(l.grid,l.settings)}))}}else return null}catch(e){return RC(e,"読み込み"),null}},cm=()=>({id:`timetable-${Date.now()}`,name:"前期の時間割",settings:{days:Gl.slice(0,5),periods:7},grid:Array(7).fill(0).map(()=>Array(7).fill(0).map(()=>[]))}),sb=n=>{const[e,t]=Me.useState([]),[i,s]=Me.useState(null),[l,d]=Me.useState("idle"),[h,g]=Me.useState(!0),p=Me.useRef(null);Me.useEffect(()=>{(async()=>{g(!0);try{let J=null,se=null;if(n){const D=await rb(n.uid);D&&(J=D.timetables,se=D.activeTimetableId)}else{const D=localStorage.getItem("timetables"),w=localStorage.getItem("activeTimetableId");D&&(J=JSON.parse(D),se=w)}if(J&&J.length>0)t(J),se&&J.some(D=>D.id===se)?s(se):s(J[0].id);else{const D=cm();t([D]),s(D.id)}}catch(J){console.error("Failed to load data:",J);const se=cm();t([se]),s(se.id)}finally{g(!1),d("idle")}})()},[n]),Me.useEffect(()=>{if(!(h||e.length===0))return d("saving"),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{const X={timetables:e,activeTimetableId:i};try{n?ob(n.uid,X):(localStorage.setItem("timetables",JSON.stringify(e)),i&&localStorage.setItem("activeTimetableId",i)),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(J){console.error("Failed to save data:",J),d("idle")}},1e3),()=>{p.current&&clearTimeout(p.current)}},[e,i,n,h]);const v=e.find(X=>X.id===i),E=Me.useCallback(X=>{t(J=>J.map(se=>se.id===i?X:se))},[i]),S=X=>{const J={...cm(),name:X,id:`timetable-${Date.now()}`};t(se=>[...se,J]),s(J.id)},x=Me.useCallback(X=>{try{const J=JSON.parse(X);if(typeof J.name!="string"||typeof J.settings!="object"||!Array.isArray(J.grid))throw new Error("Invalid timetable format.");const se={...J,id:`timetable-${Date.now()}`};return t(D=>[...D,se]),s(se.id),!0}catch(J){return console.error("Failed to import timetable:",J),!1}},[]),V=X=>{t(J=>{const se=J.filter(D=>D.id!==X);return i===X&&s(se.length>0?se[0].id:null),se})},q=Me.useCallback(X=>{if(!v)return;const J=Array(Gl.length).fill(0).map((se,D)=>Array(X.periods).fill(0).map((w,M)=>{var k;const P=Gl[D];return v.settings.days.includes(P)&&D<v.settings.days.length&&M<v.settings.periods?((k=v.grid[D])==null?void 0:k[M])||[]:[]}));E({...v,settings:X,grid:J})},[v,E]),z=Me.useCallback((X,J,se)=>{if(!v)return;const D=v.grid.map(P=>P.map(k=>[...k])),w=D[J][se],M=w.findIndex(P=>P.id===X.id);M>-1?w[M]=X:w.push(X),E({...v,grid:D})},[v,E]),j=Me.useCallback((X,J,se)=>{if(!v)return;const D=v.grid.map(w=>w.map(M=>[...M]));D[J][se]=D[J][se].filter(w=>w.id!==X),E({...v,grid:D})},[v,E]),H=Me.useCallback((X,J,se)=>{if(!v)return;const D=v.grid.map(w=>w.map(M=>[...M]));D[J.dayIndex][J.periodIndex]=D[J.dayIndex][J.periodIndex].filter(w=>w.id!==X.id),D[se.dayIndex][se.periodIndex].push(X),E({...v,grid:D})},[v,E]),W=v?[...new Set(v.grid.flat(2).map(X=>X.id))].map(X=>v.grid.flat(2).find(J=>J.id===X)).reduce((X,J)=>X+((J==null?void 0:J.credits)||0),0):0;return{timetables:e,activeTimetable:v,activeTimetableId:i,setActiveTimetableId:s,addTimetable:S,importTimetable:x,deleteTimetable:V,updateTimetableSettings:q,saveSubject:z,deleteSubject:j,moveSubject:H,totalCredits:W,saveStatus:l,isLoading:h}},qp=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),wC=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Hf=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),MC=({className:n})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),ab=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),lb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),ub=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),cb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),fb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),db=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),hb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),mb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),pb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),gb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:n,children:O.jsx("path",{d:"M3.105 2.289a.75.75 0 00-.826.95l1.414 4.949a.75.75 0 00.95.826L11.25 8.25l-5.607-1.402a.75.75 0 00-.95.826l1.414 4.949a.75.75 0 00.95.826L11.25 11.75l-5.607-1.402a.75.75 0 00-.95.826l1.414 4.949a.75.75 0 00.95.826L16.25 12l-12.2-9.148a.75.75 0 00-.945-.563z"})}),yb=({status:n})=>{if(n==="idle")return null;const t={saving:{icon:O.jsx(pb,{className:"w-4 h-4 animate-spin"}),text:"保存中...",color:"text-gray-700 dark:text-gray-300"},saved:{icon:O.jsx(mb,{className:"w-4 h-4"}),text:"保存済み",color:"text-emerald-600 dark:text-emerald-400"}}[n];return O.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-medium px-2 py-1 rounded-full bg-black/5 dark:bg-white/10 ${t.color}`,children:[t.icon,O.jsx("span",{children:t.text})]})},_b=({timetables:n,activeTimetableId:e,setActiveTimetableId:t,onAddTimetable:i,onDeleteTimetable:s,onOpenSettings:l,onToggleChat:d,totalCredits:h,theme:g,toggleTheme:p,onExport:v,onImport:E,user:S,onLogin:x,onLogout:V,saveStatus:q})=>O.jsxs("header",{className:"sticky top-0 z-30 p-4 bg-gray-100/80 dark:bg-gray-900/70 backdrop-blur-lg shadow-md border-b border-black/10 dark:border-white/10 flex flex-wrap justify-between items-center gap-4",children:[O.jsx("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap",children:e?O.jsxs(O.Fragment,{children:[O.jsx("select",{value:e,onChange:z=>t(z.target.value),className:"bg-gray-200/50 dark:bg-gray-700/50 border border-black/10 dark:border-white/10 rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-sky-500 transition-colors",children:n.map(z=>O.jsx("option",{value:z.id,className:"bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white",children:z.name},z.id))}),O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"新しい時間割を追加",children:O.jsx(qp,{className:"w-5 h-5"})}),O.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors text-red-500 hover:text-red-600",title:"現在の時間割を削除",children:O.jsx(wC,{className:"w-5 h-5"})})]}),O.jsxs("div",{className:"bg-sky-500/20 text-sky-800 dark:text-sky-200 text-sm font-bold px-3 py-1.5 rounded-full",children:["合計単位数: ",h]}),O.jsx(yb,{status:q})]}):O.jsx("button",{onClick:i,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"最初の時間割を作成"})}),O.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[O.jsxs("label",{htmlFor:"import-file",className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors cursor-pointer",title:"時間割をインポート (.tmx)",children:[O.jsx(fb,{className:"w-6 h-6"}),O.jsx("input",{id:"import-file",type:"file",accept:".tmx",className:"hidden",onChange:E})]}),O.jsx("button",{onClick:v,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"時間割をエクスポート (.tmx)",children:O.jsx(cb,{className:"w-6 h-6"})}),O.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"設定",children:O.jsx(MC,{className:"w-6 h-6"})}),O.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"AIアシスタント",children:O.jsx(ab,{className:"w-6 h-6"})}),O.jsx("button",{onClick:p,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"テーマを切り替え",children:g==="light"?O.jsx(ub,{className:"w-6 h-6"}):O.jsx(lb,{className:"w-6 h-6"})}),O.jsx("div",{className:"border-l border-gray-300 dark:border-gray-600 pl-2 ml-1",children:S?O.jsxs("div",{className:"flex items-center gap-2",children:[S.photoURL?O.jsx("img",{src:S.photoURL,alt:"profile",className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-500"}):O.jsx(db,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"}),O.jsx("button",{onClick:V,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"ログアウト",children:O.jsx(hb,{className:"w-6 h-6"})})]}):O.jsx("button",{onClick:x,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm py-2 px-4 rounded-lg transition-colors",children:"Googleでログイン"})})]})]}),vb=({subject:n,onClick:e,dayIndex:t,periodIndex:i,onContextMenu:s})=>{const l=g=>{const p={subject:n,from:{dayIndex:t,periodIndex:i}};g.dataTransfer.setData("application/json",JSON.stringify(p)),g.currentTarget.style.opacity="0.5",g.currentTarget.style.transform="scale(0.95)"},d=g=>{g.currentTarget.style.opacity="1",g.currentTarget.style.transform="scale(1)"},h=n.tasks.filter(g=>!g.completed).length;return O.jsxs("div",{draggable:!0,onDragStart:l,onDragEnd:d,onClick:e,onContextMenu:s,className:`${n.color} rounded-lg p-1.5 text-white text-xs cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex flex-col justify-between h-full`,children:[O.jsxs("div",{children:[O.jsx("p",{className:"font-bold text-sm leading-tight break-words",children:n.name}),O.jsx("p",{className:"text-white/80 break-words",children:n.room})]}),h>0&&O.jsx("div",{className:"mt-1 flex items-center self-end",children:O.jsx("span",{className:"text-xs bg-white/30 text-white rounded-full px-1.5 py-0.5 font-bold",children:h})})]})},Tb=({x:n,y:e,items:t,onClose:i})=>{const s=Me.useRef(null);return Me.useEffect(()=>{const l=d=>{s.current&&!s.current.contains(d.target)&&i()};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[i]),O.jsx("div",{ref:s,className:"fixed z-50 bg-gray-100/70 dark:bg-gray-800/70 backdrop-blur-md rounded-lg shadow-2xl border border-black/10 dark:border-white/10 p-1.5 min-w-[150px] fade-in",style:{top:e,left:n},onContextMenu:l=>l.preventDefault(),children:O.jsx("ul",{className:"space-y-1",children:t.map((l,d)=>O.jsx("li",{children:O.jsx("button",{onClick:l.onClick,disabled:l.disabled,className:"w-full text-left px-3 py-1.5 text-sm rounded-md flex items-center gap-2 hover:bg-sky-500 hover:text-white disabled:opacity-50 disabled:hover:bg-transparent disabled:text-gray-500 dark:disabled:text-gray-400 transition-colors",children:l.label})},d))})})},Eb=({timetable:n,onAddSubject:e,onEditSubject:t,onMoveSubject:i,onDeleteSubject:s,onCopySubject:l,onPasteSubject:d,copiedSubject:h})=>{const{settings:g,grid:p}=n,[v,E]=Me.useState(null);Me.useEffect(()=>{const j=()=>E(null);return window.addEventListener("click",j),()=>window.removeEventListener("click",j)},[]);const S=j=>{j.preventDefault(),j.currentTarget.classList.add("bg-sky-400/30")},x=j=>{j.currentTarget.classList.remove("bg-sky-400/30")},V=(j,H,W)=>{j.preventDefault(),j.currentTarget.classList.remove("bg-sky-400/30");const X=j.dataTransfer.getData("application/json");if(X){const{subject:J,from:se}=JSON.parse(X);i(J,se,{dayIndex:H,periodIndex:W})}},q=(j,H,W,X)=>{j.preventDefault(),j.stopPropagation(),E({x:j.clientX,y:j.clientY,items:[{label:"コピー",onClick:()=>{l(H),E(null)}},{label:"削除",onClick:()=>{s(H.id,W,X),E(null)}}]})},z=(j,H,W)=>{j.preventDefault(),E({x:j.clientX,y:j.clientY,items:[{label:"貼り付け",onClick:()=>{d(H,W),E(null)},disabled:!h}]})};return O.jsxs("div",{className:"p-2 md:p-8 flex-grow fade-in overflow-x-auto",children:[O.jsxs("div",{className:"grid gap-0.5 md:gap-1 bg-gray-500/10 backdrop-blur-md rounded-2xl p-1 md:p-2 border border-black/10 dark:border-white/10 min-w-[768px]",style:{gridTemplateColumns:`auto repeat(${g.days.length}, 1fr)`},children:[O.jsx("div",{className:"p-2"}),g.days.map((j,H)=>O.jsx("div",{className:"text-center font-bold py-3 text-xs md:text-base text-gray-700 dark:text-gray-300",children:j},H)),Array.from({length:g.periods}).map((j,H)=>O.jsxs(i0.Fragment,{children:[O.jsx("div",{className:"text-center font-bold px-1 md:px-2 py-4 text-xs md:text-base text-gray-700 dark:text-gray-300",children:H+1}),g.days.map((W,X)=>{var D;const J=Sb.indexOf(W),se=((D=p[J])==null?void 0:D[H])||[];return O.jsxs("div",{className:"min-h-[90px] md:min-h-[110px] bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 rounded-lg p-1 flex flex-col gap-1 transition-colors duration-300",onDragOver:S,onDragLeave:x,onDrop:w=>V(w,J,H),onContextMenu:w=>z(w,J,H),children:[se.map(w=>O.jsx(vb,{subject:w,onClick:()=>t(w,J,H),dayIndex:J,periodIndex:H,onContextMenu:M=>q(M,w,J,H)},w.id)),O.jsx("button",{onClick:()=>e(J,H),className:"mt-auto w-full flex-grow flex items-center justify-center text-gray-400/50 hover:bg-black/5 dark:hover:bg-white/5 rounded-md transition-colors",children:O.jsx(qp,{className:"w-5 h-5"})})]},`${X}-${H}`)})]},H))]}),v&&O.jsx(Tb,{...v,onClose:()=>E(null)})]})},Sb=["月","火","水","木","金","土","日"],kT={name:"",room:"",credits:0,memo:"",color:Hc[0],tasks:[]},Cb=({isOpen:n,onClose:e,onSave:t,onDelete:i,subjectData:s})=>{const[l,d]=Me.useState({...kT,id:`subject-${Date.now()}`}),[h,g]=Me.useState(""),[p,v]=Me.useState("");Me.useEffect(()=>{n&&(s.subject?d(s.subject):d({...kT,id:`subject-${Date.now()}`,color:Hc[Math.floor(Math.random()*Hc.length)]}))},[n,s]);const E=H=>{const{name:W,value:X}=H.target;d(J=>({...J,[W]:W==="credits"?parseInt(X)||0:X}))},S=H=>{d(W=>({...W,color:H}))},x=()=>{if(h.trim()==="")return;const H={id:`task-${Date.now()}`,content:h,dueDate:p,completed:!1};d(W=>({...W,tasks:[...W.tasks,H]})),g(""),v("")},V=H=>{d(W=>({...W,tasks:W.tasks.map(X=>X.id===H?{...X,completed:!X.completed}:X)}))},q=H=>{d(W=>({...W,tasks:W.tasks.filter(X=>X.id!==H)}))},z=()=>{t(l,s.dayIndex,s.periodIndex),e()},j=()=>{i&&s.subject&&(i(s.subject.id,s.dayIndex,s.periodIndex),e())};return O.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:O.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[O.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[O.jsx("h2",{className:"text-xl font-bold",children:s.subject?"授業の編集":"授業の追加"}),O.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:O.jsx(Hf,{className:"w-6 h-6"})})]}),O.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsx("input",{name:"name",value:l.name,onChange:E,placeholder:"授業名",className:"md:col-span-2 bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("input",{name:"room",value:l.room,onChange:E,placeholder:"教室",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("input",{name:"credits",type:"number",value:l.credits,onChange:E,placeholder:"単位数",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"})]}),O.jsx("textarea",{name:"memo",value:l.memo,onChange:E,placeholder:"授業メモ",className:"w-full bg-black/5 dark:bg-white/5 p-2 rounded-md h-24 resize-none focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("div",{className:"flex flex-wrap gap-2",children:Hc.map(H=>O.jsx("button",{onClick:()=>S(H),className:`w-8 h-8 rounded-full ${H} transition-transform hover:scale-110 ${l.color===H?"ring-2 ring-offset-2 ring-offset-gray-100 dark:ring-offset-gray-900 ring-sky-500":""}`},H))}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-2",children:"課題"}),O.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:l.tasks.map(H=>O.jsxs("div",{className:"flex items-center gap-2 bg-black/5 dark:bg-white/5 p-2 rounded-md",children:[O.jsx("input",{type:"checkbox",checked:H.completed,onChange:()=>V(H.id),className:"form-checkbox h-5 w-5 rounded bg-gray-300 dark:bg-gray-600 border-gray-400 dark:border-gray-500 text-sky-600 focus:ring-sky-500"}),O.jsxs("div",{className:"flex-grow",children:[O.jsx("p",{className:`${H.completed?"line-through text-gray-500":""}`,children:H.content}),H.dueDate&&O.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["期限: ",H.dueDate]})]}),O.jsx("button",{onClick:()=>q(H.id),className:"p-1 rounded-full text-gray-500 hover:bg-red-500/20 hover:text-red-500",children:O.jsx(wC,{className:"w-4 h-4"})})]},H.id))}),O.jsxs("div",{className:"mt-4 flex gap-2",children:[O.jsx("input",{value:h,onChange:H=>g(H.target.value),placeholder:"新しい課題",className:"flex-grow bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("input",{type:"date",value:p,onChange:H=>v(H.target.value),className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500"}),O.jsx("button",{onClick:x,className:"bg-sky-600 hover:bg-sky-700 text-white p-2 rounded-md",children:O.jsx(qp,{className:"w-5 h-5"})})]})]})]}),O.jsxs("div",{className:"p-4 flex justify-between items-center border-t border-black/10 dark:border-white/10 mt-auto",children:[O.jsx("div",{children:s.subject&&i&&O.jsx("button",{onClick:j,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"削除"})}),O.jsx("button",{onClick:z,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"保存"})]})]})})},Ab=({isOpen:n,onClose:e,onSave:t,currentSettings:i})=>{const[s,l]=Me.useState(i);if(Me.useEffect(()=>{n&&l(i)},[n,i]),!n)return null;const d=p=>{const v=s.days.includes(p)?s.days.filter(S=>S!==p):[...s.days,p],E=Gl.filter(S=>v.includes(S));l(S=>({...S,days:E}))},h=p=>{const v=Math.max(1,Math.min(10,parseInt(p.target.value)||1));l(E=>({...E,periods:v}))},g=()=>{t(s),e()};return O.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:O.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[O.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[O.jsx("h2",{className:"text-xl font-bold",children:"表示設定"}),O.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:O.jsx(Hf,{className:"w-6 h-6"})})]}),O.jsxs("div",{className:"p-6 space-y-6",children:[O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-3",children:"表示する曜日"}),O.jsx("div",{className:"flex flex-wrap gap-2",children:Gl.map(p=>O.jsxs("button",{onClick:()=>d(p),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${s.days.includes(p)?"bg-sky-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[p,"曜日"]},p))})]}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-2",children:"時限数"}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("input",{type:"range",min:"1",max:"10",value:s.periods,onChange:h,className:"w-full h-2 bg-gray-300 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-sky-600"}),O.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 rounded-md px-3 py-1 font-bold",children:s.periods})]})]})]}),O.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10",children:O.jsx("button",{onClick:g,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"保存"})})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ib,Rb;function wb(){return{geminiUrl:Ib,vertexUrl:Rb}}function Mb(n,e,t,i){var s,l;if(!(n!=null&&n.baseUrl)){const d=wb();return e?(s=d.vertexUrl)!==null&&s!==void 0?s:t:(l=d.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qr{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(n,e,t){for(let l=0;l<e.length-1;l++){const d=e[l];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[h])){const g=n[h];if(Array.isArray(t))for(let p=0;p<g.length;p++){const v=g[p];c(v,e.slice(l+1),t[p])}else for(const p of g)c(p,e.slice(l+1),t)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in n||(n[h]=[{}]);const g=n[h];c(g[0],e.slice(l+1),t);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function u(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const l=n[s];return Array.isArray(l)?l.map(d=>u(d,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(VT||(VT={}));var UT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(UT||(UT={}));var Ho;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ho||(Ho={}));var LT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(LT||(LT={}));var OT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(OT||(OT={}));var FT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(FT||(FT={}));var qT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(qT||(qT={}));var BT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(BT||(BT={}));var HT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(HT||(HT={}));var GT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(GT||(GT={}));var zT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(zT||(zT={}));var YT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(YT||(YT={}));var $T;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($T||($T={}));var JT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(JT||(JT={}));var KT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(KT||(KT={}));var Cf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Cf||(Cf={}));var QT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(QT||(QT={}));var Om;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Om||(Om={}));var XT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(XT||(XT={}));var WT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(WT||(WT={}));var ZT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ZT||(ZT={}));var jT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(jT||(jT={}));var eE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(eE||(eE={}));var tE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tE||(tE={}));var nE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(nE||(nE={}));var iE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(iE||(iE={}));var oE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(oE||(oE={}));var rE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(rE||(rE={}));var sE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sE||(sE={}));var aE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aE||(aE={}));var lE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lE||(lE={}));var uE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uE||(uE={}));var cE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(cE||(cE={}));var fE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(fE||(fE={}));var dE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(dE||(dE={}));var hE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(hE||(hE={}));var mE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(mE||(mE={}));var pE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(pE||(pE={}));var gE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gE||(gE={}));var yE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yE||(yE={}));var _E;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(_E||(_E={}));var vE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vE||(vE={}));var TE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(TE||(TE={}));var EE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(EE||(EE={}));var SE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(SE||(SE={}));var Js;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Js||(Js={}));class Fm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dl{get text(){var e,t,i,s,l,d,h,g;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[x,V]of Object.entries(S))x!=="text"&&x!=="thought"&&(V!==null||V!==void 0)&&E.push(x);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,t,i,s,l,d,h,g;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,x]of Object.entries(E))S!=="inlineData"&&(x!==null||x!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,s,l,d,h,g;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,s,l,d,h,g,p;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,s,l,d,h,g,p;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class CE{}class AE{}class xb{}class Db{}class Nb{}class bb{}class IE{}class RE{}class wE{}class Pb{}class ME{}class Af{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new Af;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,t){const s=e.response;if(s){const l=new ME,d=s.videos;l.generatedVideos=d==null?void 0:d.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?Lm(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),l.raiMediaFilteredCount=s.raiMediaFilteredCount,l.raiMediaFilteredReasons=s.raiMediaFilteredReasons,i.response=l}}else{const s=e.response;if(s){const l=new ME,d=s.generateVideoResponse,h=d==null?void 0:d.generatedSamples;l.generatedVideos=h==null?void 0:h.map(g=>{const p=g.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Lm(p==null?void 0:p.encodedVideo):void 0,mimeType:g.encoding}}}),l.raiMediaFilteredCount=d==null?void 0:d.raiMediaFilteredCount,l.raiMediaFilteredReasons=d==null?void 0:d.raiMediaFilteredReasons,i.response=l}}return i}}class xE{}class DE{}class NE{}class kb{}class Vb{}class Ub{}class bE{}class Lb{get text(){var e,t,i;let s="",l=!1;const d=[];for(const h of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&d.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,s+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,t,i;let s="";const l=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,g]of Object.entries(d))h!=="inlineData"&&g!==null&&l.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(s+=atob(d.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Ob{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function xC(n,e){const t=Je(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function DC(n){return Array.isArray(n)?n.map(e=>If(e)):[If(n)]}function If(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function NC(n){const e=If(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bC(n){const e=If(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function PE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function PC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>PE(e)):[PE(n)]}function qm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function kE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function VE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function sn(n){if(n==null)throw new Error("ContentUnion is required");return qm(n)?n:{role:"user",parts:PC(n)}}function kC(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=sn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>sn(t)):[sn(e)]}function qn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(kE(n)||VE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(n)]}const e=[],t=[],i=qm(n[0]);for(const s of n){const l=qm(s);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(kE(s)||VE(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:PC(t)}),e}function Fb(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ho).includes(t[0].toUpperCase())?t[0].toUpperCase():Ho.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Ho).includes(i.toUpperCase())?i.toUpperCase():Ho.TYPE_UNSPECIFIED})}}function Zs(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Fb(n.type,e);for(const[d,h]of Object.entries(n))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ho).includes(h.toUpperCase())?h.toUpperCase():Ho.TYPE_UNSPECIFIED}else if(t.includes(d))e[d]=Zs(h);else if(i.includes(d)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(Zs(p))}e[d]=g}else if(s.includes(d)){const g={};for(const[p,v]of Object.entries(h))g[p]=Zs(v);e[d]=g}else{if(d==="additionalProperties")continue;e[d]=h}return e}function Bp(n){return Zs(n)}function Hp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Gp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ga(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Zs(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Zs(e.response));return n}function ya(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function qb(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function so(n,e){if(typeof e!="string")throw new Error("name must be a string");return qb(n,e,"cachedContents")}function VC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Xr(n){return Lm(n)}function Bb(n){return n!=null&&typeof n=="object"&&"name"in n}function Hb(n){return n!=null&&typeof n=="object"&&"video"in n}function Gb(n){return n!=null&&typeof n=="object"&&"uri"in n}function UC(n){var e;let t;if(Bb(n)&&(t=n.name),!(Gb(n)&&(t=n.uri,t===void 0))&&!(Hb(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function LC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function OC(n){for(const e of["models","tunedModels","publisherModels"])if(zb(n,e))return n[e];return[]}function zb(n,e){return n!==null&&typeof n=="object"&&e in n}function Yb(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function $b(n,e={}){const t=[],i=new Set;for(const s of n){const l=s.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const d=Yb(s,e);d.functionDeclarations&&t.push(...d.functionDeclarations)}return{functionDeclarations:t}}function FC(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Jb(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function _a(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function qC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kb(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function Qb(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Xb(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Wb(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Kb(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],Qb(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],Xb(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function BC(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Wb(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function Zb(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const g=u(n,["items"]);g!=null&&c(e,["items"],g);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const v=u(n,["maxLength"]);v!=null&&c(e,["maxLength"],v);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const x=u(n,["minItems"]);x!=null&&c(e,["minItems"],x);const V=u(n,["minLength"]);V!=null&&c(e,["minLength"],V);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const z=u(n,["minimum"]);z!=null&&c(e,["minimum"],z);const j=u(n,["nullable"]);j!=null&&c(e,["nullable"],j);const H=u(n,["pattern"]);H!=null&&c(e,["pattern"],H);const W=u(n,["properties"]);W!=null&&c(e,["properties"],W);const X=u(n,["propertyOrdering"]);X!=null&&c(e,["propertyOrdering"],X);const J=u(n,["required"]);J!=null&&c(e,["required"],J);const se=u(n,["title"]);se!=null&&c(e,["title"],se);const D=u(n,["type"]);return D!=null&&c(e,["type"],D),e}function jb(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&c(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function eP(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function tP(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function nP(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],tP(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function iP(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function oP(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],iP(t)),e}function rP(){return{}}function sP(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function aP(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>eP(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],nP(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],oP(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],rP());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],sP(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function lP(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function uP(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function cP(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],uP(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function fP(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],lP(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],cP(i)),e}function dP(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function HC(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],dP(t)),e}function hP(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],HC(i)),e}function mP(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>hP(s))),c(e,["speakerVoiceConfigs"],i)}return e}function pP(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],HC(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],mP(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function gP(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function yP(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],BC(sn(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(i,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&c(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const x=u(e,["presencePenalty"]);x!=null&&c(i,["presencePenalty"],x);const V=u(e,["frequencyPenalty"]);V!=null&&c(i,["frequencyPenalty"],V);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const z=u(e,["responseMimeType"]);z!=null&&c(i,["responseMimeType"],z);const j=u(e,["responseSchema"]);j!=null&&c(i,["responseSchema"],Zb(Bp(j)));const H=u(e,["responseJsonSchema"]);if(H!=null&&c(i,["responseJsonSchema"],H),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=u(e,["safetySettings"]);if(t!==void 0&&W!=null){let k=W;Array.isArray(k)&&(k=k.map(F=>jb(F))),c(t,["safetySettings"],k)}const X=u(e,["tools"]);if(t!==void 0&&X!=null){let k=ya(X);Array.isArray(k)&&(k=k.map(F=>aP(ga(F)))),c(t,["tools"],k)}const J=u(e,["toolConfig"]);if(t!==void 0&&J!=null&&c(t,["toolConfig"],fP(J)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=u(e,["cachedContent"]);t!==void 0&&se!=null&&c(t,["cachedContent"],so(n,se));const D=u(e,["responseModalities"]);D!=null&&c(i,["responseModalities"],D);const w=u(e,["mediaResolution"]);w!=null&&c(i,["mediaResolution"],w);const M=u(e,["speechConfig"]);if(M!=null&&c(i,["speechConfig"],pP(Hp(M))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=u(e,["thinkingConfig"]);return P!=null&&c(i,["thinkingConfig"],gP(P)),i}function _P(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["request","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>BC(h))),c(t,["request","contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["request","generationConfig"],yP(n,l,t)),t}function vP(n,e){const t={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&c(t,["fileName"],i);const s=u(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>_P(n,d))),c(t,["requests","requests"],l)}return t}function TP(n,e){const t={},i=u(n,["displayName"]);if(e!==void 0&&i!=null&&c(e,["batch","displayName"],i),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function UE(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["src"]);s!=null&&c(t,["batch","inputConfig"],vP(n,FC(n,s)));const l=u(e,["config"]);return l!=null&&c(t,["config"],TP(l,t)),t}function EP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_a(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function SP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_a(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function CP(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);if(e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function AP(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],CP(t,e)),e}function IP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_a(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function RP(n){const e={},t=u(n,["format"]);t!=null&&c(e,["instancesFormat"],t);const i=u(n,["gcsUri"]);i!=null&&c(e,["gcsSource","uris"],i);const s=u(n,["bigqueryUri"]);if(s!=null&&c(e,["bigquerySource","inputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wP(n){const e={},t=u(n,["format"]);t!=null&&c(e,["predictionsFormat"],t);const i=u(n,["gcsUri"]);i!=null&&c(e,["gcsDestination","outputUriPrefix"],i);const s=u(n,["bigqueryUri"]);if(s!=null&&c(e,["bigqueryDestination","outputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function MP(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["dest"]);return e!==void 0&&s!=null&&c(e,["outputConfig"],wP(Jb(s))),t}function xP(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],Je(n,i));const s=u(e,["src"]);s!=null&&c(t,["inputConfig"],RP(FC(n,s)));const l=u(e,["config"]);return l!=null&&c(t,["config"],MP(l,t)),t}function DP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_a(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function NP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_a(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function bP(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function PP(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],bP(t,e)),e}function kP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],_a(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function VP(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function UP(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function LP(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function OP(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],VP(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],UP(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],LP(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function FP(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>OP(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function qP(n){const e={},t=u(n,["citationSources"]);return t!=null&&c(e,["citations"],t),e}function BP(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function HP(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>BP(s))),c(e,["urlMetadata"],i)}return e}function GP(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],FP(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],qP(i));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],HP(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(n,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const v=u(n,["logprobsResult"]);v!=null&&c(e,["logprobsResult"],v);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function zP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>GP(p))),c(e,["candidates"],g)}const s=u(n,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const l=u(n,["promptFeedback"]);l!=null&&c(e,["promptFeedback"],l);const d=u(n,["responseId"]);d!=null&&c(e,["responseId"],d);const h=u(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function GC(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["code"]);i!=null&&c(e,["code"],i);const s=u(n,["message"]);return s!=null&&c(e,["message"],s),e}function YP(n){const e={},t=u(n,["response"]);t!=null&&c(e,["response"],zP(t));const i=u(n,["error"]);return i!=null&&c(e,["error"],GC(i)),e}function $P(n){const e={},t=u(n,["responsesFile"]);t!=null&&c(e,["fileName"],t);const i=u(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>YP(l))),c(e,["inlinedResponses"],s)}return e}function jc(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata","displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["metadata","state"]);s!=null&&c(e,["state"],qC(s));const l=u(n,["metadata","createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["metadata","endTime"]);d!=null&&c(e,["endTime"],d);const h=u(n,["metadata","updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(n,["metadata","model"]);g!=null&&c(e,["model"],g);const p=u(n,["metadata","output"]);return p!=null&&c(e,["dest"],$P(p)),e}function JP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>jc(d))),c(e,["batchJobs"],l)}return e}function KP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);return l!=null&&c(e,["error"],GC(l)),e}function zC(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["code"]);i!=null&&c(e,["code"],i);const s=u(n,["message"]);return s!=null&&c(e,["message"],s),e}function QP(n){const e={},t=u(n,["instancesFormat"]);t!=null&&c(e,["format"],t);const i=u(n,["gcsSource","uris"]);i!=null&&c(e,["gcsUri"],i);const s=u(n,["bigquerySource","inputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function XP(n){const e={},t=u(n,["predictionsFormat"]);t!=null&&c(e,["format"],t);const i=u(n,["gcsDestination","outputUriPrefix"]);i!=null&&c(e,["gcsUri"],i);const s=u(n,["bigqueryDestination","outputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function Bm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],qC(s));const l=u(n,["error"]);l!=null&&c(e,["error"],zC(l));const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["startTime"]);h!=null&&c(e,["startTime"],h);const g=u(n,["endTime"]);g!=null&&c(e,["endTime"],g);const p=u(n,["updateTime"]);p!=null&&c(e,["updateTime"],p);const v=u(n,["model"]);v!=null&&c(e,["model"],v);const E=u(n,["inputConfig"]);E!=null&&c(e,["src"],QP(E));const S=u(n,["outputConfig"]);return S!=null&&c(e,["dest"],XP(S)),e}function WP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Bm(d))),c(e,["batchJobs"],l)}return e}function ZP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);return l!=null&&c(e,["error"],zC(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(zr||(zr={}));class cu{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!i||Object.keys(i).length===0?d={config:{}}:typeof i=="object"?d=Object.assign({},i):d=i,d.config&&(d.config.pageToken=t.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(l=(s=d.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jP extends Qr{constructor(e){super(),this.apiClient=e,this.create=async t=>{var i,s;if(this.apiClient.isVertexAI()){const d=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${d}`;else throw new Error("Unsupported source:"+t.src)}else if(Array.isArray(t.src)||typeof t.src!="string"&&t.src.inlinedRequests){let l="",d={};const h=UE(this.apiClient,t);l=me("{model}:batchGenerateContent",h._url),d=h._query;const v=h.batch.inputConfig.requests,E=v.requests,S=[];for(const V of E){const q=V;if(q.systemInstruction){const z=q.systemInstruction;delete q.systemInstruction;const j=q.request;j.systemInstruction=z,q.request=j}S.push(q)}return v.requests=S,delete h.config,delete h._url,delete h._query,this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(V=>V.json()).then(V=>jc(V))}return await this.createInternal(t)},this.list=async(t={})=>new cu(zr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}async createInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=xP(this.apiClient,e);return h=me("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Bm(v))}else{const p=UE(this.apiClient,e);return h=me("{model}:batchGenerateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>jc(v))}}async get(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=DP(this.apiClient,e);return h=me("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Bm(v))}else{const p=EP(this.apiClient,e);return h=me("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>jc(v))}}async cancel(e){var t,i,s,l;let d="",h={};if(this.apiClient.isVertexAI()){const g=NP(this.apiClient,e);d=me("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=SP(this.apiClient,e);d=me("batches/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=PP(e);return h=me("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=WP(v),S=new bE;return Object.assign(S,E),S})}else{const p=AP(e);return h=me("batches",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=JP(v),S=new bE;return Object.assign(S,E),S})}}async delete(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=kP(this.apiClient,e);return h=me("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>ZP(v))}else{const p=IP(this.apiClient,e);return h=me("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>KP(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e2(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function t2(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function n2(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function i2(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],e2(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],t2(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],n2(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function LE(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>i2(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function o2(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function r2(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function s2(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],r2(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function a2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function l2(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],a2(t)),e}function u2(){return{}}function c2(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function f2(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>o2(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],s2(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],l2(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],u2());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],c2(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function d2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function h2(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function m2(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],h2(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function p2(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],d2(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],m2(i)),e}function g2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const l=u(n,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let v=qn(d);Array.isArray(v)&&(v=v.map(E=>LE(E))),c(e,["contents"],v)}const h=u(n,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],LE(sn(h)));const g=u(n,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>f2(E))),c(e,["tools"],v)}const p=u(n,["toolConfig"]);if(e!==void 0&&p!=null&&c(e,["toolConfig"],p2(p)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function y2(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],xC(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],g2(s,t)),t}function _2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],so(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function v2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],so(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function T2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),t}function E2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],so(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],T2(s,t)),t}function S2(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function C2(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],S2(t,e)),e}function A2(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function I2(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function R2(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function w2(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],A2(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],I2(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],R2(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function OE(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>w2(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function M2(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function x2(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function D2(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],x2(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function N2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function b2(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],N2(t)),e}function P2(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function k2(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function V2(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],k2(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function U2(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],V2(t)),e}function L2(){return{}}function O2(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function F2(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>M2(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],D2(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],b2(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],P2(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],U2(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],L2());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],O2(p));const v=u(n,["codeExecution"]);return v!=null&&c(e,["codeExecution"],v),e}function q2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function B2(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function H2(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],B2(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function G2(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],q2(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],H2(i)),e}function z2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const l=u(n,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let E=qn(d);Array.isArray(E)&&(E=E.map(S=>OE(S))),c(e,["contents"],E)}const h=u(n,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],OE(sn(h)));const g=u(n,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(S=>F2(S))),c(e,["tools"],E)}const p=u(n,["toolConfig"]);e!==void 0&&p!=null&&c(e,["toolConfig"],G2(p));const v=u(n,["kmsKeyName"]);return e!==void 0&&v!=null&&c(e,["encryption_spec","kmsKeyName"],v),t}function Y2(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],xC(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],z2(s,t)),t}function $2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],so(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function J2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],so(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function K2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),t}function Q2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],so(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],K2(s,t)),t}function X2(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function W2(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],X2(t,e)),e}function ef(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["model"]);s!=null&&c(e,["model"],s);const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(n,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(n,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function Z2(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function j2(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>ef(d))),c(e,["cachedContents"],l)}return e}function tf(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["model"]);s!=null&&c(e,["model"],s);const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(n,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(n,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function ek(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function tk(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>tf(d))),c(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nk extends Qr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new cu(zr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Y2(this.apiClient,e);return h=me("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>tf(v))}else{const p=y2(this.apiClient,e);return h=me("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>ef(v))}}async get(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=$2(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>tf(v))}else{const p=_2(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>ef(v))}}async delete(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=J2(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=ek(v),S=new DE;return Object.assign(S,E),S})}else{const p=v2(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=Z2(v),S=new DE;return Object.assign(S,E),S})}}async update(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=Q2(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>tf(v))}else{const p=E2(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>ef(v))}}async listInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=W2(e);return h=me("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=tk(v),S=new NE;return Object.assign(S,E),S})}else{const p=C2(e);return h=me("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=j2(v),S=new NE;return Object.assign(S,E),S})}}}function FE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function st(n){return this instanceof st?(this.v=n,this):new st(n)}function js(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),s[Symbol.asyncIterator]=function(){return this},s;function d(x){return function(V){return Promise.resolve(V).then(x,E)}}function h(x,V){i[x]&&(s[x]=function(q){return new Promise(function(z,j){l.push([x,q,z,j])>1||g(x,q)})},V&&(s[x]=V(s[x])))}function g(x,V){try{p(i[x](V))}catch(q){S(l[0][3],q)}}function p(x){x.value instanceof st?Promise.resolve(x.value.v).then(v,E):S(l[0][2],x)}function v(x){g("next",x)}function E(x){g("throw",x)}function S(x,V){x(V),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Hl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof FE=="function"?FE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(d){return new Promise(function(h,g){d=n[l](d),s(h,g,d.done,d.value)})}}function s(l,d,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ik(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:YC(t)}function YC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ok(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function qE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let l=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),l&&!YC(n[i])&&(l=!1),i++;l?e.push(...s):e.pop()}return e}class rk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new sk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class sk{constructor(e,t,i,s={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),ok(l)}async sendMessage(e){var t;await this.sendPromise;const i=sn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,d,h;const g=await s,p=(d=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content,v=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(E))!==null&&h!==void 0?h:[]);const x=p?[p]:[];this.recordHistory(i,x,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=sn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?qE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,s;return js(this,arguments,function*(){var d,h,g,p;const v=[];try{for(var E=!0,S=Hl(e),x;x=yield st(S.next()),d=x.done,!d;E=!0){p=x.value,E=!1;const V=p;if(ik(V)){const q=(s=(i=V.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;q!==void 0&&v.push(q)}yield yield st(V)}}catch(V){h={error:V}}finally{try{!E&&!d&&(g=S.return)&&(yield st(g.call(S)))}finally{if(h)throw h.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(l=>l.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...qE(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Gf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ak(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function lk(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],ak(t,e)),e}function uk(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["message"]);i!=null&&c(e,["message"],i);const s=u(n,["code"]);return s!=null&&c(e,["code"],s),e}function ck(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const l=u(n,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(n,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(n,["sha256Hash"]);p!=null&&c(e,["sha256Hash"],p);const v=u(n,["uri"]);v!=null&&c(e,["uri"],v);const E=u(n,["downloadUri"]);E!=null&&c(e,["downloadUri"],E);const S=u(n,["state"]);S!=null&&c(e,["state"],S);const x=u(n,["source"]);x!=null&&c(e,["source"],x);const V=u(n,["videoMetadata"]);V!=null&&c(e,["videoMetadata"],V);const q=u(n,["error"]);return q!=null&&c(e,["error"],uk(q)),e}function fk(n){const e={},t=u(n,["file"]);t!=null&&c(e,["file"],ck(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function dk(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","file"],UC(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function hk(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","file"],UC(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function mk(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["message"]);i!=null&&c(e,["message"],i);const s=u(n,["code"]);return s!=null&&c(e,["code"],s),e}function Hm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const l=u(n,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(n,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(n,["sha256Hash"]);p!=null&&c(e,["sha256Hash"],p);const v=u(n,["uri"]);v!=null&&c(e,["uri"],v);const E=u(n,["downloadUri"]);E!=null&&c(e,["downloadUri"],E);const S=u(n,["state"]);S!=null&&c(e,["state"],S);const x=u(n,["source"]);x!=null&&c(e,["source"],x);const V=u(n,["videoMetadata"]);V!=null&&c(e,["videoMetadata"],V);const q=u(n,["error"]);return q!=null&&c(e,["error"],mk(q)),e}function pk(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Hm(d))),c(e,["files"],l)}return e}function gk(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function yk(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _k extends Qr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new cu(zr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Hm(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=lk(e);return l=me("files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const p=pk(g),v=new kb;return Object.assign(v,p),v})}}async createInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=fk(e);return l=me("upload/v1beta/files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const p=gk(g),v=new Vb;return Object.assign(v,p),v})}}async get(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dk(e);return l=me("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>Hm(g))}}async delete(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hk(e);return l=me("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const p=yk(g),v=new Ub;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vk(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function $C(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],vk(t)),e}function Tk(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],$C(i)),e}function Ek(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Tk(s))),c(e,["speakerVoiceConfigs"],i)}return e}function Sk(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],$C(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],Ek(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Ck(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function Ak(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Ik(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Rk(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Ck(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],Ak(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],Ik(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function wk(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Rk(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function Mk(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function xk(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function Dk(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],xk(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Nk(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function bk(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],Nk(t)),e}function Pk(){return{}}function kk(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function Vk(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>Mk(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],Dk(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],bk(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],Pk());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],kk(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function Uk(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function BE(){return{}}function Lk(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function Ok(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],Lk(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function Fk(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function qk(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],Fk(i)),e}function Bk(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function Hk(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Sk(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=u(n,["systemInstruction"]);e!==void 0&&x!=null&&c(e,["setup","systemInstruction"],wk(sn(x)));const V=u(n,["tools"]);if(e!==void 0&&V!=null){let J=ya(V);Array.isArray(J)&&(J=J.map(se=>Vk(ga(se)))),c(e,["setup","tools"],J)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],Uk(q));const z=u(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&c(e,["setup","inputAudioTranscription"],BE());const j=u(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&c(e,["setup","outputAudioTranscription"],BE());const H=u(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&c(e,["setup","realtimeInputConfig"],Ok(H));const W=u(n,["contextWindowCompression"]);e!==void 0&&W!=null&&c(e,["setup","contextWindowCompression"],qk(W));const X=u(n,["proactivity"]);return e!==void 0&&X!=null&&c(e,["setup","proactivity"],Bk(X)),t}function Gk(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],Hk(s,t)),t}function zk(){return{}}function Yk(){return{}}function $k(n){const e={},t=u(n,["media"]);t!=null&&c(e,["mediaChunks"],DC(t));const i=u(n,["audio"]);i!=null&&c(e,["audio"],bC(i));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const l=u(n,["video"]);l!=null&&c(e,["video"],NC(l));const d=u(n,["text"]);return d!=null&&c(e,["text"],d),u(n,["activityStart"])!=null&&c(e,["activityStart"],zk()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],Yk()),e}function JC(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["weight"]);return i!=null&&c(e,["weight"],i),e}function Jk(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>JC(s))),c(e,["weightedPrompts"],i)}return e}function KC(n){const e={},t=u(n,["temperature"]);t!=null&&c(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&c(e,["topK"],i);const s=u(n,["seed"]);s!=null&&c(e,["seed"],s);const l=u(n,["guidance"]);l!=null&&c(e,["guidance"],l);const d=u(n,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(n,["density"]);h!=null&&c(e,["density"],h);const g=u(n,["brightness"]);g!=null&&c(e,["brightness"],g);const p=u(n,["scale"]);p!=null&&c(e,["scale"],p);const v=u(n,["muteBass"]);v!=null&&c(e,["muteBass"],v);const E=u(n,["muteDrums"]);E!=null&&c(e,["muteDrums"],E);const S=u(n,["onlyBassAndDrums"]);S!=null&&c(e,["onlyBassAndDrums"],S);const x=u(n,["musicGenerationMode"]);return x!=null&&c(e,["musicGenerationMode"],x),e}function Kk(n){const e={},t=u(n,["musicGenerationConfig"]);return t!=null&&c(e,["musicGenerationConfig"],KC(t)),e}function QC(n){const e={},t=u(n,["model"]);return t!=null&&c(e,["model"],t),e}function XC(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>JC(s))),c(e,["weightedPrompts"],i)}return e}function Gm(n){const e={},t=u(n,["setup"]);t!=null&&c(e,["setup"],QC(t));const i=u(n,["clientContent"]);i!=null&&c(e,["clientContent"],XC(i));const s=u(n,["musicGenerationConfig"]);s!=null&&c(e,["musicGenerationConfig"],KC(s));const l=u(n,["playbackControl"]);return l!=null&&c(e,["playbackControl"],l),e}function Qk(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function Xk(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],Qk(t)),e}function Wk(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&c(e,["voiceConfig"],Xk(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function Zk(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function jk(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function eV(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function tV(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Zk(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],jk(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],eV(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function nV(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>tV(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function iV(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function oV(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function rV(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],oV(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function sV(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function aV(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],sV(t)),e}function lV(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function uV(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function cV(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],uV(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function fV(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],cV(t)),e}function dV(){return{}}function hV(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function mV(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>iV(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],rV(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],aV(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],lV(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],fV(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],dV());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],hV(p));const v=u(n,["codeExecution"]);return v!=null&&c(e,["codeExecution"],v),e}function pV(n){const e={},t=u(n,["handle"]);t!=null&&c(e,["handle"],t);const i=u(n,["transparent"]);return i!=null&&c(e,["transparent"],i),e}function HE(){return{}}function gV(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function yV(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],gV(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function _V(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function vV(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],_V(i)),e}function TV(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function EV(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Wk(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=u(n,["systemInstruction"]);e!==void 0&&x!=null&&c(e,["setup","systemInstruction"],nV(sn(x)));const V=u(n,["tools"]);if(e!==void 0&&V!=null){let J=ya(V);Array.isArray(J)&&(J=J.map(se=>mV(ga(se)))),c(e,["setup","tools"],J)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],pV(q));const z=u(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&c(e,["setup","inputAudioTranscription"],HE());const j=u(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&c(e,["setup","outputAudioTranscription"],HE());const H=u(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&c(e,["setup","realtimeInputConfig"],yV(H));const W=u(n,["contextWindowCompression"]);e!==void 0&&W!=null&&c(e,["setup","contextWindowCompression"],vV(W));const X=u(n,["proactivity"]);return e!==void 0&&X!=null&&c(e,["setup","proactivity"],TV(X)),t}function SV(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],EV(s,t)),t}function CV(){return{}}function AV(){return{}}function IV(n){const e={},t=u(n,["media"]);t!=null&&c(e,["mediaChunks"],DC(t));const i=u(n,["audio"]);i!=null&&c(e,["audio"],bC(i));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const l=u(n,["video"]);l!=null&&c(e,["video"],NC(l));const d=u(n,["text"]);return d!=null&&c(e,["text"],d),u(n,["activityStart"])!=null&&c(e,["activityStart"],CV()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],AV()),e}function RV(){return{}}function wV(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function MV(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function xV(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function DV(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],wV(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],MV(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],xV(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function NV(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>DV(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function GE(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["finished"]);return i!=null&&c(e,["finished"],i),e}function bV(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function PV(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>bV(s))),c(e,["urlMetadata"],i)}return e}function kV(n){const e={},t=u(n,["modelTurn"]);t!=null&&c(e,["modelTurn"],NV(t));const i=u(n,["turnComplete"]);i!=null&&c(e,["turnComplete"],i);const s=u(n,["interrupted"]);s!=null&&c(e,["interrupted"],s);const l=u(n,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const d=u(n,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(n,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],GE(h));const g=u(n,["outputTranscription"]);g!=null&&c(e,["outputTranscription"],GE(g));const p=u(n,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],PV(p)),e}function VV(n){const e={},t=u(n,["id"]);t!=null&&c(e,["id"],t);const i=u(n,["args"]);i!=null&&c(e,["args"],i);const s=u(n,["name"]);return s!=null&&c(e,["name"],s),e}function UV(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>VV(s))),c(e,["functionCalls"],i)}return e}function LV(n){const e={},t=u(n,["ids"]);return t!=null&&c(e,["ids"],t),e}function qc(n){const e={},t=u(n,["modality"]);t!=null&&c(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&c(e,["tokenCount"],i),e}function OV(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const s=u(n,["responseTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const l=u(n,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(n,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(n,["promptTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(x=>qc(x))),c(e,["promptTokensDetails"],S)}const p=u(n,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(x=>qc(x))),c(e,["cacheTokensDetails"],S)}const v=u(n,["responseTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(x=>qc(x))),c(e,["responseTokensDetails"],S)}const E=u(n,["toolUsePromptTokensDetails"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(x=>qc(x))),c(e,["toolUsePromptTokensDetails"],S)}return e}function FV(n){const e={},t=u(n,["timeLeft"]);return t!=null&&c(e,["timeLeft"],t),e}function qV(n){const e={},t=u(n,["newHandle"]);t!=null&&c(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&c(e,["resumable"],i);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&c(e,["lastConsumedClientMessageIndex"],s),e}function BV(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],RV());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],kV(i));const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],UV(s));const l=u(n,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],LV(l));const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],OV(d));const h=u(n,["goAway"]);h!=null&&c(e,["goAway"],FV(h));const g=u(n,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],qV(g)),e}function HV(){return{}}function GV(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["weight"]);return i!=null&&c(e,["weight"],i),e}function zV(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>GV(s))),c(e,["weightedPrompts"],i)}return e}function YV(n){const e={},t=u(n,["temperature"]);t!=null&&c(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&c(e,["topK"],i);const s=u(n,["seed"]);s!=null&&c(e,["seed"],s);const l=u(n,["guidance"]);l!=null&&c(e,["guidance"],l);const d=u(n,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(n,["density"]);h!=null&&c(e,["density"],h);const g=u(n,["brightness"]);g!=null&&c(e,["brightness"],g);const p=u(n,["scale"]);p!=null&&c(e,["scale"],p);const v=u(n,["muteBass"]);v!=null&&c(e,["muteBass"],v);const E=u(n,["muteDrums"]);E!=null&&c(e,["muteDrums"],E);const S=u(n,["onlyBassAndDrums"]);S!=null&&c(e,["onlyBassAndDrums"],S);const x=u(n,["musicGenerationMode"]);return x!=null&&c(e,["musicGenerationMode"],x),e}function $V(n){const e={},t=u(n,["clientContent"]);t!=null&&c(e,["clientContent"],zV(t));const i=u(n,["musicGenerationConfig"]);return i!=null&&c(e,["musicGenerationConfig"],YV(i)),e}function JV(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);i!=null&&c(e,["mimeType"],i);const s=u(n,["sourceMetadata"]);return s!=null&&c(e,["sourceMetadata"],$V(s)),e}function KV(n){const e={},t=u(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>JV(s))),c(e,["audioChunks"],i)}return e}function QV(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["filteredReason"]);return i!=null&&c(e,["filteredReason"],i),e}function XV(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],HV());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],KV(i));const s=u(n,["filteredPrompt"]);return s!=null&&c(e,["filteredPrompt"],QV(s)),e}function WV(n){const e={},t=u(n,["sessionId"]);return t!=null&&c(e,["sessionId"],t),e}function ZV(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function jV(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function eU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function tU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],ZV(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],jV(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],eU(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function nU(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>tU(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function zE(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["finished"]);return i!=null&&c(e,["finished"],i),e}function iU(n){const e={},t=u(n,["modelTurn"]);t!=null&&c(e,["modelTurn"],nU(t));const i=u(n,["turnComplete"]);i!=null&&c(e,["turnComplete"],i);const s=u(n,["interrupted"]);s!=null&&c(e,["interrupted"],s);const l=u(n,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const d=u(n,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(n,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],zE(h));const g=u(n,["outputTranscription"]);return g!=null&&c(e,["outputTranscription"],zE(g)),e}function oU(n){const e={},t=u(n,["args"]);t!=null&&c(e,["args"],t);const i=u(n,["name"]);return i!=null&&c(e,["name"],i),e}function rU(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>oU(s))),c(e,["functionCalls"],i)}return e}function sU(n){const e={},t=u(n,["ids"]);return t!=null&&c(e,["ids"],t),e}function Bc(n){const e={},t=u(n,["modality"]);t!=null&&c(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&c(e,["tokenCount"],i),e}function aU(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const s=u(n,["candidatesTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const l=u(n,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(n,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(n,["promptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(V=>Bc(V))),c(e,["promptTokensDetails"],x)}const p=u(n,["cacheTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(V=>Bc(V))),c(e,["cacheTokensDetails"],x)}const v=u(n,["candidatesTokensDetails"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(V=>Bc(V))),c(e,["responseTokensDetails"],x)}const E=u(n,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(V=>Bc(V))),c(e,["toolUsePromptTokensDetails"],x)}const S=u(n,["trafficType"]);return S!=null&&c(e,["trafficType"],S),e}function lU(n){const e={},t=u(n,["timeLeft"]);return t!=null&&c(e,["timeLeft"],t),e}function uU(n){const e={},t=u(n,["newHandle"]);t!=null&&c(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&c(e,["resumable"],i);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&c(e,["lastConsumedClientMessageIndex"],s),e}function cU(n){const e={},t=u(n,["setupComplete"]);t!=null&&c(e,["setupComplete"],WV(t));const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],iU(i));const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],rU(s));const l=u(n,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],sU(l));const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],aU(d));const h=u(n,["goAway"]);h!=null&&c(e,["goAway"],lU(h));const g=u(n,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],uU(g)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fU(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function dU(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function hU(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function mU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],fU(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],dU(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],hU(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function zf(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>mU(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function pU(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const g=u(n,["items"]);g!=null&&c(e,["items"],g);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const v=u(n,["maxLength"]);v!=null&&c(e,["maxLength"],v);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const x=u(n,["minItems"]);x!=null&&c(e,["minItems"],x);const V=u(n,["minLength"]);V!=null&&c(e,["minLength"],V);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const z=u(n,["minimum"]);z!=null&&c(e,["minimum"],z);const j=u(n,["nullable"]);j!=null&&c(e,["nullable"],j);const H=u(n,["pattern"]);H!=null&&c(e,["pattern"],H);const W=u(n,["properties"]);W!=null&&c(e,["properties"],W);const X=u(n,["propertyOrdering"]);X!=null&&c(e,["propertyOrdering"],X);const J=u(n,["required"]);J!=null&&c(e,["required"],J);const se=u(n,["title"]);se!=null&&c(e,["title"],se);const D=u(n,["type"]);return D!=null&&c(e,["type"],D),e}function gU(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&c(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function yU(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function _U(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function vU(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],_U(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function TU(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function EU(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],TU(t)),e}function SU(){return{}}function CU(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function AU(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>yU(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],vU(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],EU(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],SU());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],CU(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function IU(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function RU(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function wU(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],RU(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function MU(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],IU(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],wU(i)),e}function xU(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function WC(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],xU(t)),e}function DU(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],WC(i)),e}function NU(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>DU(s))),c(e,["speakerVoiceConfigs"],i)}return e}function bU(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],WC(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],NU(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function PU(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function kU(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],zf(sn(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(i,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&c(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const x=u(e,["presencePenalty"]);x!=null&&c(i,["presencePenalty"],x);const V=u(e,["frequencyPenalty"]);V!=null&&c(i,["frequencyPenalty"],V);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const z=u(e,["responseMimeType"]);z!=null&&c(i,["responseMimeType"],z);const j=u(e,["responseSchema"]);j!=null&&c(i,["responseSchema"],pU(Bp(j)));const H=u(e,["responseJsonSchema"]);if(H!=null&&c(i,["responseJsonSchema"],H),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=u(e,["safetySettings"]);if(t!==void 0&&W!=null){let k=W;Array.isArray(k)&&(k=k.map(F=>gU(F))),c(t,["safetySettings"],k)}const X=u(e,["tools"]);if(t!==void 0&&X!=null){let k=ya(X);Array.isArray(k)&&(k=k.map(F=>AU(ga(F)))),c(t,["tools"],k)}const J=u(e,["toolConfig"]);if(t!==void 0&&J!=null&&c(t,["toolConfig"],MU(J)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=u(e,["cachedContent"]);t!==void 0&&se!=null&&c(t,["cachedContent"],so(n,se));const D=u(e,["responseModalities"]);D!=null&&c(i,["responseModalities"],D);const w=u(e,["mediaResolution"]);w!=null&&c(i,["mediaResolution"],w);const M=u(e,["speechConfig"]);if(M!=null&&c(i,["speechConfig"],bU(Hp(M))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=u(e,["thinkingConfig"]);return P!=null&&c(i,["thinkingConfig"],PU(P)),i}function YE(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>zf(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["generationConfig"],kU(n,l,t)),t}function VU(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["requests[]","title"],s);const l=u(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&c(e,["requests[]","outputDimensionality"],l),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function UU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);s!=null&&c(t,["requests[]","content"],kC(n,s));const l=u(e,["config"]);l!=null&&c(t,["config"],VU(l,t));const d=u(e,["model"]);return d!==void 0&&c(t,["requests[]","model"],Je(n,d)),t}function LU(n,e){const t={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=u(n,["guidanceScale"]);if(e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const h=u(n,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const g=u(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&c(e,["parameters","includeSafetyAttributes"],g);const p=u(n,["includeRaiReason"]);e!==void 0&&p!=null&&c(e,["parameters","includeRaiReason"],p);const v=u(n,["language"]);e!==void 0&&v!=null&&c(e,["parameters","language"],v);const E=u(n,["outputMimeType"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","mimeType"],E);const S=u(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&c(e,["parameters","outputOptions","compressionQuality"],S),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const x=u(n,["imageSize"]);if(e!==void 0&&x!=null&&c(e,["parameters","sampleImageSize"],x),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function OU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["config"]);return l!=null&&c(t,["config"],LU(l,t)),t}function FU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function qU(n,e,t){const i={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const l=u(e,["pageToken"]);t!==void 0&&l!=null&&c(t,["_query","pageToken"],l);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const h=u(e,["queryBase"]);return t!==void 0&&h!=null&&c(t,["_url","models_url"],LC(n,h)),i}function BU(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],qU(n,i,t)),t}function HU(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const l=u(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),t}function GU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],HU(s,t)),t}function zU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function YU(n){const e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $U(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>zf(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],YU(l)),t}function ZC(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=u(n,["imageBytes"]);t!=null&&c(e,["bytesBase64Encoded"],Xr(t));const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function JU(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);if(e!==void 0&&s!=null&&c(e,["instances[0]","image"],ZC(s)),u(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return t}function KU(n,e){const t={},i=u(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(n,["durationSeconds"]);if(e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=u(n,["aspectRatio"]);if(e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l),u(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=u(n,["personGeneration"]);if(e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(n,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const g=u(n,["enhancePrompt"]);if(e!==void 0&&g!=null&&c(e,["parameters","enhancePrompt"],g),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function QU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["image"]);if(l!=null&&c(t,["instances[0]","image"],ZC(l)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const d=u(e,["source"]);d!=null&&c(t,["config"],JU(d,t));const h=u(e,["config"]);return h!=null&&c(t,["config"],KU(h,t)),t}function XU(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function WU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function ZU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function jU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],XU(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],WU(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],ZU(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function va(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>jU(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function eL(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const g=u(n,["items"]);g!=null&&c(e,["items"],g);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const v=u(n,["maxLength"]);v!=null&&c(e,["maxLength"],v);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const x=u(n,["minItems"]);x!=null&&c(e,["minItems"],x);const V=u(n,["minLength"]);V!=null&&c(e,["minLength"],V);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const z=u(n,["minimum"]);z!=null&&c(e,["minimum"],z);const j=u(n,["nullable"]);j!=null&&c(e,["nullable"],j);const H=u(n,["pattern"]);H!=null&&c(e,["pattern"],H);const W=u(n,["properties"]);W!=null&&c(e,["properties"],W);const X=u(n,["propertyOrdering"]);X!=null&&c(e,["propertyOrdering"],X);const J=u(n,["required"]);J!=null&&c(e,["required"],J);const se=u(n,["title"]);se!=null&&c(e,["title"],se);const D=u(n,["type"]);return D!=null&&c(e,["type"],D),e}function tL(n){const e={},t=u(n,["featureSelectionPreference"]);return t!=null&&c(e,["featureSelectionPreference"],t),e}function nL(n){const e={},t=u(n,["method"]);t!=null&&c(e,["method"],t);const i=u(n,["category"]);i!=null&&c(e,["category"],i);const s=u(n,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function iL(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function oL(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function rL(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],oL(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function sL(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function aL(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],sL(t)),e}function lL(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function uL(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function cL(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],uL(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function fL(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],cL(t)),e}function dL(){return{}}function hL(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function jC(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>iL(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],rL(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],aL(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],lL(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],fL(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],dL());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],hL(p));const v=u(n,["codeExecution"]);return v!=null&&c(e,["codeExecution"],v),e}function mL(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function pL(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function gL(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],pL(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function yL(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],mL(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],gL(i)),e}function _L(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function vL(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],_L(t)),e}function TL(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&c(e,["voiceConfig"],vL(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function EL(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function SL(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],va(sn(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(i,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const v=u(e,["stopSequences"]);v!=null&&c(i,["stopSequences"],v);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const x=u(e,["presencePenalty"]);x!=null&&c(i,["presencePenalty"],x);const V=u(e,["frequencyPenalty"]);V!=null&&c(i,["frequencyPenalty"],V);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const z=u(e,["responseMimeType"]);z!=null&&c(i,["responseMimeType"],z);const j=u(e,["responseSchema"]);j!=null&&c(i,["responseSchema"],eL(Bp(j)));const H=u(e,["responseJsonSchema"]);H!=null&&c(i,["responseJsonSchema"],H);const W=u(e,["routingConfig"]);W!=null&&c(i,["routingConfig"],W);const X=u(e,["modelSelectionConfig"]);X!=null&&c(i,["modelConfig"],tL(X));const J=u(e,["safetySettings"]);if(t!==void 0&&J!=null){let Fe=J;Array.isArray(Fe)&&(Fe=Fe.map(ee=>nL(ee))),c(t,["safetySettings"],Fe)}const se=u(e,["tools"]);if(t!==void 0&&se!=null){let Fe=ya(se);Array.isArray(Fe)&&(Fe=Fe.map(ee=>jC(ga(ee)))),c(t,["tools"],Fe)}const D=u(e,["toolConfig"]);t!==void 0&&D!=null&&c(t,["toolConfig"],yL(D));const w=u(e,["labels"]);t!==void 0&&w!=null&&c(t,["labels"],w);const M=u(e,["cachedContent"]);t!==void 0&&M!=null&&c(t,["cachedContent"],so(n,M));const P=u(e,["responseModalities"]);P!=null&&c(i,["responseModalities"],P);const k=u(e,["mediaResolution"]);k!=null&&c(i,["mediaResolution"],k);const F=u(e,["speechConfig"]);F!=null&&c(i,["speechConfig"],TL(Hp(F)));const b=u(e,["audioTimestamp"]);b!=null&&c(i,["audioTimestamp"],b);const ct=u(e,["thinkingConfig"]);return ct!=null&&c(i,["thinkingConfig"],EL(ct)),i}function $E(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>va(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["generationConfig"],SL(n,l,t)),t}function CL(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&c(e,["instances[]","task_type"],i);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["instances[]","title"],s);const l=u(n,["outputDimensionality"]);e!==void 0&&l!=null&&c(e,["parameters","outputDimensionality"],l);const d=u(n,["mimeType"]);e!==void 0&&d!=null&&c(e,["instances[]","mimeType"],d);const h=u(n,["autoTruncate"]);return e!==void 0&&h!=null&&c(e,["parameters","autoTruncate"],h),t}function AL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);s!=null&&c(t,["instances[]","content"],kC(n,s));const l=u(e,["config"]);return l!=null&&c(t,["config"],CL(l,t)),t}function IL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const l=u(n,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(n,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(n,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const E=u(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&c(e,["parameters","includeSafetyAttributes"],E);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const x=u(n,["language"]);e!==void 0&&x!=null&&c(e,["parameters","language"],x);const V=u(n,["outputMimeType"]);e!==void 0&&V!=null&&c(e,["parameters","outputOptions","mimeType"],V);const q=u(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&c(e,["parameters","outputOptions","compressionQuality"],q);const z=u(n,["addWatermark"]);e!==void 0&&z!=null&&c(e,["parameters","addWatermark"],z);const j=u(n,["imageSize"]);e!==void 0&&j!=null&&c(e,["parameters","sampleImageSize"],j);const H=u(n,["enhancePrompt"]);return e!==void 0&&H!=null&&c(e,["parameters","enhancePrompt"],H),t}function RL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["config"]);return l!=null&&c(t,["config"],IL(l,t)),t}function Ii(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["imageBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Xr(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function wL(n){const e={},t=u(n,["maskMode"]);t!=null&&c(e,["maskMode"],t);const i=u(n,["segmentationClasses"]);i!=null&&c(e,["maskClasses"],i);const s=u(n,["maskDilation"]);return s!=null&&c(e,["dilation"],s),e}function ML(n){const e={},t=u(n,["controlType"]);t!=null&&c(e,["controlType"],t);const i=u(n,["enableControlImageComputation"]);return i!=null&&c(e,["computeControl"],i),e}function xL(n){const e={},t=u(n,["styleDescription"]);return t!=null&&c(e,["styleDescription"],t),e}function DL(n){const e={},t=u(n,["subjectType"]);t!=null&&c(e,["subjectType"],t);const i=u(n,["subjectDescription"]);return i!=null&&c(e,["subjectDescription"],i),e}function NL(n){const e={},t=u(n,["referenceImage"]);t!=null&&c(e,["referenceImage"],Ii(t));const i=u(n,["referenceId"]);i!=null&&c(e,["referenceId"],i);const s=u(n,["referenceType"]);s!=null&&c(e,["referenceType"],s);const l=u(n,["maskImageConfig"]);l!=null&&c(e,["maskImageConfig"],wL(l));const d=u(n,["controlImageConfig"]);d!=null&&c(e,["controlImageConfig"],ML(d));const h=u(n,["styleImageConfig"]);h!=null&&c(e,["styleImageConfig"],xL(h));const g=u(n,["subjectImageConfig"]);return g!=null&&c(e,["subjectImageConfig"],DL(g)),e}function bL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const l=u(n,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(n,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(n,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const E=u(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&c(e,["parameters","includeSafetyAttributes"],E);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const x=u(n,["language"]);e!==void 0&&x!=null&&c(e,["parameters","language"],x);const V=u(n,["outputMimeType"]);e!==void 0&&V!=null&&c(e,["parameters","outputOptions","mimeType"],V);const q=u(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&c(e,["parameters","outputOptions","compressionQuality"],q);const z=u(n,["addWatermark"]);e!==void 0&&z!=null&&c(e,["parameters","addWatermark"],z);const j=u(n,["editMode"]);e!==void 0&&j!=null&&c(e,["parameters","editMode"],j);const H=u(n,["baseSteps"]);return e!==void 0&&H!=null&&c(e,["parameters","editConfig","baseSteps"],H),t}function PL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>NL(g))),c(t,["instances[0]","referenceImages"],h)}const d=u(e,["config"]);return d!=null&&c(t,["config"],bL(d,t)),t}function kL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const l=u(n,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);const d=u(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&c(e,["parameters","outputOptions","compressionQuality"],d);const h=u(n,["enhanceInputImage"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],h);const g=u(n,["imagePreservationFactor"]);e!==void 0&&g!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const p=u(n,["numberOfImages"]);e!==void 0&&p!=null&&c(e,["parameters","sampleCount"],p);const v=u(n,["mode"]);return e!==void 0&&v!=null&&c(e,["parameters","mode"],v),t}function VL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["image"]);s!=null&&c(t,["instances[0]","image"],Ii(s));const l=u(e,["upscaleFactor"]);l!=null&&c(t,["parameters","upscaleConfig","upscaleFactor"],l);const d=u(e,["config"]);return d!=null&&c(t,["config"],kL(d,t)),t}function UL(n){const e={},t=u(n,["productImage"]);return t!=null&&c(e,["image"],Ii(t)),e}function LL(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["personImage"]);e!==void 0&&s!=null&&c(e,["instances[0]","personImage","image"],Ii(s));const l=u(n,["productImages"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>UL(h))),c(e,["instances[0]","productImages"],d)}return t}function OL(n,e){const t={},i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["baseSteps"]);e!==void 0&&s!=null&&c(e,["parameters","editConfig","baseSteps"],s);const l=u(n,["outputGcsUri"]);e!==void 0&&l!=null&&c(e,["parameters","storageUri"],l);const d=u(n,["seed"]);e!==void 0&&d!=null&&c(e,["parameters","seed"],d);const h=u(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const g=u(n,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const p=u(n,["addWatermark"]);e!==void 0&&p!=null&&c(e,["parameters","addWatermark"],p);const v=u(n,["outputMimeType"]);e!==void 0&&v!=null&&c(e,["parameters","outputOptions","mimeType"],v);const E=u(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","compressionQuality"],E);const S=u(n,["enhancePrompt"]);return e!==void 0&&S!=null&&c(e,["parameters","enhancePrompt"],S),t}function FL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["source"]);s!=null&&c(t,["config"],LL(s,t));const l=u(e,["config"]);return l!=null&&c(t,["config"],OL(l,t)),t}function qL(n){const e={},t=u(n,["image"]);return t!=null&&c(e,["image"],Ii(t)),e}function BL(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],Ii(s));const l=u(n,["scribbleImage"]);return e!==void 0&&l!=null&&c(e,["instances[0]","scribble"],qL(l)),t}function HL(n,e){const t={},i=u(n,["mode"]);e!==void 0&&i!=null&&c(e,["parameters","mode"],i);const s=u(n,["maxPredictions"]);e!==void 0&&s!=null&&c(e,["parameters","maxPredictions"],s);const l=u(n,["confidenceThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","confidenceThreshold"],l);const d=u(n,["maskDilation"]);e!==void 0&&d!=null&&c(e,["parameters","maskDilation"],d);const h=u(n,["binaryColorThreshold"]);return e!==void 0&&h!=null&&c(e,["parameters","binaryColorThreshold"],h),t}function GL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["source"]);s!=null&&c(t,["config"],BL(s,t));const l=u(e,["config"]);return l!=null&&c(t,["config"],HL(l,t)),t}function zL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function YL(n,e,t){const i={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const l=u(e,["pageToken"]);t!==void 0&&l!=null&&c(t,["_query","pageToken"],l);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const h=u(e,["queryBase"]);return t!==void 0&&h!=null&&c(t,["_url","models_url"],LC(n,h)),i}function $L(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],YL(n,i,t)),t}function JL(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const l=u(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),t}function KL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],JL(s,t)),t}function QL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function XL(n,e){const t={},i=u(n,["systemInstruction"]);e!==void 0&&i!=null&&c(e,["systemInstruction"],va(sn(i)));const s=u(n,["tools"]);if(e!==void 0&&s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>jC(h))),c(e,["tools"],d)}const l=u(n,["generationConfig"]);return e!==void 0&&l!=null&&c(e,["generationConfig"],l),t}function WL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>va(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],XL(l,t)),t}function ZL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>va(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],l),t}function eA(n){const e={},t=u(n,["uri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["videoBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Xr(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function jL(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],Ii(s));const l=u(n,["video"]);return e!==void 0&&l!=null&&c(e,["instances[0]","video"],eA(l)),t}function e4(n){const e={},t=u(n,["image"]);t!=null&&c(e,["image"],Ii(t));const i=u(n,["referenceType"]);return i!=null&&c(e,["referenceType"],i),e}function t4(n,e){const t={},i=u(n,["numberOfVideos"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const l=u(n,["fps"]);e!==void 0&&l!=null&&c(e,["parameters","fps"],l);const d=u(n,["durationSeconds"]);e!==void 0&&d!=null&&c(e,["parameters","durationSeconds"],d);const h=u(n,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const g=u(n,["aspectRatio"]);e!==void 0&&g!=null&&c(e,["parameters","aspectRatio"],g);const p=u(n,["resolution"]);e!==void 0&&p!=null&&c(e,["parameters","resolution"],p);const v=u(n,["personGeneration"]);e!==void 0&&v!=null&&c(e,["parameters","personGeneration"],v);const E=u(n,["pubsubTopic"]);e!==void 0&&E!=null&&c(e,["parameters","pubsubTopic"],E);const S=u(n,["negativePrompt"]);e!==void 0&&S!=null&&c(e,["parameters","negativePrompt"],S);const x=u(n,["enhancePrompt"]);e!==void 0&&x!=null&&c(e,["parameters","enhancePrompt"],x);const V=u(n,["generateAudio"]);e!==void 0&&V!=null&&c(e,["parameters","generateAudio"],V);const q=u(n,["lastFrame"]);e!==void 0&&q!=null&&c(e,["instances[0]","lastFrame"],Ii(q));const z=u(n,["referenceImages"]);if(e!==void 0&&z!=null){let H=z;Array.isArray(H)&&(H=H.map(W=>e4(W))),c(e,["instances[0]","referenceImages"],H)}const j=u(n,["compressionQuality"]);return e!==void 0&&j!=null&&c(e,["parameters","compressionQuality"],j),t}function n4(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["image"]);l!=null&&c(t,["instances[0]","image"],Ii(l));const d=u(e,["video"]);d!=null&&c(t,["instances[0]","video"],eA(d));const h=u(e,["source"]);h!=null&&c(t,["config"],jL(h,t));const g=u(e,["config"]);return g!=null&&c(t,["config"],t4(g,t)),t}function i4(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function o4(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function r4(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function s4(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],i4(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],o4(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],r4(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function a4(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>s4(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function l4(n){const e={},t=u(n,["citationSources"]);return t!=null&&c(e,["citations"],t),e}function u4(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function c4(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>u4(s))),c(e,["urlMetadata"],i)}return e}function f4(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],a4(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],l4(i));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],c4(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(n,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const v=u(n,["logprobsResult"]);v!=null&&c(e,["logprobsResult"],v);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function JE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>f4(p))),c(e,["candidates"],g)}const s=u(n,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const l=u(n,["promptFeedback"]);l!=null&&c(e,["promptFeedback"],l);const d=u(n,["responseId"]);d!=null&&c(e,["responseId"],d);const h=u(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function d4(n){const e={},t=u(n,["values"]);return t!=null&&c(e,["values"],t),e}function h4(){return{}}function m4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d4(d))),c(e,["embeddings"],l)}return u(n,["metadata"])!=null&&c(e,["metadata"],h4()),e}function p4(n){const e={},t=u(n,["bytesBase64Encoded"]);t!=null&&c(e,["imageBytes"],Xr(t));const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function tA(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function g4(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],p4(t));const i=u(n,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);const s=u(n,["_self"]);return s!=null&&c(e,["safetyAttributes"],tA(s)),e}function y4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>g4(d))),c(e,["generatedImages"],l)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],tA(s)),e}function _4(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function zm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["version"]);l!=null&&c(e,["version"],l);const d=u(n,["_self"]);d!=null&&c(e,["tunedModelInfo"],_4(d));const h=u(n,["inputTokenLimit"]);h!=null&&c(e,["inputTokenLimit"],h);const g=u(n,["outputTokenLimit"]);g!=null&&c(e,["outputTokenLimit"],g);const p=u(n,["supportedGenerationMethods"]);return p!=null&&c(e,["supportedActions"],p),e}function v4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["_self"]);if(s!=null){let l=OC(s);Array.isArray(l)&&(l=l.map(d=>zm(d))),c(e,["models"],l)}return e}function T4(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function E4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["totalTokens"]);i!=null&&c(e,["totalTokens"],i);const s=u(n,["cachedContentTokenCount"]);return s!=null&&c(e,["cachedContentTokenCount"],s),e}function S4(n){const e={},t=u(n,["video","uri"]);t!=null&&c(e,["uri"],t);const i=u(n,["video","encodedVideo"]);i!=null&&c(e,["videoBytes"],Xr(i));const s=u(n,["encoding"]);return s!=null&&c(e,["mimeType"],s),e}function C4(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],S4(t)),e}function A4(n){const e={},t=u(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(d=>C4(d))),c(e,["generatedVideos"],l)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function I4(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);l!=null&&c(e,["error"],l);const d=u(n,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],A4(d)),e}function R4(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function w4(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function M4(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function x4(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],R4(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],w4(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],M4(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function D4(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>x4(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function N4(n){const e={},t=u(n,["citations"]);return t!=null&&c(e,["citations"],t),e}function b4(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function P4(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>b4(s))),c(e,["urlMetadata"],i)}return e}function k4(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],D4(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],N4(i));const s=u(n,["finishMessage"]);s!=null&&c(e,["finishMessage"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],P4(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(n,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const v=u(n,["logprobsResult"]);v!=null&&c(e,["logprobsResult"],v);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function KE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(v=>k4(v))),c(e,["candidates"],p)}const s=u(n,["createTime"]);s!=null&&c(e,["createTime"],s);const l=u(n,["modelVersion"]);l!=null&&c(e,["modelVersion"],l);const d=u(n,["promptFeedback"]);d!=null&&c(e,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(e,["responseId"],h);const g=u(n,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function V4(n){const e={},t=u(n,["truncated"]);t!=null&&c(e,["truncated"],t);const i=u(n,["token_count"]);return i!=null&&c(e,["tokenCount"],i),e}function U4(n){const e={},t=u(n,["values"]);t!=null&&c(e,["values"],t);const i=u(n,["statistics"]);return i!=null&&c(e,["statistics"],V4(i)),e}function L4(n){const e={},t=u(n,["billableCharacterCount"]);return t!=null&&c(e,["billableCharacterCount"],t),e}function O4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>U4(d))),c(e,["embeddings"],l)}const s=u(n,["metadata"]);return s!=null&&c(e,["metadata"],L4(s)),e}function nA(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["imageBytes"],Xr(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function iA(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function Yf(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],nA(t));const i=u(n,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);const s=u(n,["_self"]);s!=null&&c(e,["safetyAttributes"],iA(s));const l=u(n,["prompt"]);return l!=null&&c(e,["enhancedPrompt"],l),e}function F4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Yf(d))),c(e,["generatedImages"],l)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],iA(s)),e}function q4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Yf(l))),c(e,["generatedImages"],s)}return e}function B4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Yf(l))),c(e,["generatedImages"],s)}return e}function H4(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Yf(s))),c(e,["generatedImages"],i)}return e}function G4(n){const e={},t=u(n,["label"]);t!=null&&c(e,["label"],t);const i=u(n,["score"]);return i!=null&&c(e,["score"],i),e}function z4(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["mask"],nA(t));const i=u(n,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>G4(l))),c(e,["labels"],s)}return e}function Y4(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>z4(s))),c(e,["generatedMasks"],i)}return e}function $4(n){const e={},t=u(n,["endpoint"]);t!=null&&c(e,["name"],t);const i=u(n,["deployedModelId"]);return i!=null&&c(e,["deployedModelId"],i),e}function J4(n){const e={},t=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function K4(n){const e={},t=u(n,["checkpointId"]);t!=null&&c(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&c(e,["epoch"],i);const s=u(n,["step"]);return s!=null&&c(e,["step"],s),e}function Ym(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["versionId"]);l!=null&&c(e,["version"],l);const d=u(n,["deployedModels"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(S=>$4(S))),c(e,["endpoints"],E)}const h=u(n,["labels"]);h!=null&&c(e,["labels"],h);const g=u(n,["_self"]);g!=null&&c(e,["tunedModelInfo"],J4(g));const p=u(n,["defaultCheckpointId"]);p!=null&&c(e,["defaultCheckpointId"],p);const v=u(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>K4(S))),c(e,["checkpoints"],E)}return e}function Q4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["_self"]);if(s!=null){let l=OC(s);Array.isArray(l)&&(l=l.map(d=>Ym(d))),c(e,["models"],l)}return e}function X4(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function W4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["totalTokens"]);return i!=null&&c(e,["totalTokens"],i),e}function Z4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["tokensInfo"]);return i!=null&&c(e,["tokensInfo"],i),e}function j4(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["uri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Xr(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function e6(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],j4(t)),e}function t6(n){const e={},t=u(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(d=>e6(d))),c(e,["generatedVideos"],l)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function n6(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);l!=null&&c(e,["error"],l);const d=u(n,["response"]);return d!=null&&c(e,["response"],t6(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i6="Content-Type",o6="X-Server-Timeout",r6="User-Agent",$m="x-goog-api-client",s6="1.16.0",a6=`google-genai-sdk/${s6}`,l6="v1beta1",u6="v1beta",QE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class c6{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:l6,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:u6,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))s.searchParams.append(d,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(t))typeof l=="object"?i[s]=Object.assign(Object.assign({},i[s]),l):l!==void 0&&(i[s]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const s=new AbortController,l=s.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>s.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=l}return t&&t.extraBody!==null&&f6(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await XE(s),new Fm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await XE(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return js(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let d="";for(;;){const{done:h,value:g}=yield st(s.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(g,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),x=S.status,V=S.code,q=`got status: ${x}. ${JSON.stringify(E)}`;if(V>=400&&V<600)throw new Gf({message:q,status:V})}}catch(E){if(E.name==="ApiError")throw E}d+=p;let v=d.match(QE);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield st(new Fm(S)),d=d.slice(v[0].length),v=d.match(QE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=a6+" "+this.clientOptions.userAgentExtra;return e[r6]=t,e[$m]=t,e[i6]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))t.append(i,s);e.timeout&&e.timeout>0&&t.append(o6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,d=await l.stat(e);s.sizeBytes=String(d.size);const h=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=h;const g=await this.fetchUploadUrl(s,t);return l.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let s={};t!=null&&t.httpOptions?s=t.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},d=await this.request({path:me("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=d==null?void 0:d.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function XE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Gf({message:s,status:t}):new Error(s)}}function f6(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,d){const h=Object.assign({},l);for(const g in d)if(Object.prototype.hasOwnProperty.call(d,g)){const p=d[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=i(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d6="mcp_used/unknown";let h6=!1;function oA(n){for(const e of n)if(m6(e)||typeof e=="object"&&"inputSchema"in e)return!0;return h6}function rA(n){var e;const t=(e=n[$m])!==null&&e!==void 0?e:"";n[$m]=(t+` ${d6}`).trimStart()}function m6(n){return n!==null&&typeof n=="object"&&n instanceof zp}function p6(n,e=100){return js(this,arguments,function*(){let i,s=0;for(;s<e;){const l=yield st(n.listTools({cursor:i}));for(const d of l.tools)yield yield st(d),s++;if(!l.nextCursor)break;i=l.nextCursor}})}class zp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new zp(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const l={},d=[];for(const v of this.mcpClients)try{for(var h=!0,g=(t=void 0,Hl(p6(v))),p;p=await g.next(),e=p.done,!e;h=!0){s=p.value,h=!1;const E=s;d.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){t={error:E}}finally{try{!h&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=d,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),$b(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const d=await s.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:d.isError?{error:d}:d}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function g6(n,e,t){const i=new Ob;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data);const l=XV(s);Object.assign(i,l),e(i)}class y6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),d=T6(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(W=>{p=W}),E=e.callbacks,S=function(){p({})},x=this.apiClient,V={onopen:S,onmessage:W=>{g6(x,E.onmessage,W)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(W){}},q=this.webSocketFactory.create(g,v6(d),V);q.connect(),await v;const z=Je(this.apiClient,e.model),j=QC({model:z}),H=Gm({setup:j});return q.send(JSON.stringify(H)),new _6(q,this.apiClient)}}class _6{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Jk(e),i=XC(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Kk(e),i=Gm(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=Gm({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Js.PLAY)}pause(){this.sendPlaybackControl(Js.PAUSE)}stop(){this.sendPlaybackControl(Js.STOP)}resetContext(){this.sendPlaybackControl(Js.RESET_CONTEXT)}close(){this.conn.close()}}function v6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function T6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function S6(n,e,t){const i=new Lb;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const l=JSON.parse(s);if(n.isVertexAI()){const d=cU(l);Object.assign(i,d)}else{const d=BV(l);Object.assign(i,d)}e(i)}class C6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new y6(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,l,d,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&oA(e.config.tools)&&rA(E);const S=w6(E);if(this.apiClient.isVertexAI())v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const M=this.apiClient.getApiKey();let P="BidiGenerateContent",k="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",k="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${P}?${k}=${M}`}let x=()=>{};const V=new Promise(M=>{x=M}),q=e.callbacks,z=function(){var M;(M=q==null?void 0:q.onopen)===null||M===void 0||M.call(q),x({})},j=this.apiClient,H={onopen:z,onmessage:M=>{S6(j,q.onmessage,M)},onerror:(t=q==null?void 0:q.onerror)!==null&&t!==void 0?t:function(M){},onclose:(i=q==null?void 0:q.onclose)!==null&&i!==void 0?i:function(M){}},W=this.webSocketFactory.create(v,R6(S),H);W.connect(),await V;let X=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&X.startsWith("publishers/")){const M=this.apiClient.getProject(),P=this.apiClient.getLocation();X=`projects/${M}/locations/${P}/`+X}let J={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Cf.AUDIO]}:e.config.responseModalities=[Cf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],D=[];for(const M of se)if(this.isCallableTool(M)){const P=M;D.push(await P.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const w={model:X,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=SV(this.apiClient,w):J=Gk(this.apiClient,w),delete J.config,W.send(JSON.stringify(J)),new I6(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const A6={turnComplete:!0};class I6{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=qn(t.turns),e.isVertexAI()?i=i.map(s=>va(s)):i=i.map(s=>zf(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(E6)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},A6),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:IV(e)}:t={realtimeInput:$k(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function R6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function w6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WE=10;function ZE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const d of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ea(d)){s=!0;break}if(!s)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ea(n){return"callTool"in n&&typeof n.callTool=="function"}function M6(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>ea(s)))!==null&&i!==void 0?i:!1}function x6(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>!ea(s)))!==null&&i!==void 0?i:!1}function jE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D6 extends Qr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,l,d,h;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!M6(t)||ZE(t.config))return await this.generateContentInternal(g);if(x6(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const E=qn(g.contents),S=(l=(s=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:WE;let x=0;for(;x<S&&(p=await this.generateContentInternal(g),!(!p.functionCalls||p.functionCalls.length===0));){const V=p.candidates[0].content,q=[];for(const z of(h=(d=t.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(ea(z)){const H=await z.callTool(p.functionCalls);q.push(...H)}x++,v={role:"user",parts:q},g.contents=qn(g.contents),g.contents.push(V),g.contents.push(v),jE(g.config)&&(E.push(V),E.push(v))}return jE(g.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),ZE(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let l;const d=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((s=g==null?void 0:g.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:d.push(g);let h;return l?h={generatedImages:d,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:h={generatedImages:d,sdkHttpResponse:i.sdkHttpResponse},h}),this.list=async t=>{var i;const d={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((i=d.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new cu(zr.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const d=await Promise.all(l.map(async g=>ea(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&oA(e.config.tools)){const g=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),rA(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var t,i,s;const l=new Map;for(const d of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(ea(d)){const h=d,g=await h.tool();for(const p of(s=g.functionDeclarations)!==null&&s!==void 0?s:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var t,i,s;const l=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:WE;let d=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,E){var S,x;return js(this,arguments,function*(){for(var V,q,z,j;h<l;){d&&(h++,d=!1);const J=yield st(p.processParamsMaybeAddMcpUsage(E)),se=yield st(p.generateContentStreamInternal(J)),D=[],w=[];try{for(var H=!0,W=(q=void 0,Hl(se)),X;X=yield st(W.next()),V=X.done,!V;H=!0){j=X.value,H=!1;const M=j;if(yield yield st(M),M.candidates&&(!((S=M.candidates[0])===null||S===void 0)&&S.content)){w.push(M.candidates[0].content);for(const P of(x=M.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(h<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const k=yield st(v.get(P.functionCall.name).callTool([P.functionCall]));D.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(M){q={error:M}}finally{try{!H&&!V&&(z=W.return)&&(yield st(z.call(W)))}finally{if(q)throw q.error}}if(D.length>0){d=!0;const M=new Dl;M.candidates=[{content:{role:"user",parts:D}}],yield yield st(M);const P=[];P.push(...w),P.push({role:"user",parts:D});const k=qn(E.contents).concat(P);E.contents=k}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=$E(this.apiClient,e);return h=me("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=KE(v),S=new Dl;return Object.assign(S,E),S})}else{const p=YE(this.apiClient,e);return h=me("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=JE(v),S=new Dl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=$E(this.apiClient,e);return h=me("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),d.then(function(E){return js(this,arguments,function*(){var S,x,V,q;try{for(var z=!0,j=Hl(E),H;H=yield st(j.next()),S=H.done,!S;z=!0){q=H.value,z=!1;const W=q,X=KE(yield st(W.json()));X.sdkHttpResponse={headers:W.headers};const J=new Dl;Object.assign(J,X),yield yield st(J)}}catch(W){x={error:W}}finally{try{!z&&!S&&(V=j.return)&&(yield st(V.call(j)))}finally{if(x)throw x.error}}})})}else{const p=YE(this.apiClient,e);return h=me("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),d.then(function(E){return js(this,arguments,function*(){var S,x,V,q;try{for(var z=!0,j=Hl(E),H;H=yield st(j.next()),S=H.done,!S;z=!0){q=H.value,z=!1;const W=q,X=JE(yield st(W.json()));X.sdkHttpResponse={headers:W.headers};const J=new Dl;Object.assign(J,X),yield yield st(J)}}catch(W){x={error:W}}finally{try{!z&&!S&&(V=j.return)&&(yield st(V.call(j)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=AL(this.apiClient,e);return h=me("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=O4(v),S=new CE;return Object.assign(S,E),S})}else{const p=UU(this.apiClient,e);return h=me("{model}:batchEmbedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=m4(v),S=new CE;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=RL(this.apiClient,e);return h=me("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=F4(v),S=new AE;return Object.assign(S,E),S})}else{const p=OU(this.apiClient,e);return h=me("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=y4(v),S=new AE;return Object.assign(S,E),S})}}async editImageInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=PL(this.apiClient,e);return l=me("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const p=q4(g),v=new xb;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=VL(this.apiClient,e);return l=me("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const p=B4(g),v=new Db;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=FL(this.apiClient,e);return l=me("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const p=H4(g),v=new Nb;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=GL(this.apiClient,e);return l=me("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const p=Y4(g),v=new bb;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=zL(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Ym(v))}else{const p=FU(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>zm(v))}}async listInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=$L(this.apiClient,e);return h=me("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=Q4(v),S=new IE;return Object.assign(S,E),S})}else{const p=BU(this.apiClient,e);return h=me("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=v4(v),S=new IE;return Object.assign(S,E),S})}}async update(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=KL(this.apiClient,e);return h=me("{model}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>Ym(v))}else{const p=GU(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>zm(v))}}async delete(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=QL(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=X4(v),S=new RE;return Object.assign(S,E),S})}else{const p=zU(this.apiClient,e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=T4(v),S=new RE;return Object.assign(S,E),S})}}async countTokens(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=WL(this.apiClient,e);return h=me("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=W4(v),S=new wE;return Object.assign(S,E),S})}else{const p=$U(this.apiClient,e);return h=me("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=E4(v),S=new wE;return Object.assign(S,E),S})}}async computeTokens(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=ZL(this.apiClient,e);return l=me("{model}:computeTokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>{const p=Z4(g),v=new Pb;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=n4(this.apiClient,e);return h=me("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d.then(v=>{const E=n6(v),S=new Af;return Object.assign(S,E),S})}else{const p=QU(this.apiClient,e);return h=me("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d.then(v=>{const E=I4(v),S=new Af;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function b6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["operationName"],t);const i=u(n,["resourceName"]);i!=null&&c(e,["_url","resourceName"],i);const s=u(n,["config"]);return s!=null&&c(e,["config"],s),e}function P6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k6 extends Qr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=P6(e);return h=me("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),d}else{const p=N6(e);return h=me("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),d}}async fetchPredictVideosOperationInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=b6(e);return l=me("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V6(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function sA(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],V6(t)),e}function U6(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],sA(i)),e}function L6(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>U6(s))),c(e,["speakerVoiceConfigs"],i)}return e}function O6(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],sA(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],L6(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function F6(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function q6(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function B6(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function H6(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],F6(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],q6(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],B6(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const v=u(n,["functionResponse"]);v!=null&&c(e,["functionResponse"],v);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function G6(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>H6(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function z6(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function Y6(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function $6(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],Y6(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function J6(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function K6(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],J6(t)),e}function Q6(){return{}}function X6(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function W6(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>z6(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],$6(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],K6(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],Q6());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],X6(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function Z6(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function e0(){return{}}function j6(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function e3(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],j6(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function t3(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function n3(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],t3(i)),e}function i3(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function o3(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const v=u(n,["seed"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","seed"],v);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],O6(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=u(n,["systemInstruction"]);e!==void 0&&x!=null&&c(e,["setup","systemInstruction"],G6(sn(x)));const V=u(n,["tools"]);if(e!==void 0&&V!=null){let J=ya(V);Array.isArray(J)&&(J=J.map(se=>W6(ga(se)))),c(e,["setup","tools"],J)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],Z6(q));const z=u(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&c(e,["setup","inputAudioTranscription"],e0());const j=u(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&c(e,["setup","outputAudioTranscription"],e0());const H=u(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&c(e,["setup","realtimeInputConfig"],e3(H));const W=u(n,["contextWindowCompression"]);e!==void 0&&W!=null&&c(e,["setup","contextWindowCompression"],n3(W));const X=u(n,["proactivity"]);return e!==void 0&&X!=null&&c(e,["setup","proactivity"],i3(X)),t}function r3(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],o3(s,t)),t}function s3(n,e,t){const i={},s=u(e,["expireTime"]);t!==void 0&&s!=null&&c(t,["expireTime"],s);const l=u(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&c(t,["newSessionExpireTime"],l);const d=u(e,["uses"]);t!==void 0&&d!=null&&c(t,["uses"],d);const h=u(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&c(t,["bidiGenerateContentSetup"],r3(n,h));const g=u(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&c(t,["fieldMask"],g),i}function a3(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],s3(n,i,t)),t}function l3(n){const e={},t=u(n,["name"]);return t!=null&&c(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(l=>`${t}.${l}`);e.push(...s)}else e.push(t)}return e.join(",")}function c3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const l=u3(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];s.length>0&&(h=s.map(p=>d.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class f3 extends Qr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=a3(this.apiClient,e);l=me("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const g=c3(h,e.config);return s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>l3(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function h3(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function m3(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],h3(t,e)),e}function p3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function g3(n){const e={},t=u(n,["textInput"]);t!=null&&c(e,["textInput"],t);const i=u(n,["output"]);return i!=null&&c(e,["output"],i),e}function y3(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=u(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>g3(s))),c(e,["examples","examples"],i)}return e}function _3(n,e){const t={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=u(n,["epochCount"]);e!==void 0&&s!=null&&c(e,["tuningTask","hyperparameters","epochCount"],s);const l=u(n,["learningRateMultiplier"]);if(l!=null&&c(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=u(n,["batchSize"]);e!==void 0&&d!=null&&c(e,["tuningTask","hyperparameters","batchSize"],d);const h=u(n,["learningRate"]);return e!==void 0&&h!=null&&c(e,["tuningTask","hyperparameters","learningRate"],h),t}function v3(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["preTunedModel"]);i!=null&&c(e,["preTunedModel"],i);const s=u(n,["trainingDataset"]);s!=null&&c(e,["tuningTask","trainingData"],y3(s));const l=u(n,["config"]);return l!=null&&c(e,["config"],_3(l,e)),e}function T3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function E3(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function S3(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],E3(t,e)),e}function C3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function A3(n,e){const t={},i=u(n,["gcsUri"]);e!==void 0&&i!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=u(n,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s),u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function I3(n,e){const t={},i=u(n,["gcsUri"]);i!=null&&c(t,["validationDatasetUri"],i);const s=u(n,["vertexDatasetResource"]);return e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s),t}function R3(n,e){const t={},i=u(n,["validationDataset"]);e!==void 0&&i!=null&&c(e,["supervisedTuningSpec"],I3(i,t));const s=u(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&c(e,["tunedModelDisplayName"],s);const l=u(n,["description"]);e!==void 0&&l!=null&&c(e,["description"],l);const d=u(n,["epochCount"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const h=u(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const g=u(n,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const p=u(n,["preTunedModelCheckpointId"]);p!=null&&c(t,["preTunedModel","checkpointId"],p);const v=u(n,["adapterSize"]);if(e!==void 0&&v!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v),u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function w3(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["preTunedModel"]);i!=null&&c(e,["preTunedModel"],i);const s=u(n,["trainingDataset"]);s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],A3(s,e));const l=u(n,["config"]);return l!=null&&c(e,["config"],R3(l,e)),e}function M3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["model"],t);const i=u(n,["name"]);return i!=null&&c(e,["endpoint"],i),e}function aA(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],VC(s));const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["tuningTask","startTime"]);d!=null&&c(e,["startTime"],d);const h=u(n,["tuningTask","completeTime"]);h!=null&&c(e,["endTime"],h);const g=u(n,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(n,["description"]);p!=null&&c(e,["description"],p);const v=u(n,["baseModel"]);v!=null&&c(e,["baseModel"],v);const E=u(n,["_self"]);E!=null&&c(e,["tunedModel"],M3(E));const S=u(n,["customBaseModel"]);S!=null&&c(e,["customBaseModel"],S);const x=u(n,["experiment"]);x!=null&&c(e,["experiment"],x);const V=u(n,["labels"]);V!=null&&c(e,["labels"],V);const q=u(n,["outputUri"]);q!=null&&c(e,["outputUri"],q);const z=u(n,["pipelineJob"]);z!=null&&c(e,["pipelineJob"],z);const j=u(n,["serviceAccount"]);j!=null&&c(e,["serviceAccount"],j);const H=u(n,["tunedModelDisplayName"]);return H!=null&&c(e,["tunedModelDisplayName"],H),e}function x3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>aA(d))),c(e,["tuningJobs"],l)}return e}function D3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["metadata"]);s!=null&&c(e,["metadata"],s);const l=u(n,["done"]);l!=null&&c(e,["done"],l);const d=u(n,["error"]);return d!=null&&c(e,["error"],d),e}function N3(n){const e={},t=u(n,["checkpointId"]);t!=null&&c(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&c(e,["epoch"],i);const s=u(n,["step"]);s!=null&&c(e,["step"],s);const l=u(n,["endpoint"]);return l!=null&&c(e,["endpoint"],l),e}function b3(n){const e={},t=u(n,["model"]);t!=null&&c(e,["model"],t);const i=u(n,["endpoint"]);i!=null&&c(e,["endpoint"],i);const s=u(n,["checkpoints"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>N3(d))),c(e,["checkpoints"],l)}return e}function Jm(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],VC(s));const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["startTime"]);d!=null&&c(e,["startTime"],d);const h=u(n,["endTime"]);h!=null&&c(e,["endTime"],h);const g=u(n,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(n,["error"]);p!=null&&c(e,["error"],p);const v=u(n,["description"]);v!=null&&c(e,["description"],v);const E=u(n,["baseModel"]);E!=null&&c(e,["baseModel"],E);const S=u(n,["tunedModel"]);S!=null&&c(e,["tunedModel"],b3(S));const x=u(n,["preTunedModel"]);x!=null&&c(e,["preTunedModel"],x);const V=u(n,["supervisedTuningSpec"]);V!=null&&c(e,["supervisedTuningSpec"],V);const q=u(n,["tuningDataStats"]);q!=null&&c(e,["tuningDataStats"],q);const z=u(n,["encryptionSpec"]);z!=null&&c(e,["encryptionSpec"],z);const j=u(n,["partnerModelTuningSpec"]);j!=null&&c(e,["partnerModelTuningSpec"],j);const H=u(n,["customBaseModel"]);H!=null&&c(e,["customBaseModel"],H);const W=u(n,["experiment"]);W!=null&&c(e,["experiment"],W);const X=u(n,["labels"]);X!=null&&c(e,["labels"],X);const J=u(n,["outputUri"]);J!=null&&c(e,["outputUri"],J);const se=u(n,["pipelineJob"]);se!=null&&c(e,["pipelineJob"],se);const D=u(n,["serviceAccount"]);D!=null&&c(e,["serviceAccount"],D);const w=u(n,["tunedModelDisplayName"]);return w!=null&&c(e,["tunedModelDisplayName"],w),e}function P3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Jm(d))),c(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k3 extends Qr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new cu(zr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel},s=Object.assign(Object.assign({},t),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),s=await this.tuneMldevInternal(i);let l="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?l=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(l=s.name.split("/operations/")[0]),{name:l,state:Om.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=T3(e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>Jm(v))}else{const p=d3(e);return h=me("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>aA(v))}}async listInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=S3(e);return h=me("tuningJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=P3(v),S=new xE;return Object.assign(S,E),S})}else{const p=m3(e);return h=me("tunedModels",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),d.then(v=>{const E=x3(v),S=new xE;return Object.assign(S,E),S})}}async cancel(e){var t,i,s,l;let d="",h={};if(this.apiClient.isVertexAI()){const g=C3(e);d=me("{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=p3(e);d=me("{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=w3(e);return l=me("tuningJobs",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>Jm(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=v3(e);return l=me("tunedModels",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),s.then(g=>D3(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const U3=1024*1024*8,L3=3,O3=1e3,F3=2,fm="x-goog-upload-status";async function q3(n,e,t){var i,s,l;let d=0,h=0,g=new Fm(new Response),p="upload";for(d=n.size;h<d;){const E=Math.min(U3,d-h),S=n.slice(h,h+E);h+E>=d&&(p+=", finalize");let x=0,V=O3;for(;x<L3&&(g=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((i=g==null?void 0:g.headers)===null||i===void 0)&&i[fm]));)x++,await H3(V),V=V*F3;if(h+=E,((s=g==null?void 0:g.headers)===null||s===void 0?void 0:s[fm])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(g==null?void 0:g.json());if(((l=g==null?void 0:g.headers)===null||l===void 0?void 0:l[fm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function B3(n){return{size:n.size,type:n.type}}function H3(n){return new Promise(e=>setTimeout(e,n))}class G3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await q3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await B3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z3{create(e,t,i){return new Y3(e,t,i)}}class Y3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t0="x-goog-api-key";class $3{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(t0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(t0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J3="gl-node/";class K3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=Mb(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new $3(this.apiKey);this.apiClient=new c6({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:J3+"web",uploader:new G3,downloader:new V3}),this.models=new D6(this.apiClient),this.live=new C6(this.apiClient,s,new z3),this.batches=new jP(this.apiClient),this.chats=new rk(this.models,this.apiClient),this.caches=new nk(this.apiClient),this.files=new _k(this.apiClient),this.operations=new k6(this.apiClient),this.authTokens=new f3(this.apiClient),this.tunings=new k3(this.apiClient)}}const Q3=async(n,e,t)=>{const i="PLACEHOLDER_API_KEY";if(!n)throw new Error("エラー: 分析対象の時間割データがありません。");const s=new K3({apiKey:i}),l=n.grid.flat(2),d=new Map;l.forEach(p=>{p.id&&!d.has(p.id)&&d.set(p.id,{name:p.name,room:p.room,credits:p.credits,memo:p.memo,tasks:p.tasks.filter(v=>!v.completed).map(v=>({content:v.content,dueDate:v.dueDate}))})});const h={name:n.name,settings:n.settings,subjects:Array.from(d.values())},g=`
あなたは優秀な大学生活アシスタントです。ユーザーの時間割情報と現在の質問を分析し、親身なアドバイスを提供してください。

# あなたの役割
- ユーザーの時間割、授業、課題に関するあらゆる質問に答える。
- 課題の優先順位付け、学習計画の提案、スケジュールの確認などを行う。
- 回答はMarkdown形式を積極的に利用し、見やすく、分かりやすく構成すること。
- ポジティブで、ユーザーのやる気を引き出すような言葉遣いを心がけること。

# ユーザーの時間割情報 (JSON形式)
${JSON.stringify(h,null,2)}

# ユーザーからの質問
"${t}"

上記の情報に基づいて、質問に答えてください。
`;try{return await s.models.generateContentStream({model:e,contents:[{role:"user",parts:[{text:g}]}]})}catch(p){throw console.error("Error analyzing with Gemini API:",p),p instanceof Error&&p.message.includes("API key not valid")?new Error("エラー: 提供されたAPIキーが無効です。環境変数が正しいか確認してください。"):new Error("AIによる分析中にエラーが発生しました。しばらくしてからもう一度お試しください。")}},X3=({isOpen:n,onClose:e,onSave:t,currentModel:i})=>{const[s,l]=Me.useState(i);if(Me.useEffect(()=>{n&&l(i)},[n,i]),!n)return null;const d=()=>{t(s),e()};return O.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:O.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[O.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[O.jsx("h2",{className:"text-xl font-bold",children:"AI設定"}),O.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:O.jsx(Hf,{className:"w-6 h-6"})})]}),O.jsx("div",{className:"p-6 space-y-6",children:O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-2",children:"モデル"}),O.jsx("select",{value:s,onChange:h=>l(h.target.value),className:"w-full bg-gray-200/50 dark:bg-gray-700/50 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500","aria-label":"AI Model",children:zI.map(h=>O.jsx("option",{value:h,className:"bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white",children:h},h))})]})}),O.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10",children:O.jsx("button",{onClick:d,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"保存"})})]})})},W3=({isOpen:n,onClose:e,timetable:t,model:i,onSaveModel:s,user:l})=>{var j;const[d,h]=Me.useState([]),[g,p]=Me.useState(!1),[v,E]=Me.useState(""),[S,x]=Me.useState(!1),V=Me.useRef(null),q=()=>{var H;(H=V.current)==null||H.scrollIntoView({behavior:"smooth"})};Me.useEffect(()=>{q()},[d]),Me.useEffect(()=>{n&&d.length===0&&h([{role:"model",text:`こんにちは！私はあなたの学習アシスタントです。
時間割や課題について、何でも聞いてください。`}])},[n,d.length]);const z=async H=>{if(H.preventDefault(),!v.trim()||g)return;const W=v;h(X=>[...X,{role:"user",text:W},{role:"model",text:""}]),E(""),p(!0);try{const X=await Q3(t,i,W);for await(const J of X){const se=J.text;h(D=>{const w=D.length-1,M=[...D];return M[w]={...M[w],text:M[w].text+se},M})}}catch(X){const J=X instanceof Error?X.message:"予期せぬエラーが発生しました。";h(se=>{const D=se.length-1,w=[...se];return w[D]={...w[D],text:J},w})}finally{p(!1)}};return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:`fixed inset-0 bg-black/30 flex justify-end z-40 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:O.jsxs("div",{className:`w-full max-w-md h-full bg-gray-100/90 dark:bg-gray-900/90 backdrop-blur-xl border-l border-black/10 dark:border-white/10 shadow-2xl flex flex-col transition-transform duration-300 ${n?"translate-x-0":"translate-x-full"}`,children:[O.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[O.jsx("h2",{className:"text-xl font-bold",children:"AIアシスタント"}),O.jsxs("div",{children:[O.jsx("button",{onClick:()=>x(!0),className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",title:"AI設定",children:O.jsx(MC,{className:"w-6 h-6"})}),O.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 ml-2",title:"閉じる",children:O.jsx(Hf,{className:"w-6 h-6"})})]})]}),O.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[d.map((H,W)=>O.jsx("div",{className:`flex ${H.role==="user"?"justify-end":"justify-start"}`,children:O.jsx("div",{className:`max-w-xs md:max-w-sm lg:max-w-md p-3 rounded-2xl ${H.role==="user"?"bg-sky-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:H.role==="model"?O.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:window.marked?window.marked.parse(H.text):H.text.replace(/</g,"&lt;").replace(/>/g,"&gt;")}}):O.jsx("p",{className:"whitespace-pre-wrap",children:H.text})})},W)),g&&((j=d[d.length-1])==null?void 0:j.text)===""&&O.jsx("div",{className:"flex justify-start",children:O.jsx("div",{className:"p-3 rounded-2xl bg-gray-200 dark:bg-gray-700",children:O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse"}),O.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse [animation-delay:0.2s]"}),O.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse [animation-delay:0.4s]"})]})})}),O.jsx("div",{ref:V})]}),O.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 mt-auto",children:O.jsxs("form",{onSubmit:z,className:"flex items-center gap-2",children:[O.jsx("input",{type:"text",value:v,onChange:H=>E(H.target.value),placeholder:g?"AIが応答中...":"メッセージを入力...",className:"w-full bg-gray-200/50 dark:bg-gray-800/50 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 transition-colors placeholder:text-gray-500",disabled:g,"aria-label":"チャットメッセージ入力"}),O.jsx("button",{type:"submit",disabled:g||!v.trim(),className:"bg-sky-600 hover:bg-sky-700 text-white p-3 rounded-lg transition-colors disabled:bg-sky-400 disabled:cursor-not-allowed flex-shrink-0","aria-label":"送信",children:O.jsx(gb,{className:"w-5 h-5"})})]})})]})}),O.jsx(X3,{isOpen:S,onClose:()=>x(!1),onSave:s,currentModel:i})]})};function Z3(){const[n,e]=Me.useState(null),[t,i]=Me.useState(!0),{timetables:s,activeTimetable:l,activeTimetableId:d,setActiveTimetableId:h,addTimetable:g,importTimetable:p,deleteTimetable:v,updateTimetableSettings:E,saveSubject:S,deleteSubject:x,moveSubject:V,totalCredits:q,saveStatus:z,isLoading:j}=sb(n),[H,W]=Me.useState(YI),[X,J]=Me.useState(()=>{if(typeof window<"u"&&window.localStorage){const Re=window.localStorage.getItem("theme");if(Re==="light"||Re==="dark")return Re;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"});Me.useEffect(()=>{const Re=ib(dt=>{e(dt),i(!1)}),ft=localStorage.getItem("geminiModel");return ft&&W(ft),()=>Re()},[]),Me.useEffect(()=>{const Re=window.document.documentElement;Re.classList.remove(X==="dark"?"light":"dark"),Re.classList.add(X),localStorage.setItem("theme",X),document.body.classList.remove("glassmorphism-bg","dark"),X==="dark"?document.body.classList.add("dark","glassmorphism-bg"):document.body.classList.add("glassmorphism-bg")},[X]);const se=()=>{J(Re=>Re==="light"?"dark":"light")},D=async()=>{try{await tb()}catch(Re){console.error("Login failed",Re)}},w=async()=>{try{await nb()}catch(Re){console.error("Logout failed",Re)}},[M,P]=Me.useState(!1),[k,F]=Me.useState(!1),[b,ct]=Me.useState(!1),[Fe,ee]=Me.useState({subject:null,dayIndex:0,periodIndex:0}),[ce,pe]=Me.useState(null),ze=(Re,ft)=>{ee({subject:null,dayIndex:Re,periodIndex:ft}),P(!0)},U=(Re,ft,dt)=>{ee({subject:Re,dayIndex:ft,periodIndex:dt}),P(!0)},re=()=>{const Re=prompt("新しい時間割の名前を入力してください:",`時間割 ${s.length+1}`);Re&&g(Re)},fe=()=>{l&&window.confirm(`「${l.name}」を削除しますか？`)&&v(l.id)},le=()=>{if(!l)return;const Re=JSON.stringify(l,null,2),ft=new Blob([Re],{type:"application/json"}),dt=URL.createObjectURL(ft),Zt=document.createElement("a");Zt.href=dt,Zt.download=`${l.name}.tmx`,document.body.appendChild(Zt),Zt.click(),document.body.removeChild(Zt),URL.revokeObjectURL(dt)},_e=Re=>{var Zt;const ft=(Zt=Re.target.files)==null?void 0:Zt[0];if(!ft)return;const dt=new FileReader;dt.onload=Ri=>{var ao;const jn=(ao=Ri.target)==null?void 0:ao.result;typeof jn=="string"&&(p(jn)||alert("時間割ファイルの読み込みに失敗しました。ファイル形式が正しいか確認してください。"))},dt.readAsText(ft),Re.target.value=""},Ne=Re=>{E(Re)},Ce=Re=>{W(Re),localStorage.setItem("geminiModel",Re)},Ct=Re=>{const{id:ft,...dt}=Re;pe(dt)},je=(Re,ft)=>{if(ce){const dt={...ce,id:`subject-${Date.now()}`};S(dt,Re,ft)}};return t||j?O.jsx("div",{className:"min-h-screen flex justify-center items-center",children:O.jsx("div",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"読み込み中..."})}):O.jsxs("div",{className:"min-h-screen text-gray-800 dark:text-white font-sans transition-colors duration-300",children:[O.jsx(_b,{timetables:s,activeTimetableId:d,setActiveTimetableId:h,onAddTimetable:re,onDeleteTimetable:fe,onOpenSettings:()=>F(!0),onToggleChat:()=>ct(!b),totalCredits:q,theme:X,toggleTheme:se,onExport:le,onImport:_e,user:n,onLogin:D,onLogout:w,saveStatus:z}),O.jsx("main",{children:l?O.jsx(Eb,{timetable:l,onAddSubject:ze,onEditSubject:U,onMoveSubject:V,onDeleteSubject:x,onCopySubject:Ct,onPasteSubject:je,copiedSubject:ce}):O.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-100px)]",children:O.jsx("p",{className:"text-2xl text-gray-500 dark:text-gray-400",children:"表示する時間割がありません。"})})}),O.jsx(Cb,{isOpen:M,onClose:()=>P(!1),onSave:S,onDelete:x,subjectData:Fe}),l&&O.jsx(Ab,{isOpen:k,onClose:()=>F(!1),onSave:Ne,currentSettings:l.settings}),O.jsx(W3,{isOpen:b,onClose:()=>ct(!1),timetable:l,model:H,onSaveModel:Ce,user:n})]})}const lA=document.getElementById("root");if(!lA)throw new Error("Could not find root element to mount to");const j3=GI.createRoot(lA);j3.render(O.jsx(i0.StrictMode,{children:O.jsx(Z3,{})}));
