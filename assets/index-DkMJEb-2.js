(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Cw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zv={exports:{}},du={},Wv={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zs=Symbol.for("react.element"),ww=Symbol.for("react.portal"),Iw=Symbol.for("react.fragment"),Sw=Symbol.for("react.strict_mode"),Aw=Symbol.for("react.profiler"),Rw=Symbol.for("react.provider"),kw=Symbol.for("react.context"),xw=Symbol.for("react.forward_ref"),Pw=Symbol.for("react.suspense"),Mw=Symbol.for("react.memo"),Nw=Symbol.for("react.lazy"),om=Symbol.iterator;function Dw(t){return t===null||typeof t!="object"?null:(t=om&&t[om]||t["@@iterator"],typeof t=="function"?t:null)}var Kv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jv=Object.assign,Yv={};function oo(t,e,n){this.props=t,this.context=e,this.refs=Yv,this.updater=n||Kv}oo.prototype.isReactComponent={};oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qv(){}Qv.prototype=oo.prototype;function Ef(t,e,n){this.props=t,this.context=e,this.refs=Yv,this.updater=n||Kv}var Cf=Ef.prototype=new Qv;Cf.constructor=Ef;Jv(Cf,oo.prototype);Cf.isPureReactComponent=!0;var sm=Array.isArray,Xv=Object.prototype.hasOwnProperty,wf={current:null},Zv={key:!0,ref:!0,__self:!0,__source:!0};function jv(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Xv.call(e,r)&&!Zv.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:zs,type:t,key:o,ref:s,props:i,_owner:wf.current}}function Vw(t,e){return{$$typeof:zs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function If(t){return typeof t=="object"&&t!==null&&t.$$typeof===zs}function Lw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lm=/\/+/g;function ac(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lw(""+t.key):e.toString(36)}function Xl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case zs:case ww:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+ac(s,0):r,sm(i)?(n="",t!=null&&(n=t.replace(lm,"$&/")+"/"),Xl(i,e,n,"",function(d){return d})):i!=null&&(If(i)&&(i=Vw(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(lm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",sm(t))for(var u=0;u<t.length;u++){o=t[u];var c=r+ac(o,u);s+=Xl(o,e,n,c,i)}else if(c=Dw(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=r+ac(o,u++),s+=Xl(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Rl(t,e,n){if(t==null)return t;var r=[],i=0;return Xl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Uw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Zl={transition:null},Fw={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:wf};function e_(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Rl,forEach:function(t,e,n){Rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rl(t,function(){e++}),e},toArray:function(t){return Rl(t,function(e){return e})||[]},only:function(t){if(!If(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=oo;ie.Fragment=Iw;ie.Profiler=Aw;ie.PureComponent=Ef;ie.StrictMode=Sw;ie.Suspense=Pw;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fw;ie.act=e_;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jv({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=wf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Xv.call(e,c)&&!Zv.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:zs,type:t.type,key:i,ref:o,props:r,_owner:s}};ie.createContext=function(t){return t={$$typeof:kw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rw,_context:t},t.Consumer=t};ie.createElement=jv;ie.createFactory=function(t){var e=jv.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:xw,render:t}};ie.isValidElement=If;ie.lazy=function(t){return{$$typeof:Nw,_payload:{_status:-1,_result:t},_init:Uw}};ie.memo=function(t,e){return{$$typeof:Mw,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};ie.unstable_act=e_;ie.useCallback=function(t,e){return _t.current.useCallback(t,e)};ie.useContext=function(t){return _t.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};ie.useEffect=function(t,e){return _t.current.useEffect(t,e)};ie.useId=function(){return _t.current.useId()};ie.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return _t.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};ie.useRef=function(t){return _t.current.useRef(t)};ie.useState=function(t){return _t.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return _t.current.useTransition()};ie.version="18.3.1";Wv.exports=ie;var H=Wv.exports;const t_=Cw(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bw=H,Ow=Symbol.for("react.element"),Bw=Symbol.for("react.fragment"),$w=Object.prototype.hasOwnProperty,qw=bw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gw={key:!0,ref:!0,__self:!0,__source:!0};function n_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)$w.call(e,r)&&!Gw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ow,type:t,key:o,ref:s,props:i,_owner:qw.current}}du.Fragment=Bw;du.jsx=n_;du.jsxs=n_;zv.exports=du;var E=zv.exports,Kc={},r_={exports:{}},Nt={},i_={exports:{}},o_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Y){var Z=G.length;G.push(Y);e:for(;0<Z;){var de=Z-1>>>1,ge=G[de];if(0<i(ge,Y))G[de]=Y,G[Z]=ge,Z=de;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],Z=G.pop();if(Z!==Y){G[0]=Z;e:for(var de=0,ge=G.length,Re=ge>>>1;de<Re;){var Et=2*(de+1)-1,zt=G[Et],Vt=Et+1,Le=G[Vt];if(0>i(zt,Z))Vt<ge&&0>i(Le,zt)?(G[de]=Le,G[Vt]=Z,de=Vt):(G[de]=zt,G[Et]=Z,de=Et);else if(Vt<ge&&0>i(Le,Z))G[de]=Le,G[Vt]=Z,de=Vt;else break e}}return Y}function i(G,Y){var Z=G.sortIndex-Y.sortIndex;return Z!==0?Z:G.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],h=1,p=null,g=3,v=!1,A=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=G)r(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function V(G){if(P=!1,k(G),!A)if(n(c)!==null)A=!0,pe(F);else{var Y=n(d);Y!==null&&$e(V,Y.startTime-G)}}function F(G,Y){A=!1,P&&(P=!1,R(_),_=-1),v=!0;var Z=g;try{for(k(Y),p=n(c);p!==null&&(!(p.expirationTime>Y)||G&&!x());){var de=p.callback;if(typeof de=="function"){p.callback=null,g=p.priorityLevel;var ge=de(p.expirationTime<=Y);Y=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(c)&&r(c),k(Y)}else r(c);p=n(c)}if(p!==null)var Re=!0;else{var Et=n(d);Et!==null&&$e(V,Et.startTime-Y),Re=!1}return Re}finally{p=null,g=Z,v=!1}}var U=!1,S=null,_=-1,T=5,C=-1;function x(){return!(t.unstable_now()-C<T)}function N(){if(S!==null){var G=t.unstable_now();C=G;var Y=!0;try{Y=S(!0,G)}finally{Y?M():(U=!1,S=null)}}else U=!1}var M;if(typeof I=="function")M=function(){I(N)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,le=oe.port2;oe.port1.onmessage=N,M=function(){le.postMessage(null)}}else M=function(){D(N,0)};function pe(G){S=G,U||(U=!0,M())}function $e(G,Y){_=D(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){A||v||(A=!0,pe(F))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Z=g;g=Y;try{return G()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=g;g=G;try{return Y()}finally{g=Z}},t.unstable_scheduleCallback=function(G,Y,Z){var de=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?de+Z:de):Z=de,G){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Z+ge,G={id:h++,callback:Y,priorityLevel:G,startTime:Z,expirationTime:ge,sortIndex:-1},Z>de?(G.sortIndex=Z,e(d,G),n(c)===null&&G===n(d)&&(P?(R(_),_=-1):P=!0,$e(V,Z-de))):(G.sortIndex=ge,e(c,G),A||v||(A=!0,pe(F))),G},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(G){var Y=g;return function(){var Z=g;g=Y;try{return G.apply(this,arguments)}finally{g=Z}}}})(o_);i_.exports=o_;var Hw=i_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw=H,Mt=Hw;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s_=new Set,ys={};function ei(t,e){Gi(t,e),Gi(t+"Capture",e)}function Gi(t,e){for(ys[t]=e,t=0;t<e.length;t++)s_.add(e[t])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jc=Object.prototype.hasOwnProperty,Ww=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,am={},um={};function Kw(t){return Jc.call(um,t)?!0:Jc.call(am,t)?!1:Ww.test(t)?um[t]=!0:(am[t]=!0,!1)}function Jw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yw(t,e,n,r){if(e===null||typeof e>"u"||Jw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sf=/[\-:]([a-z])/g;function Af(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sf,Af);rt[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sf,Af);rt[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sf,Af);rt[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rf(t,e,n,r){var i=rt.hasOwnProperty(e)?rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yw(e,n,i,r)&&(n=null),r||i===null?Kw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bn=zw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kl=Symbol.for("react.element"),yi=Symbol.for("react.portal"),vi=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),Yc=Symbol.for("react.profiler"),l_=Symbol.for("react.provider"),a_=Symbol.for("react.context"),xf=Symbol.for("react.forward_ref"),Qc=Symbol.for("react.suspense"),Xc=Symbol.for("react.suspense_list"),Pf=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),u_=Symbol.for("react.offscreen"),cm=Symbol.iterator;function Oo(t){return t===null||typeof t!="object"?null:(t=cm&&t[cm]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,uc;function Yo(t){if(uc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uc=e&&e[1]||""}return`
`+uc+t}var cc=!1;function dc(t,e){if(!t||cc)return"";cc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,u=o.length-1;1<=s&&0<=u&&i[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==o[u]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{cc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function Qw(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=dc(t.type,!1),t;case 11:return t=dc(t.type.render,!1),t;case 1:return t=dc(t.type,!0),t;default:return""}}function Zc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vi:return"Fragment";case yi:return"Portal";case Yc:return"Profiler";case kf:return"StrictMode";case Qc:return"Suspense";case Xc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a_:return(t.displayName||"Context")+".Consumer";case l_:return(t._context.displayName||"Context")+".Provider";case xf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pf:return e=t.displayName||null,e!==null?e:Zc(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return Zc(t(e))}catch{}}return null}function Xw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zc(e);case 8:return e===kf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function c_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zw(t){var e=c_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xl(t){t._valueTracker||(t._valueTracker=Zw(t))}function d_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=c_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ea(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jc(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f_(t,e){e=e.checked,e!=null&&Rf(t,"checked",e,!1)}function ed(t,e){f_(t,e);var n=yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?td(t,e.type,n):e.hasOwnProperty("defaultValue")&&td(t,e.type,yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function td(t,e,n){(e!=="number"||Ea(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qo=Array.isArray;function Pi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Qo(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yr(n)}}function h_(t,e){var n=yr(e.value),r=yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function p_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?p_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pl,m_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jw=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(t){jw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ns[e]=ns[t]})});function g_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ns.hasOwnProperty(t)&&ns[t]?(""+e).trim():e+"px"}function y_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=g_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var eI=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function id(t,e){if(e){if(eI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function od(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=null;function Mf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ld=null,Mi=null,Ni=null;function mm(t){if(t=Js(t)){if(typeof ld!="function")throw Error($(280));var e=t.stateNode;e&&(e=gu(e),ld(t.stateNode,t.type,e))}}function v_(t){Mi?Ni?Ni.push(t):Ni=[t]:Mi=t}function __(){if(Mi){var t=Mi,e=Ni;if(Ni=Mi=null,mm(t),e)for(t=0;t<e.length;t++)mm(e[t])}}function T_(t,e){return t(e)}function E_(){}var fc=!1;function C_(t,e,n){if(fc)return t(e,n);fc=!0;try{return T_(t,e,n)}finally{fc=!1,(Mi!==null||Ni!==null)&&(E_(),__())}}function _s(t,e){var n=t.stateNode;if(n===null)return null;var r=gu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ad=!1;if(Pn)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){ad=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{ad=!1}function tI(t,e,n,r,i,o,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var rs=!1,Ca=null,wa=!1,ud=null,nI={onError:function(t){rs=!0,Ca=t}};function rI(t,e,n,r,i,o,s,u,c){rs=!1,Ca=null,tI.apply(nI,arguments)}function iI(t,e,n,r,i,o,s,u,c){if(rI.apply(this,arguments),rs){if(rs){var d=Ca;rs=!1,Ca=null}else throw Error($(198));wa||(wa=!0,ud=d)}}function ti(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function w_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gm(t){if(ti(t)!==t)throw Error($(188))}function oI(t){var e=t.alternate;if(!e){if(e=ti(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return gm(i),t;if(o===r)return gm(i),e;o=o.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function I_(t){return t=oI(t),t!==null?S_(t):null}function S_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=S_(t);if(e!==null)return e;t=t.sibling}return null}var A_=Mt.unstable_scheduleCallback,ym=Mt.unstable_cancelCallback,sI=Mt.unstable_shouldYield,lI=Mt.unstable_requestPaint,Fe=Mt.unstable_now,aI=Mt.unstable_getCurrentPriorityLevel,Nf=Mt.unstable_ImmediatePriority,R_=Mt.unstable_UserBlockingPriority,Ia=Mt.unstable_NormalPriority,uI=Mt.unstable_LowPriority,k_=Mt.unstable_IdlePriority,fu=null,an=null;function cI(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(fu,t,void 0,(t.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:hI,dI=Math.log,fI=Math.LN2;function hI(t){return t>>>=0,t===0?32:31-(dI(t)/fI|0)|0}var Ml=64,Nl=4194304;function Xo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=Xo(u):(o&=s,o!==0&&(r=Xo(o)))}else s=n&~i,s!==0?r=Xo(s):o!==0&&(r=Xo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jt(e),i=1<<n,r|=t[n],e&=~i;return r}function pI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-jt(o),u=1<<s,c=i[s];c===-1?(!(u&n)||u&r)&&(i[s]=pI(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function cd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function x_(){var t=Ml;return Ml<<=1,!(Ml&4194240)&&(Ml=64),t}function hc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ws(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jt(e),t[e]=n}function gI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-jt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Df(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function P_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M_,Vf,N_,D_,V_,dd=!1,Dl=[],or=null,sr=null,lr=null,Ts=new Map,Es=new Map,Qn=[],yI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vm(t,e){switch(t){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":Ts.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(e.pointerId)}}function $o(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Js(e),e!==null&&Vf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function vI(t,e,n,r,i){switch(e){case"focusin":return or=$o(or,t,e,n,r,i),!0;case"dragenter":return sr=$o(sr,t,e,n,r,i),!0;case"mouseover":return lr=$o(lr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ts.set(o,$o(Ts.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Es.set(o,$o(Es.get(o)||null,t,e,n,r,i)),!0}return!1}function L_(t){var e=Vr(t.target);if(e!==null){var n=ti(e);if(n!==null){if(e=n.tag,e===13){if(e=w_(n),e!==null){t.blockedOn=e,V_(t.priority,function(){N_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sd=r,n.target.dispatchEvent(r),sd=null}else return e=Js(n),e!==null&&Vf(e),t.blockedOn=n,!1;e.shift()}return!0}function _m(t,e,n){jl(t)&&n.delete(e)}function _I(){dd=!1,or!==null&&jl(or)&&(or=null),sr!==null&&jl(sr)&&(sr=null),lr!==null&&jl(lr)&&(lr=null),Ts.forEach(_m),Es.forEach(_m)}function qo(t,e){t.blockedOn===e&&(t.blockedOn=null,dd||(dd=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,_I)))}function Cs(t){function e(i){return qo(i,t)}if(0<Dl.length){qo(Dl[0],t);for(var n=1;n<Dl.length;n++){var r=Dl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(or!==null&&qo(or,t),sr!==null&&qo(sr,t),lr!==null&&qo(lr,t),Ts.forEach(e),Es.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)L_(n),n.blockedOn===null&&Qn.shift()}var Di=bn.ReactCurrentBatchConfig,Aa=!0;function TI(t,e,n,r){var i=ve,o=Di.transition;Di.transition=null;try{ve=1,Lf(t,e,n,r)}finally{ve=i,Di.transition=o}}function EI(t,e,n,r){var i=ve,o=Di.transition;Di.transition=null;try{ve=4,Lf(t,e,n,r)}finally{ve=i,Di.transition=o}}function Lf(t,e,n,r){if(Aa){var i=fd(t,e,n,r);if(i===null)wc(t,e,r,Ra,n),vm(t,r);else if(vI(i,t,e,n,r))r.stopPropagation();else if(vm(t,r),e&4&&-1<yI.indexOf(t)){for(;i!==null;){var o=Js(i);if(o!==null&&M_(o),o=fd(t,e,n,r),o===null&&wc(t,e,r,Ra,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else wc(t,e,r,null,n)}}var Ra=null;function fd(t,e,n,r){if(Ra=null,t=Mf(r),t=Vr(t),t!==null)if(e=ti(t),e===null)t=null;else if(n=e.tag,n===13){if(t=w_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ra=t,null}function U_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aI()){case Nf:return 1;case R_:return 4;case Ia:case uI:return 16;case k_:return 536870912;default:return 16}default:return 16}}var tr=null,Uf=null,ea=null;function F_(){if(ea)return ea;var t,e=Uf,n=e.length,r,i="value"in tr?tr.value:tr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return ea=i.slice(t,1<r?1-r:void 0)}function ta(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vl(){return!0}function Tm(){return!1}function Dt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Vl:Tm,this.isPropagationStopped=Tm,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),e}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ff=Dt(so),Ks=Pe({},so,{view:0,detail:0}),CI=Dt(Ks),pc,mc,Go,hu=Pe({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Go&&(Go&&t.type==="mousemove"?(pc=t.screenX-Go.screenX,mc=t.screenY-Go.screenY):mc=pc=0,Go=t),pc)},movementY:function(t){return"movementY"in t?t.movementY:mc}}),Em=Dt(hu),wI=Pe({},hu,{dataTransfer:0}),II=Dt(wI),SI=Pe({},Ks,{relatedTarget:0}),gc=Dt(SI),AI=Pe({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),RI=Dt(AI),kI=Pe({},so,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xI=Dt(kI),PI=Pe({},so,{data:0}),Cm=Dt(PI),MI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DI[t])?!!e[t]:!1}function bf(){return VI}var LI=Pe({},Ks,{key:function(t){if(t.key){var e=MI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bf,charCode:function(t){return t.type==="keypress"?ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UI=Dt(LI),FI=Pe({},hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wm=Dt(FI),bI=Pe({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bf}),OI=Dt(bI),BI=Pe({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),$I=Dt(BI),qI=Pe({},hu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GI=Dt(qI),HI=[9,13,27,32],Of=Pn&&"CompositionEvent"in window,is=null;Pn&&"documentMode"in document&&(is=document.documentMode);var zI=Pn&&"TextEvent"in window&&!is,b_=Pn&&(!Of||is&&8<is&&11>=is),Im=" ",Sm=!1;function O_(t,e){switch(t){case"keyup":return HI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _i=!1;function WI(t,e){switch(t){case"compositionend":return B_(e);case"keypress":return e.which!==32?null:(Sm=!0,Im);case"textInput":return t=e.data,t===Im&&Sm?null:t;default:return null}}function KI(t,e){if(_i)return t==="compositionend"||!Of&&O_(t,e)?(t=F_(),ea=Uf=tr=null,_i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b_&&e.locale!=="ko"?null:e.data;default:return null}}var JI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Am(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JI[t.type]:e==="textarea"}function $_(t,e,n,r){v_(r),e=ka(e,"onChange"),0<e.length&&(n=new Ff("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var os=null,ws=null;function YI(t){Z_(t,0)}function pu(t){var e=Ci(t);if(d_(e))return t}function QI(t,e){if(t==="change")return e}var q_=!1;if(Pn){var yc;if(Pn){var vc="oninput"in document;if(!vc){var Rm=document.createElement("div");Rm.setAttribute("oninput","return;"),vc=typeof Rm.oninput=="function"}yc=vc}else yc=!1;q_=yc&&(!document.documentMode||9<document.documentMode)}function km(){os&&(os.detachEvent("onpropertychange",G_),ws=os=null)}function G_(t){if(t.propertyName==="value"&&pu(ws)){var e=[];$_(e,ws,t,Mf(t)),C_(YI,e)}}function XI(t,e,n){t==="focusin"?(km(),os=e,ws=n,os.attachEvent("onpropertychange",G_)):t==="focusout"&&km()}function ZI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pu(ws)}function jI(t,e){if(t==="click")return pu(e)}function eS(t,e){if(t==="input"||t==="change")return pu(e)}function tS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:tS;function Is(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jc.call(e,i)||!nn(t[i],e[i]))return!1}return!0}function xm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pm(t,e){var n=xm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xm(n)}}function H_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function z_(){for(var t=window,e=Ea();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ea(t.document)}return e}function Bf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nS(t){var e=z_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&H_(n.ownerDocument.documentElement,n)){if(r!==null&&Bf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Pm(n,o);var s=Pm(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rS=Pn&&"documentMode"in document&&11>=document.documentMode,Ti=null,hd=null,ss=null,pd=!1;function Mm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pd||Ti==null||Ti!==Ea(r)||(r=Ti,"selectionStart"in r&&Bf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ss&&Is(ss,r)||(ss=r,r=ka(hd,"onSelect"),0<r.length&&(e=new Ff("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ti)))}function Ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ei={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},_c={},W_={};Pn&&(W_=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function mu(t){if(_c[t])return _c[t];if(!Ei[t])return t;var e=Ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in W_)return _c[t]=e[n];return t}var K_=mu("animationend"),J_=mu("animationiteration"),Y_=mu("animationstart"),Q_=mu("transitionend"),X_=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(t,e){X_.set(t,e),ei(e,[t])}for(var Tc=0;Tc<Nm.length;Tc++){var Ec=Nm[Tc],iS=Ec.toLowerCase(),oS=Ec[0].toUpperCase()+Ec.slice(1);Cr(iS,"on"+oS)}Cr(K_,"onAnimationEnd");Cr(J_,"onAnimationIteration");Cr(Y_,"onAnimationStart");Cr("dblclick","onDoubleClick");Cr("focusin","onFocus");Cr("focusout","onBlur");Cr(Q_,"onTransitionEnd");Gi("onMouseEnter",["mouseout","mouseover"]);Gi("onMouseLeave",["mouseout","mouseover"]);Gi("onPointerEnter",["pointerout","pointerover"]);Gi("onPointerLeave",["pointerout","pointerover"]);ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ei("onBeforeInput",["compositionend","keypress","textInput","paste"]);ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zo));function Dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iI(r,e,void 0,t),t.currentTarget=null}function Z_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==o&&i.isPropagationStopped())break e;Dm(i,u,d),o=c}else for(s=0;s<r.length;s++){if(u=r[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==o&&i.isPropagationStopped())break e;Dm(i,u,d),o=c}}}if(wa)throw t=ud,wa=!1,ud=null,t}function we(t,e){var n=e[_d];n===void 0&&(n=e[_d]=new Set);var r=t+"__bubble";n.has(r)||(j_(e,t,2,!1),n.add(r))}function Cc(t,e,n){var r=0;e&&(r|=4),j_(n,t,r,e)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Ss(t){if(!t[Ul]){t[Ul]=!0,s_.forEach(function(n){n!=="selectionchange"&&(sS.has(n)||Cc(n,!1,t),Cc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ul]||(e[Ul]=!0,Cc("selectionchange",!1,e))}}function j_(t,e,n,r){switch(U_(e)){case 1:var i=TI;break;case 4:i=EI;break;default:i=Lf}n=i.bind(null,e,n,t),i=void 0,!ad||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wc(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Vr(u),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}u=u.parentNode}}r=r.return}C_(function(){var d=o,h=Mf(n),p=[];e:{var g=X_.get(t);if(g!==void 0){var v=Ff,A=t;switch(t){case"keypress":if(ta(n)===0)break e;case"keydown":case"keyup":v=UI;break;case"focusin":A="focus",v=gc;break;case"focusout":A="blur",v=gc;break;case"beforeblur":case"afterblur":v=gc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=II;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=OI;break;case K_:case J_:case Y_:v=RI;break;case Q_:v=$I;break;case"scroll":v=CI;break;case"wheel":v=GI;break;case"copy":case"cut":case"paste":v=xI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=wm}var P=(e&4)!==0,D=!P&&t==="scroll",R=P?g!==null?g+"Capture":null:g;P=[];for(var I=d,k;I!==null;){k=I;var V=k.stateNode;if(k.tag===5&&V!==null&&(k=V,R!==null&&(V=_s(I,R),V!=null&&P.push(As(I,V,k)))),D)break;I=I.return}0<P.length&&(g=new v(g,A,null,n,h),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==sd&&(A=n.relatedTarget||n.fromElement)&&(Vr(A)||A[Mn]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(A=n.relatedTarget||n.toElement,v=d,A=A?Vr(A):null,A!==null&&(D=ti(A),A!==D||A.tag!==5&&A.tag!==6)&&(A=null)):(v=null,A=d),v!==A)){if(P=Em,V="onMouseLeave",R="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(P=wm,V="onPointerLeave",R="onPointerEnter",I="pointer"),D=v==null?g:Ci(v),k=A==null?g:Ci(A),g=new P(V,I+"leave",v,n,h),g.target=D,g.relatedTarget=k,V=null,Vr(h)===d&&(P=new P(R,I+"enter",A,n,h),P.target=k,P.relatedTarget=D,V=P),D=V,v&&A)t:{for(P=v,R=A,I=0,k=P;k;k=hi(k))I++;for(k=0,V=R;V;V=hi(V))k++;for(;0<I-k;)P=hi(P),I--;for(;0<k-I;)R=hi(R),k--;for(;I--;){if(P===R||R!==null&&P===R.alternate)break t;P=hi(P),R=hi(R)}P=null}else P=null;v!==null&&Vm(p,g,v,P,!1),A!==null&&D!==null&&Vm(p,D,A,P,!0)}}e:{if(g=d?Ci(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var F=QI;else if(Am(g))if(q_)F=eS;else{F=ZI;var U=XI}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=jI);if(F&&(F=F(t,d))){$_(p,F,n,h);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&td(g,"number",g.value)}switch(U=d?Ci(d):window,t){case"focusin":(Am(U)||U.contentEditable==="true")&&(Ti=U,hd=d,ss=null);break;case"focusout":ss=hd=Ti=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,Mm(p,n,h);break;case"selectionchange":if(rS)break;case"keydown":case"keyup":Mm(p,n,h)}var S;if(Of)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else _i?O_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(b_&&n.locale!=="ko"&&(_i||_!=="onCompositionStart"?_==="onCompositionEnd"&&_i&&(S=F_()):(tr=h,Uf="value"in tr?tr.value:tr.textContent,_i=!0)),U=ka(d,_),0<U.length&&(_=new Cm(_,t,null,n,h),p.push({event:_,listeners:U}),S?_.data=S:(S=B_(n),S!==null&&(_.data=S)))),(S=zI?WI(t,n):KI(t,n))&&(d=ka(d,"onBeforeInput"),0<d.length&&(h=new Cm("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=S))}Z_(p,e)})}function As(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ka(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=_s(t,n),o!=null&&r.unshift(As(t,o,i)),o=_s(t,e),o!=null&&r.push(As(t,o,i))),t=t.return}return r}function hi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vm(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,i?(c=_s(n,o),c!=null&&s.unshift(As(n,c,u))):i||(c=_s(n,o),c!=null&&s.push(As(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var lS=/\r\n?/g,aS=/\u0000|\uFFFD/g;function Lm(t){return(typeof t=="string"?t:""+t).replace(lS,`
`).replace(aS,"")}function Fl(t,e,n){if(e=Lm(e),Lm(t)!==e&&n)throw Error($(425))}function xa(){}var md=null,gd=null;function yd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vd=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,cS=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(t){return Um.resolve(null).then(t).catch(dS)}:vd;function dS(t){setTimeout(function(){throw t})}function Ic(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cs(e)}function ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),ln="__reactFiber$"+lo,Rs="__reactProps$"+lo,Mn="__reactContainer$"+lo,_d="__reactEvents$"+lo,fS="__reactListeners$"+lo,hS="__reactHandles$"+lo;function Vr(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fm(t);t!==null;){if(n=t[ln])return n;t=Fm(t)}return e}t=n,n=t.parentNode}return null}function Js(t){return t=t[ln]||t[Mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function gu(t){return t[Rs]||null}var Td=[],wi=-1;function wr(t){return{current:t}}function Se(t){0>wi||(t.current=Td[wi],Td[wi]=null,wi--)}function Ee(t,e){wi++,Td[wi]=t.current,t.current=e}var vr={},pt=wr(vr),It=wr(!1),Gr=vr;function Hi(t,e){var n=t.type.contextTypes;if(!n)return vr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function St(t){return t=t.childContextTypes,t!=null}function Pa(){Se(It),Se(pt)}function bm(t,e,n){if(pt.current!==vr)throw Error($(168));Ee(pt,e),Ee(It,n)}function eT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,Xw(t)||"Unknown",i));return Pe({},n,r)}function Ma(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vr,Gr=pt.current,Ee(pt,t),Ee(It,It.current),!0}function Om(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=eT(t,e,Gr),r.__reactInternalMemoizedMergedChildContext=t,Se(It),Se(pt),Ee(pt,t)):Se(It),Ee(It,n)}var Tn=null,yu=!1,Sc=!1;function tT(t){Tn===null?Tn=[t]:Tn.push(t)}function pS(t){yu=!0,tT(t)}function Ir(){if(!Sc&&Tn!==null){Sc=!0;var t=0,e=ve;try{var n=Tn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,yu=!1}catch(i){throw Tn!==null&&(Tn=Tn.slice(t+1)),A_(Nf,Ir),i}finally{ve=e,Sc=!1}}return null}var Ii=[],Si=0,Na=null,Da=0,Lt=[],Ut=0,Hr=null,Cn=1,wn="";function Mr(t,e){Ii[Si++]=Da,Ii[Si++]=Na,Na=t,Da=e}function nT(t,e,n){Lt[Ut++]=Cn,Lt[Ut++]=wn,Lt[Ut++]=Hr,Hr=t;var r=Cn;t=wn;var i=32-jt(r)-1;r&=~(1<<i),n+=1;var o=32-jt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Cn=1<<32-jt(e)+i|n<<i|r,wn=o+t}else Cn=1<<o|n<<i|r,wn=t}function $f(t){t.return!==null&&(Mr(t,1),nT(t,1,0))}function qf(t){for(;t===Na;)Na=Ii[--Si],Ii[Si]=null,Da=Ii[--Si],Ii[Si]=null;for(;t===Hr;)Hr=Lt[--Ut],Lt[Ut]=null,wn=Lt[--Ut],Lt[Ut]=null,Cn=Lt[--Ut],Lt[Ut]=null}var Pt=null,xt=null,Ae=!1,Xt=null;function rT(t,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,xt=ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hr!==null?{id:Cn,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,xt=null,!0):!1;default:return!1}}function Ed(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cd(t){if(Ae){var e=xt;if(e){var n=e;if(!Bm(t,e)){if(Ed(t))throw Error($(418));e=ar(n.nextSibling);var r=Pt;e&&Bm(t,e)?rT(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Pt=t)}}else{if(Ed(t))throw Error($(418));t.flags=t.flags&-4097|2,Ae=!1,Pt=t}}}function $m(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function bl(t){if(t!==Pt)return!1;if(!Ae)return $m(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yd(t.type,t.memoizedProps)),e&&(e=xt)){if(Ed(t))throw iT(),Error($(418));for(;e;)rT(t,e),e=ar(e.nextSibling)}if($m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xt=ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xt=null}}else xt=Pt?ar(t.stateNode.nextSibling):null;return!0}function iT(){for(var t=xt;t;)t=ar(t.nextSibling)}function zi(){xt=Pt=null,Ae=!1}function Gf(t){Xt===null?Xt=[t]:Xt.push(t)}var mS=bn.ReactCurrentBatchConfig;function Ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var u=i.refs;s===null?delete u[o]:u[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Ol(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qm(t){var e=t._init;return e(t._payload)}function oT(t){function e(R,I){if(t){var k=R.deletions;k===null?(R.deletions=[I],R.flags|=16):k.push(I)}}function n(R,I){if(!t)return null;for(;I!==null;)e(R,I),I=I.sibling;return null}function r(R,I){for(R=new Map;I!==null;)I.key!==null?R.set(I.key,I):R.set(I.index,I),I=I.sibling;return R}function i(R,I){return R=fr(R,I),R.index=0,R.sibling=null,R}function o(R,I,k){return R.index=k,t?(k=R.alternate,k!==null?(k=k.index,k<I?(R.flags|=2,I):k):(R.flags|=2,I)):(R.flags|=1048576,I)}function s(R){return t&&R.alternate===null&&(R.flags|=2),R}function u(R,I,k,V){return I===null||I.tag!==6?(I=Nc(k,R.mode,V),I.return=R,I):(I=i(I,k),I.return=R,I)}function c(R,I,k,V){var F=k.type;return F===vi?h(R,I,k.props.children,V,k.key):I!==null&&(I.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Jn&&qm(F)===I.type)?(V=i(I,k.props),V.ref=Ho(R,I,k),V.return=R,V):(V=aa(k.type,k.key,k.props,null,R.mode,V),V.ref=Ho(R,I,k),V.return=R,V)}function d(R,I,k,V){return I===null||I.tag!==4||I.stateNode.containerInfo!==k.containerInfo||I.stateNode.implementation!==k.implementation?(I=Dc(k,R.mode,V),I.return=R,I):(I=i(I,k.children||[]),I.return=R,I)}function h(R,I,k,V,F){return I===null||I.tag!==7?(I=Br(k,R.mode,V,F),I.return=R,I):(I=i(I,k),I.return=R,I)}function p(R,I,k){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Nc(""+I,R.mode,k),I.return=R,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case kl:return k=aa(I.type,I.key,I.props,null,R.mode,k),k.ref=Ho(R,null,I),k.return=R,k;case yi:return I=Dc(I,R.mode,k),I.return=R,I;case Jn:var V=I._init;return p(R,V(I._payload),k)}if(Qo(I)||Oo(I))return I=Br(I,R.mode,k,null),I.return=R,I;Ol(R,I)}return null}function g(R,I,k,V){var F=I!==null?I.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return F!==null?null:u(R,I,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case kl:return k.key===F?c(R,I,k,V):null;case yi:return k.key===F?d(R,I,k,V):null;case Jn:return F=k._init,g(R,I,F(k._payload),V)}if(Qo(k)||Oo(k))return F!==null?null:h(R,I,k,V,null);Ol(R,k)}return null}function v(R,I,k,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return R=R.get(k)||null,u(I,R,""+V,F);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case kl:return R=R.get(V.key===null?k:V.key)||null,c(I,R,V,F);case yi:return R=R.get(V.key===null?k:V.key)||null,d(I,R,V,F);case Jn:var U=V._init;return v(R,I,k,U(V._payload),F)}if(Qo(V)||Oo(V))return R=R.get(k)||null,h(I,R,V,F,null);Ol(I,V)}return null}function A(R,I,k,V){for(var F=null,U=null,S=I,_=I=0,T=null;S!==null&&_<k.length;_++){S.index>_?(T=S,S=null):T=S.sibling;var C=g(R,S,k[_],V);if(C===null){S===null&&(S=T);break}t&&S&&C.alternate===null&&e(R,S),I=o(C,I,_),U===null?F=C:U.sibling=C,U=C,S=T}if(_===k.length)return n(R,S),Ae&&Mr(R,_),F;if(S===null){for(;_<k.length;_++)S=p(R,k[_],V),S!==null&&(I=o(S,I,_),U===null?F=S:U.sibling=S,U=S);return Ae&&Mr(R,_),F}for(S=r(R,S);_<k.length;_++)T=v(S,R,_,k[_],V),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?_:T.key),I=o(T,I,_),U===null?F=T:U.sibling=T,U=T);return t&&S.forEach(function(x){return e(R,x)}),Ae&&Mr(R,_),F}function P(R,I,k,V){var F=Oo(k);if(typeof F!="function")throw Error($(150));if(k=F.call(k),k==null)throw Error($(151));for(var U=F=null,S=I,_=I=0,T=null,C=k.next();S!==null&&!C.done;_++,C=k.next()){S.index>_?(T=S,S=null):T=S.sibling;var x=g(R,S,C.value,V);if(x===null){S===null&&(S=T);break}t&&S&&x.alternate===null&&e(R,S),I=o(x,I,_),U===null?F=x:U.sibling=x,U=x,S=T}if(C.done)return n(R,S),Ae&&Mr(R,_),F;if(S===null){for(;!C.done;_++,C=k.next())C=p(R,C.value,V),C!==null&&(I=o(C,I,_),U===null?F=C:U.sibling=C,U=C);return Ae&&Mr(R,_),F}for(S=r(R,S);!C.done;_++,C=k.next())C=v(S,R,_,C.value,V),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?_:C.key),I=o(C,I,_),U===null?F=C:U.sibling=C,U=C);return t&&S.forEach(function(N){return e(R,N)}),Ae&&Mr(R,_),F}function D(R,I,k,V){if(typeof k=="object"&&k!==null&&k.type===vi&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case kl:e:{for(var F=k.key,U=I;U!==null;){if(U.key===F){if(F=k.type,F===vi){if(U.tag===7){n(R,U.sibling),I=i(U,k.props.children),I.return=R,R=I;break e}}else if(U.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Jn&&qm(F)===U.type){n(R,U.sibling),I=i(U,k.props),I.ref=Ho(R,U,k),I.return=R,R=I;break e}n(R,U);break}else e(R,U);U=U.sibling}k.type===vi?(I=Br(k.props.children,R.mode,V,k.key),I.return=R,R=I):(V=aa(k.type,k.key,k.props,null,R.mode,V),V.ref=Ho(R,I,k),V.return=R,R=V)}return s(R);case yi:e:{for(U=k.key;I!==null;){if(I.key===U)if(I.tag===4&&I.stateNode.containerInfo===k.containerInfo&&I.stateNode.implementation===k.implementation){n(R,I.sibling),I=i(I,k.children||[]),I.return=R,R=I;break e}else{n(R,I);break}else e(R,I);I=I.sibling}I=Dc(k,R.mode,V),I.return=R,R=I}return s(R);case Jn:return U=k._init,D(R,I,U(k._payload),V)}if(Qo(k))return A(R,I,k,V);if(Oo(k))return P(R,I,k,V);Ol(R,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,I!==null&&I.tag===6?(n(R,I.sibling),I=i(I,k),I.return=R,R=I):(n(R,I),I=Nc(k,R.mode,V),I.return=R,R=I),s(R)):n(R,I)}return D}var Wi=oT(!0),sT=oT(!1),Va=wr(null),La=null,Ai=null,Hf=null;function zf(){Hf=Ai=La=null}function Wf(t){var e=Va.current;Se(Va),t._currentValue=e}function wd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vi(t,e){La=t,Hf=Ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Hf!==t)if(t={context:t,memoizedValue:e,next:null},Ai===null){if(La===null)throw Error($(308));Ai=t,La.dependencies={lanes:0,firstContext:t}}else Ai=Ai.next=t;return e}var Lr=null;function Kf(t){Lr===null?Lr=[t]:Lr.push(t)}function lT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Kf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Nn(t,r)}function Nn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yn=!1;function Jf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Nn(t,n)}return i=r.interleaved,i===null?(e.next=e,Kf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Nn(t,n)}function na(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Df(t,n)}}function Gm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ua(t,e,n,r){var i=t.updateQueue;Yn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var h=t.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==s&&(u===null?h.firstBaseUpdate=d:u.next=d,h.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;s=0,h=d=c=null,u=o;do{var g=u.lane,v=u.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,P=u;switch(g=e,v=n,P.tag){case 1:if(A=P.payload,typeof A=="function"){p=A.call(v,p,g);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=P.payload,g=typeof A=="function"?A.call(v,p,g):A,g==null)break e;p=Pe({},p,g);break e;case 2:Yn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[u]:g.push(u))}else v={eventTime:v,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(d=h=v,c=p):h=h.next=v,s|=g;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;g=u,u=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Wr|=s,t.lanes=s,t.memoizedState=p}}function Hm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Ys={},un=wr(Ys),ks=wr(Ys),xs=wr(Ys);function Ur(t){if(t===Ys)throw Error($(174));return t}function Yf(t,e){switch(Ee(xs,e),Ee(ks,t),Ee(un,Ys),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rd(e,t)}Se(un),Ee(un,e)}function Ki(){Se(un),Se(ks),Se(xs)}function uT(t){Ur(xs.current);var e=Ur(un.current),n=rd(e,t.type);e!==n&&(Ee(ks,t),Ee(un,n))}function Qf(t){ks.current===t&&(Se(un),Se(ks))}var ke=wr(0);function Fa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ac=[];function Xf(){for(var t=0;t<Ac.length;t++)Ac[t]._workInProgressVersionPrimary=null;Ac.length=0}var ra=bn.ReactCurrentDispatcher,Rc=bn.ReactCurrentBatchConfig,zr=0,xe=null,Ge=null,Je=null,ba=!1,ls=!1,Ps=0,gS=0;function lt(){throw Error($(321))}function Zf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function jf(t,e,n,r,i,o){if(zr=o,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ra.current=t===null||t.memoizedState===null?TS:ES,t=n(r,i),ls){o=0;do{if(ls=!1,Ps=0,25<=o)throw Error($(301));o+=1,Je=Ge=null,e.updateQueue=null,ra.current=CS,t=n(r,i)}while(ls)}if(ra.current=Oa,e=Ge!==null&&Ge.next!==null,zr=0,Je=Ge=xe=null,ba=!1,e)throw Error($(300));return t}function eh(){var t=Ps!==0;return Ps=0,t}function sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?xe.memoizedState=Je=t:Je=Je.next=t,Je}function Gt(){if(Ge===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Je===null?xe.memoizedState:Je.next;if(e!==null)Je=e,Ge=t;else{if(t===null)throw Error($(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Je===null?xe.memoizedState=Je=t:Je=Je.next=t}return Je}function Ms(t,e){return typeof e=="function"?e(t):e}function kc(t){var e=Gt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ge,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=s=null,c=null,d=o;do{var h=d.lane;if((zr&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=p,s=r):c=c.next=p,xe.lanes|=h,Wr|=h}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=u,nn(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,xe.lanes|=o,Wr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xc(t){var e=Gt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);nn(o,e.memoizedState)||(wt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function cT(){}function dT(t,e){var n=xe,r=Gt(),i=e(),o=!nn(r.memoizedState,i);if(o&&(r.memoizedState=i,wt=!0),r=r.queue,th(pT.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Ns(9,hT.bind(null,n,r,i,e),void 0,null),Ye===null)throw Error($(349));zr&30||fT(n,e,i)}return i}function fT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hT(t,e,n,r){e.value=n,e.getSnapshot=r,mT(e)&&gT(t)}function pT(t,e,n){return n(function(){mT(e)&&gT(t)})}function mT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function gT(t){var e=Nn(t,1);e!==null&&en(e,t,1,-1)}function zm(t){var e=sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},e.queue=t,t=t.dispatch=_S.bind(null,xe,t),[e.memoizedState,t]}function Ns(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yT(){return Gt().memoizedState}function ia(t,e,n,r){var i=sn();xe.flags|=t,i.memoizedState=Ns(1|e,n,void 0,r===void 0?null:r)}function vu(t,e,n,r){var i=Gt();r=r===void 0?null:r;var o=void 0;if(Ge!==null){var s=Ge.memoizedState;if(o=s.destroy,r!==null&&Zf(r,s.deps)){i.memoizedState=Ns(e,n,o,r);return}}xe.flags|=t,i.memoizedState=Ns(1|e,n,o,r)}function Wm(t,e){return ia(8390656,8,t,e)}function th(t,e){return vu(2048,8,t,e)}function vT(t,e){return vu(4,2,t,e)}function _T(t,e){return vu(4,4,t,e)}function TT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ET(t,e,n){return n=n!=null?n.concat([t]):null,vu(4,4,TT.bind(null,e,t),n)}function nh(){}function CT(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wT(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function IT(t,e,n){return zr&21?(nn(n,e)||(n=x_(),xe.lanes|=n,Wr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function yS(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Rc.transition;Rc.transition={};try{t(!1),e()}finally{ve=n,Rc.transition=r}}function ST(){return Gt().memoizedState}function vS(t,e,n){var r=dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AT(t))RT(e,n);else if(n=lT(t,e,n,r),n!==null){var i=vt();en(n,t,r,i),kT(n,e,r)}}function _S(t,e,n){var r=dr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AT(t))RT(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,u=o(s,n);if(i.hasEagerState=!0,i.eagerState=u,nn(u,s)){var c=e.interleaved;c===null?(i.next=i,Kf(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=lT(t,e,i,r),n!==null&&(i=vt(),en(n,t,r,i),kT(n,e,r))}}function AT(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function RT(t,e){ls=ba=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Df(t,n)}}var Oa={readContext:qt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},TS={readContext:qt,useCallback:function(t,e){return sn().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:Wm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ia(4194308,4,TT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return ia(4,2,t,e)},useMemo:function(t,e){var n=sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vS.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var e=sn();return t={current:t},e.memoizedState=t},useState:zm,useDebugValue:nh,useDeferredValue:function(t){return sn().memoizedState=t},useTransition:function(){var t=zm(!1),e=t[0];return t=yS.bind(null,t[1]),sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xe,i=sn();if(Ae){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ye===null)throw Error($(349));zr&30||fT(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Wm(pT.bind(null,r,o,t),[t]),r.flags|=2048,Ns(9,hT.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=sn(),e=Ye.identifierPrefix;if(Ae){var n=wn,r=Cn;n=(r&~(1<<32-jt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ps++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ES={readContext:qt,useCallback:CT,useContext:qt,useEffect:th,useImperativeHandle:ET,useInsertionEffect:vT,useLayoutEffect:_T,useMemo:wT,useReducer:kc,useRef:yT,useState:function(){return kc(Ms)},useDebugValue:nh,useDeferredValue:function(t){var e=Gt();return IT(e,Ge.memoizedState,t)},useTransition:function(){var t=kc(Ms)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:cT,useSyncExternalStore:dT,useId:ST,unstable_isNewReconciler:!1},CS={readContext:qt,useCallback:CT,useContext:qt,useEffect:th,useImperativeHandle:ET,useInsertionEffect:vT,useLayoutEffect:_T,useMemo:wT,useReducer:xc,useRef:yT,useState:function(){return xc(Ms)},useDebugValue:nh,useDeferredValue:function(t){var e=Gt();return Ge===null?e.memoizedState=t:IT(e,Ge.memoizedState,t)},useTransition:function(){var t=xc(Ms)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:cT,useSyncExternalStore:dT,useId:ST,unstable_isNewReconciler:!1};function Yt(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Id(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _u={isMounted:function(t){return(t=t._reactInternals)?ti(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),i=dr(t),o=kn(r,i);o.payload=e,n!=null&&(o.callback=n),e=ur(t,o,i),e!==null&&(en(e,t,i,r),na(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),i=dr(t),o=kn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ur(t,o,i),e!==null&&(en(e,t,i,r),na(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=dr(t),i=kn(n,r);i.tag=2,e!=null&&(i.callback=e),e=ur(t,i,r),e!==null&&(en(e,t,r,n),na(e,t,r))}};function Km(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Is(n,r)||!Is(i,o):!0}function xT(t,e,n){var r=!1,i=vr,o=e.contextType;return typeof o=="object"&&o!==null?o=qt(o):(i=St(e)?Gr:pt.current,r=e.contextTypes,o=(r=r!=null)?Hi(t,i):vr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_u,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Jm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_u.enqueueReplaceState(e,e.state,null)}function Sd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Jf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=qt(o):(o=St(e)?Gr:pt.current,i.context=Hi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Id(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_u.enqueueReplaceState(i,i.state,null),Ua(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ji(t,e){try{var n="",r=e;do n+=Qw(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Pc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ad(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wS=typeof WeakMap=="function"?WeakMap:Map;function PT(t,e,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$a||($a=!0,Ud=r),Ad(t,e)},n}function MT(t,e,n){n=kn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ad(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ad(t,e),typeof r!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Ym(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=FS.bind(null,t,e,n),e.then(t,t))}function Qm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kn(-1,1),e.tag=2,ur(n,e,1))),n.lanes|=1),t)}var IS=bn.ReactCurrentOwner,wt=!1;function yt(t,e,n,r){e.child=t===null?sT(e,null,n,r):Wi(e,t.child,n,r)}function Zm(t,e,n,r,i){n=n.render;var o=e.ref;return Vi(e,i),r=jf(t,e,n,r,o,i),n=eh(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dn(t,e,i)):(Ae&&n&&$f(e),e.flags|=1,yt(t,e,r,i),e.child)}function jm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!ch(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,NT(t,e,o,r,i)):(t=aa(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Is,n(s,r)&&t.ref===e.ref)return Dn(t,e,i)}return e.flags|=1,t=fr(o,r),t.ref=e.ref,t.return=e,e.child=t}function NT(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Is(o,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,Dn(t,e,i)}return Rd(t,e,n,r,i)}function DT(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(ki,kt),kt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(ki,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ee(ki,kt),kt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ee(ki,kt),kt|=r;return yt(t,e,i,n),e.child}function VT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rd(t,e,n,r,i){var o=St(n)?Gr:pt.current;return o=Hi(e,o),Vi(e,i),n=jf(t,e,n,r,o,i),r=eh(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dn(t,e,i)):(Ae&&r&&$f(e),e.flags|=1,yt(t,e,n,i),e.child)}function eg(t,e,n,r,i){if(St(n)){var o=!0;Ma(e)}else o=!1;if(Vi(e,i),e.stateNode===null)oa(t,e),xT(e,n,r),Sd(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=St(n)?Gr:pt.current,d=Hi(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Jm(e,s,r,d),Yn=!1;var g=e.memoizedState;s.state=g,Ua(e,r,s,i),c=e.memoizedState,u!==r||g!==c||It.current||Yn?(typeof h=="function"&&(Id(e,n,h,r),c=e.memoizedState),(u=Yn||Km(e,n,u,r,g,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,aT(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:Yt(e.type,u),s.props=d,p=e.pendingProps,g=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=qt(c):(c=St(n)?Gr:pt.current,c=Hi(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||g!==c)&&Jm(e,s,r,c),Yn=!1,g=e.memoizedState,s.state=g,Ua(e,r,s,i);var A=e.memoizedState;u!==p||g!==A||It.current||Yn?(typeof v=="function"&&(Id(e,n,v,r),A=e.memoizedState),(d=Yn||Km(e,n,d,r,g,A,c)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,A,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,A,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),s.props=r,s.state=A,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return kd(t,e,n,r,o,i)}function kd(t,e,n,r,i,o){VT(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Om(e,n,!1),Dn(t,e,o);r=e.stateNode,IS.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Wi(e,t.child,null,o),e.child=Wi(e,null,u,o)):yt(t,e,u,o),e.memoizedState=r.state,i&&Om(e,n,!0),e.child}function LT(t){var e=t.stateNode;e.pendingContext?bm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bm(t,e.context,!1),Yf(t,e.containerInfo)}function tg(t,e,n,r,i){return zi(),Gf(i),e.flags|=256,yt(t,e,n,r),e.child}var xd={dehydrated:null,treeContext:null,retryLane:0};function Pd(t){return{baseLanes:t,cachePool:null,transitions:null}}function UT(t,e,n){var r=e.pendingProps,i=ke.current,o=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(ke,i&1),t===null)return Cd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Cu(s,r,0,null),t=Br(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Pd(n),e.memoizedState=xd,t):rh(e,s));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return SS(t,e,s,r,u,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=fr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=fr(u,o):(o=Br(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Pd(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=xd,r}return o=t.child,t=o.sibling,r=fr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rh(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bl(t,e,n,r){return r!==null&&Gf(r),Wi(e,t.child,null,n),t=rh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SS(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Pc(Error($(422))),Bl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Cu({mode:"visible",children:r.children},i,0,null),o=Br(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Wi(e,t.child,null,s),e.child.memoizedState=Pd(s),e.memoizedState=xd,o);if(!(e.mode&1))return Bl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error($(419)),r=Pc(o,r,void 0),Bl(t,e,s,r)}if(u=(s&t.childLanes)!==0,wt||u){if(r=Ye,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Nn(t,i),en(r,t,i,-1))}return uh(),r=Pc(Error($(421))),Bl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bS.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,xt=ar(i.nextSibling),Pt=e,Ae=!0,Xt=null,t!==null&&(Lt[Ut++]=Cn,Lt[Ut++]=wn,Lt[Ut++]=Hr,Cn=t.id,wn=t.overflow,Hr=e),e=rh(e,r.children),e.flags|=4096,e)}function ng(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wd(t.return,e,n)}function Mc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function FT(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(yt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ng(t,n,e);else if(t.tag===19)ng(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mc(e,!0,n,null,o);break;case"together":Mc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AS(t,e,n){switch(e.tag){case 3:LT(e),zi();break;case 5:uT(e);break;case 1:St(e.type)&&Ma(e);break;case 4:Yf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ee(Va,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?UT(t,e,n):(Ee(ke,ke.current&1),t=Dn(t,e,n),t!==null?t.sibling:null);Ee(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,DT(t,e,n)}return Dn(t,e,n)}var bT,Md,OT,BT;bT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Md=function(){};OT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ur(un.current);var o=null;switch(n){case"input":i=jc(t,i),r=jc(t,r),o=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),o=[];break;case"textarea":i=nd(t,i),r=nd(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xa)}id(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ys.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ys.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&we("scroll",t),o||u===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};BT=function(t,e,n,r){n!==r&&(e.flags|=4)};function zo(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RS(t,e,n){var r=e.pendingProps;switch(qf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return St(e.type)&&Pa(),at(e),null;case 3:return r=e.stateNode,Ki(),Se(It),Se(pt),Xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(Od(Xt),Xt=null))),Md(t,e),at(e),null;case 5:Qf(e);var i=Ur(xs.current);if(n=e.type,t!==null&&e.stateNode!=null)OT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return at(e),null}if(t=Ur(un.current),bl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ln]=e,r[Rs]=o,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<Zo.length;i++)we(Zo[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":dm(r,o),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},we("invalid",r);break;case"textarea":hm(r,o),we("invalid",r)}id(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&Fl(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Fl(r.textContent,u,t),i=["children",""+u]):ys.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&we("scroll",r)}switch(n){case"input":xl(r),fm(r,o,!0);break;case"textarea":xl(r),pm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=xa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=p_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[ln]=e,t[Rs]=r,bT(t,e,!1,!1),e.stateNode=t;e:{switch(s=od(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zo.length;i++)we(Zo[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":dm(t,r),i=jc(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),we("invalid",t);break;case"textarea":hm(t,r),i=nd(t,r),we("invalid",t);break;default:i=r}id(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?y_(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&m_(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vs(t,c):typeof c=="number"&&vs(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ys.hasOwnProperty(o)?c!=null&&o==="onScroll"&&we("scroll",t):c!=null&&Rf(t,o,c,s))}switch(n){case"input":xl(t),fm(t,r,!1);break;case"textarea":xl(t),pm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Pi(t,!!r.multiple,o,!1):r.defaultValue!=null&&Pi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)BT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Ur(xs.current),Ur(un.current),bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[ln]=e,(o=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:Fl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=e,e.stateNode=r}return at(e),null;case 13:if(Se(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&xt!==null&&e.mode&1&&!(e.flags&128))iT(),zi(),e.flags|=98560,o=!1;else if(o=bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[ln]=e}else zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),o=!1}else Xt!==null&&(Od(Xt),Xt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?ze===0&&(ze=3):uh())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return Ki(),Md(t,e),t===null&&Ss(e.stateNode.containerInfo),at(e),null;case 10:return Wf(e.type._context),at(e),null;case 17:return St(e.type)&&Pa(),at(e),null;case 19:if(Se(ke),o=e.memoizedState,o===null)return at(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)zo(o,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Fa(t),s!==null){for(e.flags|=128,zo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(ke,ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&Fe()>Yi&&(e.flags|=128,r=!0,zo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Fa(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ae)return at(e),null}else 2*Fe()-o.renderingStartTime>Yi&&n!==1073741824&&(e.flags|=128,r=!0,zo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Fe(),e.sibling=null,n=ke.current,Ee(ke,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return ah(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function kS(t,e){switch(qf(e),e.tag){case 1:return St(e.type)&&Pa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ki(),Se(It),Se(pt),Xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qf(e),null;case 13:if(Se(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(ke),null;case 4:return Ki(),null;case 10:return Wf(e.type._context),null;case 22:case 23:return ah(),null;case 24:return null;default:return null}}var $l=!1,dt=!1,xS=typeof WeakSet=="function"?WeakSet:Set,z=null;function Ri(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Nd(t,e,n){try{n()}catch(r){De(t,e,r)}}var rg=!1;function PS(t,e){if(md=Aa,t=z_(),Bf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,h=0,p=t,g=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(u=s+i),p!==o||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)g=p,p=v;for(;;){if(p===t)break t;if(g===n&&++d===i&&(u=s),g===o&&++h===r&&(c=s),(v=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=v}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:t,selectionRange:n},Aa=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var P=A.memoizedProps,D=A.memoizedState,R=e.stateNode,I=R.getSnapshotBeforeUpdate(e.elementType===e.type?P:Yt(e.type,P),D);R.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(V){De(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return A=rg,rg=!1,A}function as(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Nd(e,n,o)}i=i.next}while(i!==r)}}function Tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $T(t){var e=t.alternate;e!==null&&(t.alternate=null,$T(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[Rs],delete e[_d],delete e[fS],delete e[hS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qT(t){return t.tag===5||t.tag===3||t.tag===4}function ig(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xa));else if(r!==4&&(t=t.child,t!==null))for(Vd(t,e,n),t=t.sibling;t!==null;)Vd(t,e,n),t=t.sibling}function Ld(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ld(t,e,n),t=t.sibling;t!==null;)Ld(t,e,n),t=t.sibling}var Ze=null,Qt=!1;function Wn(t,e,n){for(n=n.child;n!==null;)GT(t,e,n),n=n.sibling}function GT(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(fu,n)}catch{}switch(n.tag){case 5:dt||Ri(n,e);case 6:var r=Ze,i=Qt;Ze=null,Wn(t,e,n),Ze=r,Qt=i,Ze!==null&&(Qt?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(Qt?(t=Ze,n=n.stateNode,t.nodeType===8?Ic(t.parentNode,n):t.nodeType===1&&Ic(t,n),Cs(t)):Ic(Ze,n.stateNode));break;case 4:r=Ze,i=Qt,Ze=n.stateNode.containerInfo,Qt=!0,Wn(t,e,n),Ze=r,Qt=i;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Nd(n,e,s),i=i.next}while(i!==r)}Wn(t,e,n);break;case 1:if(!dt&&(Ri(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){De(n,e,u)}Wn(t,e,n);break;case 21:Wn(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,Wn(t,e,n),dt=r):Wn(t,e,n);break;default:Wn(t,e,n)}}function og(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xS),e.forEach(function(r){var i=OS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:Ze=u.stateNode,Qt=!1;break e;case 3:Ze=u.stateNode.containerInfo,Qt=!0;break e;case 4:Ze=u.stateNode.containerInfo,Qt=!0;break e}u=u.return}if(Ze===null)throw Error($(160));GT(o,s,i),Ze=null,Qt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){De(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HT(e,t),e=e.sibling}function HT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),on(t),r&4){try{as(3,t,t.return),Tu(3,t)}catch(P){De(t,t.return,P)}try{as(5,t,t.return)}catch(P){De(t,t.return,P)}}break;case 1:Jt(e,t),on(t),r&512&&n!==null&&Ri(n,n.return);break;case 5:if(Jt(e,t),on(t),r&512&&n!==null&&Ri(n,n.return),t.flags&32){var i=t.stateNode;try{vs(i,"")}catch(P){De(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&f_(i,o),od(u,s);var d=od(u,o);for(s=0;s<c.length;s+=2){var h=c[s],p=c[s+1];h==="style"?y_(i,p):h==="dangerouslySetInnerHTML"?m_(i,p):h==="children"?vs(i,p):Rf(i,h,p,d)}switch(u){case"input":ed(i,o);break;case"textarea":h_(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Pi(i,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?Pi(i,!!o.multiple,o.defaultValue,!0):Pi(i,!!o.multiple,o.multiple?[]:"",!1))}i[Rs]=o}catch(P){De(t,t.return,P)}}break;case 6:if(Jt(e,t),on(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(P){De(t,t.return,P)}}break;case 3:if(Jt(e,t),on(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cs(e.containerInfo)}catch(P){De(t,t.return,P)}break;case 4:Jt(e,t),on(t);break;case 13:Jt(e,t),on(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(sh=Fe())),r&4&&og(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||h,Jt(e,t),dt=d):Jt(e,t),on(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(z=t,h=t.child;h!==null;){for(p=z=h;z!==null;){switch(g=z,v=g.child,g.tag){case 0:case 11:case 14:case 15:as(4,g,g.return);break;case 1:Ri(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(P){De(r,n,P)}}break;case 5:Ri(g,g.return);break;case 22:if(g.memoizedState!==null){lg(p);continue}}v!==null?(v.return=g,z=v):lg(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=g_("display",s))}catch(P){De(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(P){De(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Jt(e,t),on(t),r&4&&og(t);break;case 21:break;default:Jt(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qT(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vs(i,""),r.flags&=-33);var o=ig(t);Ld(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=ig(t);Vd(t,u,s);break;default:throw Error($(161))}}catch(c){De(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MS(t,e,n){z=t,zT(t)}function zT(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||$l;if(!s){var u=i.alternate,c=u!==null&&u.memoizedState!==null||dt;u=$l;var d=dt;if($l=s,(dt=c)&&!d)for(z=i;z!==null;)s=z,c=s.child,s.tag===22&&s.memoizedState!==null?ag(i):c!==null?(c.return=s,z=c):ag(i);for(;o!==null;)z=o,zT(o),o=o.sibling;z=i,$l=u,dt=d}sg(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,z=o):sg(t)}}function sg(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Hm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hm(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Cs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}dt||e.flags&512&&Dd(e)}catch(g){De(e,e.return,g)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function lg(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function ag(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Tu(4,e)}catch(c){De(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){De(e,i,c)}}var o=e.return;try{Dd(e)}catch(c){De(e,o,c)}break;case 5:var s=e.return;try{Dd(e)}catch(c){De(e,s,c)}}}catch(c){De(e,e.return,c)}if(e===t){z=null;break}var u=e.sibling;if(u!==null){u.return=e.return,z=u;break}z=e.return}}var NS=Math.ceil,Ba=bn.ReactCurrentDispatcher,ih=bn.ReactCurrentOwner,Ot=bn.ReactCurrentBatchConfig,ce=0,Ye=null,Be=null,tt=0,kt=0,ki=wr(0),ze=0,Ds=null,Wr=0,Eu=0,oh=0,us=null,Ct=null,sh=0,Yi=1/0,_n=null,$a=!1,Ud=null,cr=null,ql=!1,nr=null,qa=0,cs=0,Fd=null,sa=-1,la=0;function vt(){return ce&6?Fe():sa!==-1?sa:sa=Fe()}function dr(t){return t.mode&1?ce&2&&tt!==0?tt&-tt:mS.transition!==null?(la===0&&(la=x_()),la):(t=ve,t!==0||(t=window.event,t=t===void 0?16:U_(t.type)),t):1}function en(t,e,n,r){if(50<cs)throw cs=0,Fd=null,Error($(185));Ws(t,n,r),(!(ce&2)||t!==Ye)&&(t===Ye&&(!(ce&2)&&(Eu|=n),ze===4&&Xn(t,tt)),At(t,r),n===1&&ce===0&&!(e.mode&1)&&(Yi=Fe()+500,yu&&Ir()))}function At(t,e){var n=t.callbackNode;mI(t,e);var r=Sa(t,t===Ye?tt:0);if(r===0)n!==null&&ym(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ym(n),e===1)t.tag===0?pS(ug.bind(null,t)):tT(ug.bind(null,t)),cS(function(){!(ce&6)&&Ir()}),n=null;else{switch(P_(r)){case 1:n=Nf;break;case 4:n=R_;break;case 16:n=Ia;break;case 536870912:n=k_;break;default:n=Ia}n=jT(n,WT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function WT(t,e){if(sa=-1,la=0,ce&6)throw Error($(327));var n=t.callbackNode;if(Li()&&t.callbackNode!==n)return null;var r=Sa(t,t===Ye?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ga(t,r);else{e=r;var i=ce;ce|=2;var o=JT();(Ye!==t||tt!==e)&&(_n=null,Yi=Fe()+500,Or(t,e));do try{LS();break}catch(u){KT(t,u)}while(!0);zf(),Ba.current=o,ce=i,Be!==null?e=0:(Ye=null,tt=0,e=ze)}if(e!==0){if(e===2&&(i=cd(t),i!==0&&(r=i,e=bd(t,i))),e===1)throw n=Ds,Or(t,0),Xn(t,r),At(t,Fe()),n;if(e===6)Xn(t,r);else{if(i=t.current.alternate,!(r&30)&&!DS(i)&&(e=Ga(t,r),e===2&&(o=cd(t),o!==0&&(r=o,e=bd(t,o))),e===1))throw n=Ds,Or(t,0),Xn(t,r),At(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Nr(t,Ct,_n);break;case 3:if(Xn(t,r),(r&130023424)===r&&(e=sh+500-Fe(),10<e)){if(Sa(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vd(Nr.bind(null,t,Ct,_n),e);break}Nr(t,Ct,_n);break;case 4:if(Xn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-jt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*NS(r/1960))-r,10<r){t.timeoutHandle=vd(Nr.bind(null,t,Ct,_n),r);break}Nr(t,Ct,_n);break;case 5:Nr(t,Ct,_n);break;default:throw Error($(329))}}}return At(t,Fe()),t.callbackNode===n?WT.bind(null,t):null}function bd(t,e){var n=us;return t.current.memoizedState.isDehydrated&&(Or(t,e).flags|=256),t=Ga(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&Od(e)),t}function Od(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function DS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!nn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xn(t,e){for(e&=~oh,e&=~Eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jt(e),r=1<<n;t[n]=-1,e&=~r}}function ug(t){if(ce&6)throw Error($(327));Li();var e=Sa(t,0);if(!(e&1))return At(t,Fe()),null;var n=Ga(t,e);if(t.tag!==0&&n===2){var r=cd(t);r!==0&&(e=r,n=bd(t,r))}if(n===1)throw n=Ds,Or(t,0),Xn(t,e),At(t,Fe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nr(t,Ct,_n),At(t,Fe()),null}function lh(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Yi=Fe()+500,yu&&Ir())}}function Kr(t){nr!==null&&nr.tag===0&&!(ce&6)&&Li();var e=ce;ce|=1;var n=Ot.transition,r=ve;try{if(Ot.transition=null,ve=1,t)return t()}finally{ve=r,Ot.transition=n,ce=e,!(ce&6)&&Ir()}}function ah(){kt=ki.current,Se(ki)}function Or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uS(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(qf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pa();break;case 3:Ki(),Se(It),Se(pt),Xf();break;case 5:Qf(r);break;case 4:Ki();break;case 13:Se(ke);break;case 19:Se(ke);break;case 10:Wf(r.type._context);break;case 22:case 23:ah()}n=n.return}if(Ye=t,Be=t=fr(t.current,null),tt=kt=e,ze=0,Ds=null,oh=Eu=Wr=0,Ct=us=null,Lr!==null){for(e=0;e<Lr.length;e++)if(n=Lr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Lr=null}return t}function KT(t,e){do{var n=Be;try{if(zf(),ra.current=Oa,ba){for(var r=xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ba=!1}if(zr=0,Je=Ge=xe=null,ls=!1,Ps=0,ih.current=null,n===null||n.return===null){ze=1,Ds=e,Be=null;break}e:{var o=t,s=n.return,u=n,c=e;if(e=tt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=u,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Qm(s);if(v!==null){v.flags&=-257,Xm(v,s,u,o,e),v.mode&1&&Ym(o,d,e),e=v,c=d;var A=e.updateQueue;if(A===null){var P=new Set;P.add(c),e.updateQueue=P}else A.add(c);break e}else{if(!(e&1)){Ym(o,d,e),uh();break e}c=Error($(426))}}else if(Ae&&u.mode&1){var D=Qm(s);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Xm(D,s,u,o,e),Gf(Ji(c,u));break e}}o=c=Ji(c,u),ze!==4&&(ze=2),us===null?us=[o]:us.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=PT(o,c,e);Gm(o,R);break e;case 1:u=c;var I=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(cr===null||!cr.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var V=MT(o,u,e);Gm(o,V);break e}}o=o.return}while(o!==null)}QT(n)}catch(F){e=F,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function JT(){var t=Ba.current;return Ba.current=Oa,t===null?Oa:t}function uh(){(ze===0||ze===3||ze===2)&&(ze=4),Ye===null||!(Wr&268435455)&&!(Eu&268435455)||Xn(Ye,tt)}function Ga(t,e){var n=ce;ce|=2;var r=JT();(Ye!==t||tt!==e)&&(_n=null,Or(t,e));do try{VS();break}catch(i){KT(t,i)}while(!0);if(zf(),ce=n,Ba.current=r,Be!==null)throw Error($(261));return Ye=null,tt=0,ze}function VS(){for(;Be!==null;)YT(Be)}function LS(){for(;Be!==null&&!sI();)YT(Be)}function YT(t){var e=ZT(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?QT(t):Be=e,ih.current=null}function QT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kS(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Be=null;return}}else if(n=RS(n,e,kt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);ze===0&&(ze=5)}function Nr(t,e,n){var r=ve,i=Ot.transition;try{Ot.transition=null,ve=1,US(t,e,n,r)}finally{Ot.transition=i,ve=r}return null}function US(t,e,n,r){do Li();while(nr!==null);if(ce&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(gI(t,o),t===Ye&&(Be=Ye=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ql||(ql=!0,jT(Ia,function(){return Li(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ot.transition,Ot.transition=null;var s=ve;ve=1;var u=ce;ce|=4,ih.current=null,PS(t,n),HT(n,t),nS(gd),Aa=!!md,gd=md=null,t.current=n,MS(n),lI(),ce=u,ve=s,Ot.transition=o}else t.current=n;if(ql&&(ql=!1,nr=t,qa=i),o=t.pendingLanes,o===0&&(cr=null),cI(n.stateNode),At(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($a)throw $a=!1,t=Ud,Ud=null,t;return qa&1&&t.tag!==0&&Li(),o=t.pendingLanes,o&1?t===Fd?cs++:(cs=0,Fd=t):cs=0,Ir(),null}function Li(){if(nr!==null){var t=P_(qa),e=Ot.transition,n=ve;try{if(Ot.transition=null,ve=16>t?16:t,nr===null)var r=!1;else{if(t=nr,nr=null,qa=0,ce&6)throw Error($(331));var i=ce;for(ce|=4,z=t.current;z!==null;){var o=z,s=o.child;if(z.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(z=d;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:as(8,h,o)}var p=h.child;if(p!==null)p.return=h,z=p;else for(;z!==null;){h=z;var g=h.sibling,v=h.return;if($T(h),h===d){z=null;break}if(g!==null){g.return=v,z=g;break}z=v}}}var A=o.alternate;if(A!==null){var P=A.child;if(P!==null){A.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}z=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,z=s;else e:for(;z!==null;){if(o=z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:as(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,z=R;break e}z=o.return}}var I=t.current;for(z=I;z!==null;){s=z;var k=s.child;if(s.subtreeFlags&2064&&k!==null)k.return=s,z=k;else e:for(s=I;z!==null;){if(u=z,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Tu(9,u)}}catch(F){De(u,u.return,F)}if(u===s){z=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,z=V;break e}z=u.return}}if(ce=i,Ir(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(fu,t)}catch{}r=!0}return r}finally{ve=n,Ot.transition=e}}return!1}function cg(t,e,n){e=Ji(n,e),e=PT(t,e,1),t=ur(t,e,1),e=vt(),t!==null&&(Ws(t,1,e),At(t,e))}function De(t,e,n){if(t.tag===3)cg(t,t,n);else for(;e!==null;){if(e.tag===3){cg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cr===null||!cr.has(r))){t=Ji(n,t),t=MT(e,t,1),e=ur(e,t,1),t=vt(),e!==null&&(Ws(e,1,t),At(e,t));break}}e=e.return}}function FS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(tt&n)===n&&(ze===4||ze===3&&(tt&130023424)===tt&&500>Fe()-sh?Or(t,0):oh|=n),At(t,e)}function XT(t,e){e===0&&(t.mode&1?(e=Nl,Nl<<=1,!(Nl&130023424)&&(Nl=4194304)):e=1);var n=vt();t=Nn(t,e),t!==null&&(Ws(t,e,n),At(t,n))}function bS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),XT(t,n)}function OS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),XT(t,n)}var ZT;ZT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,AS(t,e,n);wt=!!(t.flags&131072)}else wt=!1,Ae&&e.flags&1048576&&nT(e,Da,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oa(t,e),t=e.pendingProps;var i=Hi(e,pt.current);Vi(e,n),i=jf(null,e,r,t,i,n);var o=eh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,St(r)?(o=!0,Ma(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Jf(e),i.updater=_u,e.stateNode=i,i._reactInternals=e,Sd(e,r,t,n),e=kd(null,e,r,!0,o,n)):(e.tag=0,Ae&&o&&$f(e),yt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oa(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$S(r),t=Yt(r,t),i){case 0:e=Rd(null,e,r,t,n);break e;case 1:e=eg(null,e,r,t,n);break e;case 11:e=Zm(null,e,r,t,n);break e;case 14:e=jm(null,e,r,Yt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),Rd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),eg(t,e,r,i,n);case 3:e:{if(LT(e),t===null)throw Error($(387));r=e.pendingProps,o=e.memoizedState,i=o.element,aT(t,e),Ua(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ji(Error($(423)),e),e=tg(t,e,r,n,i);break e}else if(r!==i){i=Ji(Error($(424)),e),e=tg(t,e,r,n,i);break e}else for(xt=ar(e.stateNode.containerInfo.firstChild),Pt=e,Ae=!0,Xt=null,n=sT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zi(),r===i){e=Dn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return uT(e),t===null&&Cd(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,yd(r,i)?s=null:o!==null&&yd(r,o)&&(e.flags|=32),VT(t,e),yt(t,e,s,n),e.child;case 6:return t===null&&Cd(e),null;case 13:return UT(t,e,n);case 4:return Yf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wi(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),Zm(t,e,r,i,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ee(Va,r._currentValue),r._currentValue=s,o!==null)if(nn(o.value,s)){if(o.children===i.children&&!It.current){e=Dn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=kn(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),wd(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error($(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),wd(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}yt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Vi(e,n),i=qt(i),r=r(i),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,i=Yt(r,e.pendingProps),i=Yt(r.type,i),jm(t,e,r,i,n);case 15:return NT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yt(r,i),oa(t,e),e.tag=1,St(r)?(t=!0,Ma(e)):t=!1,Vi(e,n),xT(e,r,i),Sd(e,r,i,n),kd(null,e,r,!0,t,n);case 19:return FT(t,e,n);case 22:return DT(t,e,n)}throw Error($(156,e.tag))};function jT(t,e){return A_(t,e)}function BS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,n,r){return new BS(t,e,n,r)}function ch(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $S(t){if(typeof t=="function")return ch(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xf)return 11;if(t===Pf)return 14}return 2}function fr(t,e){var n=t.alternate;return n===null?(n=bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function aa(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")ch(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case vi:return Br(n.children,i,o,e);case kf:s=8,i|=8;break;case Yc:return t=bt(12,n,e,i|2),t.elementType=Yc,t.lanes=o,t;case Qc:return t=bt(13,n,e,i),t.elementType=Qc,t.lanes=o,t;case Xc:return t=bt(19,n,e,i),t.elementType=Xc,t.lanes=o,t;case u_:return Cu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l_:s=10;break e;case a_:s=9;break e;case xf:s=11;break e;case Pf:s=14;break e;case Jn:s=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=bt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Br(t,e,n,r){return t=bt(7,t,r,e),t.lanes=n,t}function Cu(t,e,n,r){return t=bt(22,t,r,e),t.elementType=u_,t.lanes=n,t.stateNode={isHidden:!1},t}function Nc(t,e,n){return t=bt(6,t,null,e),t.lanes=n,t}function Dc(t,e,n){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hc(0),this.expirationTimes=hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dh(t,e,n,r,i,o,s,u,c){return t=new qS(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=bt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jf(o),t}function GS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function e0(t){if(!t)return vr;t=t._reactInternals;e:{if(ti(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(St(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(St(n))return eT(t,n,e)}return e}function t0(t,e,n,r,i,o,s,u,c){return t=dh(n,r,!0,t,i,o,s,u,c),t.context=e0(null),n=t.current,r=vt(),i=dr(n),o=kn(r,i),o.callback=e??null,ur(n,o,i),t.current.lanes=i,Ws(t,i,r),At(t,r),t}function wu(t,e,n,r){var i=e.current,o=vt(),s=dr(i);return n=e0(n),e.context===null?e.context=n:e.pendingContext=n,e=kn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ur(i,e,s),t!==null&&(en(t,i,s,o),na(t,i,s)),s}function Ha(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fh(t,e){dg(t,e),(t=t.alternate)&&dg(t,e)}function HS(){return null}var n0=typeof reportError=="function"?reportError:function(t){console.error(t)};function hh(t){this._internalRoot=t}Iu.prototype.render=hh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));wu(t,e,null,null)};Iu.prototype.unmount=hh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kr(function(){wu(null,t,null,null)}),e[Mn]=null}};function Iu(t){this._internalRoot=t}Iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=D_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&L_(t)}};function ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fg(){}function zS(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Ha(s);o.call(d)}}var s=t0(e,r,t,0,null,!1,!1,"",fg);return t._reactRootContainer=s,t[Mn]=s.current,Ss(t.nodeType===8?t.parentNode:t),Kr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=Ha(c);u.call(d)}}var c=dh(t,0,!1,null,null,!1,!1,"",fg);return t._reactRootContainer=c,t[Mn]=c.current,Ss(t.nodeType===8?t.parentNode:t),Kr(function(){wu(e,c,n,r)}),c}function Au(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var u=i;i=function(){var c=Ha(s);u.call(c)}}wu(e,s,t,i)}else s=zS(n,e,t,i,r);return Ha(s)}M_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xo(e.pendingLanes);n!==0&&(Df(e,n|1),At(e,Fe()),!(ce&6)&&(Yi=Fe()+500,Ir()))}break;case 13:Kr(function(){var r=Nn(t,1);if(r!==null){var i=vt();en(r,t,1,i)}}),fh(t,1)}};Vf=function(t){if(t.tag===13){var e=Nn(t,134217728);if(e!==null){var n=vt();en(e,t,134217728,n)}fh(t,134217728)}};N_=function(t){if(t.tag===13){var e=dr(t),n=Nn(t,e);if(n!==null){var r=vt();en(n,t,e,r)}fh(t,e)}};D_=function(){return ve};V_=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};ld=function(t,e,n){switch(e){case"input":if(ed(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gu(r);if(!i)throw Error($(90));d_(r),ed(r,i)}}}break;case"textarea":h_(t,n);break;case"select":e=n.value,e!=null&&Pi(t,!!n.multiple,e,!1)}};T_=lh;E_=Kr;var WS={usingClientEntryPoint:!1,Events:[Js,Ci,gu,v_,__,lh]},Wo={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KS={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I_(t),t===null?null:t.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||HS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{fu=Gl.inject(KS),an=Gl}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WS;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ph(e))throw Error($(200));return GS(t,e,null,n)};Nt.createRoot=function(t,e){if(!ph(t))throw Error($(299));var n=!1,r="",i=n0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dh(t,1,!1,null,null,n,!1,r,i),t[Mn]=e.current,Ss(t.nodeType===8?t.parentNode:t),new hh(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=I_(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Kr(t)};Nt.hydrate=function(t,e,n){if(!Su(e))throw Error($(200));return Au(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!ph(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=n0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=t0(e,null,t,1,n??null,i,!1,o,s),t[Mn]=e.current,Ss(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Iu(e)};Nt.render=function(t,e,n){if(!Su(e))throw Error($(200));return Au(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!Su(t))throw Error($(40));return t._reactRootContainer?(Kr(function(){Au(null,null,t,!1,function(){t._reactRootContainer=null,t[Mn]=null})}),!0):!1};Nt.unstable_batchedUpdates=lh;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Su(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Au(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function r0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r0)}catch(t){console.error(t)}}r0(),r_.exports=Nt;var JS=r_.exports,hg=JS;Kc.createRoot=hg.createRoot,Kc.hydrateRoot=hg.hydrateRoot;const Vs=["","","","","","",""],ua=["bg-sky-500","bg-emerald-500","bg-indigo-500","bg-pink-500","bg-rose-500","bg-amber-500","bg-teal-500","bg-purple-500","bg-gradient-to-br from-purple-500 to-indigo-600","bg-gradient-to-br from-green-400 to-blue-500","bg-gradient-to-br from-pink-500 to-rose-500","bg-gradient-to-br from-yellow-400 to-orange-500","bg-gradient-to-br from-teal-400 to-cyan-600","bg-gradient-to-br from-red-500 to-pink-600","bg-gradient-to-br from-sky-400 to-blue-600","bg-gradient-to-br from-lime-400 to-green-600"],YS=["gemini-2.5-flash","gemini-2.5-flash-lite"],QS="gemini-2.5-flash";var pg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},XS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],u=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},o0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,u=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|u>>4;let g=(u&15)<<2|d>>6,v=d&63;c||(v=64,s||(g=64)),r.push(n[h],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||d==null||p==null)throw new ZS;const g=o<<2|u>>4;if(r.push(g),d!==64){const v=u<<4&240|d>>2;if(r.push(v),p!==64){const A=d<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jS=function(t){const e=i0(t);return o0.encodeByteArray(e,!0)},za=function(t){return jS(t).replace(/\./g,"")},s0=function(t){try{return o0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=()=>eA().__FIREBASE_DEFAULTS__,nA=()=>{if(typeof process>"u"||typeof pg>"u")return;const t=pg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&s0(t[1]);return e&&JSON.parse(e)},Ru=()=>{try{return tA()||nA()||rA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l0=t=>{var e,n;return(n=(e=Ru())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},iA=t=>{const e=l0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},a0=()=>{var t;return(t=Ru())===null||t===void 0?void 0:t.config},u0=t=>{var e;return(e=Ru())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[za(JSON.stringify(n)),za(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function aA(){var t;const e=(t=Ru())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fA(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hA(){return!aA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pA(){try{return typeof indexedDB=="object"}catch{return!1}}function mA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="FirebaseError";class rn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gA,Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?yA(o,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new rn(i,u,r)}}function yA(t,e){return t.replace(vA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vA=/\{\$([^}]+)}/g;function _A(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(mg(o)&&mg(s)){if(!Wa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function TA(t,e){const n=new EA(t,e);return n.subscribe.bind(n)}class EA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vc),i.error===void 0&&(i.error=Vc),i.complete===void 0&&(i.complete=Vc);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class Jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SA(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IA(t){return t===Dr?void 0:t}function SA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const RA={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},kA=ae.INFO,xA={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},PA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=xA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mh{constructor(e){this.name=e,this._logLevel=kA,this._logHandler=PA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const MA=(t,e)=>e.some(n=>t instanceof n);let gg,yg;function NA(){return gg||(gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DA(){return yg||(yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c0=new WeakMap,Bd=new WeakMap,d0=new WeakMap,Lc=new WeakMap,gh=new WeakMap;function VA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(hr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&c0.set(n,t)}).catch(()=>{}),gh.set(e,t),e}function LA(t){if(Bd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Bd.set(t,e)}let $d={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||d0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UA(t){$d=t($d)}function FA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Uc(this),e,...n);return d0.set(r,e.sort?e.sort():[e]),hr(r)}:DA().includes(t)?function(...e){return t.apply(Uc(this),e),hr(c0.get(this))}:function(...e){return hr(t.apply(Uc(this),e))}}function bA(t){return typeof t=="function"?FA(t):(t instanceof IDBTransaction&&LA(t),MA(t,NA())?new Proxy(t,$d):t)}function hr(t){if(t instanceof IDBRequest)return VA(t);if(Lc.has(t))return Lc.get(t);const e=bA(t);return e!==t&&(Lc.set(t,e),gh.set(e,t)),e}const Uc=t=>gh.get(t);function OA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),u=hr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(hr(s.result),c.oldVersion,c.newVersion,hr(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const BA=["get","getKey","getAll","getAllKeys","count"],$A=["put","add","delete","clear"],Fc=new Map;function vg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fc.get(e))return Fc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$A.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BA.includes(n)))return;const o=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),i&&c.done]))[0]};return Fc.set(e,o),o}UA(t=>({...t,get:(e,n,r)=>vg(e,n)||t.get(e,n,r),has:(e,n)=>!!vg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qd="@firebase/app",_g="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new mh("@firebase/app"),HA="@firebase/app-compat",zA="@firebase/analytics-compat",WA="@firebase/analytics",KA="@firebase/app-check-compat",JA="@firebase/app-check",YA="@firebase/auth",QA="@firebase/auth-compat",XA="@firebase/database",ZA="@firebase/data-connect",jA="@firebase/database-compat",eR="@firebase/functions",tR="@firebase/functions-compat",nR="@firebase/installations",rR="@firebase/installations-compat",iR="@firebase/messaging",oR="@firebase/messaging-compat",sR="@firebase/performance",lR="@firebase/performance-compat",aR="@firebase/remote-config",uR="@firebase/remote-config-compat",cR="@firebase/storage",dR="@firebase/storage-compat",fR="@firebase/firestore",hR="@firebase/vertexai-preview",pR="@firebase/firestore-compat",mR="firebase",gR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="[DEFAULT]",yR={[qd]:"fire-core",[HA]:"fire-core-compat",[WA]:"fire-analytics",[zA]:"fire-analytics-compat",[JA]:"fire-app-check",[KA]:"fire-app-check-compat",[YA]:"fire-auth",[QA]:"fire-auth-compat",[XA]:"fire-rtdb",[ZA]:"fire-data-connect",[jA]:"fire-rtdb-compat",[eR]:"fire-fn",[tR]:"fire-fn-compat",[nR]:"fire-iid",[rR]:"fire-iid-compat",[iR]:"fire-fcm",[oR]:"fire-fcm-compat",[sR]:"fire-perf",[lR]:"fire-perf-compat",[aR]:"fire-rc",[uR]:"fire-rc-compat",[cR]:"fire-gcs",[dR]:"fire-gcs-compat",[fR]:"fire-fst",[pR]:"fire-fst-compat",[hR]:"fire-vertex","fire-js":"fire-js",[mR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Map,vR=new Map,Hd=new Map;function Tg(t,e){try{t.container.addComponent(e)}catch(n){Vn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qi(t){const e=t.name;if(Hd.has(e))return Vn.debug(`There were multiple attempts to register component ${e}.`),!1;Hd.set(e,t);for(const n of Ka.values())Tg(n,t);for(const n of vR.values())Tg(n,t);return!0}function yh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new Qs("app","Firebase",_R);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=gR;function f0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pr.create("bad-app-name",{appName:String(i)});if(n||(n=a0()),!n)throw pr.create("no-options");const o=Ka.get(i);if(o){if(Wa(n,o.options)&&Wa(r,o.config))return o;throw pr.create("duplicate-app",{appName:i})}const s=new AA(i);for(const c of Hd.values())s.addComponent(c);const u=new TR(n,r,s);return Ka.set(i,u),u}function h0(t=Gd){const e=Ka.get(t);if(!e&&t===Gd&&a0())return f0();if(!e)throw pr.create("no-app",{appName:t});return e}function mr(t,e,n){var r;let i=(r=yR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&u.push("and"),s&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vn.warn(u.join(" "));return}Qi(new Jr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="firebase-heartbeat-database",CR=1,Ls="firebase-heartbeat-store";let bc=null;function p0(){return bc||(bc=OA(ER,CR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ls)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),bc}async function wR(t){try{const n=(await p0()).transaction(Ls),r=await n.objectStore(Ls).get(m0(t));return await n.done,r}catch(e){if(e instanceof rn)Vn.warn(e.message);else{const n=pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vn.warn(n.message)}}}async function Eg(t,e){try{const r=(await p0()).transaction(Ls,"readwrite");await r.objectStore(Ls).put(e,m0(t)),await r.done}catch(n){if(n instanceof rn)Vn.warn(n.message);else{const r=pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vn.warn(r.message)}}}function m0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1024,SR=30*24*60*60*1e3;class AR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Cg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const u=new Date(s.date).valueOf();return Date.now()-u<=SR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cg(),{heartbeatsToSend:r,unsentEntries:i}=RR(this._heartbeatsCache.heartbeats),o=za(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vn.warn(n),""}}}function Cg(){return new Date().toISOString().substring(0,10)}function RR(t,e=IR){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),wg(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pA()?mA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wg(t){return za(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){Qi(new Jr("platform-logger",e=>new qA(e),"PRIVATE")),Qi(new Jr("heartbeat",e=>new AR(e),"PRIVATE")),mr(qd,_g,t),mr(qd,_g,"esm2017"),mr("fire-js","")}xR("");var PR="firebase",MR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(PR,MR,"app");function vh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function g0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NR=g0,y0=new Qs("auth","Firebase",g0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new mh("@firebase/auth");function DR(t,...e){Ja.logLevel<=ae.WARN&&Ja.warn(`Auth (${ao}): ${t}`,...e)}function ca(t,...e){Ja.logLevel<=ae.ERROR&&Ja.error(`Auth (${ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,...e){throw Th(t,...e)}function tn(t,...e){return Th(t,...e)}function _h(t,e,n){const r=Object.assign(Object.assign({},NR()),{[e]:n});return new Qs("auth","Firebase",r).create(e,{appName:t.name})}function $r(t){return _h(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&hn(t,"argument-error"),_h(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Th(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return y0.create(t,...e)}function j(t,e,...n){if(!t)throw Th(e,...n)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ca(e),new Error(e)}function Ln(t,e){t||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LR(){return Ig()==="http:"||Ig()==="https:"}function Ig(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LR()||cA()||"connection"in navigator)?navigator.onLine:!0}function FR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ln(n>e,"Short delay should be less than long delay!"),this.isMobile=lA()||dA()}get(){return UR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t,e){Ln(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new Zs(3e4,6e4);function Ch(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function uo(t,e,n,r,i={}){return _0(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const u=Xs(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},o);return uA()||(d.referrerPolicy="no-referrer"),v0.fetch()(T0(t,t.config.apiHost,n,u),d)})}async function _0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},bR),e);try{const i=new $R(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Hl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Hl(t,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _h(t,h,d);hn(t,h)}}catch(i){if(i instanceof rn)throw i;hn(t,"network-request-failed",{message:String(i)})}}async function BR(t,e,n,r,i={}){const o=await uo(t,e,n,r,i);return"mfaPendingCredential"in o&&hn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function T0(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Eh(t.config,i):`${t.config.apiScheme}://${i}`}class $R{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tn(this.auth,"network-request-failed")),OR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=tn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e){return uo(t,"POST","/v1/accounts:delete",e)}async function E0(t,e){return uo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GR(t,e=!1){const n=Ht(t),r=await n.getIdToken(e),i=wh(r);j(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ds(Oc(i.auth_time)),issuedAtTime:ds(Oc(i.iat)),expirationTime:ds(Oc(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Oc(t){return Number(t)*1e3}function wh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ca("JWT malformed, contained fewer than 3 sections"),null;try{const i=s0(n);return i?JSON.parse(i):(ca("Failed to decode base64 JWT payload"),null)}catch(i){return ca("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Sg(t){const e=wh(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof rn&&HR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ds(this.lastLoginAt),this.creationTime=ds(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Us(t,E0(n,{idToken:r}));j(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?C0(o.providerUserInfo):[],u=KR(t.providerData,s),c=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),h=c?d:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function WR(t){const e=Ht(t);await Ya(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function C0(t){return t.map(e=>{var{providerId:n}=e,r=vh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(t,e){const n=await _0(t,{},async()=>{const r=Xs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=T0(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",v0.fetch()(s,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YR(t,e){return uo(t,"POST","/v2/accounts:revokeToken",Ch(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){j(e.length!==0,"internal-error");const n=Sg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await JR(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Ui;return r&&(j(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(j(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(j(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ui,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class An{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=vh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Us(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GR(this,e)}reload(){return WR(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new An(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ya(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await Us(this,qR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,u,c,d,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,A=(s=n.photoURL)!==null&&s!==void 0?s:void 0,P=(u=n.tenantId)!==null&&u!==void 0?u:void 0,D=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,R=(d=n.createdAt)!==null&&d!==void 0?d:void 0,I=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:k,emailVerified:V,isAnonymous:F,providerData:U,stsTokenManager:S}=n;j(k&&S,e,"internal-error");const _=Ui.fromJSON(this.name,S);j(typeof k=="string",e,"internal-error"),Kn(p,e.name),Kn(g,e.name),j(typeof V=="boolean",e,"internal-error"),j(typeof F=="boolean",e,"internal-error"),Kn(v,e.name),Kn(A,e.name),Kn(P,e.name),Kn(D,e.name),Kn(R,e.name),Kn(I,e.name);const T=new An({uid:k,auth:e,email:g,emailVerified:V,displayName:p,isAnonymous:F,photoURL:A,phoneNumber:v,tenantId:P,stsTokenManager:_,createdAt:R,lastLoginAt:I});return U&&Array.isArray(U)&&(T.providerData=U.map(C=>Object.assign({},C))),D&&(T._redirectEventId=D),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ui;i.updateFromServerResponse(n);const o=new An({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ya(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];j(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?C0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Ui;u.updateFromIdToken(r);const c=new An({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Wd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=new Map;function Rn(t){Ln(t instanceof Function,"Expected a class definition");let e=Ag.get(t);return e?(Ln(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ag.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}w0.type="NONE";const Rg=w0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(t,e,n){return`firebase:${t}:${e}:${n}`}class Fi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=da(this.userKey,i.apiKey,o),this.fullPersistenceKey=da("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?An._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fi(Rn(Rg),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||Rn(Rg);const s=da(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const h=await d._get(s);if(h){const p=An._fromJSON(e,h);d!==o&&(u=p),o=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Fi(o,e,r):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(s)}catch{}})),new Fi(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x0(e))return"Blackberry";if(P0(e))return"Webos";if(S0(e))return"Safari";if((e.includes("chrome/")||A0(e))&&!e.includes("edge/"))return"Chrome";if(k0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function I0(t=mt()){return/firefox\//i.test(t)}function S0(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A0(t=mt()){return/crios\//i.test(t)}function R0(t=mt()){return/iemobile/i.test(t)}function k0(t=mt()){return/android/i.test(t)}function x0(t=mt()){return/blackberry/i.test(t)}function P0(t=mt()){return/webos/i.test(t)}function Ih(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function QR(t=mt()){var e;return Ih(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XR(){return fA()&&document.documentMode===10}function M0(t=mt()){return Ih(t)||k0(t)||P0(t)||x0(t)||/windows phone/i.test(t)||R0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e=[]){let n;switch(t){case"Browser":n=kg(mt());break;case"Worker":n=`${kg(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e={}){return uo(t,"GET","/v2/passwordPolicy",Ch(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=6;class tk{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:ek,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xg(this),this.idTokenSubscription=new xg(this),this.beforeStateQueue=new ZR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Fi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await E0(this,{idToken:e}),r=await An._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(In(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===u)&&(c!=null&&c.user)&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ya(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject($r(this));const n=e?Ht(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject($r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jR(this),n=new tk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await YR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rn(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=await Fi.create(this,[Rn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&DR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ku(t){return Ht(t)}class xg{constructor(e){this.auth=e,this.observer=null,this.addObserver=TA(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rk(t){Sh=t}function ik(t){return Sh.loadJS(t)}function ok(){return Sh.gapiScript}function sk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e){const n=yh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Wa(o,e??{}))return i;hn(i,"already-initialized")}return n.initialize({options:e})}function ak(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uk(t,e,n){const r=ku(t);j(r._canInitEmulator,r,"emulator-config-failed"),j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=D0(e),{host:s,port:u}=ck(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),dk()}function D0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ck(t){const e=D0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Pg(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Pg(s)}}}function Pg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bi(t,e){return BR(t,"POST","/v1/accounts:signInWithIdp",Ch(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="http://localhost";class Yr extends V0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=vh(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Yr(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return bi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bi(e,n)}buildRequest(){const e={requestUri:fk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Ah{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends js{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends js{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yr._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return En.credential(n,r)}catch{return null}}}En.GOOGLE_SIGN_IN_METHOD="google.com";En.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends js{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jn.credential(e.oauthAccessToken)}catch{return null}}}jn.GITHUB_SIGN_IN_METHOD="github.com";jn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends js{constructor(){super("twitter.com")}static credential(e,n){return Yr._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return er.credential(n,r)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await An._fromIdTokenResponse(e,r,i),s=Mg(r);return new Xi({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Mg(r);return new Xi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Mg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends rn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Qa.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Qa(e,n,r,i)}}function L0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Qa._fromErrorAndOperation(t,o,e,r):o})}async function hk(t,e,n=!1){const r=await Us(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(t,e,n=!1){const{auth:r}=t;if(In(r.app))return Promise.reject($r(r));const i="reauthenticate";try{const o=await Us(t,L0(r,i,e,t),n);j(o.idToken,r,"internal-error");const s=wh(o.idToken);j(s,r,"internal-error");const{sub:u}=s;return j(t.uid===u,r,"user-mismatch"),Xi._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&hn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(t,e,n=!1){if(In(t.app))return Promise.reject($r(t));const r="signIn",i=await L0(t,r,e),o=await Xi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function gk(t,e,n,r){return Ht(t).onIdTokenChanged(e,n,r)}function yk(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}function vk(t,e,n,r){return Ht(t).onAuthStateChanged(e,n,r)}function _k(t){return Ht(t).signOut()}const Xa="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xa,"1"),this.storage.removeItem(Xa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=1e3,Ek=10;class F0 extends U0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);XR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Ek):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}F0.type="LOCAL";const Ck=F0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends U0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}b0.type="SESSION";const O0=b0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new xu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async d=>d(n.origin,o)),c=await wk(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const d=Rh("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(g.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return window}function Sk(t){cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(){return typeof cn().WorkerGlobalScope<"u"&&typeof cn().importScripts=="function"}async function Ak(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kk(){return B0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="firebaseLocalStorageDb",xk=1,Za="firebaseLocalStorage",q0="fbase_key";class el{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pu(t,e){return t.transaction([Za],e?"readwrite":"readonly").objectStore(Za)}function Pk(){const t=indexedDB.deleteDatabase($0);return new el(t).toPromise()}function Kd(){const t=indexedDB.open($0,xk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Za,{keyPath:q0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Za)?e(r):(r.close(),await Pk(),e(await Kd()))})})}async function Ng(t,e,n){const r=Pu(t,!0).put({[q0]:e,value:n});return new el(r).toPromise()}async function Mk(t,e){const n=Pu(t,!1).get(e),r=await new el(n).toPromise();return r===void 0?null:r.value}function Dg(t,e){const n=Pu(t,!0).delete(e);return new el(n).toPromise()}const Nk=800,Dk=3;class G0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Dk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xu._getInstance(kk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ak(),!this.activeServiceWorker)return;this.sender=new Ik(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Rk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kd();return await Ng(e,Xa,"1"),await Dg(e,Xa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ng(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Mk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Pu(i,!1).getAll();return new el(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}G0.type="LOCAL";const Vk=G0;new Zs(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t,e){return e?Rn(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends V0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Lk(t){return mk(t.auth,new kh(t),t.bypassAuthState)}function Uk(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),pk(n,new kh(t),t.bypassAuthState)}async function Fk(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),hk(n,new kh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lk;case"linkViaPopup":case"linkViaRedirect":return Fk;case"reauthViaPopup":case"reauthViaRedirect":return Uk;default:hn(this.auth,"internal-error")}}resolve(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new Zs(2e3,1e4);async function Ok(t,e,n){if(In(t.app))return Promise.reject(tn(t,"operation-not-supported-in-this-environment"));const r=ku(t);VR(t,e,Ah);const i=H0(r,n);return new Fr(r,"signInViaPopup",e,i).executeNotNull()}class Fr extends z0{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return j(e,this.auth,"internal-error"),e}async onExecution(){Ln(this.filter.length===1,"Popup operations only handle one event");const e=Rh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bk.get())};e()}}Fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="pendingRedirect",fa=new Map;class $k extends z0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fa.get(this.auth._key());if(!e){try{const r=await qk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fa.set(this.auth._key(),e)}return this.bypassAuthState||fa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qk(t,e){const n=zk(e),r=Hk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Gk(t,e){fa.set(t._key(),e)}function Hk(t){return Rn(t._redirectPersistence)}function zk(t){return da(Bk,t.config.apiKey,t.name)}async function Wk(t,e,n=!1){if(In(t.app))return Promise.reject($r(t));const r=ku(t),i=H0(r,e),s=await new $k(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=10*60*1e3;class Jk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!W0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(tn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Kk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vg(e))}saveEventToCache(e){this.cachedEventUids.add(Vg(e)),this.lastProcessedEventTime=Date.now()}}function Vg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function W0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Yk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(t,e={}){return uo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zk=/^https?/;async function jk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Qk(t);for(const n of e)try{if(ex(n))return}catch{}hn(t,"unauthorized-domain")}function ex(t){const e=zd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Zk.test(n))return!1;if(Xk.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Zs(3e4,6e4);function Lg(){const t=cn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nx(t){return new Promise((e,n)=>{var r,i,o;function s(){Lg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Lg(),n(tn(t,"network-request-failed"))},timeout:tx.get()})}if(!((i=(r=cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=cn().gapi)===null||o===void 0)&&o.load)s();else{const u=sk("iframefcb");return cn()[u]=()=>{gapi.load?s():n(tn(t,"network-request-failed"))},ik(`${ok()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw ha=null,e})}let ha=null;function rx(t){return ha=ha||nx(t),ha}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new Zs(5e3,15e3),ox="__/auth/iframe",sx="emulator/auth/iframe",lx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ax=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ux(t){const e=t.config;j(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Eh(e,sx):`https://${t.config.authDomain}/${ox}`,r={apiKey:e.apiKey,appName:t.name,v:ao},i=ax.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Xs(r).slice(1)}`}async function cx(t){const e=await rx(t),n=cn().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:ux(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lx,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=tn(t,"network-request-failed"),u=cn().setTimeout(()=>{o(s)},ix.get());function c(){cn().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fx=500,hx=600,px="_blank",mx="http://localhost";class Ug{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gx(t,e,n,r=fx,i=hx){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},dx),{width:r.toString(),height:i.toString(),top:o,left:s}),d=mt().toLowerCase();n&&(u=A0(d)?px:n),I0(d)&&(e=e||mx,c.scrollbars="yes");const h=Object.entries(c).reduce((g,[v,A])=>`${g}${v}=${A},`,"");if(QR(d)&&u!=="_self")return yx(e||"",u),new Ug(null);const p=window.open(e||"",u,h);j(p,t,"popup-blocked");try{p.focus()}catch{}return new Ug(p)}function yx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="__/auth/handler",_x="emulator/auth/handler",Tx=encodeURIComponent("fac");async function Fg(t,e,n,r,i,o){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ao,eventId:i};if(e instanceof Ah){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",_A(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))s[h]=p}if(e instanceof js){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const u=s;for(const h of Object.keys(u))u[h]===void 0&&delete u[h];const c=await t._getAppCheckToken(),d=c?`#${Tx}=${encodeURIComponent(c)}`:"";return`${Ex(t)}?${Xs(u).slice(1)}${d}`}function Ex({config:t}){return t.emulator?Eh(t,_x):`https://${t.authDomain}/${vx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="webStorageSupport";class Cx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O0,this._completeRedirectFn=Wk,this._overrideRedirectResult=Gk}async _openPopup(e,n,r,i){var o;Ln((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Fg(e,n,r,zd(),i);return gx(e,s,Rh())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Fg(e,n,r,zd(),i);return Sk(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ln(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cx(e),r=new Jk(e);return n.register("authEvent",i=>(j(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bc,{type:Bc},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Bc];s!==void 0&&n(!!s),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M0()||S0()||Ih()}}const wx=Cx;var bg="@firebase/auth",Og="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ax(t){Qi(new Jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;j(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N0(t)},d=new nk(r,i,o,c);return ak(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qi(new Jr("auth-internal",e=>{const n=ku(e.getProvider("auth").getImmediate());return(r=>new Ix(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(bg,Og,Sx(t)),mr(bg,Og,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=5*60,kx=u0("authIdTokenMaxAge")||Rx;let Bg=null;const xx=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kx)return;const i=n==null?void 0:n.token;Bg!==i&&(Bg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Px(t=h0()){const e=yh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lk(t,{popupRedirectResolver:wx,persistence:[Vk,Ck,O0]}),r=u0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=xx(o.toString());yk(n,s,()=>s(n.currentUser)),gk(n,u=>s(u))}}const i=l0("auth");return i&&uk(n,`http://${i}`),n}function Mx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=tn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Mx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ax("Browser");var $g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qr,K0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function T(){}T.prototype=_.prototype,S.D=_.prototype,S.prototype=new T,S.prototype.constructor=S,S.C=function(C,x,N){for(var M=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)M[oe-2]=arguments[oe];return _.prototype[x].apply(C,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,T){T||(T=0);var C=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)C[x]=_.charCodeAt(T++)|_.charCodeAt(T++)<<8|_.charCodeAt(T++)<<16|_.charCodeAt(T++)<<24;else for(x=0;16>x;++x)C[x]=_[T++]|_[T++]<<8|_[T++]<<16|_[T++]<<24;_=S.g[0],T=S.g[1],x=S.g[2];var N=S.g[3],M=_+(N^T&(x^N))+C[0]+3614090360&4294967295;_=T+(M<<7&4294967295|M>>>25),M=N+(x^_&(T^x))+C[1]+3905402710&4294967295,N=_+(M<<12&4294967295|M>>>20),M=x+(T^N&(_^T))+C[2]+606105819&4294967295,x=N+(M<<17&4294967295|M>>>15),M=T+(_^x&(N^_))+C[3]+3250441966&4294967295,T=x+(M<<22&4294967295|M>>>10),M=_+(N^T&(x^N))+C[4]+4118548399&4294967295,_=T+(M<<7&4294967295|M>>>25),M=N+(x^_&(T^x))+C[5]+1200080426&4294967295,N=_+(M<<12&4294967295|M>>>20),M=x+(T^N&(_^T))+C[6]+2821735955&4294967295,x=N+(M<<17&4294967295|M>>>15),M=T+(_^x&(N^_))+C[7]+4249261313&4294967295,T=x+(M<<22&4294967295|M>>>10),M=_+(N^T&(x^N))+C[8]+1770035416&4294967295,_=T+(M<<7&4294967295|M>>>25),M=N+(x^_&(T^x))+C[9]+2336552879&4294967295,N=_+(M<<12&4294967295|M>>>20),M=x+(T^N&(_^T))+C[10]+4294925233&4294967295,x=N+(M<<17&4294967295|M>>>15),M=T+(_^x&(N^_))+C[11]+2304563134&4294967295,T=x+(M<<22&4294967295|M>>>10),M=_+(N^T&(x^N))+C[12]+1804603682&4294967295,_=T+(M<<7&4294967295|M>>>25),M=N+(x^_&(T^x))+C[13]+4254626195&4294967295,N=_+(M<<12&4294967295|M>>>20),M=x+(T^N&(_^T))+C[14]+2792965006&4294967295,x=N+(M<<17&4294967295|M>>>15),M=T+(_^x&(N^_))+C[15]+1236535329&4294967295,T=x+(M<<22&4294967295|M>>>10),M=_+(x^N&(T^x))+C[1]+4129170786&4294967295,_=T+(M<<5&4294967295|M>>>27),M=N+(T^x&(_^T))+C[6]+3225465664&4294967295,N=_+(M<<9&4294967295|M>>>23),M=x+(_^T&(N^_))+C[11]+643717713&4294967295,x=N+(M<<14&4294967295|M>>>18),M=T+(N^_&(x^N))+C[0]+3921069994&4294967295,T=x+(M<<20&4294967295|M>>>12),M=_+(x^N&(T^x))+C[5]+3593408605&4294967295,_=T+(M<<5&4294967295|M>>>27),M=N+(T^x&(_^T))+C[10]+38016083&4294967295,N=_+(M<<9&4294967295|M>>>23),M=x+(_^T&(N^_))+C[15]+3634488961&4294967295,x=N+(M<<14&4294967295|M>>>18),M=T+(N^_&(x^N))+C[4]+3889429448&4294967295,T=x+(M<<20&4294967295|M>>>12),M=_+(x^N&(T^x))+C[9]+568446438&4294967295,_=T+(M<<5&4294967295|M>>>27),M=N+(T^x&(_^T))+C[14]+3275163606&4294967295,N=_+(M<<9&4294967295|M>>>23),M=x+(_^T&(N^_))+C[3]+4107603335&4294967295,x=N+(M<<14&4294967295|M>>>18),M=T+(N^_&(x^N))+C[8]+1163531501&4294967295,T=x+(M<<20&4294967295|M>>>12),M=_+(x^N&(T^x))+C[13]+2850285829&4294967295,_=T+(M<<5&4294967295|M>>>27),M=N+(T^x&(_^T))+C[2]+4243563512&4294967295,N=_+(M<<9&4294967295|M>>>23),M=x+(_^T&(N^_))+C[7]+1735328473&4294967295,x=N+(M<<14&4294967295|M>>>18),M=T+(N^_&(x^N))+C[12]+2368359562&4294967295,T=x+(M<<20&4294967295|M>>>12),M=_+(T^x^N)+C[5]+4294588738&4294967295,_=T+(M<<4&4294967295|M>>>28),M=N+(_^T^x)+C[8]+2272392833&4294967295,N=_+(M<<11&4294967295|M>>>21),M=x+(N^_^T)+C[11]+1839030562&4294967295,x=N+(M<<16&4294967295|M>>>16),M=T+(x^N^_)+C[14]+4259657740&4294967295,T=x+(M<<23&4294967295|M>>>9),M=_+(T^x^N)+C[1]+2763975236&4294967295,_=T+(M<<4&4294967295|M>>>28),M=N+(_^T^x)+C[4]+1272893353&4294967295,N=_+(M<<11&4294967295|M>>>21),M=x+(N^_^T)+C[7]+4139469664&4294967295,x=N+(M<<16&4294967295|M>>>16),M=T+(x^N^_)+C[10]+3200236656&4294967295,T=x+(M<<23&4294967295|M>>>9),M=_+(T^x^N)+C[13]+681279174&4294967295,_=T+(M<<4&4294967295|M>>>28),M=N+(_^T^x)+C[0]+3936430074&4294967295,N=_+(M<<11&4294967295|M>>>21),M=x+(N^_^T)+C[3]+3572445317&4294967295,x=N+(M<<16&4294967295|M>>>16),M=T+(x^N^_)+C[6]+76029189&4294967295,T=x+(M<<23&4294967295|M>>>9),M=_+(T^x^N)+C[9]+3654602809&4294967295,_=T+(M<<4&4294967295|M>>>28),M=N+(_^T^x)+C[12]+3873151461&4294967295,N=_+(M<<11&4294967295|M>>>21),M=x+(N^_^T)+C[15]+530742520&4294967295,x=N+(M<<16&4294967295|M>>>16),M=T+(x^N^_)+C[2]+3299628645&4294967295,T=x+(M<<23&4294967295|M>>>9),M=_+(x^(T|~N))+C[0]+4096336452&4294967295,_=T+(M<<6&4294967295|M>>>26),M=N+(T^(_|~x))+C[7]+1126891415&4294967295,N=_+(M<<10&4294967295|M>>>22),M=x+(_^(N|~T))+C[14]+2878612391&4294967295,x=N+(M<<15&4294967295|M>>>17),M=T+(N^(x|~_))+C[5]+4237533241&4294967295,T=x+(M<<21&4294967295|M>>>11),M=_+(x^(T|~N))+C[12]+1700485571&4294967295,_=T+(M<<6&4294967295|M>>>26),M=N+(T^(_|~x))+C[3]+2399980690&4294967295,N=_+(M<<10&4294967295|M>>>22),M=x+(_^(N|~T))+C[10]+4293915773&4294967295,x=N+(M<<15&4294967295|M>>>17),M=T+(N^(x|~_))+C[1]+2240044497&4294967295,T=x+(M<<21&4294967295|M>>>11),M=_+(x^(T|~N))+C[8]+1873313359&4294967295,_=T+(M<<6&4294967295|M>>>26),M=N+(T^(_|~x))+C[15]+4264355552&4294967295,N=_+(M<<10&4294967295|M>>>22),M=x+(_^(N|~T))+C[6]+2734768916&4294967295,x=N+(M<<15&4294967295|M>>>17),M=T+(N^(x|~_))+C[13]+1309151649&4294967295,T=x+(M<<21&4294967295|M>>>11),M=_+(x^(T|~N))+C[4]+4149444226&4294967295,_=T+(M<<6&4294967295|M>>>26),M=N+(T^(_|~x))+C[11]+3174756917&4294967295,N=_+(M<<10&4294967295|M>>>22),M=x+(_^(N|~T))+C[2]+718787259&4294967295,x=N+(M<<15&4294967295|M>>>17),M=T+(N^(x|~_))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(x+(M<<21&4294967295|M>>>11))&4294967295,S.g[2]=S.g[2]+x&4294967295,S.g[3]=S.g[3]+N&4294967295}r.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var T=_-this.blockSize,C=this.B,x=this.h,N=0;N<_;){if(x==0)for(;N<=T;)i(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<_;)if(C[x++]=S.charCodeAt(N++),x==this.blockSize){i(this,C),x=0;break}}else for(;N<_;)if(C[x++]=S[N++],x==this.blockSize){i(this,C),x=0;break}}this.h=x,this.o+=_},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var T=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=T&255,T/=256;for(this.u(S),S=Array(16),_=T=0;4>_;++_)for(var C=0;32>C;C+=8)S[T++]=this.g[_]>>>C&255;return S};function o(S,_){var T=u;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=_(S)}function s(S,_){this.h=_;for(var T=[],C=!0,x=S.length-1;0<=x;x--){var N=S[x]|0;C&&N==_||(T[x]=N,C=!1)}this.g=T}var u={};function c(S){return-128<=S&&128>S?o(S,function(_){return new s([_|0],0>_?-1:0)}):new s([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return D(d(-S));for(var _=[],T=1,C=0;S>=T;C++)_[C]=S/T|0,T*=4294967296;return new s(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return D(h(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(_,8)),C=p,x=0;x<S.length;x+=8){var N=Math.min(8,S.length-x),M=parseInt(S.substring(x,x+N),_);8>N?(N=d(Math.pow(_,N)),C=C.j(N).add(d(M))):(C=C.j(T),C=C.add(d(M)))}return C}var p=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(P(this))return-D(this).m();for(var S=0,_=1,T=0;T<this.g.length;T++){var C=this.i(T);S+=(0<=C?C:4294967296+C)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(A(this))return"0";if(P(this))return"-"+D(this).toString(S);for(var _=d(Math.pow(S,6)),T=this,C="";;){var x=V(T,_).g;T=R(T,x.j(_));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(S);if(T=x,A(T))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function A(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function P(S){return S.h==-1}t.l=function(S){return S=R(this,S),P(S)?-1:A(S)?0:1};function D(S){for(var _=S.g.length,T=[],C=0;C<_;C++)T[C]=~S.g[C];return new s(T,~S.h).add(g)}t.abs=function(){return P(this)?D(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),T=[],C=0,x=0;x<=_;x++){var N=C+(this.i(x)&65535)+(S.i(x)&65535),M=(N>>>16)+(this.i(x)>>>16)+(S.i(x)>>>16);C=M>>>16,N&=65535,M&=65535,T[x]=M<<16|N}return new s(T,T[T.length-1]&-2147483648?-1:0)};function R(S,_){return S.add(D(_))}t.j=function(S){if(A(this)||A(S))return p;if(P(this))return P(S)?D(this).j(D(S)):D(D(this).j(S));if(P(S))return D(this.j(D(S)));if(0>this.l(v)&&0>S.l(v))return d(this.m()*S.m());for(var _=this.g.length+S.g.length,T=[],C=0;C<2*_;C++)T[C]=0;for(C=0;C<this.g.length;C++)for(var x=0;x<S.g.length;x++){var N=this.i(C)>>>16,M=this.i(C)&65535,oe=S.i(x)>>>16,le=S.i(x)&65535;T[2*C+2*x]+=M*le,I(T,2*C+2*x),T[2*C+2*x+1]+=N*le,I(T,2*C+2*x+1),T[2*C+2*x+1]+=M*oe,I(T,2*C+2*x+1),T[2*C+2*x+2]+=N*oe,I(T,2*C+2*x+2)}for(C=0;C<_;C++)T[C]=T[2*C+1]<<16|T[2*C];for(C=_;C<2*_;C++)T[C]=0;return new s(T,0)};function I(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function k(S,_){this.g=S,this.h=_}function V(S,_){if(A(_))throw Error("division by zero");if(A(S))return new k(p,p);if(P(S))return _=V(D(S),_),new k(D(_.g),D(_.h));if(P(_))return _=V(S,D(_)),new k(D(_.g),_.h);if(30<S.g.length){if(P(S)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var T=g,C=_;0>=C.l(S);)T=F(T),C=F(C);var x=U(T,1),N=U(C,1);for(C=U(C,2),T=U(T,2);!A(C);){var M=N.add(C);0>=M.l(S)&&(x=x.add(T),N=M),C=U(C,1),T=U(T,1)}return _=R(S,x.j(_)),new k(x,_)}for(x=p;0<=S.l(_);){for(T=Math.max(1,Math.floor(S.m()/_.m())),C=Math.ceil(Math.log(T)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=d(T),M=N.j(_);P(M)||0<M.l(S);)T-=C,N=d(T),M=N.j(_);A(N)&&(N=g),x=x.add(N),S=R(S,M)}return new k(x,S)}t.A=function(S){return V(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),T=[],C=0;C<_;C++)T[C]=this.i(C)&S.i(C);return new s(T,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),T=[],C=0;C<_;C++)T[C]=this.i(C)|S.i(C);return new s(T,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),T=[],C=0;C<_;C++)T[C]=this.i(C)^S.i(C);return new s(T,this.h^S.h)};function F(S){for(var _=S.g.length+1,T=[],C=0;C<_;C++)T[C]=S.i(C)<<1|S.i(C-1)>>>31;return new s(T,S.h)}function U(S,_){var T=_>>5;_%=32;for(var C=S.g.length-T,x=[],N=0;N<C;N++)x[N]=0<_?S.i(N+T)>>>_|S.i(N+T+1)<<32-_:S.i(N+T);return new s(x,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,K0=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,qr=s}).apply(typeof $g<"u"?$g:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var J0,jo,Y0,pa,Jd,Q0,X0,Z0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,m,y){return f==Array.prototype||f==Object.prototype||(f[m]=y.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var m=0;m<f.length;++m){var y=f[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(f,m){if(m)e:{var y=r;f=f.split(".");for(var w=0;w<f.length-1;w++){var L=f[w];if(!(L in y))break e;y=y[L]}f=f[f.length-1],w=y[f],m=m(w),m!=w&&m!=null&&e(y,f,{configurable:!0,writable:!0,value:m})}}function o(f,m){f instanceof String&&(f+="");var y=0,w=!1,L={next:function(){if(!w&&y<f.length){var b=y++;return{value:m(b,f[b]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(f){return f||function(){return o(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},u=this||self;function c(f){var m=typeof f;return m=m!="object"?m:f?Array.isArray(f)?"array":m:"null",m=="array"||m=="object"&&typeof f.length=="number"}function d(f){var m=typeof f;return m=="object"&&f!=null||m=="function"}function h(f,m,y){return f.call.apply(f.bind,arguments)}function p(f,m,y){if(!f)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),f.apply(m,L)}}return function(){return f.apply(m,arguments)}}function g(f,m,y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function v(f,m){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),f.apply(this,w)}}function A(f,m){function y(){}y.prototype=m.prototype,f.aa=m.prototype,f.prototype=new y,f.prototype.constructor=f,f.Qb=function(w,L,b){for(var q=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)q[Te-2]=arguments[Te];return m.prototype[L].apply(w,q)}}function P(f){const m=f.length;if(0<m){const y=Array(m);for(let w=0;w<m;w++)y[w]=f[w];return y}return[]}function D(f,m){for(let y=1;y<arguments.length;y++){const w=arguments[y];if(c(w)){const L=f.length||0,b=w.length||0;f.length=L+b;for(let q=0;q<b;q++)f[L+q]=w[q]}else f.push(w)}}class R{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function I(f){return/^[\s\xa0]*$/.test(f)}function k(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function V(f){return V[" "](f),f}V[" "]=function(){};var F=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function U(f,m,y){for(const w in f)m.call(y,f[w],w,f)}function S(f,m){for(const y in f)m.call(void 0,f[y],y,f)}function _(f){const m={};for(const y in f)m[y]=f[y];return m}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(f,m){let y,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(y in w)f[y]=w[y];for(let b=0;b<T.length;b++)y=T[b],Object.prototype.hasOwnProperty.call(w,y)&&(f[y]=w[y])}}function x(f){var m=1;f=f.split(":");const y=[];for(;0<m&&f.length;)y.push(f.shift()),m--;return f.length&&y.push(f.join(":")),y}function N(f){u.setTimeout(()=>{throw f},0)}function M(){var f=Y;let m=null;return f.g&&(m=f.g,f.g=f.g.next,f.g||(f.h=null),m.next=null),m}class oe{constructor(){this.h=this.g=null}add(m,y){const w=le.get();w.set(m,y),this.h?this.h.next=w:this.g=w,this.h=w}}var le=new R(()=>new pe,f=>f.reset());class pe{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,G=!1,Y=new oe,Z=()=>{const f=u.Promise.resolve(void 0);$e=()=>{f.then(de)}};var de=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(y){N(y)}var m=le;m.j(f),100>m.h&&(m.h++,f.next=m.g,m.g=f)}G=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(f,m){this.type=f,this.g=this.target=m,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var Et=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,m=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const y=()=>{};u.addEventListener("test",y,m),u.removeEventListener("test",y,m)}catch{}return f}();function zt(f,m){if(Re.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var y=this.type=f.type,w=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=m,m=f.relatedTarget){if(F){e:{try{V(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=f.fromElement:y=="mouseout"&&(m=f.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Vt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&zt.aa.h.call(this)}}A(zt,Re);var Vt={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),_o=0;function To(f,m,y,w,L){this.listener=f,this.proxy=null,this.src=m,this.type=y,this.capture=!!w,this.ha=L,this.key=++_o,this.da=this.fa=!1}function Sr(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Bn(f){this.src=f,this.g={},this.h=0}Bn.prototype.add=function(f,m,y,w,L){var b=f.toString();f=this.g[b],f||(f=this.g[b]=[],this.h++);var q=Co(f,m,w,L);return-1<q?(m=f[q],y||(m.fa=!1)):(m=new To(m,this.src,b,!!w,L),m.fa=y,f.push(m)),m};function Eo(f,m){var y=m.type;if(y in f.g){var w=f.g[y],L=Array.prototype.indexOf.call(w,m,void 0),b;(b=0<=L)&&Array.prototype.splice.call(w,L,1),b&&(Sr(m),f.g[y].length==0&&(delete f.g[y],f.h--))}}function Co(f,m,y,w){for(var L=0;L<f.length;++L){var b=f[L];if(!b.da&&b.listener==m&&b.capture==!!y&&b.ha==w)return L}return-1}var wo="closure_lm_"+(1e6*Math.random()|0),Io={};function al(f,m,y,w,L){if(Array.isArray(m)){for(var b=0;b<m.length;b++)al(f,m[b],y,w,L);return null}return y=dl(y),f&&f[Le]?f.K(m,y,d(w)?!!w.capture:!1,L):Hu(f,m,y,!1,w,L)}function Hu(f,m,y,w,L,b){if(!m)throw Error("Invalid event type");var q=d(L)?!!L.capture:!!L,Te=Ao(f);if(Te||(f[wo]=Te=new Bn(f)),y=Te.add(m,y,w,q,b),y.proxy)return y;if(w=zu(),y.proxy=w,w.src=f,w.listener=y,f.addEventListener)Et||(L=q),L===void 0&&(L=!1),f.addEventListener(m.toString(),w,L);else if(f.attachEvent)f.attachEvent(cl(m.toString()),w);else if(f.addListener&&f.removeListener)f.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function zu(){function f(y){return m.call(f.src,f.listener,y)}const m=Wu;return f}function ul(f,m,y,w,L){if(Array.isArray(m))for(var b=0;b<m.length;b++)ul(f,m[b],y,w,L);else w=d(w)?!!w.capture:!!w,y=dl(y),f&&f[Le]?(f=f.i,m=String(m).toString(),m in f.g&&(b=f.g[m],y=Co(b,y,w,L),-1<y&&(Sr(b[y]),Array.prototype.splice.call(b,y,1),b.length==0&&(delete f.g[m],f.h--)))):f&&(f=Ao(f))&&(m=f.g[m.toString()],f=-1,m&&(f=Co(m,y,w,L)),(y=-1<f?m[f]:null)&&So(y))}function So(f){if(typeof f!="number"&&f&&!f.da){var m=f.src;if(m&&m[Le])Eo(m.i,f);else{var y=f.type,w=f.proxy;m.removeEventListener?m.removeEventListener(y,w,f.capture):m.detachEvent?m.detachEvent(cl(y),w):m.addListener&&m.removeListener&&m.removeListener(w),(y=Ao(m))?(Eo(y,f),y.h==0&&(y.src=null,m[wo]=null)):Sr(f)}}}function cl(f){return f in Io?Io[f]:Io[f]="on"+f}function Wu(f,m){if(f.da)f=!0;else{m=new zt(m,this);var y=f.listener,w=f.ha||f.src;f.fa&&So(f),f=y.call(w,m)}return f}function Ao(f){return f=f[wo],f instanceof Bn?f:null}var li="__closure_events_fn_"+(1e9*Math.random()>>>0);function dl(f){return typeof f=="function"?f:(f[li]||(f[li]=function(m){return f.handleEvent(m)}),f[li])}function qe(){ge.call(this),this.i=new Bn(this),this.M=this,this.F=null}A(qe,ge),qe.prototype[Le]=!0,qe.prototype.removeEventListener=function(f,m,y,w){ul(this,f,m,y,w)};function Qe(f,m){var y,w=f.F;if(w)for(y=[];w;w=w.F)y.push(w);if(f=f.M,w=m.type||m,typeof m=="string")m=new Re(m,f);else if(m instanceof Re)m.target=m.target||f;else{var L=m;m=new Re(w,f),C(m,L)}if(L=!0,y)for(var b=y.length-1;0<=b;b--){var q=m.g=y[b];L=ai(q,w,!0,m)&&L}if(q=m.g=f,L=ai(q,w,!0,m)&&L,L=ai(q,w,!1,m)&&L,y)for(b=0;b<y.length;b++)q=m.g=y[b],L=ai(q,w,!1,m)&&L}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var f=this.i,m;for(m in f.g){for(var y=f.g[m],w=0;w<y.length;w++)Sr(y[w]);delete f.g[m],f.h--}}this.F=null},qe.prototype.K=function(f,m,y,w){return this.i.add(String(f),m,!1,y,w)},qe.prototype.L=function(f,m,y,w){return this.i.add(String(f),m,!0,y,w)};function ai(f,m,y,w){if(m=f.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,b=0;b<m.length;++b){var q=m[b];if(q&&!q.da&&q.capture==y){var Te=q.listener,Xe=q.ha||q.src;q.fa&&Eo(f.i,q),L=Te.call(Xe,w)!==!1&&L}}return L&&!w.defaultPrevented}function J(f,m,y){if(typeof f=="function")y&&(f=g(f,y));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:u.setTimeout(f,m||0)}function re(f){f.g=J(()=>{f.g=null,f.i&&(f.i=!1,re(f))},f.l);const m=f.h;f.h=null,f.m.apply(null,m)}class ye extends ge{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(f){ge.call(this),this.h=f,this.g={}}A(be,ge);var Ar=[];function $n(f){U(f.g,function(m,y){this.g.hasOwnProperty(y)&&So(m)},f),f.g={}}be.prototype.N=function(){be.aa.N.call(this),$n(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=u.JSON.stringify,qn=u.JSON.parse,ZC=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Ku(){}Ku.prototype.h=null;function pp(f){return f.h||(f.h=f.i())}function mp(){}var Ro={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ju(){Re.call(this,"d")}A(Ju,Re);function Yu(){Re.call(this,"c")}A(Yu,Re);var Rr={},gp=null;function fl(){return gp=gp||new qe}Rr.La="serverreachability";function yp(f){Re.call(this,Rr.La,f)}A(yp,Re);function ko(f){const m=fl();Qe(m,new yp(m))}Rr.STAT_EVENT="statevent";function vp(f,m){Re.call(this,Rr.STAT_EVENT,f),this.stat=m}A(vp,Re);function gt(f){const m=fl();Qe(m,new vp(m,f))}Rr.Ma="timingevent";function _p(f,m){Re.call(this,Rr.Ma,f),this.size=m}A(_p,Re);function xo(f,m){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},m)}function Po(){this.g=!0}Po.prototype.xa=function(){this.g=!1};function jC(f,m,y,w,L,b){f.info(function(){if(f.g)if(b)for(var q="",Te=b.split("&"),Xe=0;Xe<Te.length;Xe++){var fe=Te[Xe].split("=");if(1<fe.length){var ot=fe[0];fe=fe[1];var st=ot.split("_");q=2<=st.length&&st[1]=="type"?q+(ot+"="+fe+"&"):q+(ot+"=redacted&")}}else q=null;else q=b;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+m+`
`+y+`
`+q})}function ew(f,m,y,w,L,b,q){f.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+m+`
`+y+`
`+b+" "+q})}function ui(f,m,y,w){f.info(function(){return"XMLHTTP TEXT ("+m+"): "+nw(f,y)+(w?" "+w:"")})}function tw(f,m){f.info(function(){return"TIMEOUT: "+m})}Po.prototype.info=function(){};function nw(f,m){if(!f.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(f=0;f<y.length;f++)if(Array.isArray(y[f])){var w=y[f];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var b=L[0];if(b!="noop"&&b!="stop"&&b!="close")for(var q=1;q<L.length;q++)L[q]=""}}}}return Wt(y)}catch{return m}}var hl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qu;function pl(){}A(pl,Ku),pl.prototype.g=function(){return new XMLHttpRequest},pl.prototype.i=function(){return{}},Qu=new pl;function Gn(f,m,y,w){this.j=f,this.i=m,this.l=y,this.R=w||1,this.U=new be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ep}function Ep(){this.i=null,this.g="",this.h=!1}var Cp={},Xu={};function Zu(f,m,y){f.L=1,f.v=vl(yn(m)),f.m=y,f.P=!0,wp(f,null)}function wp(f,m){f.F=Date.now(),ml(f),f.A=yn(f.v);var y=f.A,w=f.R;Array.isArray(w)||(w=[String(w)]),Fp(y.i,"t",w),f.C=0,y=f.j.J,f.h=new Ep,f.g=tm(f.j,y?m:null,!f.m),0<f.O&&(f.M=new ye(g(f.Y,f,f.g),f.O)),m=f.U,y=f.g,w=f.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ar[0]=L.toString()),L=Ar);for(var b=0;b<L.length;b++){var q=al(y,L[b],w||m.handleEvent,!1,m.h||m);if(!q)break;m.g[q.key]=q}m=f.H?_(f.H):{},f.m?(f.u||(f.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,m)):(f.u="GET",f.g.ea(f.A,f.u,null,m)),ko(),jC(f.i,f.u,f.A,f.l,f.R,f.m)}Gn.prototype.ca=function(f){f=f.target;const m=this.M;m&&vn(f)==3?m.j():this.Y(f)},Gn.prototype.Y=function(f){try{if(f==this.g)e:{const st=vn(this.g);var m=this.g.Ba();const fi=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Hp(this.g)))){this.J||st!=4||m==7||(m==8||0>=fi?ko(3):ko(2)),ju(this);var y=this.g.Z();this.X=y;t:if(Ip(this)){var w=Hp(this.g);f="";var L=w.length,b=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),Mo(this);var q="";break t}this.h.i=new u.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,f+=this.h.i.decode(w[m],{stream:!(b&&m==L-1)});w.length=0,this.h.g+=f,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=y==200,ew(this.i,this.u,this.A,this.l,this.R,st,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,Xe=this.g;if((Te=Xe.g?Xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Te)){var fe=Te;break t}}fe=null}if(y=fe)ui(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ec(this,y);else{this.o=!1,this.s=3,gt(12),kr(this),Mo(this);break e}}if(this.P){y=!0;let Kt;for(;!this.J&&this.C<q.length;)if(Kt=rw(this,q),Kt==Xu){st==4&&(this.s=4,gt(14),y=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Cp){this.s=4,gt(15),ui(this.i,this.l,q,"[Invalid Chunk]"),y=!1;break}else ui(this.i,this.l,Kt,null),ec(this,Kt);if(Ip(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||q.length!=0||this.h.h||(this.s=1,gt(16),y=!1),this.o=this.o&&y,!y)ui(this.i,this.l,q,"[Invalid Chunked Response]"),kr(this),Mo(this);else if(0<q.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),sc(ot),ot.M=!0,gt(11))}}else ui(this.i,this.l,q,null),ec(this,q);st==4&&kr(this),this.o&&!this.J&&(st==4?Xp(this.j,this):(this.o=!1,ml(this)))}else Tw(this.g),y==400&&0<q.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),kr(this),Mo(this)}}}catch{}finally{}};function Ip(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function rw(f,m){var y=f.C,w=m.indexOf(`
`,y);return w==-1?Xu:(y=Number(m.substring(y,w)),isNaN(y)?Cp:(w+=1,w+y>m.length?Xu:(m=m.slice(w,w+y),f.C=w+y,m)))}Gn.prototype.cancel=function(){this.J=!0,kr(this)};function ml(f){f.S=Date.now()+f.I,Sp(f,f.I)}function Sp(f,m){if(f.B!=null)throw Error("WatchDog timer not null");f.B=xo(g(f.ba,f),m)}function ju(f){f.B&&(u.clearTimeout(f.B),f.B=null)}Gn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(tw(this.i,this.A),this.L!=2&&(ko(),gt(17)),kr(this),this.s=2,Mo(this)):Sp(this,this.S-f)};function Mo(f){f.j.G==0||f.J||Xp(f.j,f)}function kr(f){ju(f);var m=f.M;m&&typeof m.ma=="function"&&m.ma(),f.M=null,$n(f.U),f.g&&(m=f.g,f.g=null,m.abort(),m.ma())}function ec(f,m){try{var y=f.j;if(y.G!=0&&(y.g==f||tc(y.h,f))){if(!f.K&&tc(y.h,f)&&y.G==3){try{var w=y.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<f.F)Il(y),Cl(y);else break e;oc(y),gt(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=xo(g(y.Za,y),6e3));if(1>=kp(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Pr(y,11)}else if((f.K||y.g==f)&&Il(y),!I(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let fe=L[m];if(y.T=fe[0],fe=fe[1],y.G==2)if(fe[0]=="c"){y.K=fe[1],y.ia=fe[2];const ot=fe[3];ot!=null&&(y.la=ot,y.j.info("VER="+y.la));const st=fe[4];st!=null&&(y.Aa=st,y.j.info("SVER="+y.Aa));const fi=fe[5];fi!=null&&typeof fi=="number"&&0<fi&&(w=1.5*fi,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;const Kt=f.g;if(Kt){const Al=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var b=w.h;b.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(nc(b,b.h),b.h=null))}if(w.D){const lc=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;lc&&(w.ya=lc,Ce(w.I,w.D,lc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-f.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var q=f;if(w.qa=em(w,w.J?w.ia:null,w.W),q.K){xp(w.h,q);var Te=q,Xe=w.L;Xe&&(Te.I=Xe),Te.B&&(ju(Te),ml(Te)),w.g=q}else Yp(w);0<y.i.length&&wl(y)}else fe[0]!="stop"&&fe[0]!="close"||Pr(y,7);else y.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Pr(y,7):ic(y):fe[0]!="noop"&&y.l&&y.l.ta(fe),y.v=0)}}ko(4)}catch{}}var iw=class{constructor(f,m){this.g=f,this.map=m}};function Ap(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rp(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function kp(f){return f.h?1:f.g?f.g.size:0}function tc(f,m){return f.h?f.h==m:f.g?f.g.has(m):!1}function nc(f,m){f.g?f.g.add(m):f.h=m}function xp(f,m){f.h&&f.h==m?f.h=null:f.g&&f.g.has(m)&&f.g.delete(m)}Ap.prototype.cancel=function(){if(this.i=Pp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Pp(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let m=f.i;for(const y of f.g.values())m=m.concat(y.D);return m}return P(f.i)}function ow(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var m=[],y=f.length,w=0;w<y;w++)m.push(f[w]);return m}m=[],y=0;for(w in f)m[y++]=f[w];return m}function sw(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var m=[];f=f.length;for(var y=0;y<f;y++)m.push(y);return m}m=[],y=0;for(const w in f)m[y++]=w;return m}}}function Mp(f,m){if(f.forEach&&typeof f.forEach=="function")f.forEach(m,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,m,void 0);else for(var y=sw(f),w=ow(f),L=w.length,b=0;b<L;b++)m.call(void 0,w[b],y&&y[b],f)}var Np=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lw(f,m){if(f){f=f.split("&");for(var y=0;y<f.length;y++){var w=f[y].indexOf("="),L=null;if(0<=w){var b=f[y].substring(0,w);L=f[y].substring(w+1)}else b=f[y];m(b,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function xr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof xr){this.h=f.h,gl(this,f.j),this.o=f.o,this.g=f.g,yl(this,f.s),this.l=f.l;var m=f.i,y=new Vo;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Dp(this,y),this.m=f.m}else f&&(m=String(f).match(Np))?(this.h=!1,gl(this,m[1]||"",!0),this.o=No(m[2]||""),this.g=No(m[3]||"",!0),yl(this,m[4]),this.l=No(m[5]||"",!0),Dp(this,m[6]||"",!0),this.m=No(m[7]||"")):(this.h=!1,this.i=new Vo(null,this.h))}xr.prototype.toString=function(){var f=[],m=this.j;m&&f.push(Do(m,Vp,!0),":");var y=this.g;return(y||m=="file")&&(f.push("//"),(m=this.o)&&f.push(Do(m,Vp,!0),"@"),f.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&f.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&f.push("/"),f.push(Do(y,y.charAt(0)=="/"?cw:uw,!0))),(y=this.i.toString())&&f.push("?",y),(y=this.m)&&f.push("#",Do(y,fw)),f.join("")};function yn(f){return new xr(f)}function gl(f,m,y){f.j=y?No(m,!0):m,f.j&&(f.j=f.j.replace(/:$/,""))}function yl(f,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);f.s=m}else f.s=null}function Dp(f,m,y){m instanceof Vo?(f.i=m,hw(f.i,f.h)):(y||(m=Do(m,dw)),f.i=new Vo(m,f.h))}function Ce(f,m,y){f.i.set(m,y)}function vl(f){return Ce(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function No(f,m){return f?m?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Do(f,m,y){return typeof f=="string"?(f=encodeURI(f).replace(m,aw),y&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function aw(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Vp=/[#\/\?@]/g,uw=/[#\?:]/g,cw=/[#\?]/g,dw=/[#\?@]/g,fw=/#/g;function Vo(f,m){this.h=this.g=null,this.i=f||null,this.j=!!m}function Hn(f){f.g||(f.g=new Map,f.h=0,f.i&&lw(f.i,function(m,y){f.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Vo.prototype,t.add=function(f,m){Hn(this),this.i=null,f=ci(this,f);var y=this.g.get(f);return y||this.g.set(f,y=[]),y.push(m),this.h+=1,this};function Lp(f,m){Hn(f),m=ci(f,m),f.g.has(m)&&(f.i=null,f.h-=f.g.get(m).length,f.g.delete(m))}function Up(f,m){return Hn(f),m=ci(f,m),f.g.has(m)}t.forEach=function(f,m){Hn(this),this.g.forEach(function(y,w){y.forEach(function(L){f.call(m,L,w,this)},this)},this)},t.na=function(){Hn(this);const f=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let w=0;w<m.length;w++){const L=f[w];for(let b=0;b<L.length;b++)y.push(m[w])}return y},t.V=function(f){Hn(this);let m=[];if(typeof f=="string")Up(this,f)&&(m=m.concat(this.g.get(ci(this,f))));else{f=Array.from(this.g.values());for(let y=0;y<f.length;y++)m=m.concat(f[y])}return m},t.set=function(f,m){return Hn(this),this.i=null,f=ci(this,f),Up(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[m]),this.h+=1,this},t.get=function(f,m){return f?(f=this.V(f),0<f.length?String(f[0]):m):m};function Fp(f,m,y){Lp(f,m),0<y.length&&(f.i=null,f.g.set(ci(f,m),P(y)),f.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var w=m[y];const b=encodeURIComponent(String(w)),q=this.V(w);for(w=0;w<q.length;w++){var L=b;q[w]!==""&&(L+="="+encodeURIComponent(String(q[w]))),f.push(L)}}return this.i=f.join("&")};function ci(f,m){return m=String(m),f.j&&(m=m.toLowerCase()),m}function hw(f,m){m&&!f.j&&(Hn(f),f.i=null,f.g.forEach(function(y,w){var L=w.toLowerCase();w!=L&&(Lp(this,w),Fp(this,L,y))},f)),f.j=m}function pw(f,m){const y=new Po;if(u.Image){const w=new Image;w.onload=v(zn,y,"TestLoadImage: loaded",!0,m,w),w.onerror=v(zn,y,"TestLoadImage: error",!1,m,w),w.onabort=v(zn,y,"TestLoadImage: abort",!1,m,w),w.ontimeout=v(zn,y,"TestLoadImage: timeout",!1,m,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=f}else m(!1)}function mw(f,m){const y=new Po,w=new AbortController,L=setTimeout(()=>{w.abort(),zn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(f,{signal:w.signal}).then(b=>{clearTimeout(L),b.ok?zn(y,"TestPingServer: ok",!0,m):zn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),zn(y,"TestPingServer: error",!1,m)})}function zn(f,m,y,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(y)}catch{}}function gw(){this.g=new ZC}function yw(f,m,y){const w=y||"";try{Mp(f,function(L,b){let q=L;d(L)&&(q=Wt(L)),m.push(w+b+"="+encodeURIComponent(q))})}catch(L){throw m.push(w+"type="+encodeURIComponent("_badmap")),L}}function _l(f){this.l=f.Ub||null,this.j=f.eb||!1}A(_l,Ku),_l.prototype.g=function(){return new Tl(this.l,this.j)},_l.prototype.i=function(f){return function(){return f}}({});function Tl(f,m){qe.call(this),this.D=f,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Tl,qe),t=Tl.prototype,t.open=function(f,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=m,this.readyState=1,Uo(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(m.body=f),(this.D||u).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bp(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function bp(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var m=f.value?f.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!f.done}))&&(this.response=this.responseText+=m)}f.done?Lo(this):Uo(this),this.readyState==3&&bp(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Lo(this))},t.Qa=function(f){this.g&&(this.response=f,Lo(this))},t.ga=function(){this.g&&Lo(this)};function Lo(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Uo(f)}t.setRequestHeader=function(f,m){this.u.append(f,m)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,f.push(y[0]+": "+y[1]),y=m.next();return f.join(`\r
`)};function Uo(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Op(f){let m="";return U(f,function(y,w){m+=w,m+=":",m+=y,m+=`\r
`}),m}function rc(f,m,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=Op(y),typeof f=="string"?y!=null&&encodeURIComponent(String(y)):Ce(f,m,y))}function Ne(f){qe.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ne,qe);var vw=/^https?$/i,_w=["POST","PUT"];t=Ne.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,m,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);m=m?m.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qu.g(),this.v=this.o?pp(this.o):pp(Qu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(m,String(f),!0),this.B=!1}catch(b){Bp(this,b);return}if(f=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)y.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const b of w.keys())y.set(b,w.get(b));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(b=>b.toLowerCase()=="content-type"),L=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(_w,m,void 0))||w||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,q]of y)this.g.setRequestHeader(b,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gp(this),this.u=!0,this.g.send(f),this.u=!1}catch(b){Bp(this,b)}};function Bp(f,m){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=m,f.m=5,$p(f),El(f)}function $p(f){f.A||(f.A=!0,Qe(f,"complete"),Qe(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Qe(this,"complete"),Qe(this,"abort"),El(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qp(this):this.bb())},t.bb=function(){qp(this)};function qp(f){if(f.h&&typeof s<"u"&&(!f.v[1]||vn(f)!=4||f.Z()!=2)){if(f.u&&vn(f)==4)J(f.Ea,0,f);else if(Qe(f,"readystatechange"),vn(f)==4){f.h=!1;try{const q=f.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var w;if(w=q===0){var L=String(f.D).match(Np)[1]||null;!L&&u.self&&u.self.location&&(L=u.self.location.protocol.slice(0,-1)),w=!vw.test(L?L.toLowerCase():"")}y=w}if(y)Qe(f,"complete"),Qe(f,"success");else{f.m=6;try{var b=2<vn(f)?f.g.statusText:""}catch{b=""}f.l=b+" ["+f.Z()+"]",$p(f)}}finally{El(f)}}}}function El(f,m){if(f.g){Gp(f);const y=f.g,w=f.v[0]?()=>{}:null;f.g=null,f.v=null,m||Qe(f,"ready");try{y.onreadystatechange=w}catch{}}}function Gp(f){f.I&&(u.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function vn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var m=this.g.responseText;return f&&m.indexOf(f)==0&&(m=m.substring(f.length)),qn(m)}};function Hp(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Tw(f){const m={};f=(f.g&&2<=vn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<f.length;w++){if(I(f[w]))continue;var y=x(f[w]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const b=m[L]||[];m[L]=b,b.push(y)}S(m,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(f,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[f]||m}function zp(f){this.Aa=0,this.i=[],this.j=new Po,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fo("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fo("baseRetryDelayMs",5e3,f),this.cb=Fo("retryDelaySeedMs",1e4,f),this.Wa=Fo("forwardChannelMaxRetries",2,f),this.wa=Fo("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ap(f&&f.concurrentRequestLimit),this.Da=new gw,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zp.prototype,t.la=8,t.G=1,t.connect=function(f,m,y,w){gt(0),this.W=f,this.H=m||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=em(this,null,this.W),wl(this)};function ic(f){if(Wp(f),f.G==3){var m=f.U++,y=yn(f.I);if(Ce(y,"SID",f.K),Ce(y,"RID",m),Ce(y,"TYPE","terminate"),bo(f,y),m=new Gn(f,f.j,m),m.L=2,m.v=vl(yn(y)),y=!1,u.navigator&&u.navigator.sendBeacon)try{y=u.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&u.Image&&(new Image().src=m.v,y=!0),y||(m.g=tm(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ml(m)}jp(f)}function Cl(f){f.g&&(sc(f),f.g.cancel(),f.g=null)}function Wp(f){Cl(f),f.u&&(u.clearTimeout(f.u),f.u=null),Il(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function wl(f){if(!Rp(f.h)&&!f.s){f.s=!0;var m=f.Ga;$e||Z(),G||($e(),G=!0),Y.add(m,f),f.B=0}}function Ew(f,m){return kp(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=m.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=xo(g(f.Ga,f,m),Zp(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const L=new Gn(this,this.j,f);let b=this.o;if(this.S&&(b?(b=_(b),C(b,this.S)):b=this.S),this.m!==null||this.O||(L.H=b,b=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Jp(this,L,m),y=yn(this.I),Ce(y,"RID",f),Ce(y,"CVER",22),this.D&&Ce(y,"X-HTTP-Session-Id",this.D),bo(this,y),b&&(this.O?m="headers="+encodeURIComponent(String(Op(b)))+"&"+m:this.m&&rc(y,this.m,b)),nc(this.h,L),this.Ua&&Ce(y,"TYPE","init"),this.P?(Ce(y,"$req",m),Ce(y,"SID","null"),L.T=!0,Zu(L,y,null)):Zu(L,y,m),this.G=2}}else this.G==3&&(f?Kp(this,f):this.i.length==0||Rp(this.h)||Kp(this))};function Kp(f,m){var y;m?y=m.l:y=f.U++;const w=yn(f.I);Ce(w,"SID",f.K),Ce(w,"RID",y),Ce(w,"AID",f.T),bo(f,w),f.m&&f.o&&rc(w,f.m,f.o),y=new Gn(f,f.j,y,f.B+1),f.m===null&&(y.H=f.o),m&&(f.i=m.D.concat(f.i)),m=Jp(f,y,1e3),y.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),nc(f.h,y),Zu(y,w,m)}function bo(f,m){f.H&&U(f.H,function(y,w){Ce(m,w,y)}),f.l&&Mp({},function(y,w){Ce(m,w,y)})}function Jp(f,m,y){y=Math.min(f.i.length,y);var w=f.l?g(f.l.Na,f.l,f):null;e:{var L=f.i;let b=-1;for(;;){const q=["count="+y];b==-1?0<y?(b=L[0].g,q.push("ofs="+b)):b=0:q.push("ofs="+b);let Te=!0;for(let Xe=0;Xe<y;Xe++){let fe=L[Xe].g;const ot=L[Xe].map;if(fe-=b,0>fe)b=Math.max(0,L[Xe].g-100),Te=!1;else try{yw(ot,q,"req"+fe+"_")}catch{w&&w(ot)}}if(Te){w=q.join("&");break e}}}return f=f.i.splice(0,y),m.D=f,w}function Yp(f){if(!f.g&&!f.u){f.Y=1;var m=f.Fa;$e||Z(),G||($e(),G=!0),Y.add(m,f),f.v=0}}function oc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=xo(g(f.Fa,f),Zp(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Qp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=xo(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Cl(this),Qp(this))};function sc(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function Qp(f){f.g=new Gn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var m=yn(f.qa);Ce(m,"RID","rpc"),Ce(m,"SID",f.K),Ce(m,"AID",f.T),Ce(m,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ce(m,"TO",f.ja),Ce(m,"TYPE","xmlhttp"),bo(f,m),f.m&&f.o&&rc(m,f.m,f.o),f.L&&(f.g.I=f.L);var y=f.g;f=f.ia,y.L=1,y.v=vl(yn(m)),y.m=null,y.P=!0,wp(y,f)}t.Za=function(){this.C!=null&&(this.C=null,Cl(this),oc(this),gt(19))};function Il(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function Xp(f,m){var y=null;if(f.g==m){Il(f),sc(f),f.g=null;var w=2}else if(tc(f.h,m))y=m.D,xp(f.h,m),w=1;else return;if(f.G!=0){if(m.o)if(w==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=f.B;w=fl(),Qe(w,new _p(w,y)),wl(f)}else Yp(f);else if(L=m.s,L==3||L==0&&0<m.X||!(w==1&&Ew(f,m)||w==2&&oc(f)))switch(y&&0<y.length&&(m=f.h,m.i=m.i.concat(y)),L){case 1:Pr(f,5);break;case 4:Pr(f,10);break;case 3:Pr(f,6);break;default:Pr(f,2)}}}function Zp(f,m){let y=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(y*=2),y*m}function Pr(f,m){if(f.j.info("Error code "+m),m==2){var y=g(f.fb,f),w=f.Xa;const L=!w;w=new xr(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||gl(w,"https"),vl(w),L?pw(w.toString(),y):mw(w.toString(),y)}else gt(2);f.G=0,f.l&&f.l.sa(m),jp(f),Wp(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function jp(f){if(f.G=0,f.ka=[],f.l){const m=Pp(f.h);(m.length!=0||f.i.length!=0)&&(D(f.ka,m),D(f.ka,f.i),f.h.i.length=0,P(f.i),f.i.length=0),f.l.ra()}}function em(f,m,y){var w=y instanceof xr?yn(y):new xr(y);if(w.g!="")m&&(w.g=m+"."+w.g),yl(w,w.s);else{var L=u.location;w=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var b=new xr(null);w&&gl(b,w),m&&(b.g=m),L&&yl(b,L),y&&(b.l=y),w=b}return y=f.D,m=f.ya,y&&m&&Ce(w,y,m),Ce(w,"VER",f.la),bo(f,w),w}function tm(f,m,y){if(m&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=f.Ca&&!f.pa?new Ne(new _l({eb:y})):new Ne(f.pa),m.Ha(f.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function nm(){}t=nm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sl(){}Sl.prototype.g=function(f,m){return new Rt(f,m)};function Rt(f,m){qe.call(this),this.g=new zp(m),this.l=f,this.h=m&&m.messageUrlParams||null,f=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(f?f["X-WebChannel-Content-Type"]=m.messageContentType:f={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(f?f["X-WebChannel-Client-Profile"]=m.va:f={"X-WebChannel-Client-Profile":m.va}),this.g.S=f,(f=m&&m.Sb)&&!I(f)&&(this.g.m=f),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.D=m,f=this.h,f!==null&&m in f&&(f=this.h,m in f&&delete f[m])),this.j=new di(this)}A(Rt,qe),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){ic(this.g)},Rt.prototype.o=function(f){var m=this.g;if(typeof f=="string"){var y={};y.__data__=f,f=y}else this.u&&(y={},y.__data__=Wt(f),f=y);m.i.push(new iw(m.Ya++,f)),m.G==3&&wl(m)},Rt.prototype.N=function(){this.g.l=null,delete this.j,ic(this.g),delete this.g,Rt.aa.N.call(this)};function rm(f){Ju.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var m=f.__sm__;if(m){e:{for(const y in m){f=y;break e}f=void 0}(this.i=f)&&(f=this.i,m=m!==null&&f in m?m[f]:void 0),this.data=m}else this.data=f}A(rm,Ju);function im(){Yu.call(this),this.status=1}A(im,Yu);function di(f){this.g=f}A(di,nm),di.prototype.ua=function(){Qe(this.g,"a")},di.prototype.ta=function(f){Qe(this.g,new rm(f))},di.prototype.sa=function(f){Qe(this.g,new im)},di.prototype.ra=function(){Qe(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,Z0=function(){return new Sl},X0=function(){return fl()},Q0=Rr,Jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hl.NO_ERROR=0,hl.TIMEOUT=8,hl.HTTP_ERROR=6,pa=hl,Tp.COMPLETE="complete",Y0=Tp,mp.EventType=Ro,Ro.OPEN="a",Ro.CLOSE="b",Ro.ERROR="c",Ro.MESSAGE="d",qe.prototype.listen=qe.prototype.K,jo=mp,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,J0=Ne}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const qg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new mh("@firebase/firestore");function Ko(){return Qr.logLevel}function K(t,...e){if(Qr.logLevel<=ae.DEBUG){const n=e.map(xh);Qr.debug(`Firestore (${co}): ${t}`,...n)}}function Un(t,...e){if(Qr.logLevel<=ae.ERROR){const n=e.map(xh);Qr.error(`Firestore (${co}): ${t}`,...n)}}function Zi(t,...e){if(Qr.logLevel<=ae.WARN){const n=e.map(xh);Qr.warn(`Firestore (${co}): ${t}`,...n)}}function xh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+t;throw Un(e),new Error(e)}function _e(t,e){t||ee()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class Dx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vx{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new j0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new ct(e)}}class Lx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ux{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Lx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new Fx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ox(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function ji(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new We(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new We(0,0))}static max(){return new te(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends Fs{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const Bx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends Fs{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return Bx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Q(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Q(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new Q(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ve.fromString(e))}static fromName(e){return new X(Ve.fromString(e).popFirst(5))}static empty(){return new X(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ve(e.slice()))}}function $x(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new _r(i,X.empty(),e)}function qx(t){return new _r(t.readTime,t.key,-1)}class _r{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _r(te.min(),X.empty(),-1)}static max(){return new _r(te.max(),X.empty(),-1)}}function Gx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==Hx)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,o=0,s=!1;e.forEach(u=>{++i,u.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const o=e.length,s=new Array(o);let u=0;for(let c=0;c<o;c++){const d=c;n(e[d]).next(h=>{s[d]=h,++u,u===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new O((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function Wx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ph.oe=-1;function Mu(t){return t==null}function ja(t){return t===0&&1/t==-1/0}function Kx(t){return typeof t=="number"&&Number.isInteger(t)&&!ja(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||je.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,je.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class je{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??je.RED,this.left=i??je.EMPTY,this.right=o??je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new je(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return je.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}je.EMPTY=null,je.RED=!0,je.BLACK=!1;je.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,i,o){return this}insert(e,n,r){return new je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hg(this.data.getIterator())}getIteratorFrom(e){return new Hg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class Hg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new nt(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nE("Invalid base64 string: "+o):o}}(e);return new it(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const Jx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(_e(!!t),typeof t=="string"){let e=0;const n=Jx.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Nh(t){const e=t.mapValue.fields.__previous_value__;return Mh(e)?Nh(e):e}function bs(t){const e=Tr(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,i,o,s,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Os{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Os("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Os&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl={mapValue:{}};function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mh(t)?4:Xx(t)?9007199254740991:Qx(t)?10:11:ee()}function pn(t,e){if(t===e)return!0;const n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bs(t).isEqual(bs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Tr(i.timestampValue),u=Tr(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Xr(i.bytesValue).isEqual(Xr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ue(i.geoPointValue.latitude)===Ue(o.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ue(i.integerValue)===Ue(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ue(i.doubleValue),u=Ue(o.doubleValue);return s===u?ja(s)===ja(u):isNaN(s)&&isNaN(u)}return!1}(t,e);case 9:return ji(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Gg(s)!==Gg(u))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!pn(s[c],u[c])))return!1;return!0}(t,e);default:return ee()}}function Bs(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function eo(t,e){if(t===e)return 0;const n=Zr(t),r=Zr(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(o,s){const u=Ue(o.integerValue||o.doubleValue),c=Ue(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return zg(t.timestampValue,e.timestampValue);case 4:return zg(bs(t),bs(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(o,s){const u=Xr(o),c=Xr(s);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const u=o.split("/"),c=s.split("/");for(let d=0;d<u.length&&d<c.length;d++){const h=he(u[d],c[d]);if(h!==0)return h}return he(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const u=he(Ue(o.latitude),Ue(s.latitude));return u!==0?u:he(Ue(o.longitude),Ue(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wg(t.arrayValue,e.arrayValue);case 10:return function(o,s){var u,c,d,h;const p=o.fields||{},g=s.fields||{},v=(u=p.value)===null||u===void 0?void 0:u.arrayValue,A=(c=g.value)===null||c===void 0?void 0:c.arrayValue,P=he(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:Wg(v,A)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Kl.mapValue&&s===Kl.mapValue)return 0;if(o===Kl.mapValue)return 1;if(s===Kl.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),d=s.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const g=he(c[p],h[p]);if(g!==0)return g;const v=eo(u[c[p]],d[h[p]]);if(v!==0)return v}return he(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ee()}}function zg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Tr(t),r=Tr(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function Wg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=eo(n[i],r[i]);if(o)return o}return he(n.length,r.length)}function to(t){return Yd(t)}function Yd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Yd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Yd(n.fields[s])}`;return i+"}"}(t.mapValue):ee()}function Qd(t){return!!t&&"integerValue"in t}function Dh(t){return!!t&&"arrayValue"in t}function Kg(t){return!!t&&"nullValue"in t}function Jg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ma(t){return!!t&&"mapValue"in t}function Qx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Xx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ma(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fs(n)}setAll(e){let n=et.emptyPath(),r={},i=[];e.forEach((s,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}s?r[u.lastSegment()]=fs(s):i.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());ma(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ma(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fo(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ft(fs(this.value))}}function rE(t){const e=[];return fo(t.fields,(n,r)=>{const i=new et([n]);if(ma(r)){const o=rE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,i,o,s,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=u}static newInvalidDocument(e){return new ft(e,0,te.min(),te.min(),te.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,i){return new ft(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new ft(e,2,n,te.min(),te.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,te.min(),te.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.position=e,this.inclusive=n}}function Yg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=X.comparator(X.fromName(s.referenceValue),n.key):r=eo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Zx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{}class He extends iE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eP(e,n,r):n==="array-contains"?new rP(e,r):n==="in"?new iP(e,r):n==="not-in"?new oP(e,r):n==="array-contains-any"?new sP(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tP(e,r):new nP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(eo(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends iE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new mn(e,n)}matches(e){return oE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function oE(t){return t.op==="and"}function sE(t){return jx(t)&&oE(t)}function jx(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function Xd(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+to(t.value);if(sE(t))return t.filters.map(e=>Xd(e)).join(",");{const e=t.filters.map(n=>Xd(n)).join(",");return`${t.op}(${e})`}}function lE(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof mn?function(r,i){return i instanceof mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,u)=>o&&lE(s,i.filters[u]),!0):!1}(t,e):void ee()}function aE(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(aE).join(" ,")+"}"}(t):"Filter"}class eP extends He{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class tP extends He{constructor(e,n){super(e,"in",n),this.keys=uE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nP extends He{constructor(e,n){super(e,"not-in",n),this.keys=uE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class rP extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dh(n)&&Bs(n.arrayValue,this.value)}}class iP extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bs(this.value.arrayValue,n)}}class oP extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bs(this.value.arrayValue,n)}}class sP extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n=null,r=[],i=[],o=null,s=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=u,this.ue=null}}function Xg(t,e=null,n=[],r=[],i=null,o=null,s=null){return new lP(t,e,n,r,i,o,s)}function Vh(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>to(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>to(r)).join(",")),e.ue=n}return e.ue}function Lh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Zx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qg(t.startAt,e.startAt)&&Qg(t.endAt,e.endAt)}function Zd(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n=null,r=[],i=[],o=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function aP(t,e,n,r,i,o,s,u){return new Nu(t,e,n,r,i,o,s,u)}function Uh(t){return new Nu(t)}function Zg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uP(t){return t.collectionGroup!==null}function hs(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new nt(et.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new tu(o,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new tu(et.keyField(),r))}return e.ce}function dn(t){const e=ne(t);return e.le||(e.le=cP(e,hs(t))),e.le}function cP(t,e){if(t.limitType==="F")return Xg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new tu(i.field,o)});const n=t.endAt?new eu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new eu(t.startAt.position,t.startAt.inclusive):null;return Xg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jd(t,e,n){return new Nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Du(t,e){return Lh(dn(t),dn(e))&&t.limitType===e.limitType}function cE(t){return`${Vh(dn(t))}|lt:${t.limitType}`}function pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aE(i)).join(", ")}]`),Mu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>to(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>to(i)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Vu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):X.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of hs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,u,c){const d=Yg(s,u,c);return s.inclusive?d<=0:d<0}(r.startAt,hs(r),i)||r.endAt&&!function(s,u,c){const d=Yg(s,u,c);return s.inclusive?d>=0:d>0}(r.endAt,hs(r),i))}(t,e)}function dP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dE(t){return(e,n)=>{let r=!1;for(const i of hs(t)){const o=fP(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function fP(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(o,s,u){const c=s.data.field(o),d=u.data.field(o);return c!==null&&d!==null?eo(c,d):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return tE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new Me(X.comparator);function Fn(){return hP}const fE=new Me(X.comparator);function es(...t){let e=fE;for(const n of t)e=e.insert(n.key,n);return e}function hE(t){let e=fE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function br(){return ps()}function pE(){return ps()}function ps(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const pP=new Me(X.comparator),mP=new nt(X.comparator);function se(...t){let e=mP;for(const n of t)e=e.add(n);return e}const gP=new nt(he);function yP(){return gP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function mE(t){return{integerValue:""+t}}function vP(t,e){return Kx(e)?mE(e):Fh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._=void 0}}function _P(t,e,n){return t instanceof nu?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Mh(o)&&(o=Nh(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof $s?yE(t,e):t instanceof qs?vE(t,e):function(i,o){const s=gE(i,o),u=jg(s)+jg(i.Pe);return Qd(s)&&Qd(i.Pe)?mE(u):Fh(i.serializer,u)}(t,e)}function TP(t,e,n){return t instanceof $s?yE(t,e):t instanceof qs?vE(t,e):n}function gE(t,e){return t instanceof ru?function(r){return Qd(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class nu extends Lu{}class $s extends Lu{constructor(e){super(),this.elements=e}}function yE(t,e){const n=_E(e);for(const r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}class qs extends Lu{constructor(e){super(),this.elements=e}}function vE(t,e){let n=_E(e);for(const r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}class ru extends Lu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jg(t){return Ue(t.integerValue||t.doubleValue)}function _E(t){return Dh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function EP(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $s&&i instanceof $s||r instanceof qs&&i instanceof qs?ji(r.elements,i.elements,pn):r instanceof ru&&i instanceof ru?pn(r.Pe,i.Pe):r instanceof nu&&i instanceof nu}(t.transform,e.transform)}class CP{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ga(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uu{}function TE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new CE(t.key,xn.none()):new rl(t.key,t.data,xn.none());{const n=t.data,r=Ft.empty();let i=new nt(et.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ni(t.key,r,new Zt(i.toArray()),xn.none())}}function wP(t,e,n){t instanceof rl?function(i,o,s){const u=i.value.clone(),c=ty(i.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ni?function(i,o,s){if(!ga(i.precondition,o))return void o.convertToUnknownDocument(s.version);const u=ty(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(EE(i)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ms(t,e,n,r){return t instanceof rl?function(o,s,u,c){if(!ga(o.precondition,s))return u;const d=o.value.clone(),h=ny(o.fieldTransforms,c,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ni?function(o,s,u,c){if(!ga(o.precondition,s))return u;const d=ny(o.fieldTransforms,c,s),h=s.data;return h.setAll(EE(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,u){return ga(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u}(t,e,n)}function IP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=gE(r.transform,i||null);o!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,o))}return n||null}function ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ji(r,i,(o,s)=>EP(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rl extends Uu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ni extends Uu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function EE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ty(t,e,n){const r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,TP(s,u,n[i]))}return r}function ny(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,_P(o,s,e))}return r}class CE extends Uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SP extends Uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&wP(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ms(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ms(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let u=this.applyToLocalView(s,o.mutatedFields);u=n.has(i.key)?null:u;const c=TE(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(n,r)=>ey(n,r))&&ji(this.baseMutations,e.baseMutations,(n,r)=>ey(n,r))}}class bh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return pP}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new bh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ue;function xP(t){switch(t){default:return ee();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function wE(t){if(t===void 0)return Un("GRPC error has no .code"),B.UNKNOWN;switch(t){case Oe.OK:return B.OK;case Oe.CANCELLED:return B.CANCELLED;case Oe.UNKNOWN:return B.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return B.INTERNAL;case Oe.UNAVAILABLE:return B.UNAVAILABLE;case Oe.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Oe.NOT_FOUND:return B.NOT_FOUND;case Oe.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Oe.ABORTED:return B.ABORTED;case Oe.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Oe.DATA_LOSS:return B.DATA_LOSS;default:return ee()}}(ue=Oe||(Oe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new qr([4294967295,4294967295],0);function ry(t){const e=PP().encode(t),n=new K0;return n.update(e),new Uint8Array(n.digest())}function iy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new qr([n,r],0),new qr([i,o],0)]}class Oh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ts(`Invalid padding: ${n}`);if(r<0)throw new ts(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ts(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ts(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=qr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(qr.fromNumber(r)));return i.compare(MP)===1&&(i=new qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ry(e),[r,i]=iy(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Oh(o,i,n);return r.forEach(u=>s.insert(u)),s}insert(e){if(this.Ie===0)return;const n=ry(e),[r,i]=iy(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ts extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fu(te.min(),i,new Me(he),Fn(),se())}}class il{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new il(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class IE{constructor(e,n){this.targetId=e,this.me=n}}class SE{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class oy{constructor(){this.fe=0,this.ge=ly(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ly()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class NP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fn(),this.qe=sy(),this.Qe=new Me(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(Zd(o))if(r===0){const s=new X(o.path);this.Ue(n,s,ft.newNoDocument(s,te.min()))}else _e(r===1);else{const s=this.Ye(n);if(s!==r){const u=this.Ze(e),c=u?this.Xe(u,e,s):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,u;try{s=Xr(r).toUint8Array()}catch(c){if(c instanceof nE)return Zi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Oh(s,i,o)}catch(c){return Zi(c instanceof ts?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),u=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const u=this.Je(s);if(u){if(o.current&&Zd(u.target)){const c=new X(u.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,ft.newNoDocument(c,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=se();this.qe.forEach((o,s)=>{let u=!0;s.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Fu(e,n,this.Qe,this.ke,r);return this.ke=Fn(),this.qe=sy(),this.Qe=new Me(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new oy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new nt(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new oy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sy(){return new Me(X.comparator)}function ly(){return new Me(X.comparator)}const DP={asc:"ASCENDING",desc:"DESCENDING"},VP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LP={and:"AND",or:"OR"};class UP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ef(t,e){return t.useProto3Json||Mu(e)?e:{value:e}}function iu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FP(t,e){return iu(t,e.toTimestamp())}function fn(t){return _e(!!t),te.fromTimestamp(function(n){const r=Tr(n);return new We(r.seconds,r.nanos)}(t))}function Bh(t,e){return tf(t,e).canonicalString()}function tf(t,e){const n=function(i){return new Ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RE(t){const e=Ve.fromString(t);return _e(NE(e)),e}function nf(t,e){return Bh(t.databaseId,e.path)}function $c(t,e){const n=RE(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(xE(n))}function kE(t,e){return Bh(t.databaseId,e)}function bP(t){const e=RE(t);return e.length===4?Ve.emptyPath():xE(e)}function rf(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xE(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ay(t,e,n){return{name:nf(t,e),fields:n.value.mapValue.fields}}function OP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(_e(h===void 0||typeof h=="string"),it.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),it.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(d){const h=d.code===void 0?B.UNKNOWN:wE(d.code);return new Q(h,d.message||"")}(s);n=new SE(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$c(t,r.document.name),o=fn(r.document.updateTime),s=r.document.createTime?fn(r.document.createTime):te.min(),u=new Ft({mapValue:{fields:r.document.fields}}),c=ft.newFoundDocument(i,o,s,u),d=r.targetIds||[],h=r.removedTargetIds||[];n=new ya(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$c(t,r.document),o=r.readTime?fn(r.readTime):te.min(),s=ft.newNoDocument(i,o),u=r.removedTargetIds||[];n=new ya([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$c(t,r.document),o=r.removedTargetIds||[];n=new ya([],o,i,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new kP(i,o),u=r.targetId;n=new IE(u,s)}}return n}function BP(t,e){let n;if(e instanceof rl)n={update:ay(t,e.key,e.value)};else if(e instanceof CE)n={delete:nf(t,e.key)};else if(e instanceof ni)n={update:ay(t,e.key,e.data),updateMask:YP(e.fieldMask)};else{if(!(e instanceof SP))return ee();n={verify:nf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const u=s.transform;if(u instanceof nu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof $s)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof qs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ru)return{fieldPath:s.field.canonicalString(),increment:u.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:FP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee()}(t,e.precondition)),n}function $P(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?fn(i.updateTime):fn(o);return s.isEqual(te.min())&&(s=fn(o)),new CP(s,i.transformResults||[])}(n,e))):[]}function qP(t,e){return{documents:[kE(t,e.path)]}}function GP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kE(t,i);const o=function(d){if(d.length!==0)return ME(mn.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:mi(g.field),direction:WP(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const u=ef(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function HP(t){let e=bP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const g=PE(p);return g instanceof mn&&sE(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(A){return new tu(gi(A.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,Mu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,v=p.values||[];return new eu(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,v=p.values||[];return new eu(v,g)}(n.endAt)),aP(e,i,s,o,u,"F",c,d)}function zP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gi(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gi(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=gi(n.unaryFilter.field);return He.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=gi(n.unaryFilter.field);return He.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return He.create(gi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>PE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function WP(t){return DP[t]}function KP(t){return VP[t]}function JP(t){return LP[t]}function mi(t){return{fieldPath:t.canonicalString()}}function gi(t){return et.fromServerFormat(t.fieldPath)}function ME(t){return t instanceof He?function(n){if(n.op==="=="){if(Jg(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NAN"}};if(Kg(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jg(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NOT_NAN"}};if(Kg(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mi(n.field),op:KP(n.op),value:n.value}}}(t):t instanceof mn?function(n){const r=n.getFilters().map(i=>ME(i));return r.length===1?r[0]:{compositeFilter:{op:JP(n.op),filters:r}}}(t):ee()}function YP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r,i,o=te.min(),s=te.min(),u=it.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.ct=e}}function XP(t){const e=HP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.un=new jP}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(_r.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class jP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nt(Ve.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new no(0)}static kn(){return new no(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ms(r.mutation,i,Zt.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=br();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=es();return o.forEach((u,c)=>{s=s.insert(u,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,u)=>{n.set(s,u)})})}computeViews(e,n,r,i){let o=Fn();const s=ps(),u=function(){return ps()}();return n.forEach((c,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof ni)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),ms(h.mutation,d,h.mutation.getFieldMask(),We.now())):s.set(d.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>s.set(d,h)),n.forEach((d,h)=>{var p;return u.set(d,new tM(h,(p=s.get(d))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(e,n){const r=ps();let i=new Me((s,u)=>s-u),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const u of s)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||Zt.empty();h=u.applyToLocalView(d,h),r.set(c,h);const p=(i.get(u.batchId)||se()).add(c);i=i.insert(u.batchId,p)})}).next(()=>{const s=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,h=c.value,p=pE();h.forEach(g=>{if(!o.has(g)){const v=TE(n.get(g),r.get(g));v!==null&&p.set(g,v),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return X.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(br());let u=-1,c=o;return s.next(d=>O.forEach(d,(h,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),o.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,se())).next(h=>({batchId:u,changes:hE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=es();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=es();return this.indexManager.getCollectionParents(e,o).next(u=>O.forEach(u,c=>{const d=function(p,g){return new Nu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,d)=>{const h=d.getKey();s.get(h)===null&&(s=s.insert(h,ft.newInvalidDocument(h)))});let u=es();return s.forEach((c,d)=>{const h=o.get(c);h!==void 0&&ms(h.mutation,d,Zt.empty(),We.now()),Vu(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:XP(i.bundledQuery),readTime:fn(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this.overlays=new Me(X.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=br();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=br(),o=n.length+1,s=new X(n.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((d,h)=>d-h);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=br(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const u=br(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>u.set(d,h)),!(u.size()>=i)););return O.resolve(u)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new RP(n,r));let o=this.Ir.get(n);o===void 0&&(o=se(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this.Tr=new nt(Ke.Er),this.dr=new nt(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ke(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Ve([])),r=new Ke(n,e),i=new Ke(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Ve([])),r=new Ke(n,e),i=new Ke(n,e+1);let o=se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ke(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new nt(Ke.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new AP(o,n,r,i);this.mutationQueue.push(s);for(const u of i)this.br=this.br.add(new Ke(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const u=this.Dr(s.wr);o.push(u)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(he);return n.forEach(i=>{const o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],u=>{r=r.add(u.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;X.isDocumentKey(o)||(o=o.child(""));const s=new Ke(new X(o),0);let u=new nt(he);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(c.wr)),!0)},s),O.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{const o=new Ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ke(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.Mr=e,this.docs=function(){return new Me(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ft.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Fn();const s=n.path,u=new X(s.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||Gx(qx(h),r)<=0||(i.has(h.key)||Vu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ee()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aM(this)}getSize(e){return O.resolve(this.size)}}class aM extends eM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.persistence=e,this.Nr=new ho(n=>Vh(n),Lh),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new $h,this.targetCount=0,this.kr=no.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new no(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ph(0),this.Kr=!1,this.Kr=!0,this.$r=new oM,this.referenceDelegate=e(this),this.Ur=new uM(this),this.indexManager=new ZP,this.remoteDocumentCache=function(i){return new lM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new QP(n),this.Gr=new rM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new dM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class dM extends zx{constructor(e){super(),this.currentSequenceNumber=e}}class qh{constructor(e){this.persistence=e,this.Jr=new $h,this.Yr=null}static Zr(e){return new qh(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const i=X.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=se(),i=se();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Gh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hA()?8:Wx(mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new fM;return this.Xi(e,n,s).next(u=>{if(o.result=u,this.zi)return this.es(e,n,s,u.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ko()<=ae.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Ko()<=ae.DEBUG&&K("QueryEngine","Query:",pi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ko()<=ae.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):O.resolve())}Yi(e,n){if(Zg(n))return O.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jd(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=se(...o);return this.Ji.getDocuments(e,s).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,s,c.readTime)?this.Yi(e,jd(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,i){return Zg(n)||i.isEqual(te.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?O.resolve(null):(Ko()<=ae.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pi(n)),this.rs(e,s,n,$x(i,-1)).next(u=>u))})}ts(e,n){let r=new nt(dE(e));return n.forEach((i,o)=>{Vu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Ko()<=ae.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",pi(n)),this.Ji.getDocumentsMatchingQuery(e,n,_r.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Me(he),this._s=new ho(o=>Vh(o),Lh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mM(t,e,n,r){return new pM(t,e,n,r)}async function DE(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],u=[];let c=se();for(const d of i){s.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of o){u.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:u}))})})}function gM(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,h){const p=d.batch,g=p.keys();let v=O.resolve();return g.forEach(A=>{v=v.next(()=>h.getEntry(c,A)).next(P=>{const D=d.docVersions.get(A);_e(D!==null),P.version.compareTo(D)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),v.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=se();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function VE(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function yM(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const u=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;u.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(it.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(P,D,R){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(g,v,h)&&u.push(n.Ur.updateTargetData(o,v))});let c=Fn(),d=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),u.push(vM(o,s,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(te.min())){const h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(h)}return O.waitFor(u).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(n.os=i,o))}function vM(t,e,n){let r=se(),i=se();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Fn();return n.forEach((u,c)=>{const d=o.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):K("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function _M(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function TM(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new rr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function of(t,e,n){const r=ne(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!nl(s))throw s;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function uy(t,e,n){const r=ne(t);let i=te.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,h){const p=ne(c),g=p._s.get(h);return g!==void 0?O.resolve(p.os.get(g)):p.Ur.getTargetData(d,h)}(r,s,dn(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,u.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:se())).next(u=>(EM(r,dP(e),u),{documents:u,Ts:o})))}function EM(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class cy{constructor(){this.activeTargetIds=yP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CM{constructor(){this.so=new cy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function qc(){return Jl===null?Jl=function(){return 268435456+Math.round(2147483648*Math.random())}():Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class AM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const u=qc(),c=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${u}:`,c,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(n,c,d,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${u}: `,h),h),h=>{throw Zi("RestConnection",`RPC '${n}' ${u} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(n,r,i,o,s,u){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=IM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=qc();return new Promise((s,u)=>{const c=new J0;c.setWithCredentials(!0),c.listenOnce(Y0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case pa.NO_ERROR:const h=c.getResponseJson();K(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case pa.TIMEOUT:K(ut,`RPC '${e}' ${o} timed out`),u(new Q(B.DEADLINE_EXCEEDED,"Request time out"));break;case pa.HTTP_ERROR:const p=c.getStatus();if(K(ut,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const A=function(D){const R=D.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(R)>=0?R:B.UNKNOWN}(v.status);u(new Q(A,v.message))}else u(new Q(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Q(B.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{K(ut,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);K(ut,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=qc(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Z0(),u=X0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");K(ut,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=s.createWebChannel(h,c);let g=!1,v=!1;const A=new SM({Io:D=>{v?K(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(K(ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),K(ut,`RPC '${e}' stream ${i} sending:`,D),p.send(D))},To:()=>p.close()}),P=(D,R,I)=>{D.listen(R,k=>{try{I(k)}catch(V){setTimeout(()=>{throw V},0)}})};return P(p,jo.EventType.OPEN,()=>{v||(K(ut,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),P(p,jo.EventType.CLOSE,()=>{v||(v=!0,K(ut,`RPC '${e}' stream ${i} transport closed`),A.So())}),P(p,jo.EventType.ERROR,D=>{v||(v=!0,Zi(ut,`RPC '${e}' stream ${i} transport errored:`,D),A.So(new Q(B.UNAVAILABLE,"The operation could not be completed")))}),P(p,jo.EventType.MESSAGE,D=>{var R;if(!v){const I=D.data[0];_e(!!I);const k=I,V=k.error||((R=k[0])===null||R===void 0?void 0:R.error);if(V){K(ut,`RPC '${e}' stream ${i} received error:`,V);const F=V.status;let U=function(T){const C=Oe[T];if(C!==void 0)return wE(C)}(F),S=V.message;U===void 0&&(U=B.INTERNAL,S="Unknown error status: "+F+" with message "+V.message),v=!0,A.So(new Q(U,S)),p.close()}else K(ut,`RPC '${e}' stream ${i} received:`,I),A.bo(I)}}),P(u,Q0.STAT_EVENT,D=>{D.stat===Jd.PROXY?K(ut,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Jd.NOPROXY&&K(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function Gc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){return new UP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n,r,i,o,s,u,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new LE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Q(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RM extends UE{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=OP(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?fn(s.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=rf(this.serializer),n.addTarget=function(o,s){let u;const c=s.target;if(u=Zd(c)?{documents:qP(o,c)}:{query:GP(o,c)._t},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=AE(o,s.resumeToken);const d=ef(o,s.expectedCount);d!==null&&(u.expectedCount=d)}else if(s.snapshotVersion.compareTo(te.min())>0){u.readTime=iu(o,s.snapshotVersion.toTimestamp());const d=ef(o,s.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=zP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=rf(this.serializer),n.removeTarget=e,this.a_(n)}}class kM extends UE{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$P(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=rf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>BP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,tf(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(B.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Lo(e,tf(n,r),i,s,u,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(B.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class PM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Un(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{ri(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=ne(c);d.L_.add(4),await ol(d),d.q_.set("Unknown"),d.L_.delete(4),await Ou(d)}(this))})}),this.q_=new PM(r,i)}}async function Ou(t){if(ri(t))for(const e of t.B_)await e(!0)}async function ol(t){for(const e of t.B_)await e(!1)}function FE(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Kh(n)?Wh(n):po(n).r_()&&zh(n,e))}function Hh(t,e){const n=ne(t),r=po(n);n.N_.delete(e),r.r_()&&bE(n,e),n.N_.size===0&&(r.r_()?r.o_():ri(n)&&n.q_.set("Unknown"))}function zh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(t).A_(e)}function bE(t,e){t.Q_.xe(e),po(t).R_(e)}function Wh(t){t.Q_=new NP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),po(t).start(),t.q_.v_()}function Kh(t){return ri(t)&&!po(t).n_()&&t.N_.size>0}function ri(t){return ne(t).L_.size===0}function OE(t){t.Q_=void 0}async function NM(t){t.q_.set("Online")}async function DM(t){t.N_.forEach((e,n)=>{zh(t,e)})}async function VM(t,e){OE(t),Kh(t)?(t.q_.M_(e),Wh(t)):t.q_.set("Unknown")}async function LM(t,e,n){if(t.q_.set("Online"),e instanceof SE&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const u of o.targetIds)i.N_.has(u)&&(await i.remoteSyncer.rejectListen(u,s),i.N_.delete(u),i.Q_.removeTarget(u))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ou(t,r)}else if(e instanceof ya?t.Q_.Ke(e):e instanceof IE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await VE(t.localStore);n.compareTo(r)>=0&&await function(o,s){const u=o.Q_.rt(s);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.N_.get(d);h&&o.N_.set(d,h.withResumeToken(c.resumeToken,s))}}),u.targetMismatches.forEach((c,d)=>{const h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),bE(o,c);const p=new rr(h.target,c,d,h.sequenceNumber);zh(o,p)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await ou(t,r)}}async function ou(t,e,n){if(!nl(e))throw e;t.L_.add(1),await ol(t),t.q_.set("Offline"),n||(n=()=>VE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ou(t)})}function BE(t,e){return e().catch(n=>ou(t,n,e))}async function Bu(t){const e=ne(t),n=Er(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UM(e);)try{const i=await _M(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,FM(e,i)}catch(i){await ou(e,i)}$E(e)&&qE(e)}function UM(t){return ri(t)&&t.O_.length<10}function FM(t,e){t.O_.push(e);const n=Er(t);n.r_()&&n.V_&&n.m_(e.mutations)}function $E(t){return ri(t)&&!Er(t).n_()&&t.O_.length>0}function qE(t){Er(t).start()}async function bM(t){Er(t).p_()}async function OM(t){const e=Er(t);for(const n of t.O_)e.m_(n.mutations)}async function BM(t,e,n){const r=t.O_.shift(),i=bh.from(r,e,n);await BE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Bu(t)}async function $M(t,e){e&&Er(t).V_&&await async function(r,i){if(function(s){return xP(s)&&s!==B.ABORTED}(i.code)){const o=r.O_.shift();Er(r).s_(),await BE(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Bu(r)}}(t,e),$E(t)&&qE(t)}async function fy(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=ri(n);n.L_.add(3),await ol(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ou(n)}async function qM(t,e){const n=ne(t);e?(n.L_.delete(2),await Ou(n)):e||(n.L_.add(2),await ol(n),n.q_.set("Unknown"))}function po(t){return t.K_||(t.K_=function(n,r,i){const o=ne(n);return o.w_(),new RM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:NM.bind(null,t),Ro:DM.bind(null,t),mo:VM.bind(null,t),d_:LM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Kh(t)?Wh(t):t.q_.set("Unknown")):(await t.K_.stop(),OE(t))})),t.K_}function Er(t){return t.U_||(t.U_=function(n,r,i){const o=ne(n);return o.w_(),new kM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bM.bind(null,t),mo:$M.bind(null,t),f_:OM.bind(null,t),g_:BM.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bu(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,u=new Jh(e,n,s,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yh(t,e){if(Un("AsyncQueue",`${e}: ${t}`),nl(t))return new Q(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=es(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new Oi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Oi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.W_=new Me(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ro{constructor(e,n,r,i,o,s,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(u=>{s.push({type:0,doc:u})}),new ro(e,n,Oi.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HM{constructor(){this.queries=py(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ne(n),o=i.queries;i.queries=py(),o.forEach((s,u)=>{for(const c of u.j_)c.onError(r)})})(this,new Q(B.ABORTED,"Firestore shutting down"))}}function py(){return new ho(t=>cE(t),Du)}async function zM(t,e){const n=ne(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new GM,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const u=Yh(s,`Initialization of query '${pi(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Qh(n)}async function WM(t,e){const n=ne(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KM(t,e){const n=ne(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const u of s.j_)u.X_(i)&&(r=!0);s.z_=i}}r&&Qh(n)}function JM(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function Qh(t){t.Y_.forEach(e=>{e.next()})}var sf,my;(my=sf||(sf={})).ea="default",my.Cache="cache";class YM{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.key=e}}class HE{constructor(e){this.key=e}}class QM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=dE(e),this.Ra=new Oi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new hy,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),v=Vu(this.query,p)?p:null,A=!!g&&this.mutatedKeys.has(g.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let D=!1;g&&v?g.data.isEqual(v.data)?A!==P&&(r.track({type:3,doc:v}),D=!0):this.ga(g,v)||(r.track({type:2,doc:v}),D=!0,(c&&this.Aa(v,c)>0||d&&this.Aa(v,d)<0)&&(u=!0)):!g&&v?(r.track({type:0,doc:v}),D=!0):g&&!v&&(r.track({type:1,doc:g}),D=!0,(c||d)&&(u=!0)),D&&(v?(s=s.add(v),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((h,p)=>function(v,A){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return P(v)-P(A)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const u=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,s.length!==0||d?{snapshot:new ro(this.query,e.Ra,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new HE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new GE(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ro.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZM{constructor(e){this.key=e,this.va=!1}}class jM{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ho(u=>cE(u),Du),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(X.comparator),this.Na=new Map,this.La=new $h,this.Ba={},this.ka=new Map,this.qa=no.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eN(t,e,n=!0){const r=QE(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await zE(r,e,n,!0),i}async function tN(t,e){const n=QE(t);await zE(n,e,!0,!1)}async function zE(t,e,n,r){const i=await TM(t.localStore,dn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await nN(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&FE(t.remoteStore,i),u}async function nN(t,e,n,r,i){t.Ka=(p,g,v)=>async function(P,D,R,I){let k=D.view.ma(R);k.ns&&(k=await uy(P.localStore,D.query,!1).then(({documents:S})=>D.view.ma(S,k)));const V=I&&I.targetChanges.get(D.targetId),F=I&&I.targetMismatches.get(D.targetId)!=null,U=D.view.applyChanges(k,P.isPrimaryClient,V,F);return yy(P,D.targetId,U.wa),U.snapshot}(t,p,g,v);const o=await uy(t.localStore,e,!0),s=new QM(e,o.Ts),u=s.ma(o.documents),c=il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(u,t.isPrimaryClient,c);yy(t,n,d.wa);const h=new XM(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function rN(t,e,n){const r=ne(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Du(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await of(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Hh(r.remoteStore,i.targetId),lf(r,i.targetId)}).catch(tl)):(lf(r,i.targetId),await of(r.localStore,i.targetId,!0))}async function iN(t,e){const n=ne(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hh(n.remoteStore,r.targetId))}async function oN(t,e,n){const r=fN(t);try{const i=await function(s,u){const c=ne(s),d=We.now(),h=u.reduce((v,A)=>v.add(A.key),se());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let A=Fn(),P=se();return c.cs.getEntries(v,h).next(D=>{A=D,A.forEach((R,I)=>{I.isValidDocument()||(P=P.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,A)).next(D=>{p=D;const R=[];for(const I of u){const k=IP(I,p.get(I.key).overlayedDocument);k!=null&&R.push(new ni(I.key,k,rE(k.value.mapValue),xn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,R,u)}).next(D=>{g=D;const R=D.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(v,D.batchId,R)})}).then(()=>({batchId:g.batchId,changes:hE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,c){let d=s.Ba[s.currentUser.toKey()];d||(d=new Me(he)),d=d.insert(u,c),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,n),await sl(r,i.changes),await Bu(r.remoteStore)}catch(i){const o=Yh(i,"Failed to persist write");n.reject(o)}}async function WE(t,e){const n=ne(t);try{const r=await yM(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?_e(s.va):i.removedDocuments.size>0&&(_e(s.va),s.va=!1))}),await sl(n,r,e)}catch(r){await tl(r)}}function gy(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const u=s.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(s,u){const c=ne(s);c.onlineState=u;let d=!1;c.queries.forEach((h,p)=>{for(const g of p.j_)g.Z_(u)&&(d=!0)}),d&&Qh(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sN(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Me(X.comparator);s=s.insert(o,ft.newNoDocument(o,te.min()));const u=se().add(o),c=new Fu(te.min(),new Map,new Me(he),s,u);await WE(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),Xh(r)}else await of(r.localStore,e,!1).then(()=>lf(r,e,n)).catch(tl)}async function lN(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await gM(n.localStore,e);JE(n,r,null),KE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sl(n,i)}catch(i){await tl(i)}}async function aN(t,e,n){const r=ne(t);try{const i=await function(s,u){const c=ne(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,u).next(p=>(_e(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);JE(r,e,n),KE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sl(r,i)}catch(i){await tl(i)}}function KE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function JE(t,e,n){const r=ne(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function lf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||YE(t,r)})}function YE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Hh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Xh(t))}function yy(t,e,n){for(const r of n)r instanceof GE?(t.La.addReference(r.key,e),uN(t,r)):r instanceof HE?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||YE(t,r.key)):ee()}function uN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),Xh(t))}function Xh(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Ve.fromString(e)),r=t.qa.next();t.Na.set(r,new ZM(n)),t.Oa=t.Oa.insert(n,r),FE(t.remoteStore,new rr(dn(Uh(n.path)),r,"TargetPurposeLimboResolution",Ph.oe))}}async function sl(t,e,n){const r=ne(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{s.push(r.Ka(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=Gh.Wi(c.targetId,d);o.push(p)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(c,d){const h=ne(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(d,g=>O.forEach(g.$i,v=>h.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>O.forEach(g.Ui,v=>h.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!nl(p))throw p;K("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const v=h.os.get(g),A=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(g,P)}}}(r.localStore,o))}async function cN(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await DE(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(u=>{u.forEach(c=>{c.reject(new Q(B.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sl(n,r.hs)}}function dN(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const u=n.Fa.get(s);i=i.unionWith(u.view.Va)}return i}}function QE(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=WE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sN.bind(null,e),e.Ca.d_=KM.bind(null,e.eventManager),e.Ca.$a=JM.bind(null,e.eventManager),e}function fN(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aN.bind(null,e),e}class su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return mM(this.persistence,new hM,e.initialUser,this.serializer)}Ga(e){return new cM(qh.Zr,this.serializer)}Wa(e){return new CM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}su.provider={build:()=>new su};class af{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cN.bind(null,this.syncEngine),await qM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HM}()}createDatastore(e){const n=bu(e.databaseInfo.databaseId),r=function(o){return new AM(o)}(e.databaseInfo);return function(o,s,u,c){return new xM(o,s,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,u){return new MM(r,i,o,s,u)}(this.localStore,this.datastore,e.asyncQueue,n=>gy(this.syncEngine,n,0),function(){return dy.D()?new dy:new wM}())}createSyncEngine(e,n){return function(i,o,s,u,c,d,h){const p=new jM(i,o,s,u,c,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ne(i);K("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ol(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}af.provider={build:()=>new af};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=eE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{K("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Yh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hc(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mN(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fy(e.remoteStore,i)),t._onlineComponents=e}async function mN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Zi("Error using user provided cache. Falling back to memory cache: "+n),await Hc(t,new su)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Hc(t,new su);return t._offlineComponents}async function XE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await vy(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await vy(t,new af))),t._onlineComponents}function gN(t){return XE(t).then(e=>e.syncEngine)}async function yN(t){const e=await XE(t),n=e.eventManager;return n.onListen=eN.bind(null,e.syncEngine),n.onUnlisten=rN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iN.bind(null,e.syncEngine),n}function vN(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,u,c,d){const h=new hN({next:g=>{h.Za(),s.enqueueAndForget(()=>WM(o,p));const v=g.docs.has(u);!v&&g.fromCache?d.reject(new Q(B.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?d.reject(new Q(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new YM(Uh(u.path),h,{includeMetadataChanges:!0,_a:!0});return zM(o,p)}(await yN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t,e,n){if(!n)throw new Q(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TN(t,e,n,r){if(e===!0&&r===!0)throw new Q(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ty(t){if(!X.isDocumentKey(t))throw new Q(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Gs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zh(t);throw new Q(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Nx;switch(r.type){case"firstParty":return new Ux(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_y.get(n);r&&(K("ComponentProvider","Removing Datastore"),_y.delete(n),r.terminate())}(this),Promise.resolve()}}function EN(t,e,n,r={}){var i;const o=(t=Gs(t,jh))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=ct.MOCK_USER;else{u=sA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Q(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ct(d)}t._authCredentials=new Dx(new j0(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ep(this.firestore,e,this._query)}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class Hs extends ep{constructor(e,n,r){super(e,n,Uh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new X(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function jE(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=eE.newId()),_N("doc","path",e),t instanceof jh){const r=Ve.fromString(e,...n);return Ty(r),new Bt(t,null,new X(r))}{if(!(t instanceof Bt||t instanceof Hs))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Ty(r),new Bt(t.firestore,t instanceof Hs?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new LE(this,"async_queue_retry"),this.Vu=()=>{const r=Gc();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Gc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new gr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!nl(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),u}(r);throw Un("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Jh.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class tp extends jh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Cy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cy(e),this._firestoreClient=void 0,await e}}}function CN(t,e){const n=typeof t=="object"?t:h0(),r=typeof t=="string"?t:"(default)",i=yh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=iA("firestore");o&&EN(i,...o)}return i}function eC(t){if(t._terminated)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wN(t),t._firestoreClient}function wN(t){var e,n,r;const i=t._freezeSettings(),o=function(u,c,d,h){return new Yx(u,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ZE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new io(it.fromBase64String(e))}catch(n){throw new Q(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new io(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=/^__.*__$/;class SN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new rl(e,this.data,n,this.fieldTransforms)}}function nC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class op{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(nC(this.Cu)&&IN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class AN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bu(e)}Qu(e,n,r,i=!1){return new op({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RN(t){const e=t._freezeSettings(),n=bu(t._databaseId);return new AN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kN(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);sC("Data must be an object, but it was:",s,r);const u=iC(r,s);let c,d;if(o.merge)c=new Zt(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const g=xN(e,p,n);if(!s.contains(g))throw new Q(B.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);MN(h,g)||h.push(g)}c=new Zt(h),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new SN(new Ft(u),c,d)}function rC(t,e){if(oC(t=Ht(t)))return sC("Unsupported field value:",e,t),iC(t,e);if(t instanceof tC)return function(r,i){if(!nC(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const u of r){let c=rC(u,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=We.fromDate(r);return{timestampValue:iu(i.serializer,o)}}if(r instanceof We){const o=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:iu(i.serializer,o)}}if(r instanceof rp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof io)return{bytesValue:AE(i.serializer,r._byteString)};if(r instanceof Bt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Bh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ip)return function(s,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return Fh(u.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Zh(r)}`)}(t,e)}function iC(t,e){const n={};return tE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(t,(r,i)=>{const o=rC(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function oC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof rp||t instanceof io||t instanceof Bt||t instanceof tC||t instanceof ip)}function sC(t,e,n){if(!oC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Zh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xN(t,e,n){if((e=Ht(e))instanceof np)return e._internalPath;if(typeof e=="string")return lC(t,e);throw lu("Field path arguments must be of type string or ",t,!1,void 0,n)}const PN=new RegExp("[~\\*/\\[\\]]");function lC(t,e,n){if(e.search(PN)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new np(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Q(B.INVALID_ARGUMENT,u+t+c)}function MN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NN extends aC{data(){return super.data()}}function uC(t,e){return typeof e=="string"?lC(t,e):e instanceof np?e._internalPath:e._delegate._internalPath}class DN{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ue(s.doubleValue));return new ip(o)}convertGeoPoint(e){return new rp(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bs(e));default:return null}}convertTimestamp(e){const n=Tr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);_e(NE(r));const i=new Os(r.get(1),r.get(3)),o=new X(r.popFirst(5));return i.isEqual(n)||Un(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cC extends aC{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new UN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class UN extends cC{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){t=Gs(t,Bt);const e=Gs(t.firestore,tp);return vN(eC(e),t._key).then(n=>$N(e,t,n))}class bN extends DN{constructor(e){super(),this.firestore=e}convertBytes(e){return new io(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function ON(t,e,n){t=Gs(t,Bt);const r=Gs(t.firestore,tp),i=VN(t.converter,e);return BN(r,[kN(RN(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xn.none())])}function BN(t,e){return function(r,i){const o=new gr;return r.asyncQueue.enqueueAndForget(async()=>oN(await gN(r),i,o)),o.promise}(eC(t),e)}function $N(t,e,n){const r=n.docs.get(e._key),i=new bN(t);return new cC(t,i,e._key,r,new LN(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){co=i})(ao),Qi(new Jr("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),u=new tp(new Vx(r.getProvider("auth-internal")),new bx(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Os(d.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),mr(qg,"4.7.3",e),mr(qg,"4.7.3","esm2017")})();const uf={apiKey:"AIzaSyBQPhgF-vn3-4_zcjfVPo5igOzX8NkKKt8",authDomain:"tablit-b6e78.firebaseapp.com",projectId:"tablit-b6e78",storageBucket:"tablit-b6e78.appspot.com",messagingSenderId:"993416386108",appId:"1:993416386108:web:1e6d42be34beb6a8efd539",measurementId:"G-YJP77FD8GZ"},dC=f0(uf),sp=Px(dC),fC=CN(dC),hC=new En;hC.setCustomParameters({prompt:"select_account"});const pC=t=>({uid:t.uid,displayName:t.displayName,photoURL:t.photoURL}),qN=t=>{const e={};return Array.isArray(t)&&t.forEach((n,r)=>{Array.isArray(n)&&n.forEach((i,o)=>{i&&i.length>0&&(e[`${r}-${o}`]=i)})}),e},GN=(t,e)=>{const r=e.periods||7,i=Array(7).fill(0).map(()=>Array(r).fill(0).map(()=>[]));if(!t)return i;for(const o in t){const[s,u]=o.split("-").map(Number);s<7&&u<r&&(i[s][u]=t[o])}return i},mC=(t,e)=>{throw console.error(`Firestore ${e} Error:`,t),t instanceof rn&&(t.code==="permission-denied"?alert(`Firestore  (permission-denied)


Firestore

---  ---

 1. Firebase: https://console.firebase.google.com/
 2.  (${uf.projectId})  > Firestore Database
 3. 
 4. :

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      // 
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}

 5. 



`):(t.code==="unavailable"||t.message.includes("offline")||t.message.includes("Failed to get document"))&&alert(`Firestore 


FirebaseFirestore

---  ---

 1. Firestore 
   - Firebase: https://console.firebase.google.com/
   -  (${uf.projectId})  > Firestore Database
   - 
   - 
   - : asia-northeast1

 2. API
   - 
   - : https://console.cloud.google.com/apis/library/firestore.googleapis.com
   - Cloud Firestore API

`)),t},HN=async()=>{try{const t=await Ok(sp,hC);return pC(t.user)}catch(t){throw t instanceof rn?(console.error("Firebase Auth Error:",{code:t.code,message:t.message}),t.code==="auth/popup-blocked"?alert(""):t.code==="auth/popup-closed-by-user"?console.log("Login popup was closed by the user."):t.code==="auth/configuration-not-found"?alert(`Google (auth/configuration-not-found)

Firebase
Firebase

---  ---

 1. Google 
   - Firebase: https://console.firebase.google.com/
   -  > Authentication > Sign-in method
   - Google

 2. 
   - Authentication > Settings
   - : localhost

 3. Firebase
   -  > 
   -  'firebaseConfig'  'firebaseConfig.ts' 

3`):alert("")):(console.error("An unexpected error occurred during sign-in:",t),alert("")),t}},zN=()=>_k(sp),WN=t=>vk(sp,e=>{t(e?pC(e):null)}),KN=async(t,e)=>{try{const n={...e,timetables:e.timetables.map(i=>({...i,grid:qN(i.grid)}))},r=jE(fC,"users",t);await ON(r,{timetableData:n})}catch(n){mC(n,"")}},JN=async t=>{try{const e=jE(fC,"users",t),n=await FN(e);if(n.exists()){const r=n.data().timetableData;return{...r,timetables:r.timetables.map(o=>({...o,grid:GN(o.grid,o.settings)}))}}else return null}catch(e){return mC(e,""),null}},zc=()=>({id:`timetable-${Date.now()}`,name:"",settings:{days:Vs.slice(0,5),periods:7},grid:Array(7).fill(0).map(()=>Array(7).fill(0).map(()=>[]))}),YN=t=>{const[e,n]=H.useState([]),[r,i]=H.useState(null),[o,s]=H.useState("idle"),[u,c]=H.useState(!0),d=H.useRef(null);H.useEffect(()=>{(async()=>{c(!0);try{let T=null,C=null;if(t){const x=await JN(t.uid);x&&(T=x.timetables,C=x.activeTimetableId)}else{const x=localStorage.getItem("timetables"),N=localStorage.getItem("activeTimetableId");x&&(T=JSON.parse(x),C=N)}if(T&&T.length>0)n(T),C&&T.some(x=>x.id===C)?i(C):i(T[0].id);else{const x=zc();n([x]),i(x.id)}}catch(T){console.error("Failed to load data:",T);const C=zc();n([C]),i(C.id)}finally{c(!1),s("idle")}})()},[t]),H.useEffect(()=>{if(!(u||e.length===0))return s("saving"),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{const _={timetables:e,activeTimetableId:r};try{t?KN(t.uid,_):(localStorage.setItem("timetables",JSON.stringify(e)),r&&localStorage.setItem("activeTimetableId",r)),s("saved"),setTimeout(()=>s("idle"),2e3)}catch(T){console.error("Failed to save data:",T),s("idle")}},1e3),()=>{d.current&&clearTimeout(d.current)}},[e,r,t,u]);const h=e.find(_=>_.id===r),p=H.useCallback(_=>{n(T=>T.map(C=>C.id===r?_:C))},[r]),g=_=>{const T={...zc(),name:_,id:`timetable-${Date.now()}`};n(C=>[...C,T]),i(T.id)},v=H.useCallback(_=>{try{const T=JSON.parse(_);if(typeof T.name!="string"||typeof T.settings!="object"||!Array.isArray(T.grid))throw new Error("Invalid timetable format.");const C={...T,id:`timetable-${Date.now()}`};return n(x=>[...x,C]),i(C.id),!0}catch(T){return console.error("Failed to import timetable:",T),!1}},[]),A=_=>{n(T=>{const C=T.filter(x=>x.id!==_);return r===_&&i(C.length>0?C[0].id:null),C})},P=H.useCallback(_=>{if(!h)return;const T=Array(Vs.length).fill(0).map((C,x)=>Array(_.periods).fill(0).map((N,M)=>{var le;const oe=Vs[x];return h.settings.days.includes(oe)&&x<h.settings.days.length&&M<h.settings.periods?((le=h.grid[x])==null?void 0:le[M])||[]:[]}));p({...h,settings:_,grid:T})},[h,p]),D=H.useCallback((_,T,C)=>{if(!h)return;const x=h.grid.map(oe=>oe.map(le=>[...le])),N=x[T][C],M=N.findIndex(oe=>oe.id===_.id);if(M>-1){const oe=N[M].tasks;N[M]={..._,tasks:oe}}else N.push(_);p({...h,grid:x})},[h,p]),R=H.useCallback((_,T,C)=>{if(!h)return;const x=h.grid.map(N=>N.map(M=>[...M]));x[T][C]=x[T][C].filter(N=>N.id!==_),p({...h,grid:x})},[h,p]),I=H.useCallback((_,T,C)=>{if(!h)return;const x=h.grid.map(N=>N.map(M=>[...M]));x[T.dayIndex][T.periodIndex]=x[T.dayIndex][T.periodIndex].filter(N=>N.id!==_.id),x[C.dayIndex][C.periodIndex].push(_),p({...h,grid:x})},[h,p]),k=H.useCallback((_,T,C)=>{n(x=>{const N=x.findIndex($e=>$e.id===C);if(N===-1)return x;const M=[...x],oe={...M[N]};let le=!1;const pe=oe.grid.map($e=>$e.map(G=>G.map(Y=>{if(Y.id===T){const Z=Y.tasks.findIndex(de=>de.id===_);if(Z>-1){le=!0;const de=[...Y.tasks];return de[Z]={...de[Z],completed:!de[Z].completed},{...Y,tasks:de}}}return Y})));return le?(M[N]={...oe,grid:pe},M):x})},[]),V=H.useCallback((_,T,C)=>{n(x=>x.map(N=>{if(N.id!==C)return N;const M=N.grid.map(oe=>oe.map(le=>le.map(pe=>pe.id===T?{...pe,tasks:[...pe.tasks,_]}:pe)));return{...N,grid:M}}))},[]),F=H.useCallback((_,T,C)=>{n(x=>x.map(N=>{if(N.id!==C)return N;const M=N.grid.map(oe=>oe.map(le=>le.map(pe=>{if(pe.id===T){const $e=pe.tasks.map(G=>G.id===_.id?_:G);return{...pe,tasks:$e}}return pe})));return{...N,grid:M}}))},[]),U=H.useCallback((_,T,C)=>{n(x=>x.map(N=>{if(N.id!==C)return N;const M=N.grid.map(oe=>oe.map(le=>le.map(pe=>{if(pe.id===T){const $e=pe.tasks.filter(G=>G.id!==_);return{...pe,tasks:$e}}return pe})));return{...N,grid:M}}))},[]),S=h?[...new Set(h.grid.flat(2).map(_=>_.id))].map(_=>h.grid.flat(2).find(T=>T.id===_)).reduce((_,T)=>_+((T==null?void 0:T.credits)||0),0):0;return{timetables:e,activeTimetable:h,activeTimetableId:r,setActiveTimetableId:i,addTimetable:g,importTimetable:v,deleteTimetable:A,updateTimetableSettings:P,saveSubject:D,deleteSubject:R,moveSubject:I,toggleTaskCompletion:k,addTask:V,updateTask:F,deleteTask:U,totalCredits:S,saveStatus:o,isLoading:u}},lp=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),ap=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),gC=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),ii=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),yC=({className:t})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),QN=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),XN=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),ZN=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),jN=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),e1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),t1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),n1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),r1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),o1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:t,children:E.jsx("path",{d:"M3.105 2.289a.75.75 0 00-.826.95l1.414 4.949a.75.75 0 00.95.826L11.25 8.25l-5.607-1.402a.75.75 0 00-.95.826l1.414 4.949a.75.75 0 00.95.826L11.25 11.75l-5.607-1.402a.75.75 0 00-.95.826l1.414 4.949a.75.75 0 00.95.826L16.25 12l-12.2-9.148a.75.75 0 00-.945-.563z"})}),s1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12z"})}),up=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),l1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})}),a1=({className:t})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.25 5.25m.47-5.512a.75.75 0 111.06 1.06M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u1=({onImport:t,onExport:e,onOpenAppInfo:n})=>{const[r,i]=H.useState(!1),o=H.useRef(null);return H.useEffect(()=>{const s=u=>{o.current&&!o.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),E.jsxs("div",{ref:o,className:"relative",children:[E.jsx("button",{onClick:()=>i(!r),className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:E.jsx(l1,{className:"w-6 h-6"})}),r&&E.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100/90 dark:bg-gray-800/90 backdrop-blur-md rounded-lg shadow-2xl border border-black/10 dark:border-white/10 p-1.5 z-40 fade-in",children:E.jsxs("ul",{className:"space-y-1",children:[E.jsxs("li",{children:[E.jsxs("label",{htmlFor:"import-file",className:"w-full text-left px-3 py-1.5 text-sm rounded-md flex items-center gap-3 hover:bg-sky-500 hover:text-white transition-colors cursor-pointer",children:[E.jsx(e1,{className:"w-5 h-5"}),E.jsx("span",{children:""})]}),E.jsx("input",{id:"import-file",type:"file",accept:".tmx",className:"hidden",onChange:t})]}),E.jsx("li",{children:E.jsxs("button",{onClick:()=>{e(),i(!1)},className:"w-full text-left px-3 py-1.5 text-sm rounded-md flex items-center gap-3 hover:bg-sky-500 hover:text-white transition-colors",children:[E.jsx(jN,{className:"w-5 h-5"}),E.jsx("span",{children:""})]})}),E.jsx("li",{children:E.jsxs("button",{onClick:()=>{n(),i(!1)},className:"w-full text-left px-3 py-1.5 text-sm rounded-md flex items-center gap-3 hover:bg-sky-500 hover:text-white transition-colors",children:[E.jsx(a1,{className:"w-5 h-5"}),E.jsx("span",{children:""})]})})]})})]})},c1=({timetables:t,activeTimetableId:e,setActiveTimetableId:n,onAddTimetable:r,onDeleteTimetable:i,onOpenSettings:o,onOpenTaskList:s,totalCredits:u,theme:c,toggleTheme:d,onExport:h,onImport:p,onOpenAppInfo:g,user:v,onLogin:A,onLogout:P})=>E.jsxs("header",{className:"sticky top-0 z-30 p-4 bg-gray-100/80 dark:bg-gray-900/70 backdrop-blur-lg shadow-md border-b border-black/10 dark:border-white/10 flex flex-wrap justify-between items-center gap-4",children:[E.jsx("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap",children:e?E.jsxs(E.Fragment,{children:[E.jsx("select",{value:e,onChange:D=>n(D.target.value),className:"bg-gray-200/50 dark:bg-gray-700/50 border border-black/10 dark:border-white/10 rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-sky-500 transition-colors",children:t.map(D=>E.jsx("option",{value:D.id,className:"bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white",children:D.name},D.id))}),E.jsxs("div",{className:"flex items-center gap-1",children:[E.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:E.jsx(lp,{className:"w-5 h-5"})}),E.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors text-red-500 hover:text-red-600",title:"",children:E.jsx(ap,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"block md:hidden bg-sky-500/20 text-sky-800 dark:text-sky-200 text-sm font-bold px-3 py-1.5 rounded-full",children:[": ",u]}),E.jsxs("div",{className:"hidden md:block bg-sky-500/20 text-sky-800 dark:text-sky-200 text-sm font-bold px-3 py-1.5 rounded-full",children:[": ",u]})]}):E.jsx("button",{onClick:r,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})}),E.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[E.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:E.jsx(s1,{className:"w-6 h-6"})}),E.jsx("button",{onClick:o,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:E.jsx(yC,{className:"w-6 h-6"})}),E.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:c==="light"?E.jsx(ZN,{className:"w-6 h-6"}):E.jsx(XN,{className:"w-6 h-6"})}),E.jsx(u1,{onImport:p,onExport:h,onOpenAppInfo:g}),E.jsx("div",{className:"border-l border-gray-300 dark:border-gray-600 pl-2 ml-1",children:v?E.jsxs("div",{className:"flex items-center gap-2",children:[v.photoURL?E.jsx("img",{src:v.photoURL,alt:"profile",className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-500"}):E.jsx(t1,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"}),E.jsx("button",{onClick:P,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:E.jsx(n1,{className:"w-6 h-6"})})]}):E.jsx("button",{onClick:A,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm py-2 px-4 rounded-lg transition-colors",children:"Google"})})]})]}),d1=({subject:t,onClick:e,dayIndex:n,periodIndex:r,onContextMenu:i})=>{const o=H.useRef(null),s=H.useRef(!1),u=P=>{const D={subject:t,from:{dayIndex:n,periodIndex:r}};P.dataTransfer.setData("application/json",JSON.stringify(D)),P.currentTarget.style.opacity="0.5",P.currentTarget.style.transform="scale(0.95)"},c=P=>{P.currentTarget.style.opacity="1",P.currentTarget.style.transform="scale(1)"},d=t.tasks.filter(P=>!P.completed).length,h=P=>{s.current=!1,o.current=setTimeout(()=>{const D=P.touches[0],R={...P,clientX:D.clientX,clientY:D.clientY,preventDefault:()=>P.preventDefault(),stopPropagation:()=>P.stopPropagation()};i(R),s.current=!0},500)},p=()=>{o.current&&clearTimeout(o.current)},g=()=>{o.current&&clearTimeout(o.current)},v=()=>{s.current||e()},A=P=>{P.stopPropagation()};return E.jsxs("div",{draggable:!0,onDragStart:u,onDragEnd:c,onClick:v,onContextMenu:i,onTouchStart:h,onTouchEnd:p,onTouchMove:g,className:`${t.color} rounded-lg p-1.5 text-white text-xs cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex flex-col justify-between h-full relative`,children:[E.jsxs("div",{className:"flex-grow",children:[E.jsx("p",{className:"font-bold text-sm leading-tight break-words",children:t.name}),E.jsx("p",{className:"text-white/80 break-words",children:t.room})]}),E.jsxs("div",{className:"flex items-center justify-between mt-1",children:[E.jsx("div",{children:t.url&&E.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",onClick:A,className:"inline-block p-1 rounded-full bg-white/20 hover:bg-white/40 transition-colors",title:"",children:E.jsx(up,{className:"w-3 h-3 text-white"})})}),d>0&&E.jsx("div",{className:"self-end",children:E.jsx("span",{className:"text-xs bg-white/30 text-white rounded-full px-1.5 py-0.5 font-bold",children:d})})]})]})},f1=({x:t,y:e,items:n,onClose:r})=>{const i=H.useRef(null),[o,s]=H.useState({top:e,left:t}),[u,c]=H.useState(!1);return H.useEffect(()=>{const d=h=>{i.current&&!i.current.contains(h.target)&&r()};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[r]),H.useEffect(()=>{if(i.current){const d=i.current.getBoundingClientRect(),{innerWidth:h,innerHeight:p}=window;let g=t;t+d.width>h&&(g=t-d.width),g<0&&(g=5);let v=e;e+d.height>p&&(v=e-d.height),v<0&&(v=5),s({top:v,left:g}),c(!0)}},[]),E.jsx("div",{ref:i,className:`fixed z-50 bg-gray-100/70 dark:bg-gray-800/70 backdrop-blur-md rounded-lg shadow-2xl border border-black/10 dark:border-white/10 p-1.5 min-w-[150px] fade-in transition-opacity ${u?"opacity-100":"opacity-0"}`,style:o,onContextMenu:d=>d.preventDefault(),children:E.jsx("ul",{className:"space-y-1",children:n.map((d,h)=>E.jsx("li",{children:E.jsx("button",{onClick:d.onClick,disabled:d.disabled,className:"w-full text-left px-3 py-1.5 text-sm rounded-md flex items-center gap-2 hover:bg-sky-500 hover:text-white disabled:opacity-50 disabled:hover:bg-transparent disabled:text-gray-500 dark:disabled:text-gray-400 transition-colors",children:d.label})},h))})})},h1=({timetable:t,onAddSubject:e,onEditSubject:n,onMoveSubject:r,onDeleteSubject:i,onCopySubject:o,onPasteSubject:s,copiedSubject:u})=>{const{settings:c,grid:d}=t,[h,p]=H.useState(null),g=H.useRef(null),v=H.useRef(null);H.useEffect(()=>{const U=()=>p(null);return window.addEventListener("click",U),()=>window.removeEventListener("click",U)},[]),H.useEffect(()=>{const U=v.current;if(!U||!window.matchMedia("(max-width: 768px)").matches)return;const T=["","","","","","",""][new Date().getDay()],C=c.days.indexOf(T);if(C===-1)return;const x=U.firstElementChild;if(!x)return;const N=x.querySelector(`[data-day-header-index="${C}"]`);N&&(U.scrollLeft=N.offsetLeft)},[c.days]);const A=U=>{U.preventDefault(),U.currentTarget.classList.add("bg-sky-400/30")},P=U=>{U.currentTarget.classList.remove("bg-sky-400/30")},D=(U,S,_)=>{U.preventDefault(),U.currentTarget.classList.remove("bg-sky-400/30");const T=U.dataTransfer.getData("application/json");if(T){const{subject:C,from:x}=JSON.parse(T);r(C,x,{dayIndex:S,periodIndex:_})}},R=(U,S,_,T)=>{U.preventDefault(),U.stopPropagation(),p({x:U.clientX,y:U.clientY,items:[{label:"",onClick:()=>{o(S),p(null)}},{label:"",onClick:()=>{i(S.id,_,T),p(null)}}]})},I=(U,S,_)=>{U.preventDefault(),p({x:U.clientX,y:U.clientY,items:[{label:"",onClick:()=>{s(S,_),p(null)},disabled:!u}]})},k=U=>{const S=U.currentTarget,_=parseInt(S.dataset.dayindex,10),T=parseInt(S.dataset.periodindex,10);isNaN(_)||isNaN(T)||(g.current=setTimeout(()=>{const C=U.touches[0],x={...U,clientX:C.clientX,clientY:C.clientY,preventDefault:()=>U.preventDefault(),stopPropagation:()=>U.stopPropagation()};I(x,_,T)},500))},V=()=>{g.current&&clearTimeout(g.current)},F=()=>{g.current&&clearTimeout(g.current)};return E.jsxs("div",{ref:v,className:"p-2 md:p-8 flex-grow fade-in overflow-auto md:overflow-x-auto h-[calc(100vh-120px)] md:h-auto",children:[E.jsxs("div",{className:"grid gap-0.5 md:gap-1 bg-gray-500/10 backdrop-blur-md rounded-2xl p-1 md:p-2 border border-black/10 dark:border-white/10 min-w-[768px]",style:{gridTemplateColumns:`auto repeat(${c.days.length}, 1fr)`},children:[E.jsx("div",{className:"sticky top-0 left-0 z-20 p-2 bg-gray-100 dark:bg-gray-900 md:static"}),c.days.map((U,S)=>E.jsx("div",{"data-day-header-index":S,className:"sticky top-0 z-10 text-center font-bold py-3 text-xs md:text-base text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-900 md:static",children:U},S)),Array.from({length:c.periods}).map((U,S)=>E.jsxs(t_.Fragment,{children:[E.jsx("div",{className:"sticky left-0 z-10 text-center font-bold px-1 md:px-2 py-4 text-xs md:text-base text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-900 md:static",children:S+1}),c.days.map((_,T)=>{var N;const C=p1.indexOf(_),x=((N=d[C])==null?void 0:N[S])||[];return E.jsxs("div",{className:"min-h-[90px] md:min-h-[110px] bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 rounded-lg p-1 flex flex-col gap-1 transition-colors duration-300",onDragOver:A,onDragLeave:P,onDrop:M=>D(M,C,S),onContextMenu:M=>I(M,C,S),onTouchStart:k,onTouchEnd:V,onTouchMove:F,"data-dayindex":C,"data-periodindex":S,children:[x.map(M=>E.jsx(d1,{subject:M,onClick:()=>n(M,C,S),dayIndex:C,periodIndex:S,onContextMenu:oe=>R(oe,M,C,S)},M.id)),E.jsx("button",{onClick:()=>e(C,S),className:"mt-auto w-full flex-grow flex items-center justify-center text-gray-400/50 hover:bg-black/5 dark:hover:bg-white/5 rounded-md transition-colors",children:E.jsx(lp,{className:"w-5 h-5"})})]},`${T}-${S}`)})]},S))]}),h&&E.jsx(f1,{...h,onClose:()=>p(null)})]})},p1=["","","","","","",""],wy={name:"",room:"",credits:0,memo:"",color:ua[0],url:"",tasks:[]},m1=({isOpen:t,onClose:e,onSave:n,onDelete:r,subjectData:i,taskHandlers:o})=>{var v;const[s,u]=H.useState({...wy});H.useEffect(()=>{t&&(i.subject?u(i.subject):u({...wy,id:`subject-${Date.now()}`,color:ua[Math.floor(Math.random()*ua.length)]}))},[t,i]);const c=A=>{const{name:P,value:D}=A.target;u(R=>({...R,[P]:P==="credits"?parseInt(D)||0:D}))},d=A=>{u(P=>({...P,color:A}))},h=()=>{const A={...s};n(A,i.dayIndex,i.periodIndex),e()},p=()=>{r&&i.subject&&(r(i.subject.id,i.dayIndex,i.periodIndex),e())},g=((v=i.subject)==null?void 0:v.tasks)||[];return E.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:E.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-lg max-h-[90vh] flex flex-col shadow-2xl transition-transform duration-300 ${t?"scale-100":"scale-95"}`,children:[E.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10 flex-shrink-0",children:[E.jsx("h2",{className:"text-xl font-bold",children:i.subject?"":""}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:E.jsx(ii,{className:"w-6 h-6"})})]}),E.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsx("input",{name:"name",value:s.name,onChange:c,placeholder:"",className:"md:col-span-2 bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),E.jsx("input",{name:"room",value:s.room,onChange:c,placeholder:"",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),E.jsx("input",{name:"credits",type:"number",value:s.credits,onChange:c,placeholder:"",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"})]}),E.jsx("input",{name:"url",value:s.url||"",onChange:c,placeholder:"URL",className:"w-full bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),E.jsx("textarea",{name:"memo",value:s.memo,onChange:c,placeholder:"",className:"w-full bg-black/5 dark:bg-white/5 p-2 rounded-md h-24 resize-none focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),E.jsx("div",{className:"flex flex-wrap gap-2",children:ua.map(A=>E.jsx("button",{onClick:()=>d(A),className:`w-8 h-8 rounded-full ${A} transition-transform hover:scale-110 ${s.color===A?"ring-2 ring-offset-2 ring-offset-gray-100 dark:ring-offset-gray-900 ring-sky-500":""}`},A))})]}),i.subject&&E.jsxs("div",{children:[E.jsxs("div",{className:"flex justify-between items-center mb-3",children:[E.jsx("h3",{className:"text-lg font-semibold",children:""}),E.jsxs("button",{onClick:o.onOpenAddTaskModal,className:"flex items-center gap-2 bg-sky-600/20 hover:bg-sky-600/30 text-sky-700 dark:text-sky-300 font-bold py-1.5 px-3 rounded-lg text-sm transition-colors",children:[E.jsx(lp,{className:"w-4 h-4"}),E.jsx("span",{children:""})]})]}),E.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto p-1",children:g.length>0?g.map(A=>E.jsxs("div",{className:"bg-black/5 dark:bg-white/5 p-2 rounded-md flex items-center gap-2",children:[E.jsx("input",{type:"checkbox",checked:A.completed,onChange:()=>o.onToggleTask(A.id),className:"form-checkbox h-4 w-4 rounded bg-gray-300 dark:bg-gray-600 border-gray-400 dark:border-gray-500 text-sky-600 focus:ring-sky-500 flex-shrink-0"}),E.jsxs("div",{className:"flex-grow",children:[E.jsx("p",{className:`text-sm ${A.completed?"line-through text-gray-500":""}`,children:A.content}),A.dueDate&&E.jsx("p",{className:"text-xs text-gray-500",children:A.dueDate})]}),A.url&&E.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 rounded-full text-gray-500 hover:bg-black/10 dark:hover:bg-white/10",title:"",children:E.jsx(up,{className:"w-4 h-4"})}),E.jsx("button",{onClick:()=>o.onOpenEditTaskModal(A),className:"p-1 rounded-full text-gray-500 hover:bg-black/10 dark:hover:bg-white/10",children:E.jsx(gC,{className:"w-4 h-4"})}),E.jsx("button",{onClick:()=>o.onDeleteTask(A.id),className:"p-1 rounded-full text-gray-500 hover:bg-black/10 dark:hover:bg-white/10",children:E.jsx(ap,{className:"w-4 h-4"})})]},A.id)):E.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:""})})]})]}),E.jsxs("div",{className:"p-4 flex justify-between items-center border-t border-black/10 dark:border-white/10 mt-auto flex-shrink-0",children:[E.jsx("div",{children:i.subject&&r&&E.jsx("button",{onClick:p,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})}),E.jsx("button",{onClick:h,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})]})]})})},g1=({isOpen:t,onClose:e,onSave:n,currentSettings:r})=>{const[i,o]=H.useState(r);if(H.useEffect(()=>{t&&o(r)},[t,r]),!t)return null;const s=d=>{const h=i.days.includes(d)?i.days.filter(g=>g!==d):[...i.days,d],p=Vs.filter(g=>h.includes(g));o(g=>({...g,days:p}))},u=d=>{const h=Math.max(1,Math.min(10,parseInt(d.target.value)||1));o(p=>({...p,periods:h}))},c=()=>{n(i),e()};return E.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:E.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${t?"scale-100":"scale-95"}`,children:[E.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[E.jsx("h2",{className:"text-xl font-bold",children:""}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:E.jsx(ii,{className:"w-6 h-6"})})]}),E.jsxs("div",{className:"p-6 space-y-6",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),E.jsx("div",{className:"flex flex-wrap gap-2",children:Vs.map(d=>E.jsxs("button",{onClick:()=>s(d),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${i.days.includes(d)?"bg-sky-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[d,""]},d))})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("input",{type:"range",min:"1",max:"10",value:i.periods,onChange:u,className:"w-full h-2 bg-gray-300 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-sky-600"}),E.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 rounded-md px-3 py-1 font-bold",children:i.periods})]})]})]}),E.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10",children:E.jsx("button",{onClick:c,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let y1,v1;function _1(){return{geminiUrl:y1,vertexUrl:v1}}function T1(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=_1();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oi{}function W(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function a(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const h=c[d];a(h,e.slice(o+1),n[d])}else for(const d of c)a(d,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>l(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Iy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Iy||(Iy={}));var Sy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Sy||(Sy={}));var ir;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ir||(ir={}));var Ay;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ay||(Ay={}));var Ry;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Ry||(Ry={}));var ky;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ky||(ky={}));var xy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(xy||(xy={}));var Py;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Py||(Py={}));var My;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(My||(My={}));var Ny;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ny||(Ny={}));var Dy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Dy||(Dy={}));var Vy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Vy||(Vy={}));var Ly;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ly||(Ly={}));var Uy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Uy||(Uy={}));var Fy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Fy||(Fy={}));var au;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(au||(au={}));var by;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(by||(by={}));var df;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(df||(df={}));var Oy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Oy||(Oy={}));var By;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(By||(By={}));var $y;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})($y||($y={}));var qy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(qy||(qy={}));var Gy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gy||(Gy={}));var Hy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Hy||(Hy={}));var zy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(zy||(zy={}));var Wy;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Wy||(Wy={}));var Ky;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ky||(Ky={}));var Jy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Jy||(Jy={}));var Yy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Yy||(Yy={}));var Qy;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Qy||(Qy={}));var Xy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Xy||(Xy={}));var Zy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Zy||(Zy={}));var jy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(jy||(jy={}));var ev;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ev||(ev={}));var tv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(tv||(tv={}));var nv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(nv||(nv={}));var rv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(rv||(rv={}));var iv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(iv||(iv={}));var ov;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ov||(ov={}));var sv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sv||(sv={}));var lv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(lv||(lv={}));var av;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(av||(av={}));var uv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(uv||(uv={}));var cv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cv||(cv={}));var dv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(dv||(dv={}));var xi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(xi||(xi={}));class ff{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Jo{get text(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const p=[];for(const g of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[v,A]of Object.entries(g))v!=="text"&&v!=="thought"&&(A!==null||A!==void 0)&&p.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const p of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,v]of Object.entries(p))g!=="inlineData"&&(v!==null||v!==void 0)&&h.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,o,s,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,o,s,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.output}}class fv{}class hv{}class E1{}class C1{}class w1{}class I1{}class pv{}class mv{}class gv{}class S1{}class yv{}class uu{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new uu;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new yv,s=i.videos;o.generatedVideos=s==null?void 0:s.map(u=>({video:{uri:u.gcsUri,videoBytes:u.bytesBase64Encoded?cf(u.bytesBase64Encoded):void 0,mimeType:u.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new yv,s=i.generateVideoResponse,u=s==null?void 0:s.generatedSamples;o.generatedVideos=u==null?void 0:u.map(c=>{const d=c.video;return{video:{uri:d==null?void 0:d.uri,videoBytes:d!=null&&d.encodedVideo?cf(d==null?void 0:d.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s==null?void 0:s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s==null?void 0:s.raiMediaFilteredReasons,r.response=o}}return r}}class vv{}class _v{}class Tv{}class A1{}class R1{}class k1{}class Ev{}class x1{get text(){var e,n,r;let i="",o=!1;const s=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&o.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class P1{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function me(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function vC(t,e){const n=me(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function _C(t){return Array.isArray(t)?t.map(e=>cu(e)):[cu(t)]}function cu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function TC(t){const e=cu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function EC(t){const e=cu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Cv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function CC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Cv(e)):[Cv(t)]}function hf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function wv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Iv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ht(t){if(t==null)throw new Error("ContentUnion is required");return hf(t)?t:{role:"user",parts:CC(t)}}function wC(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ht(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ht(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ht(n)):[ht(e)]}function $t(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(wv(t)||Iv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(t)]}const e=[],n=[],r=hf(t[0]);for(const i of t){const o=hf(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(wv(i)||Iv(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:CC(n)}),e}function M1(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ir).includes(n[0].toUpperCase())?n[0].toUpperCase():ir.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ir).includes(r.toUpperCase())?r.toUpperCase():ir.TYPE_UNSPECIFIED})}}function Bi(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&M1(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ir).includes(u.toUpperCase())?u.toUpperCase():ir.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Bi(u);else if(r.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Bi(d))}e[s]=c}else if(i.includes(s)){const c={};for(const[d,h]of Object.entries(u))c[d]=Bi(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function cp(t){return Bi(t)}function dp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function fp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function mo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Bi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Bi(e.response));return t}function go(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function N1(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function On(t,e){if(typeof e!="string")throw new Error("name must be a string");return N1(t,e,"cachedContents")}function IC(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function si(t){return cf(t)}function D1(t){return t!=null&&typeof t=="object"&&"name"in t}function V1(t){return t!=null&&typeof t=="object"&&"video"in t}function L1(t){return t!=null&&typeof t=="object"&&"uri"in t}function SC(t){var e;let n;if(D1(t)&&(n=t.name),!(L1(t)&&(n=t.uri,n===void 0))&&!(V1(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function AC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function RC(t){for(const e of["models","tunedModels","publisherModels"])if(U1(t,e))return t[e];return[]}function U1(t,e){return t!==null&&typeof t=="object"&&e in t}function F1(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function b1(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=F1(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function kC(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function O1(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function yo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function xC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B1(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function $1(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function q1(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function G1(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],B1(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],$1(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],q1(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function PC(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>G1(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function H1(t){const e={},n=l(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&a(e,["default"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["enum"]);o!=null&&a(e,["enum"],o);const s=l(t,["example"]);s!=null&&a(e,["example"],s);const u=l(t,["format"]);u!=null&&a(e,["format"],u);const c=l(t,["items"]);c!=null&&a(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&a(e,["maxLength"],h);const p=l(t,["maxProperties"]);p!=null&&a(e,["maxProperties"],p);const g=l(t,["maximum"]);g!=null&&a(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&a(e,["minItems"],v);const A=l(t,["minLength"]);A!=null&&a(e,["minLength"],A);const P=l(t,["minProperties"]);P!=null&&a(e,["minProperties"],P);const D=l(t,["minimum"]);D!=null&&a(e,["minimum"],D);const R=l(t,["nullable"]);R!=null&&a(e,["nullable"],R);const I=l(t,["pattern"]);I!=null&&a(e,["pattern"],I);const k=l(t,["properties"]);k!=null&&a(e,["properties"],k);const V=l(t,["propertyOrdering"]);V!=null&&a(e,["propertyOrdering"],V);const F=l(t,["required"]);F!=null&&a(e,["required"],F);const U=l(t,["title"]);U!=null&&a(e,["title"],U);const S=l(t,["type"]);return S!=null&&a(e,["type"],S),e}function z1(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&a(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function W1(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function K1(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function J1(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],K1(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Y1(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function Q1(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],Y1(n)),e}function X1(){return{}}function Z1(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function j1(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>W1(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],J1(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],Q1(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],X1());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],Z1(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function eD(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function tD(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function nD(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],tD(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function rD(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],eD(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],nD(r)),e}function iD(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function MC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],iD(n)),e}function oD(t){const e={},n=l(t,["speaker"]);n!=null&&a(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],MC(r)),e}function sD(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>oD(i))),a(e,["speakerVoiceConfigs"],r)}return e}function lD(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],MC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],sD(r));const i=l(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function aD(t){const e={},n=l(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function uD(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],PC(ht(i)));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&a(r,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const g=l(e,["logprobs"]);g!=null&&a(r,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&a(r,["presencePenalty"],v);const A=l(e,["frequencyPenalty"]);A!=null&&a(r,["frequencyPenalty"],A);const P=l(e,["seed"]);P!=null&&a(r,["seed"],P);const D=l(e,["responseMimeType"]);D!=null&&a(r,["responseMimeType"],D);const R=l(e,["responseSchema"]);R!=null&&a(r,["responseSchema"],H1(cp(R)));const I=l(e,["responseJsonSchema"]);if(I!=null&&a(r,["responseJsonSchema"],I),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=l(e,["safetySettings"]);if(n!==void 0&&k!=null){let x=k;Array.isArray(x)&&(x=x.map(N=>z1(N))),a(n,["safetySettings"],x)}const V=l(e,["tools"]);if(n!==void 0&&V!=null){let x=go(V);Array.isArray(x)&&(x=x.map(N=>j1(mo(N)))),a(n,["tools"],x)}const F=l(e,["toolConfig"]);if(n!==void 0&&F!=null&&a(n,["toolConfig"],rD(F)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=l(e,["cachedContent"]);n!==void 0&&U!=null&&a(n,["cachedContent"],On(t,U));const S=l(e,["responseModalities"]);S!=null&&a(r,["responseModalities"],S);const _=l(e,["mediaResolution"]);_!=null&&a(r,["mediaResolution"],_);const T=l(e,["speechConfig"]);if(T!=null&&a(r,["speechConfig"],lD(dp(T))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=l(e,["thinkingConfig"]);return C!=null&&a(r,["thinkingConfig"],aD(C)),r}function cD(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["request","model"],me(t,r));const i=l(e,["contents"]);if(i!=null){let s=$t(i);Array.isArray(s)&&(s=s.map(u=>PC(u))),a(n,["request","contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["request","generationConfig"],uD(t,o,n)),n}function dD(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&a(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>cD(t,s))),a(n,["requests","requests"],o)}return n}function fD(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&a(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Sv(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["src"]);i!=null&&a(n,["batch","inputConfig"],dD(t,kC(t,i)));const o=l(e,["config"]);return o!=null&&a(n,["config"],fD(o,n)),n}function hD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],yo(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function pD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],yo(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function mD(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function gD(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],mD(n,e)),e}function yD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],yo(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function vD(t){const e={},n=l(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&a(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&a(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _D(t){const e={},n=l(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&a(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&a(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function TD(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&a(e,["outputConfig"],_D(O1(i))),n}function ED(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],me(t,r));const i=l(e,["src"]);i!=null&&a(n,["inputConfig"],vD(kC(t,i)));const o=l(e,["config"]);return o!=null&&a(n,["config"],TD(o,n)),n}function CD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],yo(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function wD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],yo(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function ID(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function SD(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],ID(n,e)),e}function AD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],yo(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function RD(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function kD(t){const e={},n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function xD(t){const e={},n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function PD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],RD(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],kD(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],xD(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function MD(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>PD(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function ND(t){const e={},n=l(t,["citationSources"]);return n!=null&&a(e,["citations"],n),e}function DD(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function VD(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>DD(i))),a(e,["urlMetadata"],r)}return e}function LD(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],MD(n));const r=l(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],ND(r));const i=l(t,["tokenCount"]);i!=null&&a(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&a(e,["urlContextMetadata"],VD(s));const u=l(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);const c=l(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&a(e,["logprobsResult"],h);const p=l(t,["safetyRatings"]);return p!=null&&a(e,["safetyRatings"],p),e}function UD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>LD(d))),a(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&a(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function NC(t){const e={},n=l(t,["details"]);n!=null&&a(e,["details"],n);const r=l(t,["code"]);r!=null&&a(e,["code"],r);const i=l(t,["message"]);return i!=null&&a(e,["message"],i),e}function FD(t){const e={},n=l(t,["response"]);n!=null&&a(e,["response"],UD(n));const r=l(t,["error"]);return r!=null&&a(e,["error"],NC(r)),e}function bD(t){const e={},n=l(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>FD(o))),a(e,["inlinedResponses"],i)}return e}function va(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&a(e,["state"],xC(i));const o=l(t,["metadata","createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["metadata","endTime"]);s!=null&&a(e,["endTime"],s);const u=l(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=l(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&a(e,["dest"],bD(d)),e}function OD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>va(s))),a(e,["batchJobs"],o)}return e}function BD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);return o!=null&&a(e,["error"],NC(o)),e}function DC(t){const e={},n=l(t,["details"]);n!=null&&a(e,["details"],n);const r=l(t,["code"]);r!=null&&a(e,["code"],r);const i=l(t,["message"]);return i!=null&&a(e,["message"],i),e}function $D(t){const e={},n=l(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&a(e,["bigqueryUri"],i),e}function qD(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&a(e,["bigqueryUri"],i),e}function pf(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["state"]);i!=null&&a(e,["state"],xC(i));const o=l(t,["error"]);o!=null&&a(e,["error"],DC(o));const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const h=l(t,["model"]);h!=null&&a(e,["model"],h);const p=l(t,["inputConfig"]);p!=null&&a(e,["src"],$D(p));const g=l(t,["outputConfig"]);return g!=null&&a(e,["dest"],qD(g)),e}function GD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>pf(s))),a(e,["batchJobs"],o)}return e}function HD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);return o!=null&&a(e,["error"],DC(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(jr||(jr={}));class ll{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zD extends oi{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const u=Sv(this.apiClient,n);o=W("{model}:batchGenerateContent",u._url),s=u._query;const h=u.batch.inputConfig.requests,p=h.requests,g=[];for(const A of p){const P=A;if(P.systemInstruction){const D=P.systemInstruction;delete P.systemInstruction;const R=P.request;R.systemInstruction=D,P.request=R}g.push(P)}return h.requests=g,delete u.config,delete u._url,delete u._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(A=>A.json()).then(A=>va(A))}return await this.createInternal(n)},this.list=async(n={})=>new ll(jr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=ED(this.apiClient,e);return u=W("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>pf(h))}else{const d=Sv(this.apiClient,e);return u=W("{model}:batchGenerateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>va(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=CD(this.apiClient,e);return u=W("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>pf(h))}else{const d=hD(this.apiClient,e);return u=W("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>va(h))}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=wD(this.apiClient,e);s=W("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=pD(this.apiClient,e);s=W("batches/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=SD(e);return u=W("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=GD(h),g=new Ev;return Object.assign(g,p),g})}else{const d=gD(e);return u=W("batches",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=OD(h),g=new Ev;return Object.assign(g,p),g})}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=AD(this.apiClient,e);return u=W("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>HD(h))}else{const d=yD(this.apiClient,e);return u=W("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>BD(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WD(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function KD(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function JD(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function YD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],WD(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],KD(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],JD(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function Av(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>YD(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function QD(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function XD(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function ZD(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],XD(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function jD(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function eV(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],jD(n)),e}function tV(){return{}}function nV(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function rV(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>QD(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],ZD(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],eV(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],tV());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],nV(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function iV(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function oV(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function sV(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],oV(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function lV(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],iV(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],sV(r)),e}function aV(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&a(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=$t(s);Array.isArray(h)&&(h=h.map(p=>Av(p))),a(e,["contents"],h)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Av(ht(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>rV(p))),a(e,["tools"],h)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],lV(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function uV(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],vC(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],aV(i,n)),n}function cV(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],On(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function dV(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],On(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function fV(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&a(e,["expireTime"],i),n}function hV(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],On(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],fV(i,n)),n}function pV(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function mV(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],pV(n,e)),e}function gV(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function yV(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function vV(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function _V(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],gV(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],yV(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],vV(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function Rv(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_V(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function TV(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function EV(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function CV(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&a(e,["timeRangeFilter"],EV(n));const r=l(t,["excludeDomains"]);return r!=null&&a(e,["excludeDomains"],r),e}function wV(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function IV(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],wV(n)),e}function SV(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&a(e,["excludeDomains"],n),e}function AV(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function RV(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],AV(n));const r=l(t,["authType"]);r!=null&&a(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&a(e,["oauthConfig"],s);const u=l(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function kV(t){const e={},n=l(t,["authConfig"]);return n!=null&&a(e,["authConfig"],RV(n)),e}function xV(){return{}}function PV(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function MV(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>TV(g))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],CV(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],IV(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],SV(s));const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],kV(u)),l(t,["urlContext"])!=null&&a(e,["urlContext"],xV());const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],PV(d));const h=l(t,["codeExecution"]);return h!=null&&a(e,["codeExecution"],h),e}function NV(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function DV(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function VV(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],DV(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function LV(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],NV(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],VV(r)),e}function UV(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&a(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let p=$t(s);Array.isArray(p)&&(p=p.map(g=>Rv(g))),a(e,["contents"],p)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Rv(ht(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>MV(g))),a(e,["tools"],p)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],LV(d));const h=l(t,["kmsKeyName"]);return e!==void 0&&h!=null&&a(e,["encryption_spec","kmsKeyName"],h),n}function FV(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],vC(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],UV(i,n)),n}function bV(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],On(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function OV(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],On(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function BV(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&a(e,["expireTime"],i),n}function $V(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],On(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],BV(i,n)),n}function qV(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function GV(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],qV(n,e)),e}function _a(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["model"]);i!=null&&a(e,["model"],i);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&a(e,["updateTime"],s);const u=l(t,["expireTime"]);u!=null&&a(e,["expireTime"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function HV(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function zV(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>_a(s))),a(e,["cachedContents"],o)}return e}function Ta(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["model"]);i!=null&&a(e,["model"],i);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&a(e,["updateTime"],s);const u=l(t,["expireTime"]);u!=null&&a(e,["expireTime"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function WV(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function KV(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ta(s))),a(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JV extends oi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ll(jr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=FV(this.apiClient,e);return u=W("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ta(h))}else{const d=uV(this.apiClient,e);return u=W("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>_a(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=bV(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ta(h))}else{const d=cV(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>_a(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=OV(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=WV(h),g=new _v;return Object.assign(g,p),g})}else{const d=dV(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=HV(h),g=new _v;return Object.assign(g,p),g})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$V(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ta(h))}else{const d=hV(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>_a(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=GV(e);return u=W("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=KV(h),g=new Tv;return Object.assign(g,p),g})}else{const d=mV(e);return u=W("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=zV(h),g=new Tv;return Object.assign(g,p),g})}}}function kv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(t){return this instanceof Ie?(this.v=t,this):new Ie(t)}function $i(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(A){return Promise.resolve(A).then(v,p)}}function u(v,A){r[v]&&(i[v]=function(P){return new Promise(function(D,R){o.push([v,P,D,R])>1||c(v,P)})},A&&(i[v]=A(i[v])))}function c(v,A){try{d(r[v](A))}catch(P){g(o[0][3],P)}}function d(v){v.value instanceof Ie?Promise.resolve(v.value.v).then(h,p):g(o[0][2],v)}function h(v){c("next",v)}function p(v){c("throw",v)}function g(v,A){v(A),o.shift(),o.length&&c(o[0][0],o[0][1])}}function gs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof kv=="function"?kv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(u,c){s=t[o](s),i(u,c,s.done,s.value)})}}function i(o,s,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YV(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:VC(n)}function VC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function QV(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function xv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!VC(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class XV{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new ZV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ZV{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),QV(o)}async sendMessage(e){var n;await this.sendPromise;const r=ht(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,u;const c=await i,d=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];h!=null&&(g=(u=h.slice(p))!==null&&u!==void 0?u:[]);const v=d?[d]:[];this.recordHistory(r,v,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=ht(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?xv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return $i(this,arguments,function*(){var s,u,c,d;const h=[];try{for(var p=!0,g=gs(e),v;v=yield Ie(g.next()),s=v.done,!s;p=!0){d=v.value,p=!1;const A=d;if(YV(A)){const P=(i=(r=A.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;P!==void 0&&h.push(P)}yield yield Ie(A)}}catch(A){u={error:A}}finally{try{!p&&!s&&(c=g.return)&&(yield Ie(c.call(g)))}finally{if(u)throw u.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...xv(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $u extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,$u.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jV(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function eL(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],jV(n,e)),e}function tL(t){const e={},n=l(t,["details"]);n!=null&&a(e,["details"],n);const r=l(t,["message"]);r!=null&&a(e,["message"],r);const i=l(t,["code"]);return i!=null&&a(e,["code"],i),e}function nL(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&a(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&a(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["expirationTime"]);u!=null&&a(e,["expirationTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["sha256Hash"]);d!=null&&a(e,["sha256Hash"],d);const h=l(t,["uri"]);h!=null&&a(e,["uri"],h);const p=l(t,["downloadUri"]);p!=null&&a(e,["downloadUri"],p);const g=l(t,["state"]);g!=null&&a(e,["state"],g);const v=l(t,["source"]);v!=null&&a(e,["source"],v);const A=l(t,["videoMetadata"]);A!=null&&a(e,["videoMetadata"],A);const P=l(t,["error"]);return P!=null&&a(e,["error"],tL(P)),e}function rL(t){const e={},n=l(t,["file"]);n!=null&&a(e,["file"],nL(n));const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function iL(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","file"],SC(n));const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function oL(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","file"],SC(n));const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function sL(t){const e={},n=l(t,["details"]);n!=null&&a(e,["details"],n);const r=l(t,["message"]);r!=null&&a(e,["message"],r);const i=l(t,["code"]);return i!=null&&a(e,["code"],i),e}function mf(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&a(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&a(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["expirationTime"]);u!=null&&a(e,["expirationTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["sha256Hash"]);d!=null&&a(e,["sha256Hash"],d);const h=l(t,["uri"]);h!=null&&a(e,["uri"],h);const p=l(t,["downloadUri"]);p!=null&&a(e,["downloadUri"],p);const g=l(t,["state"]);g!=null&&a(e,["state"],g);const v=l(t,["source"]);v!=null&&a(e,["source"],v);const A=l(t,["videoMetadata"]);A!=null&&a(e,["videoMetadata"],A);const P=l(t,["error"]);return P!=null&&a(e,["error"],sL(P)),e}function lL(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>mf(s))),a(e,["files"],o)}return e}function aL(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function uL(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cL extends oi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ll(jr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>mf(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eL(e);return o=W("files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=lL(c),h=new A1;return Object.assign(h,d),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rL(e);return o=W("upload/v1beta/files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=aL(c),h=new R1;return Object.assign(h,d),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iL(e);return o=W("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>mf(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=oL(e);return o=W("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=uL(c),h=new k1;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dL(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function LC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],dL(n)),e}function fL(t){const e={},n=l(t,["speaker"]);n!=null&&a(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],LC(r)),e}function hL(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fL(i))),a(e,["speakerVoiceConfigs"],r)}return e}function pL(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],LC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],hL(r));const i=l(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function mL(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function gL(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function yL(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function vL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],mL(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],gL(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],yL(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function _L(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vL(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function TL(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function EL(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function CL(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],EL(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function wL(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function IL(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],wL(n)),e}function SL(){return{}}function AL(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function RL(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>TL(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],CL(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],IL(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],SL());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],AL(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function kL(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Pv(){return{}}function xL(t){const e={},n=l(t,["disabled"]);n!=null&&a(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&a(e,["silenceDurationMs"],s),e}function PL(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],xL(n));const r=l(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function ML(t){const e={},n=l(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function NL(t){const e={},n=l(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],ML(r)),e}function DL(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function VL(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],pL(fp(p)));const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&a(e,["setup","systemInstruction"],_L(ht(v)));const A=l(t,["tools"]);if(e!==void 0&&A!=null){let F=go(A);Array.isArray(F)&&(F=F.map(U=>RL(mo(U)))),a(e,["setup","tools"],F)}const P=l(t,["sessionResumption"]);e!==void 0&&P!=null&&a(e,["setup","sessionResumption"],kL(P));const D=l(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&a(e,["setup","inputAudioTranscription"],Pv());const R=l(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&a(e,["setup","outputAudioTranscription"],Pv());const I=l(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&a(e,["setup","realtimeInputConfig"],PL(I));const k=l(t,["contextWindowCompression"]);e!==void 0&&k!=null&&a(e,["setup","contextWindowCompression"],NL(k));const V=l(t,["proactivity"]);return e!==void 0&&V!=null&&a(e,["setup","proactivity"],DL(V)),n}function LL(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],VL(i,n)),n}function UL(){return{}}function FL(){return{}}function bL(t){const e={},n=l(t,["media"]);n!=null&&a(e,["mediaChunks"],_C(n));const r=l(t,["audio"]);r!=null&&a(e,["audio"],EC(r));const i=l(t,["audioStreamEnd"]);i!=null&&a(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&a(e,["video"],TC(o));const s=l(t,["text"]);return s!=null&&a(e,["text"],s),l(t,["activityStart"])!=null&&a(e,["activityStart"],UL()),l(t,["activityEnd"])!=null&&a(e,["activityEnd"],FL()),e}function UC(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["weight"]);return r!=null&&a(e,["weight"],r),e}function OL(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>UC(i))),a(e,["weightedPrompts"],r)}return e}function FC(t){const e={},n=l(t,["temperature"]);n!=null&&a(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&a(e,["topK"],r);const i=l(t,["seed"]);i!=null&&a(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&a(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&a(e,["bpm"],s);const u=l(t,["density"]);u!=null&&a(e,["density"],u);const c=l(t,["brightness"]);c!=null&&a(e,["brightness"],c);const d=l(t,["scale"]);d!=null&&a(e,["scale"],d);const h=l(t,["muteBass"]);h!=null&&a(e,["muteBass"],h);const p=l(t,["muteDrums"]);p!=null&&a(e,["muteDrums"],p);const g=l(t,["onlyBassAndDrums"]);g!=null&&a(e,["onlyBassAndDrums"],g);const v=l(t,["musicGenerationMode"]);return v!=null&&a(e,["musicGenerationMode"],v),e}function BL(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],FC(n)),e}function bC(t){const e={},n=l(t,["model"]);return n!=null&&a(e,["model"],n),e}function OC(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>UC(i))),a(e,["weightedPrompts"],r)}return e}function gf(t){const e={},n=l(t,["setup"]);n!=null&&a(e,["setup"],bC(n));const r=l(t,["clientContent"]);r!=null&&a(e,["clientContent"],OC(r));const i=l(t,["musicGenerationConfig"]);i!=null&&a(e,["musicGenerationConfig"],FC(i));const o=l(t,["playbackControl"]);return o!=null&&a(e,["playbackControl"],o),e}function $L(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function qL(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],$L(n)),e}function GL(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&a(e,["voiceConfig"],qL(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function HL(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function zL(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function WL(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function KL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],HL(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],zL(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],WL(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function JL(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>KL(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function YL(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function QL(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function XL(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&a(e,["timeRangeFilter"],QL(n));const r=l(t,["excludeDomains"]);return r!=null&&a(e,["excludeDomains"],r),e}function ZL(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function jL(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],ZL(n)),e}function e2(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&a(e,["excludeDomains"],n),e}function t2(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function n2(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],t2(n));const r=l(t,["authType"]);r!=null&&a(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&a(e,["oauthConfig"],s);const u=l(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function r2(t){const e={},n=l(t,["authConfig"]);return n!=null&&a(e,["authConfig"],n2(n)),e}function i2(){return{}}function o2(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function s2(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>YL(g))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],XL(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],jL(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],e2(s));const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],r2(u)),l(t,["urlContext"])!=null&&a(e,["urlContext"],i2());const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],o2(d));const h=l(t,["codeExecution"]);return h!=null&&a(e,["codeExecution"],h),e}function l2(t){const e={},n=l(t,["handle"]);n!=null&&a(e,["handle"],n);const r=l(t,["transparent"]);return r!=null&&a(e,["transparent"],r),e}function Mv(){return{}}function a2(t){const e={},n=l(t,["disabled"]);n!=null&&a(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&a(e,["silenceDurationMs"],s),e}function u2(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],a2(n));const r=l(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function c2(t){const e={},n=l(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function d2(t){const e={},n=l(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],c2(r)),e}function f2(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function h2(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],GL(fp(p)));const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&a(e,["setup","systemInstruction"],JL(ht(v)));const A=l(t,["tools"]);if(e!==void 0&&A!=null){let F=go(A);Array.isArray(F)&&(F=F.map(U=>s2(mo(U)))),a(e,["setup","tools"],F)}const P=l(t,["sessionResumption"]);e!==void 0&&P!=null&&a(e,["setup","sessionResumption"],l2(P));const D=l(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&a(e,["setup","inputAudioTranscription"],Mv());const R=l(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&a(e,["setup","outputAudioTranscription"],Mv());const I=l(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&a(e,["setup","realtimeInputConfig"],u2(I));const k=l(t,["contextWindowCompression"]);e!==void 0&&k!=null&&a(e,["setup","contextWindowCompression"],d2(k));const V=l(t,["proactivity"]);return e!==void 0&&V!=null&&a(e,["setup","proactivity"],f2(V)),n}function p2(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],h2(i,n)),n}function m2(){return{}}function g2(){return{}}function y2(t){const e={},n=l(t,["media"]);n!=null&&a(e,["mediaChunks"],_C(n));const r=l(t,["audio"]);r!=null&&a(e,["audio"],EC(r));const i=l(t,["audioStreamEnd"]);i!=null&&a(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&a(e,["video"],TC(o));const s=l(t,["text"]);return s!=null&&a(e,["text"],s),l(t,["activityStart"])!=null&&a(e,["activityStart"],m2()),l(t,["activityEnd"])!=null&&a(e,["activityEnd"],g2()),e}function v2(){return{}}function _2(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function T2(t){const e={},n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function E2(t){const e={},n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function C2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],_2(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],T2(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],E2(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function w2(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>C2(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function Nv(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["finished"]);return r!=null&&a(e,["finished"],r),e}function I2(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function S2(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>I2(i))),a(e,["urlMetadata"],r)}return e}function A2(t){const e={},n=l(t,["modelTurn"]);n!=null&&a(e,["modelTurn"],w2(n));const r=l(t,["turnComplete"]);r!=null&&a(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&a(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&a(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&a(e,["generationComplete"],s);const u=l(t,["inputTranscription"]);u!=null&&a(e,["inputTranscription"],Nv(u));const c=l(t,["outputTranscription"]);c!=null&&a(e,["outputTranscription"],Nv(c));const d=l(t,["urlContextMetadata"]);return d!=null&&a(e,["urlContextMetadata"],S2(d)),e}function R2(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const r=l(t,["args"]);r!=null&&a(e,["args"],r);const i=l(t,["name"]);return i!=null&&a(e,["name"],i),e}function k2(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>R2(i))),a(e,["functionCalls"],r)}return e}function x2(t){const e={},n=l(t,["ids"]);return n!=null&&a(e,["ids"],n),e}function Yl(t){const e={},n=l(t,["modality"]);n!=null&&a(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&a(e,["tokenCount"],r),e}function P2(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&a(e,["cachedContentTokenCount"],r);const i=l(t,["responseTokenCount"]);i!=null&&a(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&a(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>Yl(v))),a(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>Yl(v))),a(e,["cacheTokensDetails"],g)}const h=l(t,["responseTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>Yl(v))),a(e,["responseTokensDetails"],g)}const p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>Yl(v))),a(e,["toolUsePromptTokensDetails"],g)}return e}function M2(t){const e={},n=l(t,["timeLeft"]);return n!=null&&a(e,["timeLeft"],n),e}function N2(t){const e={},n=l(t,["newHandle"]);n!=null&&a(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&a(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&a(e,["lastConsumedClientMessageIndex"],i),e}function D2(t){const e={};l(t,["setupComplete"])!=null&&a(e,["setupComplete"],v2());const r=l(t,["serverContent"]);r!=null&&a(e,["serverContent"],A2(r));const i=l(t,["toolCall"]);i!=null&&a(e,["toolCall"],k2(i));const o=l(t,["toolCallCancellation"]);o!=null&&a(e,["toolCallCancellation"],x2(o));const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],P2(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],M2(u));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&a(e,["sessionResumptionUpdate"],N2(c)),e}function V2(){return{}}function L2(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["weight"]);return r!=null&&a(e,["weight"],r),e}function U2(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>L2(i))),a(e,["weightedPrompts"],r)}return e}function F2(t){const e={},n=l(t,["temperature"]);n!=null&&a(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&a(e,["topK"],r);const i=l(t,["seed"]);i!=null&&a(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&a(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&a(e,["bpm"],s);const u=l(t,["density"]);u!=null&&a(e,["density"],u);const c=l(t,["brightness"]);c!=null&&a(e,["brightness"],c);const d=l(t,["scale"]);d!=null&&a(e,["scale"],d);const h=l(t,["muteBass"]);h!=null&&a(e,["muteBass"],h);const p=l(t,["muteDrums"]);p!=null&&a(e,["muteDrums"],p);const g=l(t,["onlyBassAndDrums"]);g!=null&&a(e,["onlyBassAndDrums"],g);const v=l(t,["musicGenerationMode"]);return v!=null&&a(e,["musicGenerationMode"],v),e}function b2(t){const e={},n=l(t,["clientContent"]);n!=null&&a(e,["clientContent"],U2(n));const r=l(t,["musicGenerationConfig"]);return r!=null&&a(e,["musicGenerationConfig"],F2(r)),e}function O2(t){const e={},n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);r!=null&&a(e,["mimeType"],r);const i=l(t,["sourceMetadata"]);return i!=null&&a(e,["sourceMetadata"],b2(i)),e}function B2(t){const e={},n=l(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>O2(i))),a(e,["audioChunks"],r)}return e}function $2(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["filteredReason"]);return r!=null&&a(e,["filteredReason"],r),e}function q2(t){const e={};l(t,["setupComplete"])!=null&&a(e,["setupComplete"],V2());const r=l(t,["serverContent"]);r!=null&&a(e,["serverContent"],B2(r));const i=l(t,["filteredPrompt"]);return i!=null&&a(e,["filteredPrompt"],$2(i)),e}function G2(t){const e={},n=l(t,["sessionId"]);return n!=null&&a(e,["sessionId"],n),e}function H2(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function z2(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function W2(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function K2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],H2(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],z2(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],W2(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function J2(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>K2(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function Dv(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["finished"]);return r!=null&&a(e,["finished"],r),e}function Y2(t){const e={},n=l(t,["modelTurn"]);n!=null&&a(e,["modelTurn"],J2(n));const r=l(t,["turnComplete"]);r!=null&&a(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&a(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&a(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&a(e,["generationComplete"],s);const u=l(t,["inputTranscription"]);u!=null&&a(e,["inputTranscription"],Dv(u));const c=l(t,["outputTranscription"]);return c!=null&&a(e,["outputTranscription"],Dv(c)),e}function Q2(t){const e={},n=l(t,["args"]);n!=null&&a(e,["args"],n);const r=l(t,["name"]);return r!=null&&a(e,["name"],r),e}function X2(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Q2(i))),a(e,["functionCalls"],r)}return e}function Z2(t){const e={},n=l(t,["ids"]);return n!=null&&a(e,["ids"],n),e}function Ql(t){const e={},n=l(t,["modality"]);n!=null&&a(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&a(e,["tokenCount"],r),e}function j2(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&a(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&a(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&a(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(A=>Ql(A))),a(e,["promptTokensDetails"],v)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(A=>Ql(A))),a(e,["cacheTokensDetails"],v)}const h=l(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(A=>Ql(A))),a(e,["responseTokensDetails"],v)}const p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(A=>Ql(A))),a(e,["toolUsePromptTokensDetails"],v)}const g=l(t,["trafficType"]);return g!=null&&a(e,["trafficType"],g),e}function eU(t){const e={},n=l(t,["timeLeft"]);return n!=null&&a(e,["timeLeft"],n),e}function tU(t){const e={},n=l(t,["newHandle"]);n!=null&&a(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&a(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&a(e,["lastConsumedClientMessageIndex"],i),e}function nU(t){const e={},n=l(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],G2(n));const r=l(t,["serverContent"]);r!=null&&a(e,["serverContent"],Y2(r));const i=l(t,["toolCall"]);i!=null&&a(e,["toolCall"],X2(i));const o=l(t,["toolCallCancellation"]);o!=null&&a(e,["toolCallCancellation"],Z2(o));const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],j2(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],eU(u));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&a(e,["sessionResumptionUpdate"],tU(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rU(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function iU(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function oU(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function sU(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],rU(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],iU(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],oU(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function qu(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>sU(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function lU(t){const e={},n=l(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&a(e,["default"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["enum"]);o!=null&&a(e,["enum"],o);const s=l(t,["example"]);s!=null&&a(e,["example"],s);const u=l(t,["format"]);u!=null&&a(e,["format"],u);const c=l(t,["items"]);c!=null&&a(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&a(e,["maxLength"],h);const p=l(t,["maxProperties"]);p!=null&&a(e,["maxProperties"],p);const g=l(t,["maximum"]);g!=null&&a(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&a(e,["minItems"],v);const A=l(t,["minLength"]);A!=null&&a(e,["minLength"],A);const P=l(t,["minProperties"]);P!=null&&a(e,["minProperties"],P);const D=l(t,["minimum"]);D!=null&&a(e,["minimum"],D);const R=l(t,["nullable"]);R!=null&&a(e,["nullable"],R);const I=l(t,["pattern"]);I!=null&&a(e,["pattern"],I);const k=l(t,["properties"]);k!=null&&a(e,["properties"],k);const V=l(t,["propertyOrdering"]);V!=null&&a(e,["propertyOrdering"],V);const F=l(t,["required"]);F!=null&&a(e,["required"],F);const U=l(t,["title"]);U!=null&&a(e,["title"],U);const S=l(t,["type"]);return S!=null&&a(e,["type"],S),e}function aU(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&a(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function uU(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function cU(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function dU(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],cU(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function fU(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function hU(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],fU(n)),e}function pU(){return{}}function mU(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function gU(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>uU(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],dU(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],hU(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],pU());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],mU(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function yU(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function vU(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function _U(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],vU(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function TU(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],yU(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],_U(r)),e}function EU(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function BC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],EU(n)),e}function CU(t){const e={},n=l(t,["speaker"]);n!=null&&a(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],BC(r)),e}function wU(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>CU(i))),a(e,["speakerVoiceConfigs"],r)}return e}function IU(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],BC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],wU(r));const i=l(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function SU(t){const e={},n=l(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function AU(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],qu(ht(i)));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&a(r,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const g=l(e,["logprobs"]);g!=null&&a(r,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&a(r,["presencePenalty"],v);const A=l(e,["frequencyPenalty"]);A!=null&&a(r,["frequencyPenalty"],A);const P=l(e,["seed"]);P!=null&&a(r,["seed"],P);const D=l(e,["responseMimeType"]);D!=null&&a(r,["responseMimeType"],D);const R=l(e,["responseSchema"]);R!=null&&a(r,["responseSchema"],lU(cp(R)));const I=l(e,["responseJsonSchema"]);if(I!=null&&a(r,["responseJsonSchema"],I),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=l(e,["safetySettings"]);if(n!==void 0&&k!=null){let x=k;Array.isArray(x)&&(x=x.map(N=>aU(N))),a(n,["safetySettings"],x)}const V=l(e,["tools"]);if(n!==void 0&&V!=null){let x=go(V);Array.isArray(x)&&(x=x.map(N=>gU(mo(N)))),a(n,["tools"],x)}const F=l(e,["toolConfig"]);if(n!==void 0&&F!=null&&a(n,["toolConfig"],TU(F)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=l(e,["cachedContent"]);n!==void 0&&U!=null&&a(n,["cachedContent"],On(t,U));const S=l(e,["responseModalities"]);S!=null&&a(r,["responseModalities"],S);const _=l(e,["mediaResolution"]);_!=null&&a(r,["mediaResolution"],_);const T=l(e,["speechConfig"]);if(T!=null&&a(r,["speechConfig"],IU(dp(T))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=l(e,["thinkingConfig"]);return C!=null&&a(r,["thinkingConfig"],SU(C)),r}function Vv(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["contents"]);if(i!=null){let s=$t(i);Array.isArray(s)&&(s=s.map(u=>qu(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["generationConfig"],AU(t,o,n)),n}function RU(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&a(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&a(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&a(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function kU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["contents"]);i!=null&&a(n,["requests[]","content"],wC(t,i));const o=l(e,["config"]);o!=null&&a(n,["config"],RU(o,n));const s=l(e,["model"]);return s!==void 0&&a(n,["requests[]","model"],me(t,s)),n}function xU(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const o=l(t,["guidanceScale"]);if(e!==void 0&&o!=null&&a(e,["parameters","guidanceScale"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const h=l(t,["language"]);e!==void 0&&h!=null&&a(e,["parameters","language"],h);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","mimeType"],p);const g=l(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&a(e,["parameters","outputOptions","compressionQuality"],g),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const v=l(t,["imageSize"]);if(e!==void 0&&v!=null&&a(e,["parameters","sampleImageSize"],v),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function PU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&a(n,["config"],xU(o,n)),n}function MU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function NU(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&a(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],AC(t,u)),r}function DU(t,e){const n={},r=l(e,["config"]);return r!=null&&a(n,["config"],NU(t,r,n)),n}function VU(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&a(e,["defaultCheckpointId"],o),n}function LU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],VU(i,n)),n}function UU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function FU(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function bU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["contents"]);if(i!=null){let s=$t(i);Array.isArray(s)&&(s=s.map(u=>qu(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["config"],FU(o)),n}function $C(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],si(n));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function OU(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);if(e!==void 0&&i!=null&&a(e,["instances[0]","image"],$C(i)),l(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function BU(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&a(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["aspectRatio"]);if(e!==void 0&&o!=null&&a(e,["parameters","aspectRatio"],o),l(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const s=l(t,["personGeneration"]);if(e!==void 0&&s!=null&&a(e,["parameters","personGeneration"],s),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=l(t,["negativePrompt"]);e!==void 0&&u!=null&&a(e,["parameters","negativePrompt"],u);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&a(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function $U(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["image"]);if(o!=null&&a(n,["instances[0]","image"],$C(o)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=l(e,["source"]);s!=null&&a(n,["config"],OU(s,n));const u=l(e,["config"]);return u!=null&&a(n,["config"],BU(u,n)),n}function qU(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function GU(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function HU(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function zU(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],qU(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],GU(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],HU(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function vo(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>zU(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function WU(t){const e={},n=l(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&a(e,["default"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["enum"]);o!=null&&a(e,["enum"],o);const s=l(t,["example"]);s!=null&&a(e,["example"],s);const u=l(t,["format"]);u!=null&&a(e,["format"],u);const c=l(t,["items"]);c!=null&&a(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&a(e,["maxLength"],h);const p=l(t,["maxProperties"]);p!=null&&a(e,["maxProperties"],p);const g=l(t,["maximum"]);g!=null&&a(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&a(e,["minItems"],v);const A=l(t,["minLength"]);A!=null&&a(e,["minLength"],A);const P=l(t,["minProperties"]);P!=null&&a(e,["minProperties"],P);const D=l(t,["minimum"]);D!=null&&a(e,["minimum"],D);const R=l(t,["nullable"]);R!=null&&a(e,["nullable"],R);const I=l(t,["pattern"]);I!=null&&a(e,["pattern"],I);const k=l(t,["properties"]);k!=null&&a(e,["properties"],k);const V=l(t,["propertyOrdering"]);V!=null&&a(e,["propertyOrdering"],V);const F=l(t,["required"]);F!=null&&a(e,["required"],F);const U=l(t,["title"]);U!=null&&a(e,["title"],U);const S=l(t,["type"]);return S!=null&&a(e,["type"],S),e}function KU(t){const e={},n=l(t,["featureSelectionPreference"]);return n!=null&&a(e,["featureSelectionPreference"],n),e}function JU(t){const e={},n=l(t,["method"]);n!=null&&a(e,["method"],n);const r=l(t,["category"]);r!=null&&a(e,["category"],r);const i=l(t,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function YU(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function QU(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function XU(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&a(e,["timeRangeFilter"],QU(n));const r=l(t,["excludeDomains"]);return r!=null&&a(e,["excludeDomains"],r),e}function ZU(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function jU(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],ZU(n)),e}function eF(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&a(e,["excludeDomains"],n),e}function tF(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function nF(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],tF(n));const r=l(t,["authType"]);r!=null&&a(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&a(e,["oauthConfig"],s);const u=l(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function rF(t){const e={},n=l(t,["authConfig"]);return n!=null&&a(e,["authConfig"],nF(n)),e}function iF(){return{}}function oF(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function qC(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>YU(g))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],XU(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],jU(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],eF(s));const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],rF(u)),l(t,["urlContext"])!=null&&a(e,["urlContext"],iF());const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],oF(d));const h=l(t,["codeExecution"]);return h!=null&&a(e,["codeExecution"],h),e}function sF(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function lF(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function aF(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],lF(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function uF(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],sF(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],aF(r)),e}function cF(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function dF(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],cF(n)),e}function fF(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&a(e,["voiceConfig"],dF(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function hF(t){const e={},n=l(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function pF(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],vo(ht(i)));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&a(r,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const g=l(e,["logprobs"]);g!=null&&a(r,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&a(r,["presencePenalty"],v);const A=l(e,["frequencyPenalty"]);A!=null&&a(r,["frequencyPenalty"],A);const P=l(e,["seed"]);P!=null&&a(r,["seed"],P);const D=l(e,["responseMimeType"]);D!=null&&a(r,["responseMimeType"],D);const R=l(e,["responseSchema"]);R!=null&&a(r,["responseSchema"],WU(cp(R)));const I=l(e,["responseJsonSchema"]);I!=null&&a(r,["responseJsonSchema"],I);const k=l(e,["routingConfig"]);k!=null&&a(r,["routingConfig"],k);const V=l(e,["modelSelectionConfig"]);V!=null&&a(r,["modelConfig"],KU(V));const F=l(e,["safetySettings"]);if(n!==void 0&&F!=null){let le=F;Array.isArray(le)&&(le=le.map(pe=>JU(pe))),a(n,["safetySettings"],le)}const U=l(e,["tools"]);if(n!==void 0&&U!=null){let le=go(U);Array.isArray(le)&&(le=le.map(pe=>qC(mo(pe)))),a(n,["tools"],le)}const S=l(e,["toolConfig"]);n!==void 0&&S!=null&&a(n,["toolConfig"],uF(S));const _=l(e,["labels"]);n!==void 0&&_!=null&&a(n,["labels"],_);const T=l(e,["cachedContent"]);n!==void 0&&T!=null&&a(n,["cachedContent"],On(t,T));const C=l(e,["responseModalities"]);C!=null&&a(r,["responseModalities"],C);const x=l(e,["mediaResolution"]);x!=null&&a(r,["mediaResolution"],x);const N=l(e,["speechConfig"]);N!=null&&a(r,["speechConfig"],fF(dp(N)));const M=l(e,["audioTimestamp"]);M!=null&&a(r,["audioTimestamp"],M);const oe=l(e,["thinkingConfig"]);return oe!=null&&a(r,["thinkingConfig"],hF(oe)),r}function Lv(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["contents"]);if(i!=null){let s=$t(i);Array.isArray(s)&&(s=s.map(u=>vo(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["generationConfig"],pF(t,o,n)),n}function mF(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&a(e,["instances[]","task_type"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&a(e,["instances[]","title"],i);const o=l(t,["outputDimensionality"]);e!==void 0&&o!=null&&a(e,["parameters","outputDimensionality"],o);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&a(e,["instances[]","mimeType"],s);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function gF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["contents"]);i!=null&&a(n,["instances[]","content"],wC(t,i));const o=l(e,["config"]);return o!=null&&a(n,["config"],mF(o,n)),n}function yF(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&a(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&a(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const g=l(t,["includeRaiReason"]);e!==void 0&&g!=null&&a(e,["parameters","includeRaiReason"],g);const v=l(t,["language"]);e!==void 0&&v!=null&&a(e,["parameters","language"],v);const A=l(t,["outputMimeType"]);e!==void 0&&A!=null&&a(e,["parameters","outputOptions","mimeType"],A);const P=l(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&a(e,["parameters","outputOptions","compressionQuality"],P);const D=l(t,["addWatermark"]);e!==void 0&&D!=null&&a(e,["parameters","addWatermark"],D);const R=l(t,["imageSize"]);e!==void 0&&R!=null&&a(e,["parameters","sampleImageSize"],R);const I=l(t,["enhancePrompt"]);return e!==void 0&&I!=null&&a(e,["parameters","enhancePrompt"],I),n}function vF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&a(n,["config"],yF(o,n)),n}function gn(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&a(e,["bytesBase64Encoded"],si(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function _F(t){const e={},n=l(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&a(e,["maskClasses"],r);const i=l(t,["maskDilation"]);return i!=null&&a(e,["dilation"],i),e}function TF(t){const e={},n=l(t,["controlType"]);n!=null&&a(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&a(e,["computeControl"],r),e}function EF(t){const e={},n=l(t,["styleDescription"]);return n!=null&&a(e,["styleDescription"],n),e}function CF(t){const e={},n=l(t,["subjectType"]);n!=null&&a(e,["subjectType"],n);const r=l(t,["subjectDescription"]);return r!=null&&a(e,["subjectDescription"],r),e}function wF(t){const e={},n=l(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],gn(n));const r=l(t,["referenceId"]);r!=null&&a(e,["referenceId"],r);const i=l(t,["referenceType"]);i!=null&&a(e,["referenceType"],i);const o=l(t,["maskImageConfig"]);o!=null&&a(e,["maskImageConfig"],_F(o));const s=l(t,["controlImageConfig"]);s!=null&&a(e,["controlImageConfig"],TF(s));const u=l(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],EF(u));const c=l(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],CF(c)),e}function IF(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&a(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&a(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const g=l(t,["includeRaiReason"]);e!==void 0&&g!=null&&a(e,["parameters","includeRaiReason"],g);const v=l(t,["language"]);e!==void 0&&v!=null&&a(e,["parameters","language"],v);const A=l(t,["outputMimeType"]);e!==void 0&&A!=null&&a(e,["parameters","outputOptions","mimeType"],A);const P=l(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&a(e,["parameters","outputOptions","compressionQuality"],P);const D=l(t,["addWatermark"]);e!==void 0&&D!=null&&a(e,["parameters","addWatermark"],D);const R=l(t,["editMode"]);e!==void 0&&R!=null&&a(e,["parameters","editMode"],R);const I=l(t,["baseSteps"]);return e!==void 0&&I!=null&&a(e,["parameters","editConfig","baseSteps"],I),n}function SF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>wF(c))),a(n,["instances[0]","referenceImages"],u)}const s=l(e,["config"]);return s!=null&&a(n,["config"],IF(s,n)),n}function AF(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["includeRaiReason"]);e!==void 0&&i!=null&&a(e,["parameters","includeRaiReason"],i);const o=l(t,["outputMimeType"]);e!==void 0&&o!=null&&a(e,["parameters","outputOptions","mimeType"],o);const s=l(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&a(e,["parameters","outputOptions","compressionQuality"],s);const u=l(t,["enhanceInputImage"]);e!==void 0&&u!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=l(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=l(t,["numberOfImages"]);e!==void 0&&d!=null&&a(e,["parameters","sampleCount"],d);const h=l(t,["mode"]);return e!==void 0&&h!=null&&a(e,["parameters","mode"],h),n}function RF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],gn(i));const o=l(e,["upscaleFactor"]);o!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=l(e,["config"]);return s!=null&&a(n,["config"],AF(s,n)),n}function kF(t){const e={},n=l(t,["productImage"]);return n!=null&&a(e,["image"],gn(n)),e}function xF(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["personImage"]);e!==void 0&&i!=null&&a(e,["instances[0]","personImage","image"],gn(i));const o=l(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>kF(u))),a(e,["instances[0]","productImages"],s)}return n}function PF(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&a(e,["parameters","editConfig","baseSteps"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const s=l(t,["seed"]);e!==void 0&&s!=null&&a(e,["parameters","seed"],s);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&a(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p);const g=l(t,["enhancePrompt"]);return e!==void 0&&g!=null&&a(e,["parameters","enhancePrompt"],g),n}function MF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["source"]);i!=null&&a(n,["config"],xF(i,n));const o=l(e,["config"]);return o!=null&&a(n,["config"],PF(o,n)),n}function NF(t){const e={},n=l(t,["image"]);return n!=null&&a(e,["image"],gn(n)),e}function DF(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&a(e,["instances[0]","image"],gn(i));const o=l(t,["scribbleImage"]);return e!==void 0&&o!=null&&a(e,["instances[0]","scribble"],NF(o)),n}function VF(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&a(e,["parameters","mode"],r);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&a(e,["parameters","maxPredictions"],i);const o=l(t,["confidenceThreshold"]);e!==void 0&&o!=null&&a(e,["parameters","confidenceThreshold"],o);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&a(e,["parameters","maskDilation"],s);const u=l(t,["binaryColorThreshold"]);return e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u),n}function LF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["source"]);i!=null&&a(n,["config"],DF(i,n));const o=l(e,["config"]);return o!=null&&a(n,["config"],VF(o,n)),n}function UF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function FF(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&a(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],AC(t,u)),r}function bF(t,e){const n={},r=l(e,["config"]);return r!=null&&a(n,["config"],FF(t,r,n)),n}function OF(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&a(e,["defaultCheckpointId"],o),n}function BF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],OF(i,n)),n}function $F(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function qF(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&a(e,["systemInstruction"],vo(ht(r)));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>qC(u))),a(e,["tools"],s)}const o=l(t,["generationConfig"]);return e!==void 0&&o!=null&&a(e,["generationConfig"],o),n}function GF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["contents"]);if(i!=null){let s=$t(i);Array.isArray(s)&&(s=s.map(u=>vo(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["config"],qF(o,n)),n}function HF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["contents"]);if(i!=null){let s=$t(i);Array.isArray(s)&&(s=s.map(u=>vo(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["config"],o),n}function GC(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&a(e,["bytesBase64Encoded"],si(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function zF(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&a(e,["instances[0]","image"],gn(i));const o=l(t,["video"]);return e!==void 0&&o!=null&&a(e,["instances[0]","video"],GC(o)),n}function WF(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],gn(n));const r=l(t,["referenceType"]);return r!=null&&a(e,["referenceType"],r),e}function KF(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=l(t,["fps"]);e!==void 0&&o!=null&&a(e,["parameters","fps"],o);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s);const u=l(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&a(e,["parameters","personGeneration"],h);const p=l(t,["pubsubTopic"]);e!==void 0&&p!=null&&a(e,["parameters","pubsubTopic"],p);const g=l(t,["negativePrompt"]);e!==void 0&&g!=null&&a(e,["parameters","negativePrompt"],g);const v=l(t,["enhancePrompt"]);e!==void 0&&v!=null&&a(e,["parameters","enhancePrompt"],v);const A=l(t,["generateAudio"]);e!==void 0&&A!=null&&a(e,["parameters","generateAudio"],A);const P=l(t,["lastFrame"]);e!==void 0&&P!=null&&a(e,["instances[0]","lastFrame"],gn(P));const D=l(t,["referenceImages"]);if(e!==void 0&&D!=null){let I=D;Array.isArray(I)&&(I=I.map(k=>WF(k))),a(e,["instances[0]","referenceImages"],I)}const R=l(t,["compressionQuality"]);return e!==void 0&&R!=null&&a(e,["parameters","compressionQuality"],R),n}function JF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],me(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&a(n,["instances[0]","image"],gn(o));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],GC(s));const u=l(e,["source"]);u!=null&&a(n,["config"],zF(u,n));const c=l(e,["config"]);return c!=null&&a(n,["config"],KF(c,n)),n}function YF(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function QF(t){const e={},n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function XF(t){const e={},n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function ZF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],YF(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],QF(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],XF(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function jF(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ZF(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function eb(t){const e={},n=l(t,["citationSources"]);return n!=null&&a(e,["citations"],n),e}function tb(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function nb(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>tb(i))),a(e,["urlMetadata"],r)}return e}function rb(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],jF(n));const r=l(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],eb(r));const i=l(t,["tokenCount"]);i!=null&&a(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&a(e,["urlContextMetadata"],nb(s));const u=l(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);const c=l(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&a(e,["logprobsResult"],h);const p=l(t,["safetyRatings"]);return p!=null&&a(e,["safetyRatings"],p),e}function Uv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>rb(d))),a(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&a(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function ib(t){const e={},n=l(t,["values"]);return n!=null&&a(e,["values"],n),e}function ob(){return{}}function sb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ib(s))),a(e,["embeddings"],o)}return l(t,["metadata"])!=null&&a(e,["metadata"],ob()),e}function lb(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],si(n));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function HC(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&a(e,["contentType"],i),e}function ab(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],lb(n));const r=l(t,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);const i=l(t,["_self"]);return i!=null&&a(e,["safetyAttributes"],HC(i)),e}function ub(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ab(s))),a(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&a(e,["positivePromptSafetyAttributes"],HC(i)),e}function cb(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&a(e,["updateTime"],i),e}function yf(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["version"]);o!=null&&a(e,["version"],o);const s=l(t,["_self"]);s!=null&&a(e,["tunedModelInfo"],cb(s));const u=l(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=l(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);return d!=null&&a(e,["supportedActions"],d),e}function db(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=RC(i);Array.isArray(o)&&(o=o.map(s=>yf(s))),a(e,["models"],o)}return e}function fb(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function hb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&a(e,["totalTokens"],r);const i=l(t,["cachedContentTokenCount"]);return i!=null&&a(e,["cachedContentTokenCount"],i),e}function pb(t){const e={},n=l(t,["video","uri"]);n!=null&&a(e,["uri"],n);const r=l(t,["video","encodedVideo"]);r!=null&&a(e,["videoBytes"],si(r));const i=l(t,["encoding"]);return i!=null&&a(e,["mimeType"],i),e}function mb(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],pb(n)),e}function gb(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>mb(s))),a(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function yb(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],gb(s)),e}function vb(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function _b(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Tb(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Eb(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],vb(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],_b(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],Tb(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function Cb(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Eb(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function wb(t){const e={},n=l(t,["citations"]);return n!=null&&a(e,["citations"],n),e}function Ib(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function Sb(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ib(i))),a(e,["urlMetadata"],r)}return e}function Ab(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],Cb(n));const r=l(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],wb(r));const i=l(t,["finishMessage"]);i!=null&&a(e,["finishMessage"],i);const o=l(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&a(e,["urlContextMetadata"],Sb(s));const u=l(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);const c=l(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&a(e,["logprobsResult"],h);const p=l(t,["safetyRatings"]);return p!=null&&a(e,["safetyRatings"],p),e}function Fv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>Ab(h))),a(e,["candidates"],d)}const i=l(t,["createTime"]);i!=null&&a(e,["createTime"],i);const o=l(t,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const u=l(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function Rb(t){const e={},n=l(t,["truncated"]);n!=null&&a(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&a(e,["tokenCount"],r),e}function kb(t){const e={},n=l(t,["values"]);n!=null&&a(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&a(e,["statistics"],Rb(r)),e}function xb(t){const e={},n=l(t,["billableCharacterCount"]);return n!=null&&a(e,["billableCharacterCount"],n),e}function Pb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>kb(s))),a(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&a(e,["metadata"],xb(i)),e}function zC(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&a(e,["imageBytes"],si(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function WC(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&a(e,["contentType"],i),e}function Gu(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],zC(n));const r=l(t,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);const i=l(t,["_self"]);i!=null&&a(e,["safetyAttributes"],WC(i));const o=l(t,["prompt"]);return o!=null&&a(e,["enhancedPrompt"],o),e}function Mb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Gu(s))),a(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&a(e,["positivePromptSafetyAttributes"],WC(i)),e}function Nb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Gu(o))),a(e,["generatedImages"],i)}return e}function Db(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Gu(o))),a(e,["generatedImages"],i)}return e}function Vb(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Gu(i))),a(e,["generatedImages"],r)}return e}function Lb(t){const e={},n=l(t,["label"]);n!=null&&a(e,["label"],n);const r=l(t,["score"]);return r!=null&&a(e,["score"],r),e}function Ub(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["mask"],zC(n));const r=l(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Lb(o))),a(e,["labels"],i)}return e}function Fb(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Ub(i))),a(e,["generatedMasks"],r)}return e}function bb(t){const e={},n=l(t,["endpoint"]);n!=null&&a(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&a(e,["deployedModelId"],r),e}function Ob(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&a(e,["updateTime"],i),e}function Bb(t){const e={},n=l(t,["checkpointId"]);n!=null&&a(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&a(e,["epoch"],r);const i=l(t,["step"]);return i!=null&&a(e,["step"],i),e}function vf(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["versionId"]);o!=null&&a(e,["version"],o);const s=l(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(g=>bb(g))),a(e,["endpoints"],p)}const u=l(t,["labels"]);u!=null&&a(e,["labels"],u);const c=l(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],Ob(c));const d=l(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const h=l(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>Bb(g))),a(e,["checkpoints"],p)}return e}function $b(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=RC(i);Array.isArray(o)&&(o=o.map(s=>vf(s))),a(e,["models"],o)}return e}function qb(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Gb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&a(e,["totalTokens"],r),e}function Hb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);return r!=null&&a(e,["tokensInfo"],r),e}function zb(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&a(e,["videoBytes"],si(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Wb(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],zb(n)),e}function Kb(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Wb(s))),a(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function Jb(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response"]);return s!=null&&a(e,["response"],Kb(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yb="Content-Type",Qb="X-Server-Timeout",Xb="User-Agent",_f="x-goog-api-client",Zb="1.16.0",jb=`google-genai-sdk/${Zb}`,e4="v1beta1",t4="v1beta",bv=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class n4{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:e4,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:t4,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))i.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&r4(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Ov(i),new ff(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Ov(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return $i(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield Ie(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),v=g.status,A=g.code,P=`got status: ${v}. ${JSON.stringify(p)}`;if(A>=400&&A<600)throw new $u({message:P,status:A})}}catch(p){if(p.name==="ApiError")throw p}s+=d;let h=s.match(bv);for(;h;){const p=h[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new ff(g)),s=s.slice(h[0].length),h=s.match(bv)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=jb+" "+this.clientOptions.userAgentExtra;return e[Xb]=n,e[_f]=n,e[Yb]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(Qb,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:W("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ov(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new $u({message:i,status:n}):new Error(i)}}function r4(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const u=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],h=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?u[c]=r(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i4="mcp_used/unknown";let o4=!1;function KC(t){for(const e of t)if(s4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return o4}function JC(t){var e;const n=(e=t[_f])!==null&&e!==void 0?e:"";t[_f]=(n+` ${i4}`).trimStart()}function s4(t){return t!==null&&typeof t=="object"&&t instanceof hp}function l4(t,e=100){return $i(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield Ie(t.listTools({cursor:r}));for(const s of o.tools)yield yield Ie(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class hp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new hp(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var u=!0,c=(n=void 0,gs(l4(h))),d;d=await c.next(),e=d.done,!e;u=!0){i=d.value,u=!1;const p=i;s.push(p);const g=p.name;if(o[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);o[g]=h}}catch(p){n={error:p}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),b1(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function a4(t,e,n){const r=new P1;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=q2(i);Object.assign(r,o),e(r)}class u4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=f4(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const h=new Promise(k=>{d=k}),p=e.callbacks,g=function(){d({})},v=this.apiClient,A={onopen:g,onmessage:k=>{a4(v,p.onmessage,k)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(k){}},P=this.webSocketFactory.create(c,d4(s),A);P.connect(),await h;const D=me(this.apiClient,e.model),R=bC({model:D}),I=gf({setup:R});return P.send(JSON.stringify(I)),new c4(P,this.apiClient)}}class c4{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=OL(e),r=OC(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=BL(e),r=gf(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=gf({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(xi.PLAY)}pause(){this.sendPlaybackControl(xi.PAUSE)}stop(){this.sendPlaybackControl(xi.STOP)}resetContext(){this.sendPlaybackControl(xi.RESET_CONTEXT)}close(){this.conn.close()}}function d4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function f4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function p4(t,e,n){const r=new x1;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=nU(o);Object.assign(r,s)}else{const s=D2(o);Object.assign(r,s)}e(r)}class m4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new u4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&KC(e.config.tools)&&JC(p);const g=_4(p);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const T=this.apiClient.getApiKey();let C="BidiGenerateContent",x="key";T!=null&&T.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),C="BidiGenerateContentConstrained",x="access_token"),h=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${C}?${x}=${T}`}let v=()=>{};const A=new Promise(T=>{v=T}),P=e.callbacks,D=function(){var T;(T=P==null?void 0:P.onopen)===null||T===void 0||T.call(P),v({})},R=this.apiClient,I={onopen:D,onmessage:T=>{p4(R,P.onmessage,T)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(T){}},k=this.webSocketFactory.create(h,v4(g),I);k.connect(),await A;let V=me(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const T=this.apiClient.getProject(),C=this.apiClient.getLocation();V=`projects/${T}/locations/${C}/`+V}let F={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[au.AUDIO]}:e.config.responseModalities=[au.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],S=[];for(const T of U)if(this.isCallableTool(T)){const C=T;S.push(await C.tool())}else S.push(T);S.length>0&&(e.config.tools=S);const _={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=p2(this.apiClient,_):F=LL(this.apiClient,_),delete F.config,k.send(JSON.stringify(F)),new y4(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const g4={turnComplete:!0};class y4{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=$t(n.turns),e.isVertexAI()?r=r.map(i=>vo(i)):r=r.map(i=>qu(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(h4)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},g4),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:y2(e)}:n={realtimeInput:bL(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function v4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function _4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bv=10;function $v(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(qi(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function qi(t){return"callTool"in t&&typeof t.callTool=="function"}function T4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>qi(i)))!==null&&r!==void 0?r:!1}function E4(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!qi(i)))!==null&&r!==void 0?r:!1}function qv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C4 extends oi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!T4(n)||$v(n.config))return await this.generateContentInternal(c);if(E4(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,h;const p=$t(c.contents),g=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Bv;let v=0;for(;v<g&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const A=d.candidates[0].content,P=[];for(const D of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(qi(D)){const I=await D.callTool(d.functionCalls);P.push(...I)}v++,h={role:"user",parts:P},c.contents=$t(c.contents),c.contents.push(A),c.contents.push(h),qv(c.config)&&(p.push(A),p.push(h))}return qv(c.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),$v(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new ll(jr.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>qi(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&KC(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),JC(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(qi(s)){const u=s,c=await u.tool();for(const d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,u)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Bv;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,h,p){var g,v;return $i(this,arguments,function*(){for(var A,P,D,R;u<o;){s&&(u++,s=!1);const F=yield Ie(d.processParamsMaybeAddMcpUsage(p)),U=yield Ie(d.generateContentStreamInternal(F)),S=[],_=[];try{for(var I=!0,k=(P=void 0,gs(U)),V;V=yield Ie(k.next()),A=V.done,!A;I=!0){R=V.value,I=!1;const T=R;if(yield yield Ie(T),T.candidates&&(!((g=T.candidates[0])===null||g===void 0)&&g.content)){_.push(T.candidates[0].content);for(const C of(v=T.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(u<o&&C.functionCall){if(!C.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(C.functionCall.name)){const x=yield Ie(h.get(C.functionCall.name).callTool([C.functionCall]));S.push(...x)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${C.functionCall.name}`)}}}}catch(T){P={error:T}}finally{try{!I&&!A&&(D=k.return)&&(yield Ie(D.call(k)))}finally{if(P)throw P.error}}if(S.length>0){s=!0;const T=new Jo;T.candidates=[{content:{role:"user",parts:S}}],yield yield Ie(T);const C=[];C.push(..._),C.push({role:"user",parts:S});const x=$t(p.contents).concat(C);p.contents=x}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Lv(this.apiClient,e);return u=W("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Fv(h),g=new Jo;return Object.assign(g,p),g})}else{const d=Vv(this.apiClient,e);return u=W("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Uv(h),g=new Jo;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Lv(this.apiClient,e);return u=W("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return $i(this,arguments,function*(){var g,v,A,P;try{for(var D=!0,R=gs(p),I;I=yield Ie(R.next()),g=I.done,!g;D=!0){P=I.value,D=!1;const k=P,V=Fv(yield Ie(k.json()));V.sdkHttpResponse={headers:k.headers};const F=new Jo;Object.assign(F,V),yield yield Ie(F)}}catch(k){v={error:k}}finally{try{!D&&!g&&(A=R.return)&&(yield Ie(A.call(R)))}finally{if(v)throw v.error}}})})}else{const d=Vv(this.apiClient,e);return u=W("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return $i(this,arguments,function*(){var g,v,A,P;try{for(var D=!0,R=gs(p),I;I=yield Ie(R.next()),g=I.done,!g;D=!0){P=I.value,D=!1;const k=P,V=Uv(yield Ie(k.json()));V.sdkHttpResponse={headers:k.headers};const F=new Jo;Object.assign(F,V),yield yield Ie(F)}}catch(k){v={error:k}}finally{try{!D&&!g&&(A=R.return)&&(yield Ie(A.call(R)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=gF(this.apiClient,e);return u=W("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Pb(h),g=new fv;return Object.assign(g,p),g})}else{const d=kU(this.apiClient,e);return u=W("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=sb(h),g=new fv;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=vF(this.apiClient,e);return u=W("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Mb(h),g=new hv;return Object.assign(g,p),g})}else{const d=PU(this.apiClient,e);return u=W("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=ub(h),g=new hv;return Object.assign(g,p),g})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=SF(this.apiClient,e);return o=W("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=Nb(c),h=new E1;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=RF(this.apiClient,e);return o=W("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=Db(c),h=new C1;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=MF(this.apiClient,e);return o=W("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=Vb(c),h=new w1;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=LF(this.apiClient,e);return o=W("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=Fb(c),h=new I1;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=UF(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>vf(h))}else{const d=MU(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>yf(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=bF(this.apiClient,e);return u=W("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=$b(h),g=new pv;return Object.assign(g,p),g})}else{const d=DU(this.apiClient,e);return u=W("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=db(h),g=new pv;return Object.assign(g,p),g})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=BF(this.apiClient,e);return u=W("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>vf(h))}else{const d=LU(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>yf(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$F(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=qb(h),g=new mv;return Object.assign(g,p),g})}else{const d=UU(this.apiClient,e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=fb(h),g=new mv;return Object.assign(g,p),g})}}async countTokens(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=GF(this.apiClient,e);return u=W("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Gb(h),g=new gv;return Object.assign(g,p),g})}else{const d=bU(this.apiClient,e);return u=W("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=hb(h),g=new gv;return Object.assign(g,p),g})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=HF(this.apiClient,e);return o=W("{model}:computeTokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=Hb(c),h=new S1;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=JF(this.apiClient,e);return u=W("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=Jb(h),g=new uu;return Object.assign(g,p),g})}else{const d=$U(this.apiClient,e);return u=W("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=yb(h),g=new uu;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w4(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function I4(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["operationName"],n);const r=l(t,["resourceName"]);r!=null&&a(e,["_url","resourceName"],r);const i=l(t,["config"]);return i!=null&&a(e,["config"],i),e}function S4(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A4 extends oi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=S4(e);return u=W("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const d=w4(e);return u=W("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=I4(e);return o=W("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R4(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function YC(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],R4(n)),e}function k4(t){const e={},n=l(t,["speaker"]);n!=null&&a(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],YC(r)),e}function x4(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>k4(i))),a(e,["speakerVoiceConfigs"],r)}return e}function P4(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],YC(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],x4(r));const i=l(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function M4(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function N4(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function D4(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function V4(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],M4(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],N4(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],D4(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function L4(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>V4(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function U4(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function F4(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function b4(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],F4(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function O4(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function B4(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],O4(n)),e}function $4(){return{}}function q4(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function G4(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>U4(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],b4(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],B4(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],$4());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],q4(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function H4(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Gv(){return{}}function z4(t){const e={},n=l(t,["disabled"]);n!=null&&a(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&a(e,["silenceDurationMs"],s),e}function W4(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],z4(n));const r=l(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function K4(t){const e={},n=l(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function J4(t){const e={},n=l(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],K4(r)),e}function Y4(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function Q4(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],P4(fp(p)));const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&a(e,["setup","systemInstruction"],L4(ht(v)));const A=l(t,["tools"]);if(e!==void 0&&A!=null){let F=go(A);Array.isArray(F)&&(F=F.map(U=>G4(mo(U)))),a(e,["setup","tools"],F)}const P=l(t,["sessionResumption"]);e!==void 0&&P!=null&&a(e,["setup","sessionResumption"],H4(P));const D=l(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&a(e,["setup","inputAudioTranscription"],Gv());const R=l(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&a(e,["setup","outputAudioTranscription"],Gv());const I=l(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&a(e,["setup","realtimeInputConfig"],W4(I));const k=l(t,["contextWindowCompression"]);e!==void 0&&k!=null&&a(e,["setup","contextWindowCompression"],J4(k));const V=l(t,["proactivity"]);return e!==void 0&&V!=null&&a(e,["setup","proactivity"],Y4(V)),n}function X4(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],me(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],Q4(i,n)),n}function Z4(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&a(n,["expireTime"],i);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&a(n,["newSessionExpireTime"],o);const s=l(e,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],X4(t,u));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),r}function j4(t,e){const n={},r=l(e,["config"]);return r!=null&&a(n,["config"],Z4(t,r,n)),n}function e5(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t5(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function n5(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=t5(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class r5 extends oi{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=j4(this.apiClient,e);o=W("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=n5(u,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>e5(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i5(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function o5(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function s5(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],o5(n,e)),e}function l5(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function a5(t){const e={},n=l(t,["textInput"]);n!=null&&a(e,["textInput"],n);const r=l(t,["output"]);return r!=null&&a(e,["output"],r),e}function u5(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>a5(i))),a(e,["examples","examples"],r)}return e}function c5(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&a(e,["tuningTask","hyperparameters","epochCount"],i);const o=l(t,["learningRateMultiplier"]);if(o!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=l(t,["batchSize"]);e!==void 0&&s!=null&&a(e,["tuningTask","hyperparameters","batchSize"],s);const u=l(t,["learningRate"]);return e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","learningRate"],u),n}function d5(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&a(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&a(e,["tuningTask","trainingData"],u5(i));const o=l(t,["config"]);return o!=null&&a(e,["config"],c5(o,e)),e}function f5(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function h5(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function p5(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],h5(n,e)),e}function m5(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function g5(t,e){const n={},r=l(t,["gcsUri"]);e!==void 0&&r!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],i),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function y5(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&a(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function v5(t,e){const n={},r=l(t,["validationDataset"]);e!==void 0&&r!=null&&a(e,["supervisedTuningSpec"],y5(r,n));const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&a(e,["tunedModelDisplayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);const s=l(t,["epochCount"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const u=l(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const d=l(t,["preTunedModelCheckpointId"]);d!=null&&a(n,["preTunedModel","checkpointId"],d);const h=l(t,["adapterSize"]);if(e!==void 0&&h!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function _5(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&a(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],g5(i,e));const o=l(t,["config"]);return o!=null&&a(e,["config"],v5(o,e)),e}function T5(t){const e={},n=l(t,["name"]);n!=null&&a(e,["model"],n);const r=l(t,["name"]);return r!=null&&a(e,["endpoint"],r),e}function QC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["state"]);i!=null&&a(e,["state"],IC(i));const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["tuningTask","startTime"]);s!=null&&a(e,["startTime"],s);const u=l(t,["tuningTask","completeTime"]);u!=null&&a(e,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["description"]);d!=null&&a(e,["description"],d);const h=l(t,["baseModel"]);h!=null&&a(e,["baseModel"],h);const p=l(t,["_self"]);p!=null&&a(e,["tunedModel"],T5(p));const g=l(t,["customBaseModel"]);g!=null&&a(e,["customBaseModel"],g);const v=l(t,["experiment"]);v!=null&&a(e,["experiment"],v);const A=l(t,["labels"]);A!=null&&a(e,["labels"],A);const P=l(t,["outputUri"]);P!=null&&a(e,["outputUri"],P);const D=l(t,["pipelineJob"]);D!=null&&a(e,["pipelineJob"],D);const R=l(t,["serviceAccount"]);R!=null&&a(e,["serviceAccount"],R);const I=l(t,["tunedModelDisplayName"]);return I!=null&&a(e,["tunedModelDisplayName"],I),e}function E5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>QC(s))),a(e,["tuningJobs"],o)}return e}function C5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=l(t,["done"]);o!=null&&a(e,["done"],o);const s=l(t,["error"]);return s!=null&&a(e,["error"],s),e}function w5(t){const e={},n=l(t,["checkpointId"]);n!=null&&a(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&a(e,["epoch"],r);const i=l(t,["step"]);i!=null&&a(e,["step"],i);const o=l(t,["endpoint"]);return o!=null&&a(e,["endpoint"],o),e}function I5(t){const e={},n=l(t,["model"]);n!=null&&a(e,["model"],n);const r=l(t,["endpoint"]);r!=null&&a(e,["endpoint"],r);const i=l(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>w5(s))),a(e,["checkpoints"],o)}return e}function Tf(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["state"]);i!=null&&a(e,["state"],IC(i));const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["startTime"]);s!=null&&a(e,["startTime"],s);const u=l(t,["endTime"]);u!=null&&a(e,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["error"]);d!=null&&a(e,["error"],d);const h=l(t,["description"]);h!=null&&a(e,["description"],h);const p=l(t,["baseModel"]);p!=null&&a(e,["baseModel"],p);const g=l(t,["tunedModel"]);g!=null&&a(e,["tunedModel"],I5(g));const v=l(t,["preTunedModel"]);v!=null&&a(e,["preTunedModel"],v);const A=l(t,["supervisedTuningSpec"]);A!=null&&a(e,["supervisedTuningSpec"],A);const P=l(t,["tuningDataStats"]);P!=null&&a(e,["tuningDataStats"],P);const D=l(t,["encryptionSpec"]);D!=null&&a(e,["encryptionSpec"],D);const R=l(t,["partnerModelTuningSpec"]);R!=null&&a(e,["partnerModelTuningSpec"],R);const I=l(t,["customBaseModel"]);I!=null&&a(e,["customBaseModel"],I);const k=l(t,["experiment"]);k!=null&&a(e,["experiment"],k);const V=l(t,["labels"]);V!=null&&a(e,["labels"],V);const F=l(t,["outputUri"]);F!=null&&a(e,["outputUri"],F);const U=l(t,["pipelineJob"]);U!=null&&a(e,["pipelineJob"],U);const S=l(t,["serviceAccount"]);S!=null&&a(e,["serviceAccount"],S);const _=l(t,["tunedModelDisplayName"]);return _!=null&&a(e,["tunedModelDisplayName"],_),e}function S5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Tf(s))),a(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A5 extends oi{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ll(jr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:df.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=f5(e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>Tf(h))}else{const d=i5(e);return u=W("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>QC(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=p5(e);return u=W("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=S5(h),g=new vv;return Object.assign(g,p),g})}else{const d=s5(e);return u=W("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=E5(h),g=new vv;return Object.assign(g,p),g})}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=m5(e);s=W("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=l5(e);s=W("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=_5(e);return o=W("tuningJobs",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>Tf(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=d5(e);return o=W("tunedModels",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>C5(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R5{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const k5=1024*1024*8,x5=3,P5=1e3,M5=2,Wc="x-goog-upload-status";async function N5(t,e,n){var r,i,o;let s=0,u=0,c=new ff(new Response),d="upload";for(s=t.size;u<s;){const p=Math.min(k5,s-u),g=t.slice(u,u+p);u+p>=s&&(d+=", finalize");let v=0,A=P5;for(;v<x5&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[Wc]));)v++,await V5(A),A=A*M5;if(u+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[Wc])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[Wc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function D5(t){return{size:t.size,type:t.type}}function V5(t){return new Promise(e=>setTimeout(e,t))}class L5{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await N5(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await D5(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U5{create(e,n,r){return new F5(e,n,r)}}class F5{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hv="x-goog-api-key";class b5{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Hv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Hv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O5="gl-node/";class B5{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=T1(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new b5(this.apiKey);this.apiClient=new n4({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:O5+"web",uploader:new L5,downloader:new R5}),this.models=new C4(this.apiClient),this.live=new m4(this.apiClient,i,new U5),this.batches=new zD(this.apiClient),this.chats=new XV(this.models,this.apiClient),this.caches=new JV(this.apiClient),this.files=new cL(this.apiClient),this.operations=new A4(this.apiClient),this.authTokens=new r5(this.apiClient),this.tunings=new A5(this.apiClient)}}const $5=async(t,e,n,r)=>{const i=n||"PLACEHOLDER_API_KEY";if(!t)throw new Error(": ");const o=new B5({apiKey:i}),s=["","","","","","",""],u=[];t.grid.forEach((h,p)=>{if(p<s.length){const g=s[p];h.forEach((v,A)=>{v&&v.length>0&&v.forEach(P=>{u.push({day:g,period:A+1,name:P.name,room:P.room,credits:P.credits,memo:P.memo,tasks:P.tasks.filter(D=>!D.completed).map(D=>({content:D.content,dueDate:D.dueDate}))})})})}});const c={name:t.name,schedule:u},d=`


# 
- 
- 
- Markdown
- 

#  (JSON)
#  'schedule' (day)(period)
${JSON.stringify(c,null,2)}

# 
"${r}"


`;try{return await o.models.generateContentStream({model:e,contents:[{role:"user",parts:[{text:d}]}]})}catch(h){throw console.error("Error analyzing with Gemini API:",h),h instanceof Error&&h.message.includes("API key not valid")?new Error(": API"):new Error("AI")}},q5=({isOpen:t,onClose:e,onSave:n,currentModel:r,currentApiKey:i})=>{const[o,s]=H.useState(r),[u,c]=H.useState(i);if(H.useEffect(()=>{t&&(s(r),c(i))},[t,r,i]),!t)return null;const d=()=>{n(o,u),e()};return E.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:E.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${t?"scale-100":"scale-95"}`,children:[E.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[E.jsx("h2",{className:"text-xl font-bold",children:"AI"}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:E.jsx(ii,{className:"w-6 h-6"})})]}),E.jsxs("div",{className:"p-6 space-y-6",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold mb-2",children:"API (Gemini)"}),E.jsx("input",{type:"password",value:u,onChange:h=>c(h.target.value),placeholder:"Gemini API",className:"w-full bg-gray-200/50 dark:bg-gray-700/50 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500","aria-label":"Gemini API Key"}),E.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["API",E.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 dark:text-sky-400 hover:underline ml-1",children:""})]})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),E.jsx("select",{value:o,onChange:h=>s(h.target.value),className:"w-full bg-gray-200/50 dark:bg-gray-700/50 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500","aria-label":"AI Model",children:YS.map(h=>E.jsx("option",{value:h,className:"bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white",children:h},h))})]})]}),E.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10",children:E.jsx("button",{onClick:d,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})})]})})},G5=({isOpen:t,onClose:e,timetable:n,model:r,apiKey:i,onSaveSettings:o,user:s})=>{var I;const[u,c]=H.useState([]),[d,h]=H.useState(!1),[p,g]=H.useState(""),[v,A]=H.useState(!1),P=H.useRef(null),D=()=>{var k;(k=P.current)==null||k.scrollIntoView({behavior:"smooth"})};H.useEffect(()=>{D()},[u]),H.useEffect(()=>{t&&u.length===0&&c([{role:"model",text:`
`}])},[t,u.length]);const R=async k=>{if(k.preventDefault(),!p.trim()||d)return;const V=p;c(F=>[...F,{role:"user",text:V},{role:"model",text:""}]),g(""),h(!0);try{const F=await $5(n,r,i,V);for await(const U of F){const S=U.text;c(_=>{const T=_.length-1,C=[..._];return C[T]={...C[T],text:C[T].text+S},C})}}catch(F){const U=F instanceof Error?F.message:"";c(S=>{const _=S.length-1,T=[...S];return T[_]={...T[_],text:U},T})}finally{h(!1)}};return E.jsxs(E.Fragment,{children:[E.jsx("div",{className:`fixed inset-0 bg-black/30 flex justify-end z-40 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:E.jsxs("div",{className:`w-full max-w-md h-full bg-gray-100/90 dark:bg-gray-900/90 backdrop-blur-xl border-l border-black/10 dark:border-white/10 shadow-2xl flex flex-col transition-transform duration-300 ${t?"translate-x-0":"translate-x-full"}`,children:[E.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[E.jsx("h2",{className:"text-xl font-bold",children:"AI"}),E.jsxs("div",{children:[E.jsx("button",{onClick:()=>A(!0),className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",title:"AI",children:E.jsx(yC,{className:"w-6 h-6"})}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 ml-2",title:"",children:E.jsx(ii,{className:"w-6 h-6"})})]})]}),E.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[u.map((k,V)=>E.jsx("div",{className:`flex ${k.role==="user"?"justify-end":"justify-start"}`,children:E.jsx("div",{className:`max-w-xs md:max-w-sm lg:max-w-md p-3 rounded-2xl ${k.role==="user"?"bg-sky-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:k.role==="model"?E.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:window.marked?window.marked.parse(k.text):k.text.replace(/</g,"&lt;").replace(/>/g,"&gt;")}}):E.jsx("p",{className:"whitespace-pre-wrap",children:k.text})})},V)),d&&((I=u[u.length-1])==null?void 0:I.text)===""&&E.jsx("div",{className:"flex justify-start",children:E.jsx("div",{className:"p-3 rounded-2xl bg-gray-200 dark:bg-gray-700",children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse"}),E.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse [animation-delay:0.2s]"}),E.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse [animation-delay:0.4s]"})]})})}),E.jsx("div",{ref:P})]}),E.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 mt-auto",children:E.jsxs("form",{onSubmit:R,className:"flex items-center gap-2",children:[E.jsx("input",{type:"text",value:p,onChange:k=>g(k.target.value),placeholder:d?"AI...":"...",className:"w-full bg-gray-200/50 dark:bg-gray-800/50 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 transition-colors placeholder:text-gray-500",disabled:d,"aria-label":""}),E.jsx("button",{type:"submit",disabled:d||!p.trim(),className:"bg-sky-600 hover:bg-sky-700 text-white p-3 rounded-lg transition-colors disabled:bg-sky-400 disabled:cursor-not-allowed flex-shrink-0","aria-label":"",children:E.jsx(o1,{className:"w-5 h-5"})})]})})]})}),E.jsx(q5,{isOpen:v,onClose:()=>A(!1),onSave:o,currentModel:r,currentApiKey:i})]})},H5=({isOpen:t,onClose:e,tasks:n,onToggleTask:r,onEditTask:i,onDeleteTask:o})=>{const[s,u]=H.useState(null);if(!t)return null;const c=[...n].sort((v,A)=>{if(v.completed!==A.completed)return v.completed?1:-1;const P=v.dueDate?new Date(v.dueDate).getTime():1/0,D=A.dueDate?new Date(A.dueDate).getTime():1/0;return P!==D?P-D:v.content.localeCompare(A.content)}),d=c.filter(v=>!v.completed),h=c.filter(v=>v.completed),p=new Date;p.setHours(0,0,0,0);const g=({task:v})=>{const A=v.dueDate&&!v.completed&&new Date(v.dueDate)<p,P=H.useRef(null),[D,R]=H.useState(!1),I=s===v.id;return H.useLayoutEffect(()=>{const k=P.current;k&&(I||R(k.scrollHeight>k.clientHeight))},[v.details,I]),E.jsxs("div",{className:"bg-black/5 dark:bg-white/5 p-3 rounded-lg",children:[E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("input",{type:"checkbox",checked:v.completed,onChange:()=>r(v.id,v.subjectId,v.timetableId),className:"form-checkbox h-5 w-5 rounded bg-gray-300 dark:bg-gray-600 border-gray-400 dark:border-gray-500 text-sky-600 focus:ring-sky-500 flex-shrink-0 mt-1"}),E.jsxs("div",{className:"flex-grow",children:[E.jsx("p",{className:`font-semibold ${v.completed?"line-through text-gray-500 dark:text-gray-400":""}`,children:v.content}),E.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1 text-xs text-gray-500 dark:text-gray-400 mt-1",children:[E.jsx("span",{className:`w-2 h-2 rounded-full ${v.subjectColor} flex-shrink-0`}),E.jsx("span",{children:v.subjectName}),E.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"/"}),E.jsx("span",{children:v.timetableName})]})]}),E.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1",children:[v.dueDate&&E.jsx("p",{className:`text-sm font-medium ${A?"text-red-500 font-bold":"text-gray-600 dark:text-gray-300"}`,children:v.dueDate}),v.url&&E.jsx("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",title:"",className:"p-1 rounded-full text-gray-500 hover:bg-sky-500/20 hover:text-sky-500",children:E.jsx(up,{className:"w-4 h-4"})}),E.jsx("button",{onClick:()=>i(v,v.subjectId,v.timetableId),className:"p-1 rounded-full text-gray-500 hover:bg-sky-500/20 hover:text-sky-500",children:E.jsx(gC,{className:"w-4 h-4"})}),E.jsx("button",{onClick:()=>o(v.id,v.subjectId,v.timetableId),className:"p-1 rounded-full text-gray-500 hover:bg-red-500/20 hover:text-red-500",children:E.jsx(ap,{className:"w-4 h-4"})})]})]}),v.details&&E.jsxs("div",{className:"mt-2 pl-8",children:[E.jsx("div",{ref:P,className:`text-sm text-gray-600 dark:text-gray-300 whitespace-pre-wrap bg-black/5 dark:bg-white/5 p-2 rounded-md ${I?"":"line-clamp-2"}`,children:v.details}),(D||I)&&E.jsx("button",{onClick:()=>u(I?null:v.id),className:"text-xs text-sky-600 dark:text-sky-400 hover:underline mt-1",children:I?"":""})]})]})};return E.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:E.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-3xl max-h-[90vh] flex flex-col shadow-2xl transition-transform duration-300 ${t?"scale-100":"scale-95"}`,children:[E.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[E.jsx("h2",{className:"text-xl font-bold",children:""}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:E.jsx(ii,{className:"w-6 h-6"})})]}),E.jsx("div",{className:"p-6 overflow-y-auto space-y-6",children:n.length===0?E.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:""}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsxs("h3",{className:"text-lg font-semibold mb-3",children:[" (",d.length,")"]}),E.jsx("div",{className:"space-y-2",children:d.length>0?d.map(v=>E.jsx(g,{task:v},v.id)):E.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:""})})]}),h.length>0&&E.jsxs("div",{children:[E.jsxs("h3",{className:"text-lg font-semibold mb-3",children:[" (",h.length,")"]}),E.jsx("div",{className:"space-y-2",children:h.map(v=>E.jsx(g,{task:v},v.id))})]})]})})]})})},z5=({isOpen:t,onClose:e,onSave:n,editingTaskData:r})=>{const[i,o]=H.useState(""),[s,u]=H.useState(""),[c,d]=H.useState(""),[h,p]=H.useState("");H.useEffect(()=>{t&&(r&&r.task?(o(r.task.content||""),u(r.task.dueDate||""),d(r.task.details||""),p(r.task.url||"")):(o(""),u(""),d(""),p("")))},[t,r]);const g=()=>{var v;if(!i.trim()){alert("");return}n({content:i,dueDate:s,details:c,url:h},((v=r==null?void 0:r.task)==null?void 0:v.id)||null)};return E.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:E.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-lg max-h-[90vh] flex flex-col shadow-2xl transition-transform duration-300 ${t?"scale-100":"scale-95"}`,children:[E.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[E.jsx("h2",{className:"text-xl font-bold",children:r!=null&&r.task?"":""}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:E.jsx(ii,{className:"w-6 h-6"})})]}),E.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),E.jsx("input",{value:i,onChange:v=>o(v.target.value),placeholder:": 1",className:"w-full bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),E.jsx("input",{type:"date",value:s,onChange:v=>u(v.target.value),className:"w-full bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),E.jsx("textarea",{value:c,onChange:v=>d(v.target.value),placeholder:"",className:"w-full h-24 resize-none bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium mb-1",children:"URL"}),E.jsx("input",{type:"url",value:h,onChange:v=>p(v.target.value),placeholder:"https://example.com/task-info",className:"w-full bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"})]})]}),E.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10 mt-auto",children:E.jsx("button",{onClick:g,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})})]})})},W5=({isOpen:t,onClose:e})=>t?E.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:E.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${t?"scale-100":"scale-95"}`,children:[E.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[E.jsx("h2",{className:"text-xl font-bold",children:""}),E.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:E.jsx(ii,{className:"w-6 h-6"})})]}),E.jsxs("div",{className:"p-6 space-y-4 text-gray-700 dark:text-gray-300",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tablit"}),E.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Your Smart University Timetable"})]}),E.jsxs("div",{className:"bg-black/5 dark:bg-white/5 p-3 rounded-lg text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{children:""}),E.jsx("span",{className:"font-mono",children:"1.0.0"})]}),E.jsxs("div",{className:"flex justify-between mt-2 pt-2 border-t border-black/10 dark:border-white/10",children:[E.jsx("span",{children:""}),E.jsx("a",{href:"https://github.com/google-gemini-vignettes/gemini-api-Tablit",target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 dark:text-sky-400 hover:underline font-medium",children:"GitHub Repository"})]})]}),E.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 pt-2",children:"AI Studio"})]})]})}):null,K5=({status:t})=>{const[e,n]=H.useState(!1),[r,i]=H.useState(t);if(H.useEffect(()=>{let u;return t!=="idle"?(i(t),n(!0)):(n(!1),u=setTimeout(()=>{i("idle")},300)),()=>{u&&clearTimeout(u)}},[t]),r==="idle")return null;const s={saving:{icon:E.jsx(i1,{className:"w-5 h-5 animate-spin"}),text:"...",color:"text-gray-800 dark:text-gray-200"},saved:{icon:E.jsx(r1,{className:"w-5 h-5"}),text:"",color:"text-emerald-600 dark:text-emerald-400"},idle:{icon:null,text:"",color:""}}[r];return E.jsxs("div",{className:`fixed bottom-4 left-4 z-50 flex items-center gap-2 px-4 py-2 rounded-full shadow-lg bg-gray-100/80 dark:bg-gray-900/80 backdrop-blur-md border border-black/10 dark:border-white/10 transition-all duration-300 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"} ${s.color}`,children:[s.icon,E.jsx("span",{className:"font-medium text-sm",children:s.text})]})};function J5(){const[t,e]=H.useState(null),[n,r]=H.useState(!0),{timetables:i,activeTimetable:o,activeTimetableId:s,setActiveTimetableId:u,addTimetable:c,importTimetable:d,deleteTimetable:h,updateTimetableSettings:p,saveSubject:g,deleteSubject:v,moveSubject:A,toggleTaskCompletion:P,addTask:D,updateTask:R,deleteTask:I,totalCredits:k,saveStatus:V,isLoading:F}=YN(t),[U,S]=H.useState(QS),[_,T]=H.useState(""),[C,x]=H.useState(()=>{if(typeof window<"u"&&window.localStorage){const J=window.localStorage.getItem("theme");if(J==="light"||J==="dark")return J;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"});H.useEffect(()=>{const J=WN(be=>{e(be),r(!1)}),re=localStorage.getItem("geminiModel");re&&S(re);const ye=localStorage.getItem("geminiApiKey");return ye&&T(ye),()=>J()},[]),H.useEffect(()=>{const J=window.document.documentElement;J.classList.remove(C==="dark"?"light":"dark"),J.classList.add(C),localStorage.setItem("theme",C),document.body.classList.remove("glassmorphism-bg","dark"),C==="dark"?document.body.classList.add("dark","glassmorphism-bg"):document.body.classList.add("glassmorphism-bg")},[C]);const N=()=>{x(J=>J==="light"?"dark":"light")},M=async()=>{try{await HN()}catch(J){console.error("Login failed",J)}},oe=async()=>{try{await zN()}catch(J){console.error("Logout failed",J)}},[le,pe]=H.useState(!1),[$e,G]=H.useState(!1),[Y,Z]=H.useState(!1),[de,ge]=H.useState(!1),[Re,Et]=H.useState(!1),[zt,Vt]=H.useState(!1),[Le,_o]=H.useState({subject:null,dayIndex:0,periodIndex:0}),[To,Sr]=H.useState(null),[Bn,Eo]=H.useState(null),Co=(J,re)=>{_o({subject:null,dayIndex:J,periodIndex:re}),pe(!0)},wo=(J,re,ye)=>{_o({subject:J,dayIndex:re,periodIndex:ye}),pe(!0)},Io=()=>{const J=prompt(":",` ${i.length+1}`);J&&c(J)},al=()=>{o&&window.confirm(`${o.name}`)&&h(o.id)},Hu=()=>{if(!o)return;const J=JSON.stringify(o,null,2),re=new Blob([J],{type:"application/json"}),ye=URL.createObjectURL(re),be=document.createElement("a");be.href=ye,be.download=`${o.name}.tmx`,document.body.appendChild(be),be.click(),document.body.removeChild(be),URL.revokeObjectURL(ye)},zu=J=>{var be;const re=(be=J.target.files)==null?void 0:be[0];if(!re)return;const ye=new FileReader;ye.onload=Ar=>{var Wt;const $n=(Wt=Ar.target)==null?void 0:Wt.result;typeof $n=="string"&&(d($n)||alert(""))},ye.readAsText(re),J.target.value=""},ul=J=>{p(J)},So=(J,re)=>{S(J),T(re),localStorage.setItem("geminiModel",J),localStorage.setItem("geminiApiKey",re)},cl=J=>{const{id:re,...ye}=J;Eo(ye)},Wu=(J,re)=>{if(Bn){const ye={...Bn,id:`subject-${Date.now()}`,tasks:[]};g(ye,J,re)}},Ao=()=>{!Le.subject||!s||(Sr({task:null,subjectId:Le.subject.id,timetableId:s}),Et(!0))},li=(J,re,ye)=>{Sr({task:J,subjectId:re,timetableId:ye}),Et(!0)},dl=(J,re)=>{var Ar,$n;if(!To)return;const{subjectId:ye,timetableId:be}=To;if(re){const Wt=($n=(Ar=i.find(qn=>qn.id===be))==null?void 0:Ar.grid.flat(2).find(qn=>qn.id===ye))==null?void 0:$n.tasks.find(qn=>qn.id===re);Wt&&R({...Wt,...J},ye,be)}else{const Wt={...J,id:`task-${Date.now()}`,completed:!1};D(Wt,ye,be)}Et(!1)},qe=(J,re,ye)=>{window.confirm("")&&I(J,re,ye)},Qe={onToggleTask:J=>{Le.subject&&s&&P(J,Le.subject.id,s)},onOpenAddTaskModal:Ao,onOpenEditTaskModal:J=>{Le.subject&&s&&li(J,Le.subject.id,s)},onDeleteTask:J=>{Le.subject&&s&&qe(J,Le.subject.id,s)}},ai=i.flatMap(J=>J.grid.flat(2).flatMap(re=>re.tasks.map(ye=>({...ye,subjectName:re.name,subjectColor:re.color,subjectId:re.id,timetableId:J.id,timetableName:J.name}))));return H.useEffect(()=>{if(le&&Le.subject&&s){const J=i.find(re=>re.id===s);if(J){const re=J.grid.flat(2).find(ye=>ye.id===Le.subject.id);re?_o(ye=>({...ye,subject:re})):pe(!1)}}},[i,le,s]),n||F?E.jsx("div",{className:"min-h-screen flex justify-center items-center",children:E.jsx("div",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"..."})}):E.jsxs("div",{className:"min-h-screen text-gray-800 dark:text-white font-sans transition-colors duration-300",children:[E.jsx(c1,{timetables:i,activeTimetableId:s,setActiveTimetableId:u,onAddTimetable:Io,onDeleteTimetable:al,onOpenSettings:()=>G(!0),onOpenTaskList:()=>ge(!0),totalCredits:k,theme:C,toggleTheme:N,onExport:Hu,onImport:zu,onOpenAppInfo:()=>Vt(!0),user:t,onLogin:M,onLogout:oe}),E.jsx("main",{children:o?E.jsx(h1,{timetable:o,onAddSubject:Co,onEditSubject:wo,onMoveSubject:A,onDeleteSubject:v,onCopySubject:cl,onPasteSubject:Wu,copiedSubject:Bn}):E.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-100px)]",children:E.jsx("p",{className:"text-2xl text-gray-500 dark:text-gray-400",children:""})})}),E.jsx(K5,{status:V}),E.jsx("button",{onClick:()=>Z(!0),className:"fixed bottom-6 right-6 bg-sky-600 hover:bg-sky-700 text-white p-4 rounded-full shadow-lg z-30 transition-transform hover:scale-110",title:"AI","aria-label":"AI",children:E.jsx(QN,{className:"w-8 h-8"})}),E.jsx(m1,{isOpen:le,onClose:()=>pe(!1),onSave:g,onDelete:v,subjectData:Le,taskHandlers:Qe}),o&&E.jsx(g1,{isOpen:$e,onClose:()=>G(!1),onSave:ul,currentSettings:o.settings}),E.jsx(G5,{isOpen:Y,onClose:()=>Z(!1),timetable:o,model:U,apiKey:_,onSaveSettings:So,user:t}),E.jsx(H5,{isOpen:de,onClose:()=>ge(!1),tasks:ai,onToggleTask:P,onEditTask:li,onDeleteTask:qe}),E.jsx(z5,{isOpen:Re,onClose:()=>Et(!1),onSave:dl,editingTaskData:To}),E.jsx(W5,{isOpen:zt,onClose:()=>Vt(!1)})]})}const XC=document.getElementById("root");if(!XC)throw new Error("Could not find root element to mount to");const Y5=Kc.createRoot(XC);Y5.render(E.jsx(t_.StrictMode,{children:E.jsx(J5,{})}));
