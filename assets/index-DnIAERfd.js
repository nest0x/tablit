(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function n0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $h={exports:{}},wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function PI(){if(tv)return wl;tv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,l){var d=null;if(l!==void 0&&(d=""+l),s.key!==void 0&&(d=""+s.key),"key"in s){l={};for(var h in s)h!=="key"&&(l[h]=s[h])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:d,ref:s!==void 0?s:null,props:l}}return wl.Fragment=e,wl.jsx=t,wl.jsxs=t,wl}var nv;function kI(){return nv||(nv=1,$h.exports=PI()),$h.exports}var O=kI(),Kh={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function VI(){if(iv)return xe;iv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=E&&U[E]||U["@@iterator"],typeof U=="function"?U:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,q={};function H(U,re,fe){this.props=U,this.context=re,this.refs=q,this.updater=fe||w}H.prototype.isReactComponent={},H.prototype.setState=function(U,re){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,re,"setState")},H.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function oe(){}oe.prototype=H.prototype;function Q(U,re,fe){this.props=U,this.context=re,this.refs=q,this.updater=fe||w}var X=Q.prototype=new oe;X.constructor=Q,V(X,H.prototype),X.isPureReactComponent=!0;var j=Array.isArray,J={H:null,A:null,T:null,S:null,V:null},se=Object.prototype.hasOwnProperty;function x(U,re,fe,le,_e,be){return fe=be.ref,{$$typeof:n,type:U,key:re,ref:fe!==void 0?fe:null,props:be}}function M(U,re){return x(U.type,re,void 0,void 0,void 0,U.props)}function D(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function b(U){var re={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(fe){return re[fe]})}var k=/\/+/g;function F(U,re){return typeof U=="object"&&U!==null&&U.key!=null?b(""+U.key):re.toString(36)}function P(){}function ct(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(re){U.status==="pending"&&(U.status="fulfilled",U.value=re)},function(re){U.status==="pending"&&(U.status="rejected",U.reason=re)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function qe(U,re,fe,le,_e){var be=typeof U;(be==="undefined"||be==="boolean")&&(U=null);var Ae=!1;if(U===null)Ae=!0;else switch(be){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(U.$$typeof){case n:case e:Ae=!0;break;case _:return Ae=U._init,qe(Ae(U._payload),re,fe,le,_e)}}if(Ae)return _e=_e(U),Ae=le===""?"."+F(U,0):le,j(_e)?(fe="",Ae!=null&&(fe=Ae.replace(k,"$&/")+"/"),qe(_e,re,fe,"",function(yt){return yt})):_e!=null&&(D(_e)&&(_e=M(_e,fe+(_e.key==null||U&&U.key===_e.key?"":(""+_e.key).replace(k,"$&/")+"/")+Ae)),re.push(_e)),1;Ae=0;var Ee=le===""?".":le+":";if(j(U))for(var De=0;De<U.length;De++)le=U[De],be=Ee+F(le,De),Ae+=qe(le,re,fe,be,_e);else if(De=S(U),typeof De=="function")for(U=De.call(U),De=0;!(le=U.next()).done;)le=le.value,be=Ee+F(le,De++),Ae+=qe(le,re,fe,be,_e);else if(be==="object"){if(typeof U.then=="function")return qe(ct(U),re,fe,le,_e);throw re=String(U),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function Z(U,re,fe){if(U==null)return U;var le=[],_e=0;return qe(U,le,"","",function(be){return re.call(fe,be,_e++)}),le}function ce(U){if(U._status===-1){var re=U._result;re=re(),re.then(function(fe){(U._status===0||U._status===-1)&&(U._status=1,U._result=fe)},function(fe){(U._status===0||U._status===-1)&&(U._status=2,U._result=fe)}),U._status===-1&&(U._status=0,U._result=re)}if(U._status===1)return U._result.default;throw U._result}var pe=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Ye(){}return xe.Children={map:Z,forEach:function(U,re,fe){Z(U,function(){re.apply(this,arguments)},fe)},count:function(U){var re=0;return Z(U,function(){re++}),re},toArray:function(U){return Z(U,function(re){return re})||[]},only:function(U){if(!D(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},xe.Component=H,xe.Fragment=t,xe.Profiler=s,xe.PureComponent=Q,xe.StrictMode=i,xe.Suspense=y,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,xe.__COMPILER_RUNTIME={__proto__:null,c:function(U){return J.H.useMemoCache(U)}},xe.cache=function(U){return function(){return U.apply(null,arguments)}},xe.cloneElement=function(U,re,fe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var le=V({},U.props),_e=U.key,be=void 0;if(re!=null)for(Ae in re.ref!==void 0&&(be=void 0),re.key!==void 0&&(_e=""+re.key),re)!se.call(re,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&re.ref===void 0||(le[Ae]=re[Ae]);var Ae=arguments.length-2;if(Ae===1)le.children=fe;else if(1<Ae){for(var Ee=Array(Ae),De=0;De<Ae;De++)Ee[De]=arguments[De+2];le.children=Ee}return x(U.type,_e,void 0,void 0,be,le)},xe.createContext=function(U){return U={$$typeof:d,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},xe.createElement=function(U,re,fe){var le,_e={},be=null;if(re!=null)for(le in re.key!==void 0&&(be=""+re.key),re)se.call(re,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(_e[le]=re[le]);var Ae=arguments.length-2;if(Ae===1)_e.children=fe;else if(1<Ae){for(var Ee=Array(Ae),De=0;De<Ae;De++)Ee[De]=arguments[De+2];_e.children=Ee}if(U&&U.defaultProps)for(le in Ae=U.defaultProps,Ae)_e[le]===void 0&&(_e[le]=Ae[le]);return x(U,be,void 0,void 0,null,_e)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(U){return{$$typeof:h,render:U}},xe.isValidElement=D,xe.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:ce}},xe.memo=function(U,re){return{$$typeof:p,type:U,compare:re===void 0?null:re}},xe.startTransition=function(U){var re=J.T,fe={};J.T=fe;try{var le=U(),_e=J.S;_e!==null&&_e(fe,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Ye,pe)}catch(be){pe(be)}finally{J.T=re}},xe.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},xe.use=function(U){return J.H.use(U)},xe.useActionState=function(U,re,fe){return J.H.useActionState(U,re,fe)},xe.useCallback=function(U,re){return J.H.useCallback(U,re)},xe.useContext=function(U){return J.H.useContext(U)},xe.useDebugValue=function(){},xe.useDeferredValue=function(U,re){return J.H.useDeferredValue(U,re)},xe.useEffect=function(U,re,fe){var le=J.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(U,re)},xe.useId=function(){return J.H.useId()},xe.useImperativeHandle=function(U,re,fe){return J.H.useImperativeHandle(U,re,fe)},xe.useInsertionEffect=function(U,re){return J.H.useInsertionEffect(U,re)},xe.useLayoutEffect=function(U,re){return J.H.useLayoutEffect(U,re)},xe.useMemo=function(U,re){return J.H.useMemo(U,re)},xe.useOptimistic=function(U,re){return J.H.useOptimistic(U,re)},xe.useReducer=function(U,re,fe){return J.H.useReducer(U,re,fe)},xe.useRef=function(U){return J.H.useRef(U)},xe.useState=function(U){return J.H.useState(U)},xe.useSyncExternalStore=function(U,re,fe){return J.H.useSyncExternalStore(U,re,fe)},xe.useTransition=function(){return J.H.useTransition()},xe.version="19.1.1",xe}var ov;function Jm(){return ov||(ov=1,Kh.exports=VI()),Kh.exports}var Ne=Jm();const i0=n0(Ne);var Jh={exports:{}},Ml={},Qh={exports:{}},Xh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function UI(){return rv||(rv=1,(function(n){function e(Z,ce){var pe=Z.length;Z.push(ce);e:for(;0<pe;){var Ye=pe-1>>>1,U=Z[Ye];if(0<s(U,ce))Z[Ye]=ce,Z[pe]=U,pe=Ye;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ce=Z[0],pe=Z.pop();if(pe!==ce){Z[0]=pe;e:for(var Ye=0,U=Z.length,re=U>>>1;Ye<re;){var fe=2*(Ye+1)-1,le=Z[fe],_e=fe+1,be=Z[_e];if(0>s(le,pe))_e<U&&0>s(be,le)?(Z[Ye]=be,Z[_e]=pe,Ye=_e):(Z[Ye]=le,Z[fe]=pe,Ye=fe);else if(_e<U&&0>s(be,pe))Z[Ye]=be,Z[_e]=pe,Ye=_e;else break e}}return ce}function s(Z,ce){var pe=Z.sortIndex-ce.sortIndex;return pe!==0?pe:Z.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var y=[],p=[],_=1,E=null,S=3,w=!1,V=!1,q=!1,H=!1,oe=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function j(Z){for(var ce=t(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=Z)i(p),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=t(p)}}function J(Z){if(q=!1,j(Z),!V)if(t(y)!==null)V=!0,se||(se=!0,F());else{var ce=t(p);ce!==null&&qe(J,ce.startTime-Z)}}var se=!1,x=-1,M=5,D=-1;function b(){return H?!0:!(n.unstable_now()-D<M)}function k(){if(H=!1,se){var Z=n.unstable_now();D=Z;var ce=!0;try{e:{V=!1,q&&(q=!1,Q(x),x=-1),w=!0;var pe=S;try{t:{for(j(Z),E=t(y);E!==null&&!(E.expirationTime>Z&&b());){var Ye=E.callback;if(typeof Ye=="function"){E.callback=null,S=E.priorityLevel;var U=Ye(E.expirationTime<=Z);if(Z=n.unstable_now(),typeof U=="function"){E.callback=U,j(Z),ce=!0;break t}E===t(y)&&i(y),j(Z)}else i(y);E=t(y)}if(E!==null)ce=!0;else{var re=t(p);re!==null&&qe(J,re.startTime-Z),ce=!1}}break e}finally{E=null,S=pe,w=!1}ce=void 0}}finally{ce?F():se=!1}}}var F;if(typeof X=="function")F=function(){X(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ct=P.port2;P.port1.onmessage=k,F=function(){ct.postMessage(null)}}else F=function(){oe(k,0)};function qe(Z,ce){x=oe(function(){Z(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Z){switch(S){case 1:case 2:case 3:var ce=3;break;default:ce=S}var pe=S;S=ce;try{return Z()}finally{S=pe}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(Z,ce){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var pe=S;S=Z;try{return ce()}finally{S=pe}},n.unstable_scheduleCallback=function(Z,ce,pe){var Ye=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ye+pe:Ye):pe=Ye,Z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=pe+U,Z={id:_++,callback:ce,priorityLevel:Z,startTime:pe,expirationTime:U,sortIndex:-1},pe>Ye?(Z.sortIndex=pe,e(p,Z),t(y)===null&&Z===t(p)&&(q?(Q(x),x=-1):q=!0,qe(J,pe-Ye))):(Z.sortIndex=U,e(y,Z),V||w||(V=!0,se||(se=!0,F()))),Z},n.unstable_shouldYield=b,n.unstable_wrapCallback=function(Z){var ce=S;return function(){var pe=S;S=ce;try{return Z.apply(this,arguments)}finally{S=pe}}}})(Xh)),Xh}var sv;function LI(){return sv||(sv=1,Qh.exports=UI()),Qh.exports}var Wh={exports:{}},jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function OI(){if(av)return jt;av=1;var n=Jm();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(y,p,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:y,containerInfo:p,implementation:_}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jt.createPortal=function(y,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(y,p,null,_)},jt.flushSync=function(y){var p=d.T,_=i.p;try{if(d.T=null,i.p=2,y)return y()}finally{d.T=p,i.p=_,i.d.f()}},jt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(y,p))},jt.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},jt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var _=p.as,E=h(_,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):_==="script"&&i.d.X(y,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},jt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=h(p.as,p.crossOrigin);i.d.M(y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(y)},jt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,E=h(_,p.crossOrigin);i.d.L(y,_,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},jt.preloadModule=function(y,p){if(typeof y=="string")if(p){var _=h(p.as,p.crossOrigin);i.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(y)},jt.requestFormReset=function(y){i.d.r(y)},jt.unstable_batchedUpdates=function(y,p){return y(p)},jt.useFormState=function(y,p,_){return d.H.useFormState(y,p,_)},jt.useFormStatus=function(){return d.H.useHostTransitionStatus()},jt.version="19.1.1",jt}var lv;function FI(){if(lv)return Wh.exports;lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wh.exports=OI(),Wh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function qI(){if(uv)return Ml;uv=1;var n=LI(),e=Jm(),t=FI();function i(o){var r="https://react.dev/errors/"+o;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+o+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function l(o){var r=o,a=o;if(o.alternate)for(;r.return;)r=r.return;else{o=r;do r=o,(r.flags&4098)!==0&&(a=r.return),o=r.return;while(o)}return r.tag===3?a:null}function d(o){if(o.tag===13){var r=o.memoizedState;if(r===null&&(o=o.alternate,o!==null&&(r=o.memoizedState)),r!==null)return r.dehydrated}return null}function h(o){if(l(o)!==o)throw Error(i(188))}function y(o){var r=o.alternate;if(!r){if(r=l(o),r===null)throw Error(i(188));return r!==o?null:o}for(var a=o,f=r;;){var g=a.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){a=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===a)return h(g),o;if(v===f)return h(g),r;v=v.sibling}throw Error(i(188))}if(a.return!==f.return)a=g,f=v;else{for(var A=!1,I=g.child;I;){if(I===a){A=!0,a=g,f=v;break}if(I===f){A=!0,f=g,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,f=g;break}if(I===f){A=!0,f=v,a=g;break}I=I.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==f)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?o:r}function p(o){var r=o.tag;if(r===5||r===26||r===27||r===6)return o;for(o=o.child;o!==null;){if(r=p(o),r!==null)return r;o=o.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),Q=Symbol.for("react.consumer"),X=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),b=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=k&&o[k]||o["@@iterator"],typeof o=="function"?o:null)}var P=Symbol.for("react.client.reference");function ct(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===P?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case H:return"Profiler";case q:return"StrictMode";case J:return"Suspense";case se:return"SuspenseList";case D:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case X:return(o.displayName||"Context")+".Provider";case Q:return(o._context.displayName||"Context")+".Consumer";case j:var r=o.render;return o=o.displayName,o||(o=r.displayName||r.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case x:return r=o.displayName||null,r!==null?r:ct(o.type)||"Memo";case M:r=o._payload,o=o._init;try{return ct(o(r))}catch{}}return null}var qe=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ye=[],U=-1;function re(o){return{current:o}}function fe(o){0>U||(o.current=Ye[U],Ye[U]=null,U--)}function le(o,r){U++,Ye[U]=o.current,o.current=r}var _e=re(null),be=re(null),Ae=re(null),Ee=re(null);function De(o,r){switch(le(Ae,r),le(be,o),le(_e,null),r.nodeType){case 9:case 11:o=(o=r.documentElement)&&(o=o.namespaceURI)?D_(o):0;break;default:if(o=r.tagName,r=r.namespaceURI)r=D_(r),o=x_(r,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}fe(_e),le(_e,o)}function yt(){fe(_e),fe(be),fe(Ae)}function Mt(o){o.memoizedState!==null&&le(Ee,o);var r=_e.current,a=x_(r,o.type);r!==a&&(le(be,o),le(_e,a))}function qn(o){be.current===o&&(fe(_e),fe(be)),Ee.current===o&&(fe(Ee),Sl._currentValue=pe)}var Zn=Object.prototype.hasOwnProperty,jn=n.unstable_scheduleCallback,so=n.unstable_cancelCallback,va=n.unstable_shouldYield,cu=n.unstable_requestPaint,Cn=n.unstable_now,$f=n.unstable_getCurrentPriorityLevel,Ta=n.unstable_ImmediatePriority,Xr=n.unstable_UserBlockingPriority,jo=n.unstable_NormalPriority,Kf=n.unstable_LowPriority,Wr=n.unstable_IdlePriority,Ea=n.log,fu=n.unstable_setDisableYieldValue,mt=null,We=null;function mn(o){if(typeof Ea=="function"&&fu(o),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(mt,o)}catch{}}var Wt=Math.clz32?Math.clz32:er,du=Math.log,Jf=Math.LN2;function er(o){return o>>>=0,o===0?32:31-(du(o)/Jf|0)|0}var tr=256,nr=4194304;function Bn(o){var r=o&42;if(r!==0)return r;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Zr(o,r,a){var f=o.pendingLanes;if(f===0)return 0;var g=0,v=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var I=f&134217727;return I!==0?(f=I&~v,f!==0?g=Bn(f):(A&=I,A!==0?g=Bn(A):a||(a=I&~o,a!==0&&(g=Bn(a))))):(I=f&~v,I!==0?g=Bn(I):A!==0?g=Bn(A):a||(a=f&~o,a!==0&&(g=Bn(a)))),g===0?0:r!==0&&r!==g&&(r&v)===0&&(v=g&-g,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:g}function ir(o,r){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&r)===0}function Sa(o,r){switch(o){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ca(){var o=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),o}function Aa(){var o=nr;return nr<<=1,(nr&62914560)===0&&(nr=4194304),o}function Ri(o){for(var r=[],a=0;31>a;a++)r.push(o);return r}function wi(o,r){o.pendingLanes|=r,r!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ia(o,r,a,f,g,v){var A=o.pendingLanes;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=a,o.entangledLanes&=a,o.errorRecoveryDisabledLanes&=a,o.shellSuspendCounter=0;var I=o.entanglements,N=o.expirationTimes,Y=o.hiddenUpdates;for(a=A&~a;0<a;){var ee=31-Wt(a),ne=1<<ee;I[ee]=0,N[ee]=-1;var $=Y[ee];if($!==null)for(Y[ee]=null,ee=0;ee<$.length;ee++){var K=$[ee];K!==null&&(K.lane&=-536870913)}a&=~ne}f!==0&&ei(o,f,0),v!==0&&g===0&&o.tag!==0&&(o.suspendedLanes|=v&~(A&~r))}function ei(o,r,a){o.pendingLanes|=r,o.suspendedLanes&=~r;var f=31-Wt(r);o.entangledLanes|=r,o.entanglements[f]=o.entanglements[f]|1073741824|a&4194090}function Ra(o,r){var a=o.entangledLanes|=r;for(o=o.entanglements;a;){var f=31-Wt(a),g=1<<f;g&r|o[f]&r&&(o[f]|=r),a&=~g}}function ao(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function jr(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function lo(){var o=ce.p;return o!==0?o:(o=window.event,o===void 0?32:Q_(o.type))}function hu(o,r){var a=ce.p;try{return ce.p=o,r()}finally{ce.p=a}}var lt=Math.random().toString(36).slice(2),Dt="__reactFiber$"+lt,St="__reactProps$"+lt,An="__reactContainer$"+lt,wa="__reactEvents$"+lt,Qf="__reactListeners$"+lt,uo="__reactHandles$"+lt,mu="__reactResources$"+lt,or="__reactMarker$"+lt;function co(o){delete o[Dt],delete o[St],delete o[wa],delete o[Qf],delete o[uo]}function Mi(o){var r=o[Dt];if(r)return r;for(var a=o.parentNode;a;){if(r=a[An]||a[Dt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(o=k_(o);o!==null;){if(a=o[Dt])return a;o=k_(o)}return r}o=a,a=o.parentNode}return null}function ti(o){if(o=o[Dt]||o[An]){var r=o.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return o}return null}function ni(o){var r=o.tag;if(r===5||r===26||r===27||r===6)return o.stateNode;throw Error(i(33))}function sn(o){var r=o[mu];return r||(r=o[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function _t(o){o[or]=!0}var Ma=new Set,es={};function Hn(o,r){Di(o,r),Di(o+"Capture",r)}function Di(o,r){for(es[o]=r,o=0;o<r.length;o++)Ma.add(r[o])}var pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gu={},rr={};function yu(o){return Zn.call(rr,o)?!0:Zn.call(gu,o)?!1:pu.test(o)?rr[o]=!0:(gu[o]=!0,!1)}function fo(o,r,a){if(yu(r))if(a===null)o.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":o.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(r);return}}o.setAttribute(r,""+a)}}function ii(o,r,a){if(a===null)o.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(r);return}o.setAttribute(r,""+a)}}function Gt(o,r,a,f){if(f===null)o.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(a);return}o.setAttributeNS(r,a,""+f)}}var sr,_u;function xi(o){if(sr===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);sr=r&&r[1]||"",_u=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sr+o+_u}var ts=!1;function ns(o,r){if(!o||ts)return"";ts=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var $=K}Reflect.construct(o,[],ne)}else{try{ne.call()}catch(K){$=K}o.call(ne.prototype)}}else{try{throw Error()}catch(K){$=K}(ne=o())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&$&&typeof K.stack=="string")return[K.stack,$.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var N=A.split(`
`),Y=I.split(`
`);for(g=f=0;f<N.length&&!N[f].includes("DetermineComponentFrameRoot");)f++;for(;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;if(f===N.length||g===Y.length)for(f=N.length-1,g=Y.length-1;1<=f&&0<=g&&N[f]!==Y[g];)g--;for(;1<=f&&0<=g;f--,g--)if(N[f]!==Y[g]){if(f!==1||g!==1)do if(f--,g--,0>g||N[f]!==Y[g]){var ee=`
`+N[f].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=f&&0<=g);break}}}finally{ts=!1,Error.prepareStackTrace=a}return(a=o?o.displayName||o.name:"")?xi(a):""}function Da(o){switch(o.tag){case 26:case 27:case 5:return xi(o.type);case 16:return xi("Lazy");case 13:return xi("Suspense");case 19:return xi("SuspenseList");case 0:case 15:return ns(o.type,!1);case 11:return ns(o.type.render,!1);case 1:return ns(o.type,!0);case 31:return xi("Activity");default:return""}}function is(o){try{var r="";do r+=Da(o),o=o.return;while(o);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function an(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xa(o){var r=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Xf(o){var r=xa(o)?"checked":"value",a=Object.getOwnPropertyDescriptor(o.constructor.prototype,r),f=""+o[r];if(!o.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var g=a.get,v=a.set;return Object.defineProperty(o,r,{configurable:!0,get:function(){return g.call(this)},set:function(A){f=""+A,v.call(this,A)}}),Object.defineProperty(o,r,{enumerable:a.enumerable}),{getValue:function(){return f},setValue:function(A){f=""+A},stopTracking:function(){o._valueTracker=null,delete o[r]}}}}function os(o){o._valueTracker||(o._valueTracker=Xf(o))}function Na(o){if(!o)return!1;var r=o._valueTracker;if(!r)return!0;var a=r.getValue(),f="";return o&&(f=xa(o)?o.checked?"true":"false":o.value),o=f,o!==a?(r.setValue(o),!0):!1}function ar(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Wf=/[\n"\\]/g;function Ct(o){return o.replace(Wf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function pn(o,r,a,f,g,v,A,I){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),r!=null?A==="number"?(r===0&&o.value===""||o.value!=r)&&(o.value=""+an(r)):o.value!==""+an(r)&&(o.value=""+an(r)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),r!=null?ho(o,A,an(r)):a!=null?ho(o,A,an(a)):f!=null&&o.removeAttribute("value"),g==null&&v!=null&&(o.defaultChecked=!!v),g!=null&&(o.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+an(I):o.removeAttribute("name")}function lr(o,r,a,f,g,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null))return;a=a!=null?""+an(a):"",r=r!=null?""+an(r):a,I||r===o.value||(o.value=r),o.defaultValue=r}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=I?o.checked:!!f,o.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A)}function ho(o,r,a){r==="number"&&ar(o.ownerDocument)===o||o.defaultValue===""+a||(o.defaultValue=""+a)}function Ni(o,r,a,f){if(o=o.options,r){r={};for(var g=0;g<a.length;g++)r["$"+a[g]]=!0;for(a=0;a<o.length;a++)g=r.hasOwnProperty("$"+o[a].value),o[a].selected!==g&&(o[a].selected=g),g&&f&&(o[a].defaultSelected=!0)}else{for(a=""+an(a),r=null,g=0;g<o.length;g++){if(o[g].value===a){o[g].selected=!0,f&&(o[g].defaultSelected=!0);return}r!==null||o[g].disabled||(r=o[g])}r!==null&&(r.selected=!0)}}function et(o,r,a){if(r!=null&&(r=""+an(r),r!==o.value&&(o.value=r),a==null)){o.defaultValue!==r&&(o.defaultValue=r);return}o.defaultValue=a!=null?""+an(a):""}function ur(o,r,a,f){if(r==null){if(f!=null){if(a!=null)throw Error(i(92));if(qe(f)){if(1<f.length)throw Error(i(93));f=f[0]}a=f}a==null&&(a=""),r=a}a=an(r),o.defaultValue=a,f=o.textContent,f===a&&f!==""&&f!==null&&(o.value=f)}function In(o,r){if(r){var a=o.firstChild;if(a&&a===o.lastChild&&a.nodeType===3){a.nodeValue=r;return}}o.textContent=r}var cr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vu(o,r,a){var f=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?f?o.setProperty(r,""):r==="float"?o.cssFloat="":o[r]="":f?o.setProperty(r,a):typeof a!="number"||a===0||cr.has(r)?r==="float"?o.cssFloat=a:o[r]=(""+a).trim():o[r]=a+"px"}function ba(o,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(o=o.style,a!=null){for(var f in a)!a.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var g in r)f=r[g],r.hasOwnProperty(g)&&a[g]!==f&&vu(o,g,f)}else for(var v in r)r.hasOwnProperty(v)&&vu(o,v,r[v])}function Pa(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rs(o){return jf.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var bi=null;function Rn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Pi=null,ki=null;function ka(o){var r=ti(o);if(r&&(o=r.stateNode)){var a=o[St]||null;e:switch(o=r.stateNode,r.type){case"input":if(pn(o,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=o;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var f=a[r];if(f!==o&&f.form===o.form){var g=f[St]||null;if(!g)throw Error(i(90));pn(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<a.length;r++)f=a[r],f.form===o.form&&Na(f)}break e;case"textarea":et(o,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ni(o,!!a.multiple,r,!1)}}}var oi=!1;function Tu(o,r,a){if(oi)return o(r,a);oi=!0;try{var f=o(r);return f}finally{if(oi=!1,(Pi!==null||ki!==null)&&(hc(),Pi&&(r=Pi,o=ki,ki=Pi=null,ka(r),o)))for(r=0;r<o.length;r++)ka(o[r])}}function fr(o,r){var a=o.stateNode;if(a===null)return null;var f=a[St]||null;if(f===null)return null;a=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wn=!1;if(Gn)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){wn=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{wn=!1}var ri=null,mo=null,Vi=null;function Va(){if(Vi)return Vi;var o,r=mo,a=r.length,f,g="value"in ri?ri.value:ri.textContent,v=g.length;for(o=0;o<a&&r[o]===g[o];o++);var A=a-o;for(f=1;f<=A&&r[a-f]===g[v-f];f++);return Vi=g.slice(o,1<f?1-f:void 0)}function si(o){var r=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&r===13&&(o=13)):o=r,o===10&&(o=13),32<=o||o===13?o:0}function ai(){return!0}function Ua(){return!1}function Ut(o){function r(a,f,g,v,A){this._reactName=a,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(a=o[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ai:Ua,this.isPropagationStopped=Ua,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),r}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ss=Ut(Qe),hr=_({},Qe,{view:0,detail:0}),Eu=Ut(hr),as,ls,li,mr=_({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==li&&(li&&o.type==="mousemove"?(as=o.screenX-li.screenX,ls=o.screenY-li.screenY):ls=as=0,li=o),as)},movementY:function(o){return"movementY"in o?o.movementY:ls}}),Mn=Ut(mr),Su=_({},mr,{dataTransfer:0}),ed=Ut(Su),pr=_({},hr,{relatedTarget:0}),us=Ut(pr),La=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),cs=Ut(La),Cu=_({},Qe,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),fs=Ut(Cu),td=_({},Qe,{data:0}),Oa=Ut(td),gr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fa(o){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(o):(o=Iu[o])?!!r[o]:!1}function yr(){return Fa}var Ru=_({},hr,{key:function(o){if(o.key){var r=gr[o.key]||o.key;if(r!=="Unidentified")return r}return o.type==="keypress"?(o=si(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Au[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(o){return o.type==="keypress"?si(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?si(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ds=Ut(Ru),wu=_({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qa=Ut(wu),Ui=_({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),Mu=Ut(Ui),Du=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),xu=Ut(Du),Nu=_({},mr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),hs=Ut(Nu),ln=_({},Qe,{newState:0,oldState:0}),bu=Ut(ln),Pu=[9,13,27,32],ui=Gn&&"CompositionEvent"in window,m=null;Gn&&"documentMode"in document&&(m=document.documentMode);var T=Gn&&"TextEvent"in window&&!m,C=Gn&&(!ui||m&&8<m&&11>=m),R=" ",G=!1;function W(o,r){switch(o){case"keyup":return Pu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Be=!1;function xt(o,r){switch(o){case"compositionend":return ue(r);case"keypress":return r.which!==32?null:(G=!0,R);case"textInput":return o=r.data,o===R&&G?null:o;default:return null}}function He(o,r){if(Be)return o==="compositionend"||!ui&&W(o,r)?(o=Va(),Vi=mo=ri=null,Be=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return C&&r.locale!=="ko"?null:r.data;default:return null}}var Lt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(o){var r=o&&o.nodeName&&o.nodeName.toLowerCase();return r==="input"?!!Lt[o.type]:r==="textarea"}function Li(o,r,a,f){Pi?ki?ki.push(f):ki=[f]:Pi=f,r=vc(r,"onChange"),0<r.length&&(a=new ss("onChange","change",null,a,f),o.push({event:a,listeners:r}))}var zt=null,ci=null;function Ba(o){A_(o,0)}function ku(o){var r=ni(o);if(Na(r))return o}function Yp(o,r){if(o==="change")return r}var $p=!1;if(Gn){var nd;if(Gn){var id="oninput"in document;if(!id){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),id=typeof Kp.oninput=="function"}nd=id}else nd=!1;$p=nd&&(!document.documentMode||9<document.documentMode)}function Jp(){zt&&(zt.detachEvent("onpropertychange",Qp),ci=zt=null)}function Qp(o){if(o.propertyName==="value"&&ku(ci)){var r=[];Li(r,ci,o,Rn(o)),Tu(Ba,r)}}function uA(o,r,a){o==="focusin"?(Jp(),zt=r,ci=a,zt.attachEvent("onpropertychange",Qp)):o==="focusout"&&Jp()}function cA(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ku(ci)}function fA(o,r){if(o==="click")return ku(r)}function dA(o,r){if(o==="input"||o==="change")return ku(r)}function hA(o,r){return o===r&&(o!==0||1/o===1/r)||o!==o&&r!==r}var gn=typeof Object.is=="function"?Object.is:hA;function Ha(o,r){if(gn(o,r))return!0;if(typeof o!="object"||o===null||typeof r!="object"||r===null)return!1;var a=Object.keys(o),f=Object.keys(r);if(a.length!==f.length)return!1;for(f=0;f<a.length;f++){var g=a[f];if(!Zn.call(r,g)||!gn(o[g],r[g]))return!1}return!0}function Xp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Wp(o,r){var a=Xp(o);o=0;for(var f;a;){if(a.nodeType===3){if(f=o+a.textContent.length,o<=r&&f>=r)return{node:a,offset:r-o};o=f}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xp(a)}}function Zp(o,r){return o&&r?o===r?!0:o&&o.nodeType===3?!1:r&&r.nodeType===3?Zp(o,r.parentNode):"contains"in o?o.contains(r):o.compareDocumentPosition?!!(o.compareDocumentPosition(r)&16):!1:!1}function jp(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var r=ar(o.document);r instanceof o.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)o=r.contentWindow;else break;r=ar(o.document)}return r}function od(o){var r=o&&o.nodeName&&o.nodeName.toLowerCase();return r&&(r==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||r==="textarea"||o.contentEditable==="true")}var mA=Gn&&"documentMode"in document&&11>=document.documentMode,ms=null,rd=null,Ga=null,sd=!1;function eg(o,r,a){var f=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sd||ms==null||ms!==ar(f)||(f=ms,"selectionStart"in f&&od(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ga&&Ha(Ga,f)||(Ga=f,f=vc(rd,"onSelect"),0<f.length&&(r=new ss("onSelect","select",null,r,a),o.push({event:r,listeners:f}),r.target=ms)))}function _r(o,r){var a={};return a[o.toLowerCase()]=r.toLowerCase(),a["Webkit"+o]="webkit"+r,a["Moz"+o]="moz"+r,a}var ps={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionrun:_r("Transition","TransitionRun"),transitionstart:_r("Transition","TransitionStart"),transitioncancel:_r("Transition","TransitionCancel"),transitionend:_r("Transition","TransitionEnd")},ad={},tg={};Gn&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function vr(o){if(ad[o])return ad[o];if(!ps[o])return o;var r=ps[o],a;for(a in r)if(r.hasOwnProperty(a)&&a in tg)return ad[o]=r[a];return o}var ng=vr("animationend"),ig=vr("animationiteration"),og=vr("animationstart"),pA=vr("transitionrun"),gA=vr("transitionstart"),yA=vr("transitioncancel"),rg=vr("transitionend"),sg=new Map,ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ld.push("scrollEnd");function zn(o,r){sg.set(o,r),Hn(r,[o])}var ag=new WeakMap;function Dn(o,r){if(typeof o=="object"&&o!==null){var a=ag.get(o);return a!==void 0?a:(r={value:o,source:r,stack:is(r)},ag.set(o,r),r)}return{value:o,source:r,stack:is(r)}}var xn=[],gs=0,ud=0;function Vu(){for(var o=gs,r=ud=gs=0;r<o;){var a=xn[r];xn[r++]=null;var f=xn[r];xn[r++]=null;var g=xn[r];xn[r++]=null;var v=xn[r];if(xn[r++]=null,f!==null&&g!==null){var A=f.pending;A===null?g.next=g:(g.next=A.next,A.next=g),f.pending=g}v!==0&&lg(a,g,v)}}function Uu(o,r,a,f){xn[gs++]=o,xn[gs++]=r,xn[gs++]=a,xn[gs++]=f,ud|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function cd(o,r,a,f){return Uu(o,r,a,f),Lu(o)}function ys(o,r){return Uu(o,null,null,r),Lu(o)}function lg(o,r,a){o.lanes|=a;var f=o.alternate;f!==null&&(f.lanes|=a);for(var g=!1,v=o.return;v!==null;)v.childLanes|=a,f=v.alternate,f!==null&&(f.childLanes|=a),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(g=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,g&&r!==null&&(g=31-Wt(a),o=v.hiddenUpdates,f=o[g],f===null?o[g]=[r]:f.push(r),r.lane=a|536870912),v):null}function Lu(o){if(50<ml)throw ml=0,gh=null,Error(i(185));for(var r=o.return;r!==null;)o=r,r=o.return;return o.tag===3?o.stateNode:null}var _s={};function _A(o,r,a,f){this.tag=o,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(o,r,a,f){return new _A(o,r,a,f)}function fd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Oi(o,r){var a=o.alternate;return a===null?(a=yn(o.tag,r,o.key,o.mode),a.elementType=o.elementType,a.type=o.type,a.stateNode=o.stateNode,a.alternate=o,o.alternate=a):(a.pendingProps=r,a.type=o.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=o.flags&65011712,a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=o.sibling,a.index=o.index,a.ref=o.ref,a.refCleanup=o.refCleanup,a}function ug(o,r){o.flags&=65011714;var a=o.alternate;return a===null?(o.childLanes=0,o.lanes=r,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o}function Ou(o,r,a,f,g,v){var A=0;if(f=o,typeof o=="function")fd(o)&&(A=1);else if(typeof o=="string")A=TI(o,a,_e.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case D:return o=yn(31,a,r,g),o.elementType=D,o.lanes=v,o;case V:return Tr(a.children,g,v,r);case q:A=8,g|=24;break;case H:return o=yn(12,a,r,g|2),o.elementType=H,o.lanes=v,o;case J:return o=yn(13,a,r,g),o.elementType=J,o.lanes=v,o;case se:return o=yn(19,a,r,g),o.elementType=se,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case oe:case X:A=10;break e;case Q:A=9;break e;case j:A=11;break e;case x:A=14;break e;case M:A=16,f=null;break e}A=29,a=Error(i(130,o===null?"null":typeof o,"")),f=null}return r=yn(A,a,r,g),r.elementType=o,r.type=f,r.lanes=v,r}function Tr(o,r,a,f){return o=yn(7,o,f,r),o.lanes=a,o}function dd(o,r,a){return o=yn(6,o,null,r),o.lanes=a,o}function hd(o,r,a){return r=yn(4,o.children!==null?o.children:[],o.key,r),r.lanes=a,r.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},r}var vs=[],Ts=0,Fu=null,qu=0,Nn=[],bn=0,Er=null,Fi=1,qi="";function Sr(o,r){vs[Ts++]=qu,vs[Ts++]=Fu,Fu=o,qu=r}function cg(o,r,a){Nn[bn++]=Fi,Nn[bn++]=qi,Nn[bn++]=Er,Er=o;var f=Fi;o=qi;var g=32-Wt(f)-1;f&=~(1<<g),a+=1;var v=32-Wt(r)+g;if(30<v){var A=g-g%5;v=(f&(1<<A)-1).toString(32),f>>=A,g-=A,Fi=1<<32-Wt(r)+g|a<<g|f,qi=v+o}else Fi=1<<v|a<<g|f,qi=o}function md(o){o.return!==null&&(Sr(o,1),cg(o,1,0))}function pd(o){for(;o===Fu;)Fu=vs[--Ts],vs[Ts]=null,qu=vs[--Ts],vs[Ts]=null;for(;o===Er;)Er=Nn[--bn],Nn[bn]=null,qi=Nn[--bn],Nn[bn]=null,Fi=Nn[--bn],Nn[bn]=null}var un=null,pt=null,Ke=!1,Cr=null,fi=!1,gd=Error(i(519));function Ar(o){var r=Error(i(418,""));throw $a(Dn(r,o)),gd}function fg(o){var r=o.stateNode,a=o.type,f=o.memoizedProps;switch(r[Dt]=o,r[St]=f,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<gl.length;a++)Ue(gl[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),lr(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),os(r);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),ur(r,f.value,f.defaultValue,f.children),os(r)}a=f.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||f.suppressHydrationWarning===!0||M_(r.textContent,a)?(f.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),f.onScroll!=null&&Ue("scroll",r),f.onScrollEnd!=null&&Ue("scrollend",r),f.onClick!=null&&(r.onclick=Tc),r=!0):r=!1,r||Ar(o)}function dg(o){for(un=o.return;un;)switch(un.tag){case 5:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:un=un.return}}function za(o){if(o!==un)return!1;if(!Ke)return dg(o),Ke=!0,!1;var r=o.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=o.type,a=!(a!=="form"&&a!=="button")||bh(o.type,o.memoizedProps)),a=!a),a&&pt&&Ar(o),dg(o),r===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,r=0;o;){if(o.nodeType===8)if(a=o.data,a==="/$"){if(r===0){pt=$n(o.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;o=o.nextSibling}pt=null}}else r===27?(r=pt,xo(o.type)?(o=Uh,Uh=null,pt=o):pt=r):pt=un?$n(o.stateNode.nextSibling):null;return!0}function Ya(){pt=un=null,Ke=!1}function hg(){var o=Cr;return o!==null&&(dn===null?dn=o:dn.push.apply(dn,o),Cr=null),o}function $a(o){Cr===null?Cr=[o]:Cr.push(o)}var yd=re(null),Ir=null,Bi=null;function po(o,r,a){le(yd,r._currentValue),r._currentValue=a}function Hi(o){o._currentValue=yd.current,fe(yd)}function _d(o,r,a){for(;o!==null;){var f=o.alternate;if((o.childLanes&r)!==r?(o.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),o===a)break;o=o.return}}function vd(o,r,a,f){var g=o.child;for(g!==null&&(g.return=o);g!==null;){var v=g.dependencies;if(v!==null){var A=g.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=g;for(var N=0;N<r.length;N++)if(I.context===r[N]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),_d(v.return,a,o),f||(A=null);break e}v=I.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(i(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),_d(A,a,o),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===o){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function Ka(o,r,a,f){o=null;for(var g=r,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=g.type;gn(g.pendingProps.value,A.value)||(o!==null?o.push(I):o=[I])}}else if(g===Ee.current){if(A=g.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(o!==null?o.push(Sl):o=[Sl])}g=g.return}o!==null&&vd(r,o,a,f),r.flags|=262144}function Bu(o){for(o=o.firstContext;o!==null;){if(!gn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Rr(o){Ir=o,Bi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Zt(o){return mg(Ir,o)}function Hu(o,r){return Ir===null&&Rr(o),mg(o,r)}function mg(o,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Bi===null){if(o===null)throw Error(i(308));Bi=r,o.dependencies={lanes:0,firstContext:r},o.flags|=524288}else Bi=Bi.next=r;return a}var vA=typeof AbortController<"u"?AbortController:function(){var o=[],r=this.signal={aborted:!1,addEventListener:function(a,f){o.push(f)}};this.abort=function(){r.aborted=!0,o.forEach(function(a){return a()})}},TA=n.unstable_scheduleCallback,EA=n.unstable_NormalPriority,bt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Td(){return{controller:new vA,data:new Map,refCount:0}}function Ja(o){o.refCount--,o.refCount===0&&TA(EA,function(){o.controller.abort()})}var Qa=null,Ed=0,Es=0,Ss=null;function SA(o,r){if(Qa===null){var a=Qa=[];Ed=0,Es=Ch(),Ss={status:"pending",value:void 0,then:function(f){a.push(f)}}}return Ed++,r.then(pg,pg),r}function pg(){if(--Ed===0&&Qa!==null){Ss!==null&&(Ss.status="fulfilled");var o=Qa;Qa=null,Es=0,Ss=null;for(var r=0;r<o.length;r++)(0,o[r])()}}function CA(o,r){var a=[],f={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return o.then(function(){f.status="fulfilled",f.value=r;for(var g=0;g<a.length;g++)(0,a[g])(r)},function(g){for(f.status="rejected",f.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),f}var gg=Z.S;Z.S=function(o,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&SA(o,r),gg!==null&&gg(o,r)};var wr=re(null);function Sd(){var o=wr.current;return o!==null?o:rt.pooledCache}function Gu(o,r){r===null?le(wr,wr.current):le(wr,r.pool)}function yg(){var o=Sd();return o===null?null:{parent:bt._currentValue,pool:o}}var Xa=Error(i(460)),_g=Error(i(474)),zu=Error(i(542)),Cd={then:function(){}};function vg(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Yu(){}function Tg(o,r,a){switch(a=o[a],a===void 0?o.push(r):a!==r&&(r.then(Yu,Yu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw o=r.reason,Sg(o),o;default:if(typeof r.status=="string")r.then(Yu,Yu);else{if(o=rt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=r,o.status="pending",o.then(function(f){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=f}},function(f){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw o=r.reason,Sg(o),o}throw Wa=r,Xa}}var Wa=null;function Eg(){if(Wa===null)throw Error(i(459));var o=Wa;return Wa=null,o}function Sg(o){if(o===Xa||o===zu)throw Error(i(483))}var go=!1;function Ad(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(o,r){o=o.updateQueue,r.updateQueue===o&&(r.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function yo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function _o(o,r,a){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(Ze&2)!==0){var g=f.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),f.pending=r,r=Lu(o),lg(o,null,a),r}return Uu(o,f,r,a),Lu(o)}function Za(o,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var f=r.lanes;f&=o.pendingLanes,a|=f,r.lanes=a,Ra(o,a)}}function Rd(o,r){var a=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,a===f)){var g=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?g=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?g=v=r:v=v.next=r}else g=v=r;a={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},o.updateQueue=a;return}o=a.lastBaseUpdate,o===null?a.firstBaseUpdate=r:o.next=r,a.lastBaseUpdate=r}var wd=!1;function ja(){if(wd){var o=Ss;if(o!==null)throw o}}function el(o,r,a,f){wd=!1;var g=o.updateQueue;go=!1;var v=g.firstBaseUpdate,A=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var N=I,Y=N.next;N.next=null,A===null?v=Y:A.next=Y,A=N;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,I=ee.lastBaseUpdate,I!==A&&(I===null?ee.firstBaseUpdate=Y:I.next=Y,ee.lastBaseUpdate=N))}if(v!==null){var ne=g.baseState;A=0,ee=Y=N=null,I=v;do{var $=I.lane&-536870913,K=$!==I.lane;if(K?(Ge&$)===$:(f&$)===$){$!==0&&$===Es&&(wd=!0),ee!==null&&(ee=ee.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ie=o,Te=I;$=r;var it=a;switch(Te.tag){case 1:if(Ie=Te.payload,typeof Ie=="function"){ne=Ie.call(it,ne,$);break e}ne=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Te.payload,$=typeof Ie=="function"?Ie.call(it,ne,$):Ie,$==null)break e;ne=_({},ne,$);break e;case 2:go=!0}}$=I.callback,$!==null&&(o.flags|=64,K&&(o.flags|=8192),K=g.callbacks,K===null?g.callbacks=[$]:K.push($))}else K={lane:$,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ee===null?(Y=ee=K,N=ne):ee=ee.next=K,A|=$;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;K=I,I=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);ee===null&&(N=ne),g.baseState=N,g.firstBaseUpdate=Y,g.lastBaseUpdate=ee,v===null&&(g.shared.lanes=0),Ro|=A,o.lanes=A,o.memoizedState=ne}}function Cg(o,r){if(typeof o!="function")throw Error(i(191,o));o.call(r)}function Ag(o,r){var a=o.callbacks;if(a!==null)for(o.callbacks=null,o=0;o<a.length;o++)Cg(a[o],r)}var Cs=re(null),$u=re(0);function Ig(o,r){o=Qi,le($u,o),le(Cs,r),Qi=o|r.baseLanes}function Md(){le($u,Qi),le(Cs,Cs.current)}function Dd(){Qi=$u.current,fe(Cs),fe($u)}var vo=0,Pe=null,tt=null,At=null,Ku=!1,As=!1,Mr=!1,Ju=0,tl=0,Is=null,AA=0;function vt(){throw Error(i(321))}function xd(o,r){if(r===null)return!1;for(var a=0;a<r.length&&a<o.length;a++)if(!gn(o[a],r[a]))return!1;return!0}function Nd(o,r,a,f,g,v){return vo=v,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=o===null||o.memoizedState===null?ly:uy,Mr=!1,v=a(f,g),Mr=!1,As&&(v=wg(r,a,f,g)),Rg(o),v}function Rg(o){Z.H=ec;var r=tt!==null&&tt.next!==null;if(vo=0,At=tt=Pe=null,Ku=!1,tl=0,Is=null,r)throw Error(i(300));o===null||Ot||(o=o.dependencies,o!==null&&Bu(o)&&(Ot=!0))}function wg(o,r,a,f){Pe=o;var g=0;do{if(As&&(Is=null),tl=0,As=!1,25<=g)throw Error(i(301));if(g+=1,At=tt=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Z.H=NA,v=r(a,f)}while(As);return v}function IA(){var o=Z.H,r=o.useState()[0];return r=typeof r.then=="function"?nl(r):r,o=o.useState()[0],(tt!==null?tt.memoizedState:null)!==o&&(Pe.flags|=1024),r}function bd(){var o=Ju!==0;return Ju=0,o}function Pd(o,r,a){r.updateQueue=o.updateQueue,r.flags&=-2053,o.lanes&=~a}function kd(o){if(Ku){for(o=o.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Ku=!1}vo=0,At=tt=Pe=null,As=!1,tl=Ju=0,Is=null}function cn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Pe.memoizedState=At=o:At=At.next=o,At}function It(){if(tt===null){var o=Pe.alternate;o=o!==null?o.memoizedState:null}else o=tt.next;var r=At===null?Pe.memoizedState:At.next;if(r!==null)At=r,tt=o;else{if(o===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));tt=o,o={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},At===null?Pe.memoizedState=At=o:At=At.next=o}return At}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nl(o){var r=tl;return tl+=1,Is===null&&(Is=[]),o=Tg(Is,o,r),r=Pe,(At===null?r.memoizedState:At.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?ly:uy),o}function Qu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return nl(o);if(o.$$typeof===X)return Zt(o)}throw Error(i(438,String(o)))}function Ud(o){var r=null,a=Pe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var f=Pe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Vd(),Pe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(o),f=0;f<o;f++)a[f]=b;return r.index++,a}function Gi(o,r){return typeof r=="function"?r(o):r}function Xu(o){var r=It();return Ld(r,tt,o)}function Ld(o,r,a){var f=o.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=a;var g=o.baseQueue,v=f.pending;if(v!==null){if(g!==null){var A=g.next;g.next=v.next,v.next=A}r.baseQueue=g=v,f.pending=null}if(v=o.baseState,g===null)o.memoizedState=v;else{r=g.next;var I=A=null,N=null,Y=r,ee=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Ge&ne)===ne:(vo&ne)===ne){var $=Y.revertLane;if($===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Es&&(ee=!0);else if((vo&$)===$){Y=Y.next,$===Es&&(ee=!0);continue}else ne={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},N===null?(I=N=ne,A=v):N=N.next=ne,Pe.lanes|=$,Ro|=$;ne=Y.action,Mr&&a(v,ne),v=Y.hasEagerState?Y.eagerState:a(v,ne)}else $={lane:ne,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},N===null?(I=N=$,A=v):N=N.next=$,Pe.lanes|=ne,Ro|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(N===null?A=v:N.next=I,!gn(v,o.memoizedState)&&(Ot=!0,ee&&(a=Ss,a!==null)))throw a;o.memoizedState=v,o.baseState=A,o.baseQueue=N,f.lastRenderedState=v}return g===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function Od(o){var r=It(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=o;var f=a.dispatch,g=a.pending,v=r.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do v=o(v,A.action),A=A.next;while(A!==g);gn(v,r.memoizedState)||(Ot=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,f]}function Mg(o,r,a){var f=Pe,g=It(),v=Ke;if(v){if(a===void 0)throw Error(i(407));a=a()}else a=r();var A=!gn((tt||g).memoizedState,a);A&&(g.memoizedState=a,Ot=!0),g=g.queue;var I=Ng.bind(null,f,g,o);if(il(2048,8,I,[o]),g.getSnapshot!==r||A||At!==null&&At.memoizedState.tag&1){if(f.flags|=2048,Rs(9,Wu(),xg.bind(null,f,g,a,r),null),rt===null)throw Error(i(349));v||(vo&124)!==0||Dg(f,r,a)}return a}function Dg(o,r,a){o.flags|=16384,o={getSnapshot:r,value:a},r=Pe.updateQueue,r===null?(r=Vd(),Pe.updateQueue=r,r.stores=[o]):(a=r.stores,a===null?r.stores=[o]:a.push(o))}function xg(o,r,a,f){r.value=a,r.getSnapshot=f,bg(r)&&Pg(o)}function Ng(o,r,a){return a(function(){bg(r)&&Pg(o)})}function bg(o){var r=o.getSnapshot;o=o.value;try{var a=r();return!gn(o,a)}catch{return!0}}function Pg(o){var r=ys(o,2);r!==null&&Sn(r,o,2)}function Fd(o){var r=cn();if(typeof o=="function"){var a=o;if(o=a(),Mr){mn(!0);try{a()}finally{mn(!1)}}}return r.memoizedState=r.baseState=o,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:o},r}function kg(o,r,a,f){return o.baseState=a,Ld(o,tt,typeof f=="function"?f:Gi)}function RA(o,r,a,f,g){if(ju(o))throw Error(i(485));if(o=r.action,o!==null){var v={payload:g,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};Z.T!==null?a(!0):v.isTransition=!1,f(v),a=r.pending,a===null?(v.next=r.pending=v,Vg(r,v)):(v.next=a.next,r.pending=a.next=v)}}function Vg(o,r){var a=r.action,f=r.payload,g=o.state;if(r.isTransition){var v=Z.T,A={};Z.T=A;try{var I=a(g,f),N=Z.S;N!==null&&N(A,I),Ug(o,r,I)}catch(Y){qd(o,r,Y)}finally{Z.T=v}}else try{v=a(g,f),Ug(o,r,v)}catch(Y){qd(o,r,Y)}}function Ug(o,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(f){Lg(o,r,f)},function(f){return qd(o,r,f)}):Lg(o,r,a)}function Lg(o,r,a){r.status="fulfilled",r.value=a,Og(r),o.state=a,r=o.pending,r!==null&&(a=r.next,a===r?o.pending=null:(a=a.next,r.next=a,Vg(o,a)))}function qd(o,r,a){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=a,Og(r),r=r.next;while(r!==f)}o.action=null}function Og(o){o=o.listeners;for(var r=0;r<o.length;r++)(0,o[r])()}function Fg(o,r){return r}function qg(o,r){if(Ke){var a=rt.formState;if(a!==null){e:{var f=Pe;if(Ke){if(pt){t:{for(var g=pt,v=fi;g.nodeType!==8;){if(!v){g=null;break t}if(g=$n(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){pt=$n(g.nextSibling),f=g.data==="F!";break e}}Ar(f)}f=!1}f&&(r=a[0])}}return a=cn(),a.memoizedState=a.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fg,lastRenderedState:r},a.queue=f,a=ry.bind(null,Pe,f),f.dispatch=a,f=Fd(!1),v=Yd.bind(null,Pe,!1,f.queue),f=cn(),g={state:r,dispatch:null,action:o,pending:null},f.queue=g,a=RA.bind(null,Pe,g,v,a),g.dispatch=a,f.memoizedState=o,[r,a,!1]}function Bg(o){var r=It();return Hg(r,tt,o)}function Hg(o,r,a){if(r=Ld(o,r,Fg)[0],o=Xu(Gi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=nl(r)}catch(A){throw A===Xa?zu:A}else f=r;r=It();var g=r.queue,v=g.dispatch;return a!==r.memoizedState&&(Pe.flags|=2048,Rs(9,Wu(),wA.bind(null,g,a),null)),[f,v,o]}function wA(o,r){o.action=r}function Gg(o){var r=It(),a=tt;if(a!==null)return Hg(r,a,o);It(),r=r.memoizedState,a=It();var f=a.queue.dispatch;return a.memoizedState=o,[r,f,!1]}function Rs(o,r,a,f){return o={tag:o,create:a,deps:f,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Vd(),Pe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=o.next=o:(f=a.next,a.next=o,o.next=f,r.lastEffect=o),o}function Wu(){return{destroy:void 0,resource:void 0}}function zg(){return It().memoizedState}function Zu(o,r,a,f){var g=cn();f=f===void 0?null:f,Pe.flags|=o,g.memoizedState=Rs(1|r,Wu(),a,f)}function il(o,r,a,f){var g=It();f=f===void 0?null:f;var v=g.memoizedState.inst;tt!==null&&f!==null&&xd(f,tt.memoizedState.deps)?g.memoizedState=Rs(r,v,a,f):(Pe.flags|=o,g.memoizedState=Rs(1|r,v,a,f))}function Yg(o,r){Zu(8390656,8,o,r)}function $g(o,r){il(2048,8,o,r)}function Kg(o,r){return il(4,2,o,r)}function Jg(o,r){return il(4,4,o,r)}function Qg(o,r){if(typeof r=="function"){o=o();var a=r(o);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return o=o(),r.current=o,function(){r.current=null}}function Xg(o,r,a){a=a!=null?a.concat([o]):null,il(4,4,Qg.bind(null,r,o),a)}function Bd(){}function Wg(o,r){var a=It();r=r===void 0?null:r;var f=a.memoizedState;return r!==null&&xd(r,f[1])?f[0]:(a.memoizedState=[o,r],o)}function Zg(o,r){var a=It();r=r===void 0?null:r;var f=a.memoizedState;if(r!==null&&xd(r,f[1]))return f[0];if(f=o(),Mr){mn(!0);try{o()}finally{mn(!1)}}return a.memoizedState=[f,r],f}function Hd(o,r,a){return a===void 0||(vo&1073741824)!==0?o.memoizedState=r:(o.memoizedState=a,o=t_(),Pe.lanes|=o,Ro|=o,a)}function jg(o,r,a,f){return gn(a,r)?a:Cs.current!==null?(o=Hd(o,a,f),gn(o,r)||(Ot=!0),o):(vo&42)===0?(Ot=!0,o.memoizedState=a):(o=t_(),Pe.lanes|=o,Ro|=o,r)}function ey(o,r,a,f,g){var v=ce.p;ce.p=v!==0&&8>v?v:8;var A=Z.T,I={};Z.T=I,Yd(o,!1,r,a);try{var N=g(),Y=Z.S;if(Y!==null&&Y(I,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ee=CA(N,f);ol(o,r,ee,En(o))}else ol(o,r,f,En(o))}catch(ne){ol(o,r,{then:function(){},status:"rejected",reason:ne},En())}finally{ce.p=v,Z.T=A}}function MA(){}function Gd(o,r,a,f){if(o.tag!==5)throw Error(i(476));var g=ty(o).queue;ey(o,g,r,pe,a===null?MA:function(){return ny(o),a(f)})}function ty(o){var r=o.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:pe},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},o.memoizedState=r,o=o.alternate,o!==null&&(o.memoizedState=r),r}function ny(o){var r=ty(o).next.queue;ol(o,r,{},En())}function zd(){return Zt(Sl)}function iy(){return It().memoizedState}function oy(){return It().memoizedState}function DA(o){for(var r=o.return;r!==null;){switch(r.tag){case 24:case 3:var a=En();o=yo(a);var f=_o(r,o,a);f!==null&&(Sn(f,r,a),Za(f,r,a)),r={cache:Td()},o.payload=r;return}r=r.return}}function xA(o,r,a){var f=En();a={lane:f,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ju(o)?sy(r,a):(a=cd(o,r,a,f),a!==null&&(Sn(a,o,f),ay(a,r,f)))}function ry(o,r,a){var f=En();ol(o,r,a,f)}function ol(o,r,a,f){var g={lane:f,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ju(o))sy(r,g);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,I=v(A,a);if(g.hasEagerState=!0,g.eagerState=I,gn(I,A))return Uu(o,r,g,0),rt===null&&Vu(),!1}catch{}finally{}if(a=cd(o,r,g,f),a!==null)return Sn(a,o,f),ay(a,r,f),!0}return!1}function Yd(o,r,a,f){if(f={lane:2,revertLane:Ch(),action:f,hasEagerState:!1,eagerState:null,next:null},ju(o)){if(r)throw Error(i(479))}else r=cd(o,a,f,2),r!==null&&Sn(r,o,2)}function ju(o){var r=o.alternate;return o===Pe||r!==null&&r===Pe}function sy(o,r){As=Ku=!0;var a=o.pending;a===null?r.next=r:(r.next=a.next,a.next=r),o.pending=r}function ay(o,r,a){if((a&4194048)!==0){var f=r.lanes;f&=o.pendingLanes,a|=f,r.lanes=a,Ra(o,a)}}var ec={readContext:Zt,use:Qu,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt},ly={readContext:Zt,use:Qu,useCallback:function(o,r){return cn().memoizedState=[o,r===void 0?null:r],o},useContext:Zt,useEffect:Yg,useImperativeHandle:function(o,r,a){a=a!=null?a.concat([o]):null,Zu(4194308,4,Qg.bind(null,r,o),a)},useLayoutEffect:function(o,r){return Zu(4194308,4,o,r)},useInsertionEffect:function(o,r){Zu(4,2,o,r)},useMemo:function(o,r){var a=cn();r=r===void 0?null:r;var f=o();if(Mr){mn(!0);try{o()}finally{mn(!1)}}return a.memoizedState=[f,r],f},useReducer:function(o,r,a){var f=cn();if(a!==void 0){var g=a(r);if(Mr){mn(!0);try{a(r)}finally{mn(!1)}}}else g=r;return f.memoizedState=f.baseState=g,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:g},f.queue=o,o=o.dispatch=xA.bind(null,Pe,o),[f.memoizedState,o]},useRef:function(o){var r=cn();return o={current:o},r.memoizedState=o},useState:function(o){o=Fd(o);var r=o.queue,a=ry.bind(null,Pe,r);return r.dispatch=a,[o.memoizedState,a]},useDebugValue:Bd,useDeferredValue:function(o,r){var a=cn();return Hd(a,o,r)},useTransition:function(){var o=Fd(!1);return o=ey.bind(null,Pe,o.queue,!0,!1),cn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,r,a){var f=Pe,g=cn();if(Ke){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),rt===null)throw Error(i(349));(Ge&124)!==0||Dg(f,r,a)}g.memoizedState=a;var v={value:a,getSnapshot:r};return g.queue=v,Yg(Ng.bind(null,f,v,o),[o]),f.flags|=2048,Rs(9,Wu(),xg.bind(null,f,v,a,r),null),a},useId:function(){var o=cn(),r=rt.identifierPrefix;if(Ke){var a=qi,f=Fi;a=(f&~(1<<32-Wt(f)-1)).toString(32)+a,r=""+r+"R"+a,a=Ju++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=AA++,r=""+r+"r"+a.toString(32)+"";return o.memoizedState=r},useHostTransitionStatus:zd,useFormState:qg,useActionState:qg,useOptimistic:function(o){var r=cn();r.memoizedState=r.baseState=o;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Yd.bind(null,Pe,!0,a),a.dispatch=r,[o,r]},useMemoCache:Ud,useCacheRefresh:function(){return cn().memoizedState=DA.bind(null,Pe)}},uy={readContext:Zt,use:Qu,useCallback:Wg,useContext:Zt,useEffect:$g,useImperativeHandle:Xg,useInsertionEffect:Kg,useLayoutEffect:Jg,useMemo:Zg,useReducer:Xu,useRef:zg,useState:function(){return Xu(Gi)},useDebugValue:Bd,useDeferredValue:function(o,r){var a=It();return jg(a,tt.memoizedState,o,r)},useTransition:function(){var o=Xu(Gi)[0],r=It().memoizedState;return[typeof o=="boolean"?o:nl(o),r]},useSyncExternalStore:Mg,useId:iy,useHostTransitionStatus:zd,useFormState:Bg,useActionState:Bg,useOptimistic:function(o,r){var a=It();return kg(a,tt,o,r)},useMemoCache:Ud,useCacheRefresh:oy},NA={readContext:Zt,use:Qu,useCallback:Wg,useContext:Zt,useEffect:$g,useImperativeHandle:Xg,useInsertionEffect:Kg,useLayoutEffect:Jg,useMemo:Zg,useReducer:Od,useRef:zg,useState:function(){return Od(Gi)},useDebugValue:Bd,useDeferredValue:function(o,r){var a=It();return tt===null?Hd(a,o,r):jg(a,tt.memoizedState,o,r)},useTransition:function(){var o=Od(Gi)[0],r=It().memoizedState;return[typeof o=="boolean"?o:nl(o),r]},useSyncExternalStore:Mg,useId:iy,useHostTransitionStatus:zd,useFormState:Gg,useActionState:Gg,useOptimistic:function(o,r){var a=It();return tt!==null?kg(a,tt,o,r):(a.baseState=o,[o,a.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:oy},ws=null,rl=0;function tc(o){var r=rl;return rl+=1,ws===null&&(ws=[]),Tg(ws,o,r)}function sl(o,r){r=r.props.ref,o.ref=r!==void 0?r:null}function nc(o,r){throw r.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(r),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":o)))}function cy(o){var r=o._init;return r(o._payload)}function fy(o){function r(B,L){if(o){var z=B.deletions;z===null?(B.deletions=[L],B.flags|=16):z.push(L)}}function a(B,L){if(!o)return null;for(;L!==null;)r(B,L),L=L.sibling;return null}function f(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function g(B,L){return B=Oi(B,L),B.index=0,B.sibling=null,B}function v(B,L,z){return B.index=z,o?(z=B.alternate,z!==null?(z=z.index,z<L?(B.flags|=67108866,L):z):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function A(B){return o&&B.alternate===null&&(B.flags|=67108866),B}function I(B,L,z,te){return L===null||L.tag!==6?(L=dd(z,B.mode,te),L.return=B,L):(L=g(L,z),L.return=B,L)}function N(B,L,z,te){var he=z.type;return he===V?ee(B,L,z.props.children,te,z.key):L!==null&&(L.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===M&&cy(he)===L.type)?(L=g(L,z.props),sl(L,z),L.return=B,L):(L=Ou(z.type,z.key,z.props,null,B.mode,te),sl(L,z),L.return=B,L)}function Y(B,L,z,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=hd(z,B.mode,te),L.return=B,L):(L=g(L,z.children||[]),L.return=B,L)}function ee(B,L,z,te,he){return L===null||L.tag!==7?(L=Tr(z,B.mode,te,he),L.return=B,L):(L=g(L,z),L.return=B,L)}function ne(B,L,z){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=dd(""+L,B.mode,z),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return z=Ou(L.type,L.key,L.props,null,B.mode,z),sl(z,L),z.return=B,z;case w:return L=hd(L,B.mode,z),L.return=B,L;case M:var te=L._init;return L=te(L._payload),ne(B,L,z)}if(qe(L)||F(L))return L=Tr(L,B.mode,z,null),L.return=B,L;if(typeof L.then=="function")return ne(B,tc(L),z);if(L.$$typeof===X)return ne(B,Hu(B,L),z);nc(B,L)}return null}function $(B,L,z,te){var he=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return he!==null?null:I(B,L,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===he?N(B,L,z,te):null;case w:return z.key===he?Y(B,L,z,te):null;case M:return he=z._init,z=he(z._payload),$(B,L,z,te)}if(qe(z)||F(z))return he!==null?null:ee(B,L,z,te,null);if(typeof z.then=="function")return $(B,L,tc(z),te);if(z.$$typeof===X)return $(B,L,Hu(B,z),te);nc(B,z)}return null}function K(B,L,z,te,he){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(z)||null,I(L,B,""+te,he);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return B=B.get(te.key===null?z:te.key)||null,N(L,B,te,he);case w:return B=B.get(te.key===null?z:te.key)||null,Y(L,B,te,he);case M:var ke=te._init;return te=ke(te._payload),K(B,L,z,te,he)}if(qe(te)||F(te))return B=B.get(z)||null,ee(L,B,te,he,null);if(typeof te.then=="function")return K(B,L,z,tc(te),he);if(te.$$typeof===X)return K(B,L,z,Hu(L,te),he);nc(L,te)}return null}function Ie(B,L,z,te){for(var he=null,ke=null,ge=L,Se=L=0,qt=null;ge!==null&&Se<z.length;Se++){ge.index>Se?(qt=ge,ge=null):qt=ge.sibling;var $e=$(B,ge,z[Se],te);if($e===null){ge===null&&(ge=qt);break}o&&ge&&$e.alternate===null&&r(B,ge),L=v($e,L,Se),ke===null?he=$e:ke.sibling=$e,ke=$e,ge=qt}if(Se===z.length)return a(B,ge),Ke&&Sr(B,Se),he;if(ge===null){for(;Se<z.length;Se++)ge=ne(B,z[Se],te),ge!==null&&(L=v(ge,L,Se),ke===null?he=ge:ke.sibling=ge,ke=ge);return Ke&&Sr(B,Se),he}for(ge=f(ge);Se<z.length;Se++)qt=K(ge,B,Se,z[Se],te),qt!==null&&(o&&qt.alternate!==null&&ge.delete(qt.key===null?Se:qt.key),L=v(qt,L,Se),ke===null?he=qt:ke.sibling=qt,ke=qt);return o&&ge.forEach(function(Vo){return r(B,Vo)}),Ke&&Sr(B,Se),he}function Te(B,L,z,te){if(z==null)throw Error(i(151));for(var he=null,ke=null,ge=L,Se=L=0,qt=null,$e=z.next();ge!==null&&!$e.done;Se++,$e=z.next()){ge.index>Se?(qt=ge,ge=null):qt=ge.sibling;var Vo=$(B,ge,$e.value,te);if(Vo===null){ge===null&&(ge=qt);break}o&&ge&&Vo.alternate===null&&r(B,ge),L=v(Vo,L,Se),ke===null?he=Vo:ke.sibling=Vo,ke=Vo,ge=qt}if($e.done)return a(B,ge),Ke&&Sr(B,Se),he;if(ge===null){for(;!$e.done;Se++,$e=z.next())$e=ne(B,$e.value,te),$e!==null&&(L=v($e,L,Se),ke===null?he=$e:ke.sibling=$e,ke=$e);return Ke&&Sr(B,Se),he}for(ge=f(ge);!$e.done;Se++,$e=z.next())$e=K(ge,B,Se,$e.value,te),$e!==null&&(o&&$e.alternate!==null&&ge.delete($e.key===null?Se:$e.key),L=v($e,L,Se),ke===null?he=$e:ke.sibling=$e,ke=$e);return o&&ge.forEach(function(bI){return r(B,bI)}),Ke&&Sr(B,Se),he}function it(B,L,z,te){if(typeof z=="object"&&z!==null&&z.type===V&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var he=z.key;L!==null;){if(L.key===he){if(he=z.type,he===V){if(L.tag===7){a(B,L.sibling),te=g(L,z.props.children),te.return=B,B=te;break e}}else if(L.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===M&&cy(he)===L.type){a(B,L.sibling),te=g(L,z.props),sl(te,z),te.return=B,B=te;break e}a(B,L);break}else r(B,L);L=L.sibling}z.type===V?(te=Tr(z.props.children,B.mode,te,z.key),te.return=B,B=te):(te=Ou(z.type,z.key,z.props,null,B.mode,te),sl(te,z),te.return=B,B=te)}return A(B);case w:e:{for(he=z.key;L!==null;){if(L.key===he)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){a(B,L.sibling),te=g(L,z.children||[]),te.return=B,B=te;break e}else{a(B,L);break}else r(B,L);L=L.sibling}te=hd(z,B.mode,te),te.return=B,B=te}return A(B);case M:return he=z._init,z=he(z._payload),it(B,L,z,te)}if(qe(z))return Ie(B,L,z,te);if(F(z)){if(he=F(z),typeof he!="function")throw Error(i(150));return z=he.call(z),Te(B,L,z,te)}if(typeof z.then=="function")return it(B,L,tc(z),te);if(z.$$typeof===X)return it(B,L,Hu(B,z),te);nc(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,L!==null&&L.tag===6?(a(B,L.sibling),te=g(L,z),te.return=B,B=te):(a(B,L),te=dd(z,B.mode,te),te.return=B,B=te),A(B)):a(B,L)}return function(B,L,z,te){try{rl=0;var he=it(B,L,z,te);return ws=null,he}catch(ge){if(ge===Xa||ge===zu)throw ge;var ke=yn(29,ge,null,B.mode);return ke.lanes=te,ke.return=B,ke}finally{}}}var Ms=fy(!0),dy=fy(!1),Pn=re(null),di=null;function To(o){var r=o.alternate;le(Pt,Pt.current&1),le(Pn,o),di===null&&(r===null||Cs.current!==null||r.memoizedState!==null)&&(di=o)}function hy(o){if(o.tag===22){if(le(Pt,Pt.current),le(Pn,o),di===null){var r=o.alternate;r!==null&&r.memoizedState!==null&&(di=o)}}else Eo()}function Eo(){le(Pt,Pt.current),le(Pn,Pn.current)}function zi(o){fe(Pn),di===o&&(di=null),fe(Pt)}var Pt=re(0);function ic(o){for(var r=o;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Vh(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break;for(;r.sibling===null;){if(r.return===null||r.return===o)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $d(o,r,a,f){r=o.memoizedState,a=a(f,r),a=a==null?r:_({},r,a),o.memoizedState=a,o.lanes===0&&(o.updateQueue.baseState=a)}var Kd={enqueueSetState:function(o,r,a){o=o._reactInternals;var f=En(),g=yo(f);g.payload=r,a!=null&&(g.callback=a),r=_o(o,g,f),r!==null&&(Sn(r,o,f),Za(r,o,f))},enqueueReplaceState:function(o,r,a){o=o._reactInternals;var f=En(),g=yo(f);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=_o(o,g,f),r!==null&&(Sn(r,o,f),Za(r,o,f))},enqueueForceUpdate:function(o,r){o=o._reactInternals;var a=En(),f=yo(a);f.tag=2,r!=null&&(f.callback=r),r=_o(o,f,a),r!==null&&(Sn(r,o,a),Za(r,o,a))}};function my(o,r,a,f,g,v,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,v,A):r.prototype&&r.prototype.isPureReactComponent?!Ha(a,f)||!Ha(g,v):!0}function py(o,r,a,f){o=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,f),r.state!==o&&Kd.enqueueReplaceState(r,r.state,null)}function Dr(o,r){var a=r;if("ref"in r){a={};for(var f in r)f!=="ref"&&(a[f]=r[f])}if(o=o.defaultProps){a===r&&(a=_({},a));for(var g in o)a[g]===void 0&&(a[g]=o[g])}return a}var oc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function gy(o){oc(o)}function yy(o){console.error(o)}function _y(o){oc(o)}function rc(o,r){try{var a=o.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function vy(o,r,a){try{var f=o.onCaughtError;f(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Jd(o,r,a){return a=yo(a),a.tag=3,a.payload={element:null},a.callback=function(){rc(o,r)},a}function Ty(o){return o=yo(o),o.tag=3,o}function Ey(o,r,a,f){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=f.value;o.payload=function(){return g(v)},o.callback=function(){vy(r,a,f)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){vy(r,a,f),typeof g!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var I=f.stack;this.componentDidCatch(f.value,{componentStack:I!==null?I:""})})}function bA(o,r,a,f,g){if(a.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=a.alternate,r!==null&&Ka(r,a,g,!0),a=Pn.current,a!==null){switch(a.tag){case 13:return di===null?_h():a.alternate===null&&gt===0&&(gt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,f===Cd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([f]):r.add(f),Th(o,f,g)),!1;case 22:return a.flags|=65536,f===Cd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([f]):a.add(f)),Th(o,f,g)),!1}throw Error(i(435,a.tag))}return Th(o,f,g),_h(),!1}if(Ke)return r=Pn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,f!==gd&&(o=Error(i(422),{cause:f}),$a(Dn(o,a)))):(f!==gd&&(r=Error(i(423),{cause:f}),$a(Dn(r,a))),o=o.current.alternate,o.flags|=65536,g&=-g,o.lanes|=g,f=Dn(f,a),g=Jd(o.stateNode,f,g),Rd(o,g),gt!==4&&(gt=2)),!1;var v=Error(i(520),{cause:f});if(v=Dn(v,a),hl===null?hl=[v]:hl.push(v),gt!==4&&(gt=2),r===null)return!0;f=Dn(f,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,o=g&-g,a.lanes|=o,o=Jd(a.stateNode,f,o),Rd(a,o),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(wo===null||!wo.has(v))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Ty(g),Ey(g,o,a,f),Rd(a,g),!1}a=a.return}while(a!==null);return!1}var Sy=Error(i(461)),Ot=!1;function Yt(o,r,a,f){r.child=o===null?dy(r,null,a,f):Ms(r,o.child,a,f)}function Cy(o,r,a,f,g){a=a.render;var v=r.ref;if("ref"in f){var A={};for(var I in f)I!=="ref"&&(A[I]=f[I])}else A=f;return Rr(r),f=Nd(o,r,a,A,v,g),I=bd(),o!==null&&!Ot?(Pd(o,r,g),Yi(o,r,g)):(Ke&&I&&md(r),r.flags|=1,Yt(o,r,f,g),r.child)}function Ay(o,r,a,f,g){if(o===null){var v=a.type;return typeof v=="function"&&!fd(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,Iy(o,r,v,f,g)):(o=Ou(a.type,null,f,r,r.mode,g),o.ref=r.ref,o.return=r,r.child=o)}if(v=o.child,!nh(o,g)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Ha,a(A,f)&&o.ref===r.ref)return Yi(o,r,g)}return r.flags|=1,o=Oi(v,f),o.ref=r.ref,o.return=r,r.child=o}function Iy(o,r,a,f,g){if(o!==null){var v=o.memoizedProps;if(Ha(v,f)&&o.ref===r.ref)if(Ot=!1,r.pendingProps=f=v,nh(o,g))(o.flags&131072)!==0&&(Ot=!0);else return r.lanes=o.lanes,Yi(o,r,g)}return Qd(o,r,a,f,g)}function Ry(o,r,a){var f=r.pendingProps,g=f.children,v=o!==null?o.memoizedState:null;if(f.mode==="hidden"){if((r.flags&128)!==0){if(f=v!==null?v.baseLanes|a:a,o!==null){for(g=r.child=o.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;r.childLanes=v&~f}else r.childLanes=0,r.child=null;return wy(o,r,f,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},o!==null&&Gu(r,v!==null?v.cachePool:null),v!==null?Ig(r,v):Md(),hy(r);else return r.lanes=r.childLanes=536870912,wy(o,r,v!==null?v.baseLanes|a:a,a)}else v!==null?(Gu(r,v.cachePool),Ig(r,v),Eo(),r.memoizedState=null):(o!==null&&Gu(r,null),Md(),Eo());return Yt(o,r,g,a),r.child}function wy(o,r,a,f){var g=Sd();return g=g===null?null:{parent:bt._currentValue,pool:g},r.memoizedState={baseLanes:a,cachePool:g},o!==null&&Gu(r,null),Md(),hy(r),o!==null&&Ka(o,r,f,!0),null}function sc(o,r){var a=r.ref;if(a===null)o!==null&&o.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(o===null||o.ref!==a)&&(r.flags|=4194816)}}function Qd(o,r,a,f,g){return Rr(r),a=Nd(o,r,a,f,void 0,g),f=bd(),o!==null&&!Ot?(Pd(o,r,g),Yi(o,r,g)):(Ke&&f&&md(r),r.flags|=1,Yt(o,r,a,g),r.child)}function My(o,r,a,f,g,v){return Rr(r),r.updateQueue=null,a=wg(r,f,a,g),Rg(o),f=bd(),o!==null&&!Ot?(Pd(o,r,v),Yi(o,r,v)):(Ke&&f&&md(r),r.flags|=1,Yt(o,r,a,v),r.child)}function Dy(o,r,a,f,g){if(Rr(r),r.stateNode===null){var v=_s,A=a.contextType;typeof A=="object"&&A!==null&&(v=Zt(A)),v=new a(f,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Kd,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=f,v.state=r.memoizedState,v.refs={},Ad(r),A=a.contextType,v.context=typeof A=="object"&&A!==null?Zt(A):_s,v.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&($d(r,a,A,f),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Kd.enqueueReplaceState(v,v.state,null),el(r,f,v,g),ja(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(o===null){v=r.stateNode;var I=r.memoizedProps,N=Dr(a,I);v.props=N;var Y=v.context,ee=a.contextType;A=_s,typeof ee=="object"&&ee!==null&&(A=Zt(ee));var ne=a.getDerivedStateFromProps;ee=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,ee||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||Y!==A)&&py(r,v,f,A),go=!1;var $=r.memoizedState;v.state=$,el(r,f,v,g),ja(),Y=r.memoizedState,I||$!==Y||go?(typeof ne=="function"&&($d(r,a,ne,f),Y=r.memoizedState),(N=go||my(r,a,N,f,$,Y,A))?(ee||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=Y),v.props=f,v.state=Y,v.context=A,f=N):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{v=r.stateNode,Id(o,r),A=r.memoizedProps,ee=Dr(a,A),v.props=ee,ne=r.pendingProps,$=v.context,Y=a.contextType,N=_s,typeof Y=="object"&&Y!==null&&(N=Zt(Y)),I=a.getDerivedStateFromProps,(Y=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ne||$!==N)&&py(r,v,f,N),go=!1,$=r.memoizedState,v.state=$,el(r,f,v,g),ja();var K=r.memoizedState;A!==ne||$!==K||go||o!==null&&o.dependencies!==null&&Bu(o.dependencies)?(typeof I=="function"&&($d(r,a,I,f),K=r.memoizedState),(ee=go||my(r,a,ee,f,$,K,N)||o!==null&&o.dependencies!==null&&Bu(o.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,K,N),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,K,N)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===o.memoizedProps&&$===o.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&$===o.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=K),v.props=f,v.state=K,v.context=N,f=ee):(typeof v.componentDidUpdate!="function"||A===o.memoizedProps&&$===o.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&$===o.memoizedState||(r.flags|=1024),f=!1)}return v=f,sc(o,r),f=(r.flags&128)!==0,v||f?(v=r.stateNode,a=f&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,o!==null&&f?(r.child=Ms(r,o.child,null,g),r.child=Ms(r,null,a,g)):Yt(o,r,a,g),r.memoizedState=v.state,o=r.child):o=Yi(o,r,g),o}function xy(o,r,a,f){return Ya(),r.flags|=256,Yt(o,r,a,f),r.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wd(o){return{baseLanes:o,cachePool:yg()}}function Zd(o,r,a){return o=o!==null?o.childLanes&~a:0,r&&(o|=kn),o}function Ny(o,r,a){var f=r.pendingProps,g=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=o!==null&&o.memoizedState===null?!1:(Pt.current&2)!==0),A&&(g=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,o===null){if(Ke){if(g?To(r):Eo(),Ke){var I=pt,N;if(N=I){e:{for(N=I,I=fi;N.nodeType!==8;){if(!I){I=null;break e}if(N=$n(N.nextSibling),N===null){I=null;break e}}I=N}I!==null?(r.memoizedState={dehydrated:I,treeContext:Er!==null?{id:Fi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},N=yn(18,null,null,0),N.stateNode=I,N.return=r,r.child=N,un=r,pt=null,N=!0):N=!1}N||Ar(r)}if(I=r.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Vh(I)?r.lanes=32:r.lanes=536870912,null;zi(r)}return I=f.children,f=f.fallback,g?(Eo(),g=r.mode,I=ac({mode:"hidden",children:I},g),f=Tr(f,g,a,null),I.return=r,f.return=r,I.sibling=f,r.child=I,g=r.child,g.memoizedState=Wd(a),g.childLanes=Zd(o,A,a),r.memoizedState=Xd,f):(To(r),jd(r,I))}if(N=o.memoizedState,N!==null&&(I=N.dehydrated,I!==null)){if(v)r.flags&256?(To(r),r.flags&=-257,r=eh(o,r,a)):r.memoizedState!==null?(Eo(),r.child=o.child,r.flags|=128,r=null):(Eo(),g=f.fallback,I=r.mode,f=ac({mode:"visible",children:f.children},I),g=Tr(g,I,a,null),g.flags|=2,f.return=r,g.return=r,f.sibling=g,r.child=f,Ms(r,o.child,null,a),f=r.child,f.memoizedState=Wd(a),f.childLanes=Zd(o,A,a),r.memoizedState=Xd,r=g);else if(To(r),Vh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var Y=A.dgst;A=Y,f=Error(i(419)),f.stack="",f.digest=A,$a({value:f,source:null,stack:null}),r=eh(o,r,a)}else if(Ot||Ka(o,r,a,!1),A=(a&o.childLanes)!==0,Ot||A){if(A=rt,A!==null&&(f=a&-a,f=(f&42)!==0?1:ao(f),f=(f&(A.suspendedLanes|a))!==0?0:f,f!==0&&f!==N.retryLane))throw N.retryLane=f,ys(o,f),Sn(A,o,f),Sy;I.data==="$?"||_h(),r=eh(o,r,a)}else I.data==="$?"?(r.flags|=192,r.child=o.child,r=null):(o=N.treeContext,pt=$n(I.nextSibling),un=r,Ke=!0,Cr=null,fi=!1,o!==null&&(Nn[bn++]=Fi,Nn[bn++]=qi,Nn[bn++]=Er,Fi=o.id,qi=o.overflow,Er=r),r=jd(r,f.children),r.flags|=4096);return r}return g?(Eo(),g=f.fallback,I=r.mode,N=o.child,Y=N.sibling,f=Oi(N,{mode:"hidden",children:f.children}),f.subtreeFlags=N.subtreeFlags&65011712,Y!==null?g=Oi(Y,g):(g=Tr(g,I,a,null),g.flags|=2),g.return=r,f.return=r,f.sibling=g,r.child=f,f=g,g=r.child,I=o.child.memoizedState,I===null?I=Wd(a):(N=I.cachePool,N!==null?(Y=bt._currentValue,N=N.parent!==Y?{parent:Y,pool:Y}:N):N=yg(),I={baseLanes:I.baseLanes|a,cachePool:N}),g.memoizedState=I,g.childLanes=Zd(o,A,a),r.memoizedState=Xd,f):(To(r),a=o.child,o=a.sibling,a=Oi(a,{mode:"visible",children:f.children}),a.return=r,a.sibling=null,o!==null&&(A=r.deletions,A===null?(r.deletions=[o],r.flags|=16):A.push(o)),r.child=a,r.memoizedState=null,a)}function jd(o,r){return r=ac({mode:"visible",children:r},o.mode),r.return=o,o.child=r}function ac(o,r){return o=yn(22,o,null,r),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function eh(o,r,a){return Ms(r,o.child,null,a),o=jd(r,r.pendingProps.children),o.flags|=2,r.memoizedState=null,o}function by(o,r,a){o.lanes|=r;var f=o.alternate;f!==null&&(f.lanes|=r),_d(o.return,r,a)}function th(o,r,a,f,g){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:a,tailMode:g}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=a,v.tailMode=g)}function Py(o,r,a){var f=r.pendingProps,g=f.revealOrder,v=f.tail;if(Yt(o,r,f.children,a),f=Pt.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=r.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&by(o,a,r);else if(o.tag===19)by(o,a,r);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}f&=1}switch(le(Pt,f),g){case"forwards":for(a=r.child,g=null;a!==null;)o=a.alternate,o!==null&&ic(o)===null&&(g=a),a=a.sibling;a=g,a===null?(g=r.child,r.child=null):(g=a.sibling,a.sibling=null),th(r,!1,g,a,v);break;case"backwards":for(a=null,g=r.child,r.child=null;g!==null;){if(o=g.alternate,o!==null&&ic(o)===null){r.child=g;break}o=g.sibling,g.sibling=a,a=g,g=o}th(r,!0,a,null,v);break;case"together":th(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Yi(o,r,a){if(o!==null&&(r.dependencies=o.dependencies),Ro|=r.lanes,(a&r.childLanes)===0)if(o!==null){if(Ka(o,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(o!==null&&r.child!==o.child)throw Error(i(153));if(r.child!==null){for(o=r.child,a=Oi(o,o.pendingProps),r.child=a,a.return=r;o.sibling!==null;)o=o.sibling,a=a.sibling=Oi(o,o.pendingProps),a.return=r;a.sibling=null}return r.child}function nh(o,r){return(o.lanes&r)!==0?!0:(o=o.dependencies,!!(o!==null&&Bu(o)))}function PA(o,r,a){switch(r.tag){case 3:De(r,r.stateNode.containerInfo),po(r,bt,o.memoizedState.cache),Ya();break;case 27:case 5:Mt(r);break;case 4:De(r,r.stateNode.containerInfo);break;case 10:po(r,r.type,r.memoizedProps.value);break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(To(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Ny(o,r,a):(To(r),o=Yi(o,r,a),o!==null?o.sibling:null);To(r);break;case 19:var g=(o.flags&128)!==0;if(f=(a&r.childLanes)!==0,f||(Ka(o,r,a,!1),f=(a&r.childLanes)!==0),g){if(f)return Py(o,r,a);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(Pt,Pt.current),f)break;return null;case 22:case 23:return r.lanes=0,Ry(o,r,a);case 24:po(r,bt,o.memoizedState.cache)}return Yi(o,r,a)}function ky(o,r,a){if(o!==null)if(o.memoizedProps!==r.pendingProps)Ot=!0;else{if(!nh(o,a)&&(r.flags&128)===0)return Ot=!1,PA(o,r,a);Ot=(o.flags&131072)!==0}else Ot=!1,Ke&&(r.flags&1048576)!==0&&cg(r,qu,r.index);switch(r.lanes=0,r.tag){case 16:e:{o=r.pendingProps;var f=r.elementType,g=f._init;if(f=g(f._payload),r.type=f,typeof f=="function")fd(f)?(o=Dr(f,o),r.tag=1,r=Dy(null,r,f,o,a)):(r.tag=0,r=Qd(null,r,f,o,a));else{if(f!=null){if(g=f.$$typeof,g===j){r.tag=11,r=Cy(null,r,f,o,a);break e}else if(g===x){r.tag=14,r=Ay(null,r,f,o,a);break e}}throw r=ct(f)||f,Error(i(306,r,""))}}return r;case 0:return Qd(o,r,r.type,r.pendingProps,a);case 1:return f=r.type,g=Dr(f,r.pendingProps),Dy(o,r,f,g,a);case 3:e:{if(De(r,r.stateNode.containerInfo),o===null)throw Error(i(387));f=r.pendingProps;var v=r.memoizedState;g=v.element,Id(o,r),el(r,f,null,a);var A=r.memoizedState;if(f=A.cache,po(r,bt,f),f!==v.cache&&vd(r,[bt],a,!0),ja(),f=A.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=xy(o,r,f,a);break e}else if(f!==g){g=Dn(Error(i(424)),r),$a(g),r=xy(o,r,f,a);break e}else{switch(o=r.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(pt=$n(o.firstChild),un=r,Ke=!0,Cr=null,fi=!0,a=dy(r,null,f,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ya(),f===g){r=Yi(o,r,a);break e}Yt(o,r,f,a)}r=r.child}return r;case 26:return sc(o,r),o===null?(a=O_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ke||(a=r.type,o=r.pendingProps,f=Ec(Ae.current).createElement(a),f[Dt]=r,f[St]=o,Kt(f,a,o),_t(f),r.stateNode=f):r.memoizedState=O_(r.type,o.memoizedProps,r.pendingProps,o.memoizedState),null;case 27:return Mt(r),o===null&&Ke&&(f=r.stateNode=V_(r.type,r.pendingProps,Ae.current),un=r,fi=!0,g=pt,xo(r.type)?(Uh=g,pt=$n(f.firstChild)):pt=g),Yt(o,r,r.pendingProps.children,a),sc(o,r),o===null&&(r.flags|=4194304),r.child;case 5:return o===null&&Ke&&((g=f=pt)&&(f=aI(f,r.type,r.pendingProps,fi),f!==null?(r.stateNode=f,un=r,pt=$n(f.firstChild),fi=!1,g=!0):g=!1),g||Ar(r)),Mt(r),g=r.type,v=r.pendingProps,A=o!==null?o.memoizedProps:null,f=v.children,bh(g,v)?f=null:A!==null&&bh(g,A)&&(r.flags|=32),r.memoizedState!==null&&(g=Nd(o,r,IA,null,null,a),Sl._currentValue=g),sc(o,r),Yt(o,r,f,a),r.child;case 6:return o===null&&Ke&&((o=a=pt)&&(a=lI(a,r.pendingProps,fi),a!==null?(r.stateNode=a,un=r,pt=null,o=!0):o=!1),o||Ar(r)),null;case 13:return Ny(o,r,a);case 4:return De(r,r.stateNode.containerInfo),f=r.pendingProps,o===null?r.child=Ms(r,null,f,a):Yt(o,r,f,a),r.child;case 11:return Cy(o,r,r.type,r.pendingProps,a);case 7:return Yt(o,r,r.pendingProps,a),r.child;case 8:return Yt(o,r,r.pendingProps.children,a),r.child;case 12:return Yt(o,r,r.pendingProps.children,a),r.child;case 10:return f=r.pendingProps,po(r,r.type,f.value),Yt(o,r,f.children,a),r.child;case 9:return g=r.type._context,f=r.pendingProps.children,Rr(r),g=Zt(g),f=f(g),r.flags|=1,Yt(o,r,f,a),r.child;case 14:return Ay(o,r,r.type,r.pendingProps,a);case 15:return Iy(o,r,r.type,r.pendingProps,a);case 19:return Py(o,r,a);case 31:return f=r.pendingProps,a=r.mode,f={mode:f.mode,children:f.children},o===null?(a=ac(f,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Oi(o.child,f),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Ry(o,r,a);case 24:return Rr(r),f=Zt(bt),o===null?(g=Sd(),g===null&&(g=rt,v=Td(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=a),g=v),r.memoizedState={parent:f,cache:g},Ad(r),po(r,bt,g)):((o.lanes&a)!==0&&(Id(o,r),el(r,null,null,a),ja()),g=o.memoizedState,v=r.memoizedState,g.parent!==f?(g={parent:f,cache:f},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),po(r,bt,f)):(f=v.cache,po(r,bt,f),f!==g.cache&&vd(r,[bt],a,!0))),Yt(o,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function $i(o){o.flags|=4}function Vy(o,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!G_(r)){if(r=Pn.current,r!==null&&((Ge&4194048)===Ge?di!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==di))throw Wa=Cd,_g;o.flags|=8192}}function lc(o,r){r!==null&&(o.flags|=4),o.flags&16384&&(r=o.tag!==22?Aa():536870912,o.lanes|=r,bs|=r)}function al(o,r){if(!Ke)switch(o.tailMode){case"hidden":r=o.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?o.tail=null:a.sibling=null;break;case"collapsed":a=o.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?r||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function ft(o){var r=o.alternate!==null&&o.alternate.child===o.child,a=0,f=0;if(r)for(var g=o.child;g!==null;)a|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=o,g=g.sibling;else for(g=o.child;g!==null;)a|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=o,g=g.sibling;return o.subtreeFlags|=f,o.childLanes=a,r}function kA(o,r,a){var f=r.pendingProps;switch(pd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(r),null;case 1:return ft(r),null;case 3:return a=r.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Hi(bt),yt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(o===null||o.child===null)&&(za(r)?$i(r):o===null||o.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,hg())),ft(r),null;case 26:return a=r.memoizedState,o===null?($i(r),a!==null?(ft(r),Vy(r,a)):(ft(r),r.flags&=-16777217)):a?a!==o.memoizedState?($i(r),ft(r),Vy(r,a)):(ft(r),r.flags&=-16777217):(o.memoizedProps!==f&&$i(r),ft(r),r.flags&=-16777217),null;case 27:qn(r),a=Ae.current;var g=r.type;if(o!==null&&r.stateNode!=null)o.memoizedProps!==f&&$i(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return ft(r),null}o=_e.current,za(r)?fg(r):(o=V_(g,f,a),r.stateNode=o,$i(r))}return ft(r),null;case 5:if(qn(r),a=r.type,o!==null&&r.stateNode!=null)o.memoizedProps!==f&&$i(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return ft(r),null}if(o=_e.current,za(r))fg(r);else{switch(g=Ec(Ae.current),o){case 1:o=g.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:o=g.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":o=g.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":o=g.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":o=g.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?o.multiple=!0:f.size&&(o.size=f.size);break;default:o=typeof f.is=="string"?g.createElement(a,{is:f.is}):g.createElement(a)}}o[Dt]=r,o[St]=f;e:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)o.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break e;for(;g.sibling===null;){if(g.return===null||g.return===r)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=o;e:switch(Kt(o,a,f),a){case"button":case"input":case"select":case"textarea":o=!!f.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&$i(r)}}return ft(r),r.flags&=-16777217,null;case 6:if(o&&r.stateNode!=null)o.memoizedProps!==f&&$i(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(i(166));if(o=Ae.current,za(r)){if(o=r.stateNode,a=r.memoizedProps,f=null,g=un,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}o[Dt]=r,o=!!(o.nodeValue===a||f!==null&&f.suppressHydrationWarning===!0||M_(o.nodeValue,a)),o||Ar(r)}else o=Ec(o).createTextNode(f),o[Dt]=r,r.stateNode=o}return ft(r),null;case 13:if(f=r.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(g=za(r),f!==null&&f.dehydrated!==null){if(o===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Dt]=r}else Ya(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ft(r),g=!1}else g=hg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(zi(r),r):(zi(r),null)}if(zi(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=f!==null,o=o!==null&&o.memoizedState!==null,a){f=r.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==g&&(f.flags|=2048)}return a!==o&&a&&(r.child.flags|=8192),lc(r,r.updateQueue),ft(r),null;case 4:return yt(),o===null&&wh(r.stateNode.containerInfo),ft(r),null;case 10:return Hi(r.type),ft(r),null;case 19:if(fe(Pt),g=r.memoizedState,g===null)return ft(r),null;if(f=(r.flags&128)!==0,v=g.rendering,v===null)if(f)al(g,!1);else{if(gt!==0||o!==null&&(o.flags&128)!==0)for(o=r.child;o!==null;){if(v=ic(o),v!==null){for(r.flags|=128,al(g,!1),o=v.updateQueue,r.updateQueue=o,lc(r,o),r.subtreeFlags=0,o=a,a=r.child;a!==null;)ug(a,o),a=a.sibling;return le(Pt,Pt.current&1|2),r.child}o=o.sibling}g.tail!==null&&Cn()>fc&&(r.flags|=128,f=!0,al(g,!1),r.lanes=4194304)}else{if(!f)if(o=ic(v),o!==null){if(r.flags|=128,f=!0,o=o.updateQueue,r.updateQueue=o,lc(r,o),al(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Ke)return ft(r),null}else 2*Cn()-g.renderingStartTime>fc&&a!==536870912&&(r.flags|=128,f=!0,al(g,!1),r.lanes=4194304);g.isBackwards?(v.sibling=r.child,r.child=v):(o=g.last,o!==null?o.sibling=v:r.child=v,g.last=v)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Cn(),r.sibling=null,o=Pt.current,le(Pt,f?o&1|2:o&1),r):(ft(r),null);case 22:case 23:return zi(r),Dd(),f=r.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(a&536870912)!==0&&(r.flags&128)===0&&(ft(r),r.subtreeFlags&6&&(r.flags|=8192)):ft(r),a=r.updateQueue,a!==null&&lc(r,a.retryQueue),a=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==a&&(r.flags|=2048),o!==null&&fe(wr),null;case 24:return a=null,o!==null&&(a=o.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Hi(bt),ft(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function VA(o,r){switch(pd(r),r.tag){case 1:return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 3:return Hi(bt),yt(),o=r.flags,(o&65536)!==0&&(o&128)===0?(r.flags=o&-65537|128,r):null;case 26:case 27:case 5:return qn(r),null;case 13:if(zi(r),o=r.memoizedState,o!==null&&o.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ya()}return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 19:return fe(Pt),null;case 4:return yt(),null;case 10:return Hi(r.type),null;case 22:case 23:return zi(r),Dd(),o!==null&&fe(wr),o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 24:return Hi(bt),null;case 25:return null;default:return null}}function Uy(o,r){switch(pd(r),r.tag){case 3:Hi(bt),yt();break;case 26:case 27:case 5:qn(r);break;case 4:yt();break;case 13:zi(r);break;case 19:fe(Pt);break;case 10:Hi(r.type);break;case 22:case 23:zi(r),Dd(),o!==null&&fe(wr);break;case 24:Hi(bt)}}function ll(o,r){try{var a=r.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var g=f.next;a=g;do{if((a.tag&o)===o){f=void 0;var v=a.create,A=a.inst;f=v(),A.destroy=f}a=a.next}while(a!==g)}}catch(I){ot(r,r.return,I)}}function So(o,r,a){try{var f=r.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var v=g.next;f=v;do{if((f.tag&o)===o){var A=f.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,g=r;var N=a,Y=I;try{Y()}catch(ee){ot(g,N,ee)}}}f=f.next}while(f!==v)}}catch(ee){ot(r,r.return,ee)}}function Ly(o){var r=o.updateQueue;if(r!==null){var a=o.stateNode;try{Ag(r,a)}catch(f){ot(o,o.return,f)}}}function Oy(o,r,a){a.props=Dr(o.type,o.memoizedProps),a.state=o.memoizedState;try{a.componentWillUnmount()}catch(f){ot(o,r,f)}}function ul(o,r){try{var a=o.ref;if(a!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof a=="function"?o.refCleanup=a(f):a.current=f}}catch(g){ot(o,r,g)}}function hi(o,r){var a=o.ref,f=o.refCleanup;if(a!==null)if(typeof f=="function")try{f()}catch(g){ot(o,r,g)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){ot(o,r,g)}else a.current=null}function Fy(o){var r=o.type,a=o.memoizedProps,f=o.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&f.focus();break e;case"img":a.src?f.src=a.src:a.srcSet&&(f.srcset=a.srcSet)}}catch(g){ot(o,o.return,g)}}function ih(o,r,a){try{var f=o.stateNode;nI(f,o.type,a,r),f[St]=r}catch(g){ot(o,o.return,g)}}function qy(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&xo(o.type)||o.tag===4}function oh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||qy(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&xo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function rh(o,r,a){var f=o.tag;if(f===5||f===6)o=o.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(o,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(o),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Tc));else if(f!==4&&(f===27&&xo(o.type)&&(a=o.stateNode,r=null),o=o.child,o!==null))for(rh(o,r,a),o=o.sibling;o!==null;)rh(o,r,a),o=o.sibling}function uc(o,r,a){var f=o.tag;if(f===5||f===6)o=o.stateNode,r?a.insertBefore(o,r):a.appendChild(o);else if(f!==4&&(f===27&&xo(o.type)&&(a=o.stateNode),o=o.child,o!==null))for(uc(o,r,a),o=o.sibling;o!==null;)uc(o,r,a),o=o.sibling}function By(o){var r=o.stateNode,a=o.memoizedProps;try{for(var f=o.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Kt(r,f,a),r[Dt]=o,r[St]=a}catch(v){ot(o,o.return,v)}}var Ki=!1,Tt=!1,sh=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function UA(o,r){if(o=o.containerInfo,xh=wc,o=jp(o),od(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{a=(a=o.ownerDocument)&&a.defaultView||window;var f=a.getSelection&&a.getSelection();if(f&&f.rangeCount!==0){a=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,N=-1,Y=0,ee=0,ne=o,$=null;t:for(;;){for(var K;ne!==a||g!==0&&ne.nodeType!==3||(I=A+g),ne!==v||f!==0&&ne.nodeType!==3||(N=A+f),ne.nodeType===3&&(A+=ne.nodeValue.length),(K=ne.firstChild)!==null;)$=ne,ne=K;for(;;){if(ne===o)break t;if($===a&&++Y===g&&(I=A),$===v&&++ee===f&&(N=A),(K=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=K}a=I===-1||N===-1?null:{start:I,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nh={focusedElem:o,selectionRange:a},wc=!1,Ft=r;Ft!==null;)if(r=Ft,o=r.child,(r.subtreeFlags&1024)!==0&&o!==null)o.return=r,Ft=o;else for(;Ft!==null;){switch(r=Ft,v=r.alternate,o=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,a=r,g=v.memoizedProps,v=v.memoizedState,f=a.stateNode;try{var Ie=Dr(a.type,g,a.elementType===a.type);o=f.getSnapshotBeforeUpdate(Ie,v),f.__reactInternalSnapshotBeforeUpdate=o}catch(Te){ot(a,a.return,Te)}}break;case 3:if((o&1024)!==0){if(o=r.stateNode.containerInfo,a=o.nodeType,a===9)kh(o);else if(a===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":kh(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=r.sibling,o!==null){o.return=r.return,Ft=o;break}Ft=r.return}}function Gy(o,r,a){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Co(o,a),f&4&&ll(5,a);break;case 1:if(Co(o,a),f&4)if(o=a.stateNode,r===null)try{o.componentDidMount()}catch(A){ot(a,a.return,A)}else{var g=Dr(a.type,r.memoizedProps);r=r.memoizedState;try{o.componentDidUpdate(g,r,o.__reactInternalSnapshotBeforeUpdate)}catch(A){ot(a,a.return,A)}}f&64&&Ly(a),f&512&&ul(a,a.return);break;case 3:if(Co(o,a),f&64&&(o=a.updateQueue,o!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ag(o,r)}catch(A){ot(a,a.return,A)}}break;case 27:r===null&&f&4&&By(a);case 26:case 5:Co(o,a),r===null&&f&4&&Fy(a),f&512&&ul(a,a.return);break;case 12:Co(o,a);break;case 13:Co(o,a),f&4&&$y(o,a),f&64&&(o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(a=YA.bind(null,a),uI(o,a))));break;case 22:if(f=a.memoizedState!==null||Ki,!f){r=r!==null&&r.memoizedState!==null||Tt,g=Ki;var v=Tt;Ki=f,(Tt=r)&&!v?Ao(o,a,(a.subtreeFlags&8772)!==0):Co(o,a),Ki=g,Tt=v}break;case 30:break;default:Co(o,a)}}function zy(o){var r=o.alternate;r!==null&&(o.alternate=null,zy(r)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(r=o.stateNode,r!==null&&co(r)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var ut=null,fn=!1;function Ji(o,r,a){for(a=a.child;a!==null;)Yy(o,r,a),a=a.sibling}function Yy(o,r,a){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:Tt||hi(a,r),Ji(o,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Tt||hi(a,r);var f=ut,g=fn;xo(a.type)&&(ut=a.stateNode,fn=!1),Ji(o,r,a),_l(a.stateNode),ut=f,fn=g;break;case 5:Tt||hi(a,r);case 6:if(f=ut,g=fn,ut=null,Ji(o,r,a),ut=f,fn=g,ut!==null)if(fn)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(a.stateNode)}catch(v){ot(a,r,v)}else try{ut.removeChild(a.stateNode)}catch(v){ot(a,r,v)}break;case 18:ut!==null&&(fn?(o=ut,P_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.stateNode),Rl(o)):P_(ut,a.stateNode));break;case 4:f=ut,g=fn,ut=a.stateNode.containerInfo,fn=!0,Ji(o,r,a),ut=f,fn=g;break;case 0:case 11:case 14:case 15:Tt||So(2,a,r),Tt||So(4,a,r),Ji(o,r,a);break;case 1:Tt||(hi(a,r),f=a.stateNode,typeof f.componentWillUnmount=="function"&&Oy(a,r,f)),Ji(o,r,a);break;case 21:Ji(o,r,a);break;case 22:Tt=(f=Tt)||a.memoizedState!==null,Ji(o,r,a),Tt=f;break;default:Ji(o,r,a)}}function $y(o,r){if(r.memoizedState===null&&(o=r.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Rl(o)}catch(a){ot(r,r.return,a)}}function LA(o){switch(o.tag){case 13:case 19:var r=o.stateNode;return r===null&&(r=o.stateNode=new Hy),r;case 22:return o=o.stateNode,r=o._retryCache,r===null&&(r=o._retryCache=new Hy),r;default:throw Error(i(435,o.tag))}}function ah(o,r){var a=LA(o);r.forEach(function(f){var g=$A.bind(null,o,f);a.has(f)||(a.add(f),f.then(g,g))})}function _n(o,r){var a=r.deletions;if(a!==null)for(var f=0;f<a.length;f++){var g=a[f],v=o,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(xo(I.type)){ut=I.stateNode,fn=!1;break e}break;case 5:ut=I.stateNode,fn=!1;break e;case 3:case 4:ut=I.stateNode.containerInfo,fn=!0;break e}I=I.return}if(ut===null)throw Error(i(160));Yy(v,A,g),ut=null,fn=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ky(r,o),r=r.sibling}var Yn=null;function Ky(o,r){var a=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:_n(r,o),vn(o),f&4&&(So(3,o,o.return),ll(3,o),So(5,o,o.return));break;case 1:_n(r,o),vn(o),f&512&&(Tt||a===null||hi(a,a.return)),f&64&&Ki&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(a=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=a===null?f:a.concat(f))));break;case 26:var g=Yn;if(_n(r,o),vn(o),f&512&&(Tt||a===null||hi(a,a.return)),f&4){var v=a!==null?a.memoizedState:null;if(f=o.memoizedState,a===null)if(f===null)if(o.stateNode===null){e:{f=o.type,a=o.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":v=g.getElementsByTagName("title")[0],(!v||v[or]||v[Dt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(f),g.head.insertBefore(v,g.querySelector("head > title"))),Kt(v,f,a),v[Dt]=o,_t(v),f=v;break e;case"link":var A=B_("link","href",g).get(f+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=g.createElement(f),Kt(v,f,a),g.head.appendChild(v);break;case"meta":if(A=B_("meta","content",g).get(f+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=g.createElement(f),Kt(v,f,a),g.head.appendChild(v);break;default:throw Error(i(468,f))}v[Dt]=o,_t(v),f=v}o.stateNode=f}else H_(g,o.type,o.stateNode);else o.stateNode=q_(g,f,o.memoizedProps);else v!==f?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,f===null?H_(g,o.type,o.stateNode):q_(g,f,o.memoizedProps)):f===null&&o.stateNode!==null&&ih(o,o.memoizedProps,a.memoizedProps)}break;case 27:_n(r,o),vn(o),f&512&&(Tt||a===null||hi(a,a.return)),a!==null&&f&4&&ih(o,o.memoizedProps,a.memoizedProps);break;case 5:if(_n(r,o),vn(o),f&512&&(Tt||a===null||hi(a,a.return)),o.flags&32){g=o.stateNode;try{In(g,"")}catch(K){ot(o,o.return,K)}}f&4&&o.stateNode!=null&&(g=o.memoizedProps,ih(o,g,a!==null?a.memoizedProps:g)),f&1024&&(sh=!0);break;case 6:if(_n(r,o),vn(o),f&4){if(o.stateNode===null)throw Error(i(162));f=o.memoizedProps,a=o.stateNode;try{a.nodeValue=f}catch(K){ot(o,o.return,K)}}break;case 3:if(Ac=null,g=Yn,Yn=Sc(r.containerInfo),_n(r,o),Yn=g,vn(o),f&4&&a!==null&&a.memoizedState.isDehydrated)try{Rl(r.containerInfo)}catch(K){ot(o,o.return,K)}sh&&(sh=!1,Jy(o));break;case 4:f=Yn,Yn=Sc(o.stateNode.containerInfo),_n(r,o),vn(o),Yn=f;break;case 12:_n(r,o),vn(o);break;case 13:_n(r,o),vn(o),o.child.flags&8192&&o.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hh=Cn()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,ah(o,f)));break;case 22:g=o.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,Y=Ki,ee=Tt;if(Ki=Y||g,Tt=ee||N,_n(r,o),Tt=ee,Ki=Y,vn(o),f&8192)e:for(r=o.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(a===null||N||Ki||Tt||xr(o)),a=null,r=o;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(v=N.stateNode,g)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=N.stateNode;var ne=N.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;I.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(K){ot(N,N.return,K)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(K){ot(N,N.return,K)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===o)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=o.updateQueue,f!==null&&(a=f.retryQueue,a!==null&&(f.retryQueue=null,ah(o,a))));break;case 19:_n(r,o),vn(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,ah(o,f)));break;case 30:break;case 21:break;default:_n(r,o),vn(o)}}function vn(o){var r=o.flags;if(r&2){try{for(var a,f=o.return;f!==null;){if(qy(f)){a=f;break}f=f.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var g=a.stateNode,v=oh(o);uc(o,v,g);break;case 5:var A=a.stateNode;a.flags&32&&(In(A,""),a.flags&=-33);var I=oh(o);uc(o,I,A);break;case 3:case 4:var N=a.stateNode.containerInfo,Y=oh(o);rh(o,Y,N);break;default:throw Error(i(161))}}catch(ee){ot(o,o.return,ee)}o.flags&=-3}r&4096&&(o.flags&=-4097)}function Jy(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var r=o;Jy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),o=o.sibling}}function Co(o,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Gy(o,r.alternate,r),r=r.sibling}function xr(o){for(o=o.child;o!==null;){var r=o;switch(r.tag){case 0:case 11:case 14:case 15:So(4,r,r.return),xr(r);break;case 1:hi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Oy(r,r.return,a),xr(r);break;case 27:_l(r.stateNode);case 26:case 5:hi(r,r.return),xr(r);break;case 22:r.memoizedState===null&&xr(r);break;case 30:xr(r);break;default:xr(r)}o=o.sibling}}function Ao(o,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,g=o,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:Ao(g,v,a),ll(4,v);break;case 1:if(Ao(g,v,a),f=v,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Y){ot(f,f.return,Y)}if(f=v,g=f.updateQueue,g!==null){var I=f.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)Cg(N[g],I)}catch(Y){ot(f,f.return,Y)}}a&&A&64&&Ly(v),ul(v,v.return);break;case 27:By(v);case 26:case 5:Ao(g,v,a),a&&f===null&&A&4&&Fy(v),ul(v,v.return);break;case 12:Ao(g,v,a);break;case 13:Ao(g,v,a),a&&A&4&&$y(g,v);break;case 22:v.memoizedState===null&&Ao(g,v,a),ul(v,v.return);break;case 30:break;default:Ao(g,v,a)}r=r.sibling}}function lh(o,r){var a=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(o!=null&&o.refCount++,a!=null&&Ja(a))}function uh(o,r){o=null,r.alternate!==null&&(o=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==o&&(r.refCount++,o!=null&&Ja(o))}function mi(o,r,a,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Qy(o,r,a,f),r=r.sibling}function Qy(o,r,a,f){var g=r.flags;switch(r.tag){case 0:case 11:case 15:mi(o,r,a,f),g&2048&&ll(9,r);break;case 1:mi(o,r,a,f);break;case 3:mi(o,r,a,f),g&2048&&(o=null,r.alternate!==null&&(o=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==o&&(r.refCount++,o!=null&&Ja(o)));break;case 12:if(g&2048){mi(o,r,a,f),o=r.stateNode;try{var v=r.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,r.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(N){ot(r,r.return,N)}}else mi(o,r,a,f);break;case 13:mi(o,r,a,f);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?mi(o,r,a,f):cl(o,r):v._visibility&2?mi(o,r,a,f):(v._visibility|=2,Ds(o,r,a,f,(r.subtreeFlags&10256)!==0)),g&2048&&lh(A,r);break;case 24:mi(o,r,a,f),g&2048&&uh(r.alternate,r);break;default:mi(o,r,a,f)}}function Ds(o,r,a,f,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var v=o,A=r,I=a,N=f,Y=A.flags;switch(A.tag){case 0:case 11:case 15:Ds(v,A,I,N,g),ll(8,A);break;case 23:break;case 22:var ee=A.stateNode;A.memoizedState!==null?ee._visibility&2?Ds(v,A,I,N,g):cl(v,A):(ee._visibility|=2,Ds(v,A,I,N,g)),g&&Y&2048&&lh(A.alternate,A);break;case 24:Ds(v,A,I,N,g),g&&Y&2048&&uh(A.alternate,A);break;default:Ds(v,A,I,N,g)}r=r.sibling}}function cl(o,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=o,f=r,g=f.flags;switch(f.tag){case 22:cl(a,f),g&2048&&lh(f.alternate,f);break;case 24:cl(a,f),g&2048&&uh(f.alternate,f);break;default:cl(a,f)}r=r.sibling}}var fl=8192;function xs(o){if(o.subtreeFlags&fl)for(o=o.child;o!==null;)Xy(o),o=o.sibling}function Xy(o){switch(o.tag){case 26:xs(o),o.flags&fl&&o.memoizedState!==null&&SI(Yn,o.memoizedState,o.memoizedProps);break;case 5:xs(o);break;case 3:case 4:var r=Yn;Yn=Sc(o.stateNode.containerInfo),xs(o),Yn=r;break;case 22:o.memoizedState===null&&(r=o.alternate,r!==null&&r.memoizedState!==null?(r=fl,fl=16777216,xs(o),fl=r):xs(o));break;default:xs(o)}}function Wy(o){var r=o.alternate;if(r!==null&&(o=r.child,o!==null)){r.child=null;do r=o.sibling,o.sibling=null,o=r;while(o!==null)}}function dl(o){var r=o.deletions;if((o.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var f=r[a];Ft=f,jy(f,o)}Wy(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Zy(o),o=o.sibling}function Zy(o){switch(o.tag){case 0:case 11:case 15:dl(o),o.flags&2048&&So(9,o,o.return);break;case 3:dl(o);break;case 12:dl(o);break;case 22:var r=o.stateNode;o.memoizedState!==null&&r._visibility&2&&(o.return===null||o.return.tag!==13)?(r._visibility&=-3,cc(o)):dl(o);break;default:dl(o)}}function cc(o){var r=o.deletions;if((o.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var f=r[a];Ft=f,jy(f,o)}Wy(o)}for(o=o.child;o!==null;){switch(r=o,r.tag){case 0:case 11:case 15:So(8,r,r.return),cc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,cc(r));break;default:cc(r)}o=o.sibling}}function jy(o,r){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:So(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var f=a.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Ja(a.memoizedState.cache)}if(f=a.child,f!==null)f.return=a,Ft=f;else e:for(a=o;Ft!==null;){f=Ft;var g=f.sibling,v=f.return;if(zy(f),f===a){Ft=null;break e}if(g!==null){g.return=v,Ft=g;break e}Ft=v}}}var OA={getCacheForType:function(o){var r=Zt(bt),a=r.data.get(o);return a===void 0&&(a=o(),r.data.set(o,a)),a}},FA=typeof WeakMap=="function"?WeakMap:Map,Ze=0,rt=null,Ve=null,Ge=0,je=0,Tn=null,Io=!1,Ns=!1,ch=!1,Qi=0,gt=0,Ro=0,Nr=0,fh=0,kn=0,bs=0,hl=null,dn=null,dh=!1,hh=0,fc=1/0,dc=null,wo=null,$t=0,Mo=null,Ps=null,ks=0,mh=0,ph=null,e_=null,ml=0,gh=null;function En(){if((Ze&2)!==0&&Ge!==0)return Ge&-Ge;if(Z.T!==null){var o=Es;return o!==0?o:Ch()}return lo()}function t_(){kn===0&&(kn=(Ge&536870912)===0||Ke?Ca():536870912);var o=Pn.current;return o!==null&&(o.flags|=32),kn}function Sn(o,r,a){(o===rt&&(je===2||je===9)||o.cancelPendingCommit!==null)&&(Vs(o,0),Do(o,Ge,kn,!1)),wi(o,a),((Ze&2)===0||o!==rt)&&(o===rt&&((Ze&2)===0&&(Nr|=a),gt===4&&Do(o,Ge,kn,!1)),pi(o))}function n_(o,r,a){if((Ze&6)!==0)throw Error(i(327));var f=!a&&(r&124)===0&&(r&o.expiredLanes)===0||ir(o,r),g=f?HA(o,r):vh(o,r,!0),v=f;do{if(g===0){Ns&&!f&&Do(o,r,0,!1);break}else{if(a=o.current.alternate,v&&!qA(a)){g=vh(o,r,!1),v=!1;continue}if(g===2){if(v=r,o.errorRecoveryDisabledLanes&v)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var I=o;g=hl;var N=I.current.memoizedState.isDehydrated;if(N&&(Vs(I,A).flags|=256),A=vh(I,A,!1),A!==2){if(ch&&!N){I.errorRecoveryDisabledLanes|=v,Nr|=v,g=4;break e}v=dn,dn=g,v!==null&&(dn===null?dn=v:dn.push.apply(dn,v))}g=A}if(v=!1,g!==2)continue}}if(g===1){Vs(o,0),Do(o,r,0,!0);break}e:{switch(f=o,v=g,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Do(f,r,kn,!Io);break e;case 2:dn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=hh+300-Cn(),10<g)){if(Do(f,r,kn,!Io),Zr(f,0,!0)!==0)break e;f.timeoutHandle=N_(i_.bind(null,f,a,dn,dc,dh,r,kn,Nr,bs,Io,v,2,-0,0),g);break e}i_(f,a,dn,dc,dh,r,kn,Nr,bs,Io,v,0,-0,0)}}break}while(!0);pi(o)}function i_(o,r,a,f,g,v,A,I,N,Y,ee,ne,$,K){if(o.timeoutHandle=-1,ne=r.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(El={stylesheets:null,count:0,unsuspend:EI},Xy(r),ne=CI(),ne!==null)){o.cancelPendingCommit=ne(c_.bind(null,o,r,v,a,f,g,A,I,N,ee,1,$,K)),Do(o,v,A,!Y);return}c_(o,r,v,a,f,g,A,I,N)}function qA(o){for(var r=o;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var f=0;f<a.length;f++){var g=a[f],v=g.getSnapshot;g=g.value;try{if(!gn(v(),g))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===o)break;for(;r.sibling===null;){if(r.return===null||r.return===o)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Do(o,r,a,f){r&=~fh,r&=~Nr,o.suspendedLanes|=r,o.pingedLanes&=~r,f&&(o.warmLanes|=r),f=o.expirationTimes;for(var g=r;0<g;){var v=31-Wt(g),A=1<<v;f[v]=-1,g&=~A}a!==0&&ei(o,a,r)}function hc(){return(Ze&6)===0?(pl(0),!1):!0}function yh(){if(Ve!==null){if(je===0)var o=Ve.return;else o=Ve,Bi=Ir=null,kd(o),ws=null,rl=0,o=Ve;for(;o!==null;)Uy(o.alternate,o),o=o.return;Ve=null}}function Vs(o,r){var a=o.timeoutHandle;a!==-1&&(o.timeoutHandle=-1,oI(a)),a=o.cancelPendingCommit,a!==null&&(o.cancelPendingCommit=null,a()),yh(),rt=o,Ve=a=Oi(o.current,null),Ge=r,je=0,Tn=null,Io=!1,Ns=ir(o,r),ch=!1,bs=kn=fh=Nr=Ro=gt=0,dn=hl=null,dh=!1,(r&8)!==0&&(r|=r&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=r;0<f;){var g=31-Wt(f),v=1<<g;r|=o[g],f&=~v}return Qi=r,Vu(),a}function o_(o,r){Pe=null,Z.H=ec,r===Xa||r===zu?(r=Eg(),je=3):r===_g?(r=Eg(),je=4):je=r===Sy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Tn=r,Ve===null&&(gt=1,rc(o,Dn(r,o.current)))}function r_(){var o=Z.H;return Z.H=ec,o===null?ec:o}function s_(){var o=Z.A;return Z.A=OA,o}function _h(){gt=4,Io||(Ge&4194048)!==Ge&&Pn.current!==null||(Ns=!0),(Ro&134217727)===0&&(Nr&134217727)===0||rt===null||Do(rt,Ge,kn,!1)}function vh(o,r,a){var f=Ze;Ze|=2;var g=r_(),v=s_();(rt!==o||Ge!==r)&&(dc=null,Vs(o,r)),r=!1;var A=gt;e:do try{if(je!==0&&Ve!==null){var I=Ve,N=Tn;switch(je){case 8:yh(),A=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(r=!0);var Y=je;if(je=0,Tn=null,Us(o,I,N,Y),a&&Ns){A=0;break e}break;default:Y=je,je=0,Tn=null,Us(o,I,N,Y)}}BA(),A=gt;break}catch(ee){o_(o,ee)}while(!0);return r&&o.shellSuspendCounter++,Bi=Ir=null,Ze=f,Z.H=g,Z.A=v,Ve===null&&(rt=null,Ge=0,Vu()),A}function BA(){for(;Ve!==null;)a_(Ve)}function HA(o,r){var a=Ze;Ze|=2;var f=r_(),g=s_();rt!==o||Ge!==r?(dc=null,fc=Cn()+500,Vs(o,r)):Ns=ir(o,r);e:do try{if(je!==0&&Ve!==null){r=Ve;var v=Tn;t:switch(je){case 1:je=0,Tn=null,Us(o,r,v,1);break;case 2:case 9:if(vg(v)){je=0,Tn=null,l_(r);break}r=function(){je!==2&&je!==9||rt!==o||(je=7),pi(o)},v.then(r,r);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:vg(v)?(je=0,Tn=null,l_(r)):(je=0,Tn=null,Us(o,r,v,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var I=Ve;if(!A||G_(A)){je=0,Tn=null;var N=I.sibling;if(N!==null)Ve=N;else{var Y=I.return;Y!==null?(Ve=Y,mc(Y)):Ve=null}break t}}je=0,Tn=null,Us(o,r,v,5);break;case 6:je=0,Tn=null,Us(o,r,v,6);break;case 8:yh(),gt=6;break e;default:throw Error(i(462))}}GA();break}catch(ee){o_(o,ee)}while(!0);return Bi=Ir=null,Z.H=f,Z.A=g,Ze=a,Ve!==null?0:(rt=null,Ge=0,Vu(),gt)}function GA(){for(;Ve!==null&&!va();)a_(Ve)}function a_(o){var r=ky(o.alternate,o,Qi);o.memoizedProps=o.pendingProps,r===null?mc(o):Ve=r}function l_(o){var r=o,a=r.alternate;switch(r.tag){case 15:case 0:r=My(a,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=My(a,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:kd(r);default:Uy(a,r),r=Ve=ug(r,Qi),r=ky(a,r,Qi)}o.memoizedProps=o.pendingProps,r===null?mc(o):Ve=r}function Us(o,r,a,f){Bi=Ir=null,kd(r),ws=null,rl=0;var g=r.return;try{if(bA(o,g,r,a,Ge)){gt=1,rc(o,Dn(a,o.current)),Ve=null;return}}catch(v){if(g!==null)throw Ve=g,v;gt=1,rc(o,Dn(a,o.current)),Ve=null;return}r.flags&32768?(Ke||f===1?o=!0:Ns||(Ge&536870912)!==0?o=!1:(Io=o=!0,(f===2||f===9||f===3||f===6)&&(f=Pn.current,f!==null&&f.tag===13&&(f.flags|=16384))),u_(r,o)):mc(r)}function mc(o){var r=o;do{if((r.flags&32768)!==0){u_(r,Io);return}o=r.return;var a=kA(r.alternate,r,Qi);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=o}while(r!==null);gt===0&&(gt=5)}function u_(o,r){do{var a=VA(o.alternate,o);if(a!==null){a.flags&=32767,Ve=a;return}if(a=o.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(o=o.sibling,o!==null)){Ve=o;return}Ve=o=a}while(o!==null);gt=6,Ve=null}function c_(o,r,a,f,g,v,A,I,N){o.cancelPendingCommit=null;do pc();while($t!==0);if((Ze&6)!==0)throw Error(i(327));if(r!==null){if(r===o.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=ud,Ia(o,a,v,A,I,N),o===rt&&(Ve=rt=null,Ge=0),Ps=r,Mo=o,ks=a,mh=v,ph=g,e_=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,KA(jo,function(){return p_(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=Z.T,Z.T=null,g=ce.p,ce.p=2,A=Ze,Ze|=4;try{UA(o,r,a)}finally{Ze=A,ce.p=g,Z.T=f}}$t=1,f_(),d_(),h_()}}function f_(){if($t===1){$t=0;var o=Mo,r=Ps,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Z.T,Z.T=null;var f=ce.p;ce.p=2;var g=Ze;Ze|=4;try{Ky(r,o);var v=Nh,A=jp(o.containerInfo),I=v.focusedElem,N=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&Zp(I.ownerDocument.documentElement,I)){if(N!==null&&od(I)){var Y=N.start,ee=N.end;if(ee===void 0&&(ee=Y),"selectionStart"in I)I.selectionStart=Y,I.selectionEnd=Math.min(ee,I.value.length);else{var ne=I.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var K=$.getSelection(),Ie=I.textContent.length,Te=Math.min(N.start,Ie),it=N.end===void 0?Te:Math.min(N.end,Ie);!K.extend&&Te>it&&(A=it,it=Te,Te=A);var B=Wp(I,Te),L=Wp(I,it);if(B&&L&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var z=ne.createRange();z.setStart(B.node,B.offset),K.removeAllRanges(),Te>it?(K.addRange(z),K.extend(L.node,L.offset)):(z.setEnd(L.node,L.offset),K.addRange(z))}}}}for(ne=[],K=I;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ne.length;I++){var te=ne[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}wc=!!xh,Nh=xh=null}finally{Ze=g,ce.p=f,Z.T=a}}o.current=r,$t=2}}function d_(){if($t===2){$t=0;var o=Mo,r=Ps,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Z.T,Z.T=null;var f=ce.p;ce.p=2;var g=Ze;Ze|=4;try{Gy(o,r.alternate,r)}finally{Ze=g,ce.p=f,Z.T=a}}$t=3}}function h_(){if($t===4||$t===3){$t=0,cu();var o=Mo,r=Ps,a=ks,f=e_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?$t=5:($t=0,Ps=Mo=null,m_(o,o.pendingLanes));var g=o.pendingLanes;if(g===0&&(wo=null),jr(a),r=r.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(mt,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=Z.T,g=ce.p,ce.p=2,Z.T=null;try{for(var v=o.onRecoverableError,A=0;A<f.length;A++){var I=f[A];v(I.value,{componentStack:I.stack})}}finally{Z.T=r,ce.p=g}}(ks&3)!==0&&pc(),pi(o),g=o.pendingLanes,(a&4194090)!==0&&(g&42)!==0?o===gh?ml++:(ml=0,gh=o):ml=0,pl(0)}}function m_(o,r){(o.pooledCacheLanes&=r)===0&&(r=o.pooledCache,r!=null&&(o.pooledCache=null,Ja(r)))}function pc(o){return f_(),d_(),h_(),p_()}function p_(){if($t!==5)return!1;var o=Mo,r=mh;mh=0;var a=jr(ks),f=Z.T,g=ce.p;try{ce.p=32>a?32:a,Z.T=null,a=ph,ph=null;var v=Mo,A=ks;if($t=0,Ps=Mo=null,ks=0,(Ze&6)!==0)throw Error(i(331));var I=Ze;if(Ze|=4,Zy(v.current),Qy(v,v.current,A,a),Ze=I,pl(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(mt,v)}catch{}return!0}finally{ce.p=g,Z.T=f,m_(o,r)}}function g_(o,r,a){r=Dn(a,r),r=Jd(o.stateNode,r,2),o=_o(o,r,2),o!==null&&(wi(o,2),pi(o))}function ot(o,r,a){if(o.tag===3)g_(o,o,a);else for(;r!==null;){if(r.tag===3){g_(r,o,a);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(wo===null||!wo.has(f))){o=Dn(a,o),a=Ty(2),f=_o(r,a,2),f!==null&&(Ey(a,f,r,o),wi(f,2),pi(f));break}}r=r.return}}function Th(o,r,a){var f=o.pingCache;if(f===null){f=o.pingCache=new FA;var g=new Set;f.set(r,g)}else g=f.get(r),g===void 0&&(g=new Set,f.set(r,g));g.has(a)||(ch=!0,g.add(a),o=zA.bind(null,o,r,a),r.then(o,o))}function zA(o,r,a){var f=o.pingCache;f!==null&&f.delete(r),o.pingedLanes|=o.suspendedLanes&a,o.warmLanes&=~a,rt===o&&(Ge&a)===a&&(gt===4||gt===3&&(Ge&62914560)===Ge&&300>Cn()-hh?(Ze&2)===0&&Vs(o,0):fh|=a,bs===Ge&&(bs=0)),pi(o)}function y_(o,r){r===0&&(r=Aa()),o=ys(o,r),o!==null&&(wi(o,r),pi(o))}function YA(o){var r=o.memoizedState,a=0;r!==null&&(a=r.retryLane),y_(o,a)}function $A(o,r){var a=0;switch(o.tag){case 13:var f=o.stateNode,g=o.memoizedState;g!==null&&(a=g.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(r),y_(o,a)}function KA(o,r){return jn(o,r)}var gc=null,Ls=null,Eh=!1,yc=!1,Sh=!1,br=0;function pi(o){o!==Ls&&o.next===null&&(Ls===null?gc=Ls=o:Ls=Ls.next=o),yc=!0,Eh||(Eh=!0,QA())}function pl(o,r){if(!Sh&&yc){Sh=!0;do for(var a=!1,f=gc;f!==null;){if(o!==0){var g=f.pendingLanes;if(g===0)var v=0;else{var A=f.suspendedLanes,I=f.pingedLanes;v=(1<<31-Wt(42|o)+1)-1,v&=g&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,E_(f,v))}else v=Ge,v=Zr(f,f===rt?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||ir(f,v)||(a=!0,E_(f,v));f=f.next}while(a);Sh=!1}}function JA(){__()}function __(){yc=Eh=!1;var o=0;br!==0&&(iI()&&(o=br),br=0);for(var r=Cn(),a=null,f=gc;f!==null;){var g=f.next,v=v_(f,r);v===0?(f.next=null,a===null?gc=g:a.next=g,g===null&&(Ls=a)):(a=f,(o!==0||(v&3)!==0)&&(yc=!0)),f=g}pl(o)}function v_(o,r){for(var a=o.suspendedLanes,f=o.pingedLanes,g=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var A=31-Wt(v),I=1<<A,N=g[A];N===-1?((I&a)===0||(I&f)!==0)&&(g[A]=Sa(I,r)):N<=r&&(o.expiredLanes|=I),v&=~I}if(r=rt,a=Ge,a=Zr(o,o===r?a:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,a===0||o===r&&(je===2||je===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&so(f),o.callbackNode=null,o.callbackPriority=0;if((a&3)===0||ir(o,a)){if(r=a&-a,r===o.callbackPriority)return r;switch(f!==null&&so(f),jr(a)){case 2:case 8:a=Xr;break;case 32:a=jo;break;case 268435456:a=Wr;break;default:a=jo}return f=T_.bind(null,o),a=jn(a,f),o.callbackPriority=r,o.callbackNode=a,r}return f!==null&&f!==null&&so(f),o.callbackPriority=2,o.callbackNode=null,2}function T_(o,r){if($t!==0&&$t!==5)return o.callbackNode=null,o.callbackPriority=0,null;var a=o.callbackNode;if(pc()&&o.callbackNode!==a)return null;var f=Ge;return f=Zr(o,o===rt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:(n_(o,f,r),v_(o,Cn()),o.callbackNode!=null&&o.callbackNode===a?T_.bind(null,o):null)}function E_(o,r){if(pc())return null;n_(o,r,!0)}function QA(){rI(function(){(Ze&6)!==0?jn(Ta,JA):__()})}function Ch(){return br===0&&(br=Ca()),br}function S_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:rs(""+o)}function C_(o,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,o.id&&a.setAttribute("form",o.id),r.parentNode.insertBefore(a,r),o=new FormData(o),a.parentNode.removeChild(a),o}function XA(o,r,a,f,g){if(r==="submit"&&a&&a.stateNode===g){var v=S_((g[St]||null).action),A=f.submitter;A&&(r=(r=A[St]||null)?S_(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var I=new ss("action","action",null,f,g);o.push({event:I,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(br!==0){var N=A?C_(g,A):new FormData(g);Gd(a,{pending:!0,data:N,method:g.method,action:v},null,N)}}else typeof v=="function"&&(I.preventDefault(),N=A?C_(g,A):new FormData(g),Gd(a,{pending:!0,data:N,method:g.method,action:v},v,N))},currentTarget:g}]})}}for(var Ah=0;Ah<ld.length;Ah++){var Ih=ld[Ah],WA=Ih.toLowerCase(),ZA=Ih[0].toUpperCase()+Ih.slice(1);zn(WA,"on"+ZA)}zn(ng,"onAnimationEnd"),zn(ig,"onAnimationIteration"),zn(og,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(pA,"onTransitionRun"),zn(gA,"onTransitionStart"),zn(yA,"onTransitionCancel"),zn(rg,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function A_(o,r){r=(r&4)!==0;for(var a=0;a<o.length;a++){var f=o[a],g=f.event;f=f.listeners;e:{var v=void 0;if(r)for(var A=f.length-1;0<=A;A--){var I=f[A],N=I.instance,Y=I.currentTarget;if(I=I.listener,N!==v&&g.isPropagationStopped())break e;v=I,g.currentTarget=Y;try{v(g)}catch(ee){oc(ee)}g.currentTarget=null,v=N}else for(A=0;A<f.length;A++){if(I=f[A],N=I.instance,Y=I.currentTarget,I=I.listener,N!==v&&g.isPropagationStopped())break e;v=I,g.currentTarget=Y;try{v(g)}catch(ee){oc(ee)}g.currentTarget=null,v=N}}}}function Ue(o,r){var a=r[wa];a===void 0&&(a=r[wa]=new Set);var f=o+"__bubble";a.has(f)||(I_(r,o,2,!1),a.add(f))}function Rh(o,r,a){var f=0;r&&(f|=4),I_(a,o,f,r)}var _c="_reactListening"+Math.random().toString(36).slice(2);function wh(o){if(!o[_c]){o[_c]=!0,Ma.forEach(function(a){a!=="selectionchange"&&(jA.has(a)||Rh(a,!1,o),Rh(a,!0,o))});var r=o.nodeType===9?o:o.ownerDocument;r===null||r[_c]||(r[_c]=!0,Rh("selectionchange",!1,r))}}function I_(o,r,a,f){switch(Q_(r)){case 2:var g=RI;break;case 8:g=wI;break;default:g=Bh}a=g.bind(null,r,a,o),g=void 0,!wn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),f?g!==void 0?o.addEventListener(r,a,{capture:!0,passive:g}):o.addEventListener(r,a,!0):g!==void 0?o.addEventListener(r,a,{passive:g}):o.addEventListener(r,a,!1)}function Mh(o,r,a,f,g){var v=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var I=f.stateNode.containerInfo;if(I===g)break;if(A===4)for(A=f.return;A!==null;){var N=A.tag;if((N===3||N===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;I!==null;){if(A=Mi(I),A===null)return;if(N=A.tag,N===5||N===6||N===26||N===27){f=v=A;continue e}I=I.parentNode}}f=f.return}Tu(function(){var Y=v,ee=Rn(a),ne=[];e:{var $=sg.get(o);if($!==void 0){var K=ss,Ie=o;switch(o){case"keypress":if(si(a)===0)break e;case"keydown":case"keyup":K=ds;break;case"focusin":Ie="focus",K=us;break;case"focusout":Ie="blur",K=us;break;case"beforeblur":case"afterblur":K=us;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=ed;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Mu;break;case ng:case ig:case og:K=cs;break;case rg:K=xu;break;case"scroll":case"scrollend":K=Eu;break;case"wheel":K=hs;break;case"copy":case"cut":case"paste":K=fs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=qa;break;case"toggle":case"beforetoggle":K=bu}var Te=(r&4)!==0,it=!Te&&(o==="scroll"||o==="scrollend"),B=Te?$!==null?$+"Capture":null:$;Te=[];for(var L=Y,z;L!==null;){var te=L;if(z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||z===null||B===null||(te=fr(L,B),te!=null&&Te.push(yl(L,te,z))),it)break;L=L.return}0<Te.length&&($=new K($,Ie,null,a,ee),ne.push({event:$,listeners:Te}))}}if((r&7)===0){e:{if($=o==="mouseover"||o==="pointerover",K=o==="mouseout"||o==="pointerout",$&&a!==bi&&(Ie=a.relatedTarget||a.fromElement)&&(Mi(Ie)||Ie[An]))break e;if((K||$)&&($=ee.window===ee?ee:($=ee.ownerDocument)?$.defaultView||$.parentWindow:window,K?(Ie=a.relatedTarget||a.toElement,K=Y,Ie=Ie?Mi(Ie):null,Ie!==null&&(it=l(Ie),Te=Ie.tag,Ie!==it||Te!==5&&Te!==27&&Te!==6)&&(Ie=null)):(K=null,Ie=Y),K!==Ie)){if(Te=Mn,te="onMouseLeave",B="onMouseEnter",L="mouse",(o==="pointerout"||o==="pointerover")&&(Te=qa,te="onPointerLeave",B="onPointerEnter",L="pointer"),it=K==null?$:ni(K),z=Ie==null?$:ni(Ie),$=new Te(te,L+"leave",K,a,ee),$.target=it,$.relatedTarget=z,te=null,Mi(ee)===Y&&(Te=new Te(B,L+"enter",Ie,a,ee),Te.target=z,Te.relatedTarget=it,te=Te),it=te,K&&Ie)t:{for(Te=K,B=Ie,L=0,z=Te;z;z=Os(z))L++;for(z=0,te=B;te;te=Os(te))z++;for(;0<L-z;)Te=Os(Te),L--;for(;0<z-L;)B=Os(B),z--;for(;L--;){if(Te===B||B!==null&&Te===B.alternate)break t;Te=Os(Te),B=Os(B)}Te=null}else Te=null;K!==null&&R_(ne,$,K,Te,!1),Ie!==null&&it!==null&&R_(ne,it,Ie,Te,!0)}}e:{if($=Y?ni(Y):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var he=Yp;else if(Nt($))if($p)he=dA;else{he=cA;var ke=uA}else K=$.nodeName,!K||K.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Pa(Y.elementType)&&(he=Yp):he=fA;if(he&&(he=he(o,Y))){Li(ne,he,a,ee);break e}ke&&ke(o,$,Y),o==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&ho($,"number",$.value)}switch(ke=Y?ni(Y):window,o){case"focusin":(Nt(ke)||ke.contentEditable==="true")&&(ms=ke,rd=Y,Ga=null);break;case"focusout":Ga=rd=ms=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,eg(ne,a,ee);break;case"selectionchange":if(mA)break;case"keydown":case"keyup":eg(ne,a,ee)}var ge;if(ui)e:{switch(o){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Be?W(o,a)&&(Se="onCompositionEnd"):o==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(C&&a.locale!=="ko"&&(Be||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Be&&(ge=Va()):(ri=ee,mo="value"in ri?ri.value:ri.textContent,Be=!0)),ke=vc(Y,Se),0<ke.length&&(Se=new Oa(Se,o,null,a,ee),ne.push({event:Se,listeners:ke}),ge?Se.data=ge:(ge=ue(a),ge!==null&&(Se.data=ge)))),(ge=T?xt(o,a):He(o,a))&&(Se=vc(Y,"onBeforeInput"),0<Se.length&&(ke=new Oa("onBeforeInput","beforeinput",null,a,ee),ne.push({event:ke,listeners:Se}),ke.data=ge)),XA(ne,o,Y,a,ee)}A_(ne,r)})}function yl(o,r,a){return{instance:o,listener:r,currentTarget:a}}function vc(o,r){for(var a=r+"Capture",f=[];o!==null;){var g=o,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=fr(o,a),g!=null&&f.unshift(yl(o,g,v)),g=fr(o,r),g!=null&&f.push(yl(o,g,v))),o.tag===3)return f;o=o.return}return[]}function Os(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function R_(o,r,a,f,g){for(var v=r._reactName,A=[];a!==null&&a!==f;){var I=a,N=I.alternate,Y=I.stateNode;if(I=I.tag,N!==null&&N===f)break;I!==5&&I!==26&&I!==27||Y===null||(N=Y,g?(Y=fr(a,v),Y!=null&&A.unshift(yl(a,Y,N))):g||(Y=fr(a,v),Y!=null&&A.push(yl(a,Y,N)))),a=a.return}A.length!==0&&o.push({event:r,listeners:A})}var eI=/\r\n?/g,tI=/\u0000|\uFFFD/g;function w_(o){return(typeof o=="string"?o:""+o).replace(eI,`
`).replace(tI,"")}function M_(o,r){return r=w_(r),w_(o)===r}function Tc(){}function nt(o,r,a,f,g,v){switch(a){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||In(o,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&In(o,""+f);break;case"className":ii(o,"class",f);break;case"tabIndex":ii(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ii(o,a,f);break;case"style":ba(o,f,v);break;case"data":if(r!=="object"){ii(o,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||a!=="href")){o.removeAttribute(a);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(a);break}f=rs(""+f),o.setAttribute(a,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&nt(o,r,"name",g.name,g,null),nt(o,r,"formEncType",g.formEncType,g,null),nt(o,r,"formMethod",g.formMethod,g,null),nt(o,r,"formTarget",g.formTarget,g,null)):(nt(o,r,"encType",g.encType,g,null),nt(o,r,"method",g.method,g,null),nt(o,r,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(a);break}f=rs(""+f),o.setAttribute(a,f);break;case"onClick":f!=null&&(o.onclick=Tc);break;case"onScroll":f!=null&&Ue("scroll",o);break;case"onScrollEnd":f!=null&&Ue("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(g.children!=null)throw Error(i(60));o.innerHTML=a}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}a=rs(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,""+f):o.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,""):o.removeAttribute(a);break;case"capture":case"download":f===!0?o.setAttribute(a,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,f):o.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(a,f):o.removeAttribute(a);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(a):o.setAttribute(a,f);break;case"popover":Ue("beforetoggle",o),Ue("toggle",o),fo(o,"popover",f);break;case"xlinkActuate":Gt(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Gt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Gt(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Gt(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Gt(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Gt(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Gt(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Gt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Gt(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":fo(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Zf.get(a)||a,fo(o,a,f))}}function Dh(o,r,a,f,g,v){switch(a){case"style":ba(o,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(g.children!=null)throw Error(i(60));o.innerHTML=a}}break;case"children":typeof f=="string"?In(o,f):(typeof f=="number"||typeof f=="bigint")&&In(o,""+f);break;case"onScroll":f!=null&&Ue("scroll",o);break;case"onScrollEnd":f!=null&&Ue("scrollend",o);break;case"onClick":f!=null&&(o.onclick=Tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!es.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),r=a.slice(2,g?a.length-7:void 0),v=o[St]||null,v=v!=null?v[a]:null,typeof v=="function"&&o.removeEventListener(r,v,g),typeof f=="function")){typeof v!="function"&&v!==null&&(a in o?o[a]=null:o.hasAttribute(a)&&o.removeAttribute(a)),o.addEventListener(r,f,g);break e}a in o?o[a]=f:f===!0?o.setAttribute(a,""):fo(o,a,f)}}}function Kt(o,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",o),Ue("load",o);var f=!1,g=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:nt(o,r,v,A,a,null)}}g&&nt(o,r,"srcSet",a.srcSet,a,null),f&&nt(o,r,"src",a.src,a,null);return;case"input":Ue("invalid",o);var I=v=A=g=null,N=null,Y=null;for(f in a)if(a.hasOwnProperty(f)){var ee=a[f];if(ee!=null)switch(f){case"name":g=ee;break;case"type":A=ee;break;case"checked":N=ee;break;case"defaultChecked":Y=ee;break;case"value":v=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,r));break;default:nt(o,r,f,ee,a,null)}}lr(o,v,I,N,Y,A,g,!1),os(o);return;case"select":Ue("invalid",o),f=A=v=null;for(g in a)if(a.hasOwnProperty(g)&&(I=a[g],I!=null))switch(g){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":f=I;default:nt(o,r,g,I,a,null)}r=v,a=A,o.multiple=!!f,r!=null?Ni(o,!!f,r,!1):a!=null&&Ni(o,!!f,a,!0);return;case"textarea":Ue("invalid",o),v=g=f=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":f=I;break;case"defaultValue":g=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:nt(o,r,A,I,a,null)}ur(o,f,g,v),os(o);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(f=a[N],f!=null))switch(N){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:nt(o,r,N,f,a,null)}return;case"dialog":Ue("beforetoggle",o),Ue("toggle",o),Ue("cancel",o),Ue("close",o);break;case"iframe":case"object":Ue("load",o);break;case"video":case"audio":for(f=0;f<gl.length;f++)Ue(gl[f],o);break;case"image":Ue("error",o),Ue("load",o);break;case"details":Ue("toggle",o);break;case"embed":case"source":case"link":Ue("error",o),Ue("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(f=a[Y],f!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:nt(o,r,Y,f,a,null)}return;default:if(Pa(r)){for(ee in a)a.hasOwnProperty(ee)&&(f=a[ee],f!==void 0&&Dh(o,r,ee,f,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(f=a[I],f!=null&&nt(o,r,I,f,a,null))}function nI(o,r,a,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,A=null,I=null,N=null,Y=null,ee=null;for(K in a){var ne=a[K];if(a.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":N=ne;default:f.hasOwnProperty(K)||nt(o,r,K,null,f,ne)}}for(var $ in f){var K=f[$];if(ne=a[$],f.hasOwnProperty($)&&(K!=null||ne!=null))switch($){case"type":v=K;break;case"name":g=K;break;case"checked":Y=K;break;case"defaultChecked":ee=K;break;case"value":A=K;break;case"defaultValue":I=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:K!==ne&&nt(o,r,$,K,f,ne)}}pn(o,A,I,N,Y,ee,v,g);return;case"select":K=A=I=$=null;for(v in a)if(N=a[v],a.hasOwnProperty(v)&&N!=null)switch(v){case"value":break;case"multiple":K=N;default:f.hasOwnProperty(v)||nt(o,r,v,null,f,N)}for(g in f)if(v=f[g],N=a[g],f.hasOwnProperty(g)&&(v!=null||N!=null))switch(g){case"value":$=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==N&&nt(o,r,g,v,f,N)}r=I,a=A,f=K,$!=null?Ni(o,!!a,$,!1):!!f!=!!a&&(r!=null?Ni(o,!!a,r,!0):Ni(o,!!a,a?[]:"",!1));return;case"textarea":K=$=null;for(I in a)if(g=a[I],a.hasOwnProperty(I)&&g!=null&&!f.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:nt(o,r,I,null,f,g)}for(A in f)if(g=f[A],v=a[A],f.hasOwnProperty(A)&&(g!=null||v!=null))switch(A){case"value":$=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==v&&nt(o,r,A,g,f,v)}et(o,$,K);return;case"option":for(var Ie in a)if($=a[Ie],a.hasOwnProperty(Ie)&&$!=null&&!f.hasOwnProperty(Ie))switch(Ie){case"selected":o.selected=!1;break;default:nt(o,r,Ie,null,f,$)}for(N in f)if($=f[N],K=a[N],f.hasOwnProperty(N)&&$!==K&&($!=null||K!=null))switch(N){case"selected":o.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:nt(o,r,N,$,f,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)$=a[Te],a.hasOwnProperty(Te)&&$!=null&&!f.hasOwnProperty(Te)&&nt(o,r,Te,null,f,$);for(Y in f)if($=f[Y],K=a[Y],f.hasOwnProperty(Y)&&$!==K&&($!=null||K!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:nt(o,r,Y,$,f,K)}return;default:if(Pa(r)){for(var it in a)$=a[it],a.hasOwnProperty(it)&&$!==void 0&&!f.hasOwnProperty(it)&&Dh(o,r,it,void 0,f,$);for(ee in f)$=f[ee],K=a[ee],!f.hasOwnProperty(ee)||$===K||$===void 0&&K===void 0||Dh(o,r,ee,$,f,K);return}}for(var B in a)$=a[B],a.hasOwnProperty(B)&&$!=null&&!f.hasOwnProperty(B)&&nt(o,r,B,null,f,$);for(ne in f)$=f[ne],K=a[ne],!f.hasOwnProperty(ne)||$===K||$==null&&K==null||nt(o,r,ne,$,f,K)}var xh=null,Nh=null;function Ec(o){return o.nodeType===9?o:o.ownerDocument}function D_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x_(o,r){if(o===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&r==="foreignObject"?0:o}function bh(o,r){return o==="textarea"||o==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ph=null;function iI(){var o=window.event;return o&&o.type==="popstate"?o===Ph?!1:(Ph=o,!0):(Ph=null,!1)}var N_=typeof setTimeout=="function"?setTimeout:void 0,oI=typeof clearTimeout=="function"?clearTimeout:void 0,b_=typeof Promise=="function"?Promise:void 0,rI=typeof queueMicrotask=="function"?queueMicrotask:typeof b_<"u"?function(o){return b_.resolve(null).then(o).catch(sI)}:N_;function sI(o){setTimeout(function(){throw o})}function xo(o){return o==="head"}function P_(o,r){var a=r,f=0,g=0;do{var v=a.nextSibling;if(o.removeChild(a),v&&v.nodeType===8)if(a=v.data,a==="/$"){if(0<f&&8>f){a=f;var A=o.ownerDocument;if(a&1&&_l(A.documentElement),a&2&&_l(A.body),a&4)for(a=A.head,_l(a),A=a.firstChild;A;){var I=A.nextSibling,N=A.nodeName;A[or]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&A.rel.toLowerCase()==="stylesheet"||a.removeChild(A),A=I}}if(g===0){o.removeChild(v),Rl(r);return}g--}else a==="$"||a==="$?"||a==="$!"?g++:f=a.charCodeAt(0)-48;else f=0;a=v}while(a);Rl(r)}function kh(o){var r=o.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kh(a),co(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}o.removeChild(a)}}function aI(o,r,a,f){for(;o.nodeType===1;){var g=a;if(o.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[or])switch(r){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==g.rel||o.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||o.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||o.getAttribute("title")!==(g.title==null?null:g.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(g.src==null?null:g.src)||o.getAttribute("type")!==(g.type==null?null:g.type)||o.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(r==="input"&&o.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=$n(o.nextSibling),o===null)break}return null}function lI(o,r,a){if(r==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!a||(o=$n(o.nextSibling),o===null))return null;return o}function Vh(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function uI(o,r){var a=o.ownerDocument;if(o.data!=="$?"||a.readyState==="complete")r();else{var f=function(){r(),a.removeEventListener("DOMContentLoaded",f)};a.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function $n(o){for(;o!=null;o=o.nextSibling){var r=o.nodeType;if(r===1||r===3)break;if(r===8){if(r=o.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return o}var Uh=null;function k_(o){o=o.previousSibling;for(var r=0;o;){if(o.nodeType===8){var a=o.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return o;r--}else a==="/$"&&r++}o=o.previousSibling}return null}function V_(o,r,a){switch(r=Ec(a),o){case"html":if(o=r.documentElement,!o)throw Error(i(452));return o;case"head":if(o=r.head,!o)throw Error(i(453));return o;case"body":if(o=r.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function _l(o){for(var r=o.attributes;r.length;)o.removeAttributeNode(r[0]);co(o)}var Vn=new Map,U_=new Set;function Sc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Xi=ce.d;ce.d={f:cI,r:fI,D:dI,C:hI,L:mI,m:pI,X:yI,S:gI,M:_I};function cI(){var o=Xi.f(),r=hc();return o||r}function fI(o){var r=ti(o);r!==null&&r.tag===5&&r.type==="form"?ny(r):Xi.r(o)}var Fs=typeof document>"u"?null:document;function L_(o,r,a){var f=Fs;if(f&&typeof r=="string"&&r){var g=Ct(r);g='link[rel="'+o+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),U_.has(g)||(U_.add(g),o={rel:o,crossOrigin:a,href:r},f.querySelector(g)===null&&(r=f.createElement("link"),Kt(r,"link",o),_t(r),f.head.appendChild(r)))}}function dI(o){Xi.D(o),L_("dns-prefetch",o,null)}function hI(o,r){Xi.C(o,r),L_("preconnect",o,r)}function mI(o,r,a){Xi.L(o,r,a);var f=Fs;if(f&&o&&r){var g='link[rel="preload"][as="'+Ct(r)+'"]';r==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Ct(a.imageSizes)+'"]')):g+='[href="'+Ct(o)+'"]';var v=g;switch(r){case"style":v=qs(o);break;case"script":v=Bs(o)}Vn.has(v)||(o=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:o,as:r},a),Vn.set(v,o),f.querySelector(g)!==null||r==="style"&&f.querySelector(vl(v))||r==="script"&&f.querySelector(Tl(v))||(r=f.createElement("link"),Kt(r,"link",o),_t(r),f.head.appendChild(r)))}}function pI(o,r){Xi.m(o,r);var a=Fs;if(a&&o){var f=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Ct(f)+'"][href="'+Ct(o)+'"]',v=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Bs(o)}if(!Vn.has(v)&&(o=_({rel:"modulepreload",href:o},r),Vn.set(v,o),a.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Tl(v)))return}f=a.createElement("link"),Kt(f,"link",o),_t(f),a.head.appendChild(f)}}}function gI(o,r,a){Xi.S(o,r,a);var f=Fs;if(f&&o){var g=sn(f).hoistableStyles,v=qs(o);r=r||"default";var A=g.get(v);if(!A){var I={loading:0,preload:null};if(A=f.querySelector(vl(v)))I.loading=5;else{o=_({rel:"stylesheet",href:o,"data-precedence":r},a),(a=Vn.get(v))&&Lh(o,a);var N=A=f.createElement("link");_t(N),Kt(N,"link",o),N._p=new Promise(function(Y,ee){N.onload=Y,N.onerror=ee}),N.addEventListener("load",function(){I.loading|=1}),N.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Cc(A,r,f)}A={type:"stylesheet",instance:A,count:1,state:I},g.set(v,A)}}}function yI(o,r){Xi.X(o,r);var a=Fs;if(a&&o){var f=sn(a).hoistableScripts,g=Bs(o),v=f.get(g);v||(v=a.querySelector(Tl(g)),v||(o=_({src:o,async:!0},r),(r=Vn.get(g))&&Oh(o,r),v=a.createElement("script"),_t(v),Kt(v,"link",o),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(g,v))}}function _I(o,r){Xi.M(o,r);var a=Fs;if(a&&o){var f=sn(a).hoistableScripts,g=Bs(o),v=f.get(g);v||(v=a.querySelector(Tl(g)),v||(o=_({src:o,async:!0,type:"module"},r),(r=Vn.get(g))&&Oh(o,r),v=a.createElement("script"),_t(v),Kt(v,"link",o),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(g,v))}}function O_(o,r,a,f){var g=(g=Ae.current)?Sc(g):null;if(!g)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=qs(a.href),a=sn(g).hoistableStyles,f=a.get(r),f||(f={type:"style",instance:null,count:0,state:null},a.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){o=qs(a.href);var v=sn(g).hoistableStyles,A=v.get(o);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,A),(v=g.querySelector(vl(o)))&&!v._p&&(A.instance=v,A.state.loading=5),Vn.has(o)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Vn.set(o,a),v||vI(g,o,a,A.state))),r&&f===null)throw Error(i(528,""));return A}if(r&&f!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Bs(a),a=sn(g).hoistableScripts,f=a.get(r),f||(f={type:"script",instance:null,count:0,state:null},a.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function qs(o){return'href="'+Ct(o)+'"'}function vl(o){return'link[rel="stylesheet"]['+o+"]"}function F_(o){return _({},o,{"data-precedence":o.precedence,precedence:null})}function vI(o,r,a,f){o.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=o.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Kt(r,"link",a),_t(r),o.head.appendChild(r))}function Bs(o){return'[src="'+Ct(o)+'"]'}function Tl(o){return"script[async]"+o}function q_(o,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var f=o.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(f)return r.instance=f,_t(f),f;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),_t(f),Kt(f,"style",g),Cc(f,a.precedence,o),r.instance=f;case"stylesheet":g=qs(a.href);var v=o.querySelector(vl(g));if(v)return r.state.loading|=4,r.instance=v,_t(v),v;f=F_(a),(g=Vn.get(g))&&Lh(f,g),v=(o.ownerDocument||o).createElement("link"),_t(v);var A=v;return A._p=new Promise(function(I,N){A.onload=I,A.onerror=N}),Kt(v,"link",f),r.state.loading|=4,Cc(v,a.precedence,o),r.instance=v;case"script":return v=Bs(a.src),(g=o.querySelector(Tl(v)))?(r.instance=g,_t(g),g):(f=a,(g=Vn.get(v))&&(f=_({},a),Oh(f,g)),o=o.ownerDocument||o,g=o.createElement("script"),_t(g),Kt(g,"link",f),o.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Cc(f,a.precedence,o));return r.instance}function Cc(o,r,a){for(var f=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,v=g,A=0;A<f.length;A++){var I=f[A];if(I.dataset.precedence===r)v=I;else if(v!==g)break}v?v.parentNode.insertBefore(o,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(o,r.firstChild))}function Lh(o,r){o.crossOrigin==null&&(o.crossOrigin=r.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=r.referrerPolicy),o.title==null&&(o.title=r.title)}function Oh(o,r){o.crossOrigin==null&&(o.crossOrigin=r.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=r.referrerPolicy),o.integrity==null&&(o.integrity=r.integrity)}var Ac=null;function B_(o,r,a){if(Ac===null){var f=new Map,g=Ac=new Map;g.set(a,f)}else g=Ac,f=g.get(a),f||(f=new Map,g.set(a,f));if(f.has(o))return f;for(f.set(o,null),a=a.getElementsByTagName(o),g=0;g<a.length;g++){var v=a[g];if(!(v[or]||v[Dt]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=o+A;var I=f.get(A);I?I.push(v):f.set(A,[v])}}return f}function H_(o,r,a){o=o.ownerDocument||o,o.head.insertBefore(a,r==="title"?o.querySelector("head > title"):null)}function TI(o,r,a){if(a===1||r.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return o=r.disabled,typeof r.precedence=="string"&&o==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function G_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var El=null;function EI(){}function SI(o,r,a){if(El===null)throw Error(i(475));var f=El;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=qs(a.href),v=o.querySelector(vl(g));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(f.count++,f=Ic.bind(f),o.then(f,f)),r.state.loading|=4,r.instance=v,_t(v);return}v=o.ownerDocument||o,a=F_(a),(g=Vn.get(g))&&Lh(a,g),v=v.createElement("link"),_t(v);var A=v;A._p=new Promise(function(I,N){A.onload=I,A.onerror=N}),Kt(v,"link",a),r.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(f.count++,r=Ic.bind(f),o.addEventListener("load",r),o.addEventListener("error",r))}}function CI(){if(El===null)throw Error(i(475));var o=El;return o.stylesheets&&o.count===0&&Fh(o,o.stylesheets),0<o.count?function(r){var a=setTimeout(function(){if(o.stylesheets&&Fh(o,o.stylesheets),o.unsuspend){var f=o.unsuspend;o.unsuspend=null,f()}},6e4);return o.unsuspend=r,function(){o.unsuspend=null,clearTimeout(a)}}:null}function Ic(){if(this.count--,this.count===0){if(this.stylesheets)Fh(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Rc=null;function Fh(o,r){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Rc=new Map,r.forEach(AI,o),Rc=null,Ic.call(o))}function AI(o,r){if(!(r.state.loading&4)){var a=Rc.get(o);if(a)var f=a.get(null);else{a=new Map,Rc.set(o,a);for(var g=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var A=g[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),f=A)}f&&a.set(null,f)}g=r.instance,A=g.getAttribute("data-precedence"),v=a.get(A)||f,v===f&&a.set(null,g),a.set(A,g),this.count++,f=Ic.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),v?v.parentNode.insertBefore(g,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(g,o.firstChild)),r.state.loading|=4}}var Sl={$$typeof:X,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function II(o,r,a,f,g,v,A,I){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function z_(o,r,a,f,g,v,A,I,N,Y,ee,ne){return o=new II(o,r,a,A,I,N,Y,ne),r=1,v===!0&&(r|=24),v=yn(3,null,null,r),o.current=v,v.stateNode=o,r=Td(),r.refCount++,o.pooledCache=r,r.refCount++,v.memoizedState={element:f,isDehydrated:a,cache:r},Ad(v),o}function Y_(o){return o?(o=_s,o):_s}function $_(o,r,a,f,g,v){g=Y_(g),f.context===null?f.context=g:f.pendingContext=g,f=yo(r),f.payload={element:a},v=v===void 0?null:v,v!==null&&(f.callback=v),a=_o(o,f,r),a!==null&&(Sn(a,o,r),Za(a,o,r))}function K_(o,r){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var a=o.retryLane;o.retryLane=a!==0&&a<r?a:r}}function qh(o,r){K_(o,r),(o=o.alternate)&&K_(o,r)}function J_(o){if(o.tag===13){var r=ys(o,67108864);r!==null&&Sn(r,o,67108864),qh(o,67108864)}}var wc=!0;function RI(o,r,a,f){var g=Z.T;Z.T=null;var v=ce.p;try{ce.p=2,Bh(o,r,a,f)}finally{ce.p=v,Z.T=g}}function wI(o,r,a,f){var g=Z.T;Z.T=null;var v=ce.p;try{ce.p=8,Bh(o,r,a,f)}finally{ce.p=v,Z.T=g}}function Bh(o,r,a,f){if(wc){var g=Hh(f);if(g===null)Mh(o,r,f,Mc,a),X_(o,f);else if(DI(g,o,r,a,f))f.stopPropagation();else if(X_(o,f),r&4&&-1<MI.indexOf(o)){for(;g!==null;){var v=ti(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Bn(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var N=1<<31-Wt(A);I.entanglements[1]|=N,A&=~N}pi(v),(Ze&6)===0&&(fc=Cn()+500,pl(0))}}break;case 13:I=ys(v,2),I!==null&&Sn(I,v,2),hc(),qh(v,2)}if(v=Hh(f),v===null&&Mh(o,r,f,Mc,a),v===g)break;g=v}g!==null&&f.stopPropagation()}else Mh(o,r,f,null,a)}}function Hh(o){return o=Rn(o),Gh(o)}var Mc=null;function Gh(o){if(Mc=null,o=Mi(o),o!==null){var r=l(o);if(r===null)o=null;else{var a=r.tag;if(a===13){if(o=d(r),o!==null)return o;o=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;o=null}else r!==o&&(o=null)}}return Mc=o,null}function Q_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($f()){case Ta:return 2;case Xr:return 8;case jo:case Kf:return 32;case Wr:return 268435456;default:return 32}default:return 32}}var zh=!1,No=null,bo=null,Po=null,Cl=new Map,Al=new Map,ko=[],MI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(o,r){switch(o){case"focusin":case"focusout":No=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":Cl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(r.pointerId)}}function Il(o,r,a,f,g,v){return o===null||o.nativeEvent!==v?(o={blockedOn:r,domEventName:a,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},r!==null&&(r=ti(r),r!==null&&J_(r)),o):(o.eventSystemFlags|=f,r=o.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),o)}function DI(o,r,a,f,g){switch(r){case"focusin":return No=Il(No,o,r,a,f,g),!0;case"dragenter":return bo=Il(bo,o,r,a,f,g),!0;case"mouseover":return Po=Il(Po,o,r,a,f,g),!0;case"pointerover":var v=g.pointerId;return Cl.set(v,Il(Cl.get(v)||null,o,r,a,f,g)),!0;case"gotpointercapture":return v=g.pointerId,Al.set(v,Il(Al.get(v)||null,o,r,a,f,g)),!0}return!1}function W_(o){var r=Mi(o.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){o.blockedOn=r,hu(o.priority,function(){if(a.tag===13){var f=En();f=ao(f);var g=ys(a,f);g!==null&&Sn(g,a,f),qh(a,f)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){o.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Dc(o){if(o.blockedOn!==null)return!1;for(var r=o.targetContainers;0<r.length;){var a=Hh(o.nativeEvent);if(a===null){a=o.nativeEvent;var f=new a.constructor(a.type,a);bi=f,a.target.dispatchEvent(f),bi=null}else return r=ti(a),r!==null&&J_(r),o.blockedOn=a,!1;r.shift()}return!0}function Z_(o,r,a){Dc(o)&&a.delete(r)}function xI(){zh=!1,No!==null&&Dc(No)&&(No=null),bo!==null&&Dc(bo)&&(bo=null),Po!==null&&Dc(Po)&&(Po=null),Cl.forEach(Z_),Al.forEach(Z_)}function xc(o,r){o.blockedOn===r&&(o.blockedOn=null,zh||(zh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,xI)))}var Nc=null;function j_(o){Nc!==o&&(Nc=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nc===o&&(Nc=null);for(var r=0;r<o.length;r+=3){var a=o[r],f=o[r+1],g=o[r+2];if(typeof f!="function"){if(Gh(f||a)===null)continue;break}var v=ti(a);v!==null&&(o.splice(r,3),r-=3,Gd(v,{pending:!0,data:g,method:a.method,action:f},f,g))}}))}function Rl(o){function r(N){return xc(N,o)}No!==null&&xc(No,o),bo!==null&&xc(bo,o),Po!==null&&xc(Po,o),Cl.forEach(r),Al.forEach(r);for(var a=0;a<ko.length;a++){var f=ko[a];f.blockedOn===o&&(f.blockedOn=null)}for(;0<ko.length&&(a=ko[0],a.blockedOn===null);)W_(a),a.blockedOn===null&&ko.shift();if(a=(o.ownerDocument||o).$$reactFormReplay,a!=null)for(f=0;f<a.length;f+=3){var g=a[f],v=a[f+1],A=g[St]||null;if(typeof v=="function")A||j_(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(g=v,A=v[St]||null)I=A.formAction;else if(Gh(g)!==null)continue}else I=A.action;typeof I=="function"?a[f+1]=I:(a.splice(f,3),f-=3),j_(a)}}}function Yh(o){this._internalRoot=o}bc.prototype.render=Yh.prototype.render=function(o){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,f=En();$_(a,f,o,r,null,null)},bc.prototype.unmount=Yh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var r=o.containerInfo;$_(o.current,2,null,o,null,null),hc(),r[An]=null}};function bc(o){this._internalRoot=o}bc.prototype.unstable_scheduleHydration=function(o){if(o){var r=lo();o={blockedOn:null,target:o,priority:r};for(var a=0;a<ko.length&&r!==0&&r<ko[a].priority;a++);ko.splice(a,0,o),a===0&&W_(o)}};var ev=e.version;if(ev!=="19.1.1")throw Error(i(527,ev,"19.1.1"));ce.findDOMNode=function(o){var r=o._reactInternals;if(r===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=y(r),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var NI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pc.isDisabled&&Pc.supportsFiber)try{mt=Pc.inject(NI),We=Pc}catch{}}return Ml.createRoot=function(o,r){if(!s(o))throw Error(i(299));var a=!1,f="",g=gy,v=yy,A=_y,I=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks)),r=z_(o,1,!1,null,null,a,f,g,v,A,I,null),o[An]=r.current,wh(o),new Yh(r)},Ml.hydrateRoot=function(o,r,a){if(!s(o))throw Error(i(299));var f=!1,g="",v=gy,A=yy,I=_y,N=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),r=z_(o,1,!0,r,a??null,f,g,v,A,I,N,Y),r.context=Y_(null),a=r.current,f=En(),f=ao(f),g=yo(f),g.callback=null,_o(a,g,f),a=f,r.current.lanes=a,wi(r,a),pi(r),o[An]=r.current,wh(o),new bc(r)},Ml.version="19.1.1",Ml}var cv;function BI(){if(cv)return Jh.exports;cv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jh.exports=qI(),Jh.exports}var HI=BI();const GI=n0(HI),Hl=["","","","","","",""],Hc=["bg-sky-500","bg-emerald-500","bg-indigo-500","bg-pink-500","bg-blue-600","bg-teal-500","bg-purple-500","bg-rose-500"],zI=["gemini-2.5-flash"],YI="gemini-2.5-flash",$I=()=>{};var fv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},KI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[i++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],d=n[t++],h=n[t++],y=((s&7)<<18|(l&63)<<12|(d&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],d=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(l&63)<<6|d&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const l=n[s],d=s+1<n.length,h=d?n[s+1]:0,y=s+2<n.length,p=y?n[s+2]:0,_=l>>2,E=(l&3)<<4|h>>4;let S=(h&15)<<2|p>>6,w=p&63;y||(w=64,d||(S=64)),i.push(t[_],t[E],t[S],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(o0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||h==null||p==null||E==null)throw new JI;const S=l<<2|h>>4;if(i.push(S),p!==64){const w=h<<4&240|p>>2;if(i.push(w),E!==64){const V=p<<6&192|E;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class JI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QI=function(n){const e=o0(n);return r0.encodeByteArray(e,!0)},nf=function(n){return QI(n).replace(/\./g,"")},s0=function(n){try{return r0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=()=>XI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof fv>"u")return;const n=fv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&s0(n[1]);return e&&JSON.parse(e)},Rf=()=>{try{return $I()||WI()||ZI()||jI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},a0=n=>{var e,t;return(t=(e=Rf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},eR=n=>{const e=a0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},l0=()=>{var n;return(n=Rf())==null?void 0:n.config},u0=n=>{var e;return(e=Rf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function c0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nf(JSON.stringify(t)),nf(JSON.stringify(d)),""].join(".")}const kl={};function iR(){const n={prod:[],emulator:[]};for(const e of Object.keys(kl))kl[e]?n.emulator.push(e):n.prod.push(e);return n}function oR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dv=!1;function f0(n,e){if(typeof window>"u"||typeof document>"u"||!la(window.location.host)||kl[n]===e||kl[n]||dv)return;kl[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=iR().prod.length>0;function d(){const S=document.getElementById(i);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,w){S.setAttribute("width","24"),S.setAttribute("id",w),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{dv=!0,d()},S}function _(S,w){S.setAttribute("id",w),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=oR(i),w=t("text"),V=document.getElementById(w)||document.createElement("span"),q=t("learnmore"),H=document.getElementById(q)||document.createElement("a"),oe=t("preprendIcon"),Q=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;h(X),_(H,q);const j=p();y(Q,oe),X.append(Q,V,H,j),document.body.appendChild(X)}l?(V.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function sR(){var e;const n=(e=Rf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cR(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fR(){return!sR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function hR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="FirebaseError";class Wn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mR,Object.setPrototypeOf(this,Wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jl.prototype.create)}}class jl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],d=l?pR(l,i):"Error",h=`${this.serviceName}: ${d} (${s}).`;return new Wn(s,h,i)}}function pR(n,e){return n.replace(gR,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const gR=/\{\$([^}]+)}/g;function yR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Or(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const l=n[s],d=e[s];if(hv(l)&&hv(d)){if(!Or(l,d))return!1}else if(l!==d)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function hv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _R(n,e){const t=new vR(n,e);return t.subscribe.bind(t)}class vR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");TR(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Zh),s.error===void 0&&(s.error=Zh),s.complete===void 0&&(s.complete=Zh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(n){return n&&n._delegate?n._delegate:n}class Fr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new tR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CR(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});i.resolve(l)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&d.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const l=this.instances.get(i);return l&&e(l,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(n){return n===Pr?void 0:n}function CR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ER(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const IR={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},RR=Le.INFO,wR={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},MR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=wR[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=MR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const DR=(n,e)=>e.some(t=>n instanceof t);let mv,pv;function xR(){return mv||(mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return pv||(pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d0=new WeakMap,dm=new WeakMap,h0=new WeakMap,jh=new WeakMap,Xm=new WeakMap;function bR(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(Ho(n.result)),s()},d=()=>{i(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&d0.set(t,n)}).catch(()=>{}),Xm.set(e,n),e}function PR(n){if(dm.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),s()},d=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});dm.set(n,e)}let hm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||h0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ho(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kR(n){hm=n(hm)}function VR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(em(this),e,...t);return h0.set(i,e.sort?e.sort():[e]),Ho(i)}:NR().includes(n)?function(...e){return n.apply(em(this),e),Ho(d0.get(this))}:function(...e){return Ho(n.apply(em(this),e))}}function UR(n){return typeof n=="function"?VR(n):(n instanceof IDBTransaction&&PR(n),DR(n,xR())?new Proxy(n,hm):n)}function Ho(n){if(n instanceof IDBRequest)return bR(n);if(jh.has(n))return jh.get(n);const e=UR(n);return e!==n&&(jh.set(n,e),Xm.set(e,n)),e}const em=n=>Xm.get(n);function LR(n,e,{blocked:t,upgrade:i,blocking:s,terminated:l}={}){const d=indexedDB.open(n,e),h=Ho(d);return i&&d.addEventListener("upgradeneeded",y=>{i(Ho(d.result),y.oldVersion,y.newVersion,Ho(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),h.then(y=>{l&&y.addEventListener("close",()=>l()),s&&y.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const OR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],tm=new Map;function gv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=FR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||OR.includes(t)))return;const l=async function(d,...h){const y=this.transaction(d,s?"readwrite":"readonly");let p=y.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&y.done]))[0]};return tm.set(e,l),l}kR(n=>({...n,get:(e,t,i)=>gv(e,t)||n.get(e,t,i),has:(e,t)=>!!gv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function BR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mm="@firebase/app",yv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Qm("@firebase/app"),HR="@firebase/app-compat",GR="@firebase/analytics-compat",zR="@firebase/analytics",YR="@firebase/app-check-compat",$R="@firebase/app-check",KR="@firebase/auth",JR="@firebase/auth-compat",QR="@firebase/database",XR="@firebase/data-connect",WR="@firebase/database-compat",ZR="@firebase/functions",jR="@firebase/functions-compat",ew="@firebase/installations",tw="@firebase/installations-compat",nw="@firebase/messaging",iw="@firebase/messaging-compat",ow="@firebase/performance",rw="@firebase/performance-compat",sw="@firebase/remote-config",aw="@firebase/remote-config-compat",lw="@firebase/storage",uw="@firebase/storage-compat",cw="@firebase/firestore",fw="@firebase/ai",dw="@firebase/firestore-compat",hw="firebase",mw="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",pw={[mm]:"fire-core",[HR]:"fire-core-compat",[zR]:"fire-analytics",[GR]:"fire-analytics-compat",[$R]:"fire-app-check",[YR]:"fire-app-check-compat",[KR]:"fire-auth",[JR]:"fire-auth-compat",[QR]:"fire-rtdb",[XR]:"fire-data-connect",[WR]:"fire-rtdb-compat",[ZR]:"fire-fn",[jR]:"fire-fn-compat",[ew]:"fire-iid",[tw]:"fire-iid-compat",[nw]:"fire-fcm",[iw]:"fire-fcm-compat",[ow]:"fire-perf",[rw]:"fire-perf-compat",[sw]:"fire-rc",[aw]:"fire-rc-compat",[lw]:"fire-gcs",[uw]:"fire-gcs-compat",[cw]:"fire-fst",[dw]:"fire-fst-compat",[fw]:"fire-vertex","fire-js":"fire-js",[hw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Map,gw=new Map,gm=new Map;function _v(n,e){try{n.container.addComponent(e)}catch(t){to.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ea(n){const e=n.name;if(gm.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,n);for(const t of of.values())_v(t,n);for(const t of gw.values())_v(t,n);return!0}function Wm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Go=new jl("app","Firebase",yw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=mw;function m0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:pm,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Go.create("bad-app-name",{appName:String(s)});if(t||(t=l0()),!t)throw Go.create("no-options");const l=of.get(s);if(l){if(Or(t,l.options)&&Or(i,l.config))return l;throw Go.create("duplicate-app",{appName:s})}const d=new AR(s);for(const y of gm.values())d.addComponent(y);const h=new _w(t,i,d);return of.set(s,h),h}function p0(n=pm){const e=of.get(n);if(!e&&n===pm&&l0())return m0();if(!e)throw Go.create("no-app",{appName:n});return e}function zo(n,e,t){let i=pw[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const d=[`Unable to register library "${i}" with version "${e}":`];s&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(d.join(" "));return}ea(new Fr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="firebase-heartbeat-database",Tw=1,Gl="firebase-heartbeat-store";let nm=null;function g0(){return nm||(nm=LR(vw,Tw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Go.create("idb-open",{originalErrorMessage:n.message})})),nm}async function Ew(n){try{const t=(await g0()).transaction(Gl),i=await t.objectStore(Gl).get(y0(n));return await t.done,i}catch(e){if(e instanceof Wn)to.warn(e.message);else{const t=Go.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});to.warn(t.message)}}}async function vv(n,e){try{const i=(await g0()).transaction(Gl,"readwrite");await i.objectStore(Gl).put(e,y0(n)),await i.done}catch(t){if(t instanceof Wn)to.warn(t.message);else{const i=Go.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});to.warn(i.message)}}}function y0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=1024,Cw=30;class Aw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Rw(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>Cw){const d=ww(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){to.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tv(),{heartbeatsToSend:i,unsentEntries:s}=Iw(this._heartbeatsCache.heartbeats),l=nf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return to.warn(t),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function Iw(n,e=Sw){const t=[];let i=n.slice();for(const s of n){const l=t.find(d=>d.agent===s.agent);if(l){if(l.dates.push(s.date),Ev(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Ev(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Rw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?hR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ew(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ev(n){return nf(JSON.stringify({version:2,heartbeats:n})).length}function ww(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n){ea(new Fr("platform-logger",e=>new qR(e),"PRIVATE")),ea(new Fr("heartbeat",e=>new Aw(e),"PRIVATE")),zo(mm,yv,n),zo(mm,yv,"esm2020"),zo("fire-js","")}Mw("");var Dw="firebase",xw="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zo(Dw,xw,"app");function _0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nw=_0,v0=new jl("auth","Firebase",_0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Qm("@firebase/auth");function bw(n,...e){rf.logLevel<=Le.WARN&&rf.warn(`Auth (${ua}): ${n}`,...e)}function Gc(n,...e){rf.logLevel<=Le.ERROR&&rf.error(`Auth (${ua}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(n,...e){throw jm(n,...e)}function Xn(n,...e){return jm(n,...e)}function Zm(n,e,t){const i={...Nw(),[e]:t};return new jl("auth","Firebase",i).create(e,{appName:n.name})}function Ur(n){return Zm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pw(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Si(n,"argument-error"),Zm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return v0.create(n,...e)}function Re(n,e,...t){if(!n)throw jm(e,...t)}function Zi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gc(e),new Error(e)}function no(n,e){n||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function kw(){return Sv()==="http:"||Sv()==="https:"}function Sv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kw()||lR()||"connection"in navigator)?navigator.onLine:!0}function Uw(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.shortDelay=e,this.longDelay=t,no(t>e,"Short delay should be less than long delay!"),this.isMobile=rR()||uR()}get(){return Vw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n,e){no(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fw=new tu(3e4,6e4);function tp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ca(n,e,t,i,s={}){return E0(n,s,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const h=eu({key:n.config.apiKey,...d}).slice(1),y=await n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:y,...l};return aR()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&la(n.emulatorConfig.host)&&(p.credentials="include"),T0.fetch()(await S0(n,n.config.apiHost,t,h),p)})}async function E0(n,e,t){n._canInitEmulator=!1;const i={...Lw,...e};try{const s=new Bw(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw kc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const h=l.ok?d.errorMessage:d.error.message,[y,p]=h.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(n,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw kc(n,"email-already-in-use",d);if(y==="USER_DISABLED")throw kc(n,"user-disabled",d);const _=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Zm(n,_,p);Si(n,_)}}catch(s){if(s instanceof Wn)throw s;Si(n,"network-request-failed",{message:String(s)})}}async function qw(n,e,t,i,s={}){const l=await ca(n,e,t,i,s);return"mfaPendingCredential"in l&&Si(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function S0(n,e,t,i){const s=`${e}${t}?${i}`,l=n,d=l.config.emulator?ep(n.config,s):`${n.config.apiScheme}://${s}`;return Ow.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}class Bw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),Fw.get())})}}function kc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Xn(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(n,e){return ca(n,"POST","/v1/accounts:delete",e)}async function sf(n,e){return ca(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gw(n,e=!1){const t=Fn(n),i=await t.getIdToken(e),s=np(i);Re(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:s,token:i,authTime:Vl(im(s.auth_time)),issuedAtTime:Vl(im(s.iat)),expirationTime:Vl(im(s.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function im(n){return Number(n)*1e3}function np(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Gc("JWT malformed, contained fewer than 3 sections"),null;try{const s=s0(t);return s?JSON.parse(s):(Gc("Failed to decode base64 JWT payload"),null)}catch(s){return Gc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Cv(n){const e=np(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Wn&&zw(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function zw({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vl(this.lastLoginAt),this.creationTime=Vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(n){var E;const e=n.auth,t=await n.getIdToken(),i=await zl(n,sf(e,{idToken:t}));Re(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?C0(s.providerUserInfo):[],d=Kw(n.providerData,l),h=n.isAnonymous,y=!(n.email&&s.passwordHash)&&!(d!=null&&d.length),p=h?y:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:d,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function $w(n){const e=Fn(n);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kw(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function C0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(n,e){const t=await E0(n,{},async()=>{const i=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,d=await S0(n,s,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:h,body:i};return n.emulatorConfig&&la(n.emulatorConfig.host)&&(y.credentials="include"),T0.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Qw(n,e){return ca(n,"POST","/v2/accounts:revokeToken",tp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Cv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:l}=await Jw(e,t);this.updateTokensAndExpiration(i,s,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:l}=t,d=new Ks;return i&&(Re(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),s&&(Re(typeof s=="string","internal-error",{appName:e}),d.accessToken=s),l&&(Re(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ks,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Jn{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new Yw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _m(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await zl(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Gw(this,e)}reload(){return $w(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await af(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await zl(this,Hw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,h=t.tenantId??void 0,y=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:w,providerData:V,stsTokenManager:q}=t;Re(E&&q,e,"internal-error");const H=Ks.fromJSON(this.name,q);Re(typeof E=="string",e,"internal-error"),Uo(i,e.name),Uo(s,e.name),Re(typeof S=="boolean",e,"internal-error"),Re(typeof w=="boolean",e,"internal-error"),Uo(l,e.name),Uo(d,e.name),Uo(h,e.name),Uo(y,e.name),Uo(p,e.name),Uo(_,e.name);const oe=new Jn({uid:E,auth:e,email:s,emailVerified:S,displayName:i,isAnonymous:w,photoURL:d,phoneNumber:l,tenantId:h,stsTokenManager:H,createdAt:p,lastLoginAt:_});return V&&Array.isArray(V)&&(oe.providerData=V.map(Q=>({...Q}))),y&&(oe._redirectEventId=y),oe}static async _fromIdTokenResponse(e,t,i=!1){const s=new Ks;s.updateFromServerResponse(t);const l=new Jn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await af(l),l}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Re(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?C0(s.providerUserInfo):[],d=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),h=new Ks;h.updateFromIdToken(i);const y=new Jn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:d}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function ji(n){no(n instanceof Function,"Expected a class definition");let e=Av.get(n);return e?(no(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Av.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A0.type="NONE";const Iv=A0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(n,e,t){return`firebase:${n}:${e}:${t}`}class Js{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:l}=this.auth;this.fullUserKey=zc(this.userKey,s.apiKey,l),this.fullPersistenceKey=zc("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sf(this.auth,{idToken:e}).catch(()=>{});return t?Jn._fromGetAccountInfoResponse(this.auth,t,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Js(ji(Iv),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=s[0]||ji(Iv);const d=zc(i,e.config.apiKey,e.name);let h=null;for(const p of t)try{const _=await p._get(d);if(_){let E;if(typeof _=="string"){const S=await sf(e,{idToken:_}).catch(()=>{});if(!S)break;E=await Jn._fromGetAccountInfoResponse(e,S,_)}else E=Jn._fromJSON(e,_);p!==l&&(h=E),l=p;break}}catch{}const y=s.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Js(l,e,i):(l=y[0],h&&await l._set(d,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(d)}catch{}})),new Js(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x0(e))return"Blackberry";if(N0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||w0(e))&&!e.includes("edge/"))return"Chrome";if(D0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function I0(n=rn()){return/firefox\//i.test(n)}function R0(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function w0(n=rn()){return/crios\//i.test(n)}function M0(n=rn()){return/iemobile/i.test(n)}function D0(n=rn()){return/android/i.test(n)}function x0(n=rn()){return/blackberry/i.test(n)}function N0(n=rn()){return/webos/i.test(n)}function ip(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Xw(n=rn()){var e;return ip(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Ww(){return cR()&&document.documentMode===10}function b0(n=rn()){return ip(n)||D0(n)||N0(n)||x0(n)||/windows phone/i.test(n)||M0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(n,e=[]){let t;switch(n){case"Browser":t=Rv(rn());break;case"Worker":t=`${Rv(rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ua}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,h)=>{try{const y=e(l);d(y)}catch(y){h(y)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(n,e={}){return ca(n,"GET","/v2/passwordPolicy",tp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=6;class tM{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??eM,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new Zw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ji(t)),this._initializationPromise=this.queue(async()=>{var i,s,l;if(!this._deleted&&(this.persistenceManager=await Js.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sf(this,{idToken:e}),i=await Jn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Kn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=i==null?void 0:i._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===h)&&(y!=null&&y.user)&&(i=y.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Ur(this));const t=e?Fn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jw(this),t=new tM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Qw(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ji(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Js.create(this,[ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(h,this,"internal-error"),h.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,s);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&bw(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wf(n){return Fn(n)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iM(n){op=n}function oM(n){return op.loadJS(n)}function rM(){return op.gapiScript}function sM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(n,e){const t=Wm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Or(l,e??{}))return s;Si(s,"already-initialized")}return t.initialize({options:e})}function lM(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ji);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function uM(n,e,t){const i=wf(n);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,l=k0(e),{host:d,port:h}=cM(e),y=h===null?"":`:${h}`,p={url:`${l}//${d}${y}/`},_=Object.freeze({host:d,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(Or(p,i.config.emulator)&&Or(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,la(d)?(c0(`${l}//${d}${y}`),f0("Auth",!0)):fM()}function k0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cM(n){const e=k0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const l=s[1];return{host:l,port:Mv(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:Mv(d)}}}function Mv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(n,e){return qw(n,"POST","/v1/accounts:signInWithIdp",tp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="http://localhost";class qr extends V0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Si("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...l}=t;if(!i||!s)return null;const d=new qr(i,s);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Qs(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Qs(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qs(e,t)}buildRequest(){const e={requestUri:dM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends nu{constructor(){super("facebook.com")}static credential(e){return qr._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lo.credential(e.oauthAccessToken)}catch{return null}}}Lo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qr._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Wi.credential(t,i)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends nu{constructor(){super("github.com")}static credential(e){return qr._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch{return null}}}Oo.GITHUB_SIGN_IN_METHOD="github.com";Oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends nu{constructor(){super("twitter.com")}static credential(e,t){return qr._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Fo.credential(t,i)}catch{return null}}}Fo.TWITTER_SIGN_IN_METHOD="twitter.com";Fo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const l=await Jn._fromIdTokenResponse(e,i,s),d=Dv(i);return new ta({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=Dv(i);return new ta({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function Dv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends Wn{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new lf(e,t,i,s)}}function U0(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?lf._fromErrorAndOperation(n,l,e,i):l})}async function hM(n,e,t=!1){const i=await zl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ta._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(n,e,t=!1){const{auth:i}=n;if(Kn(i.app))return Promise.reject(Ur(i));const s="reauthenticate";try{const l=await zl(n,U0(i,s,e,n),t);Re(l.idToken,i,"internal-error");const d=np(l.idToken);Re(d,i,"internal-error");const{sub:h}=d;return Re(n.uid===h,i,"user-mismatch"),ta._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Si(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(n,e,t=!1){if(Kn(n.app))return Promise.reject(Ur(n));const i="signIn",s=await U0(n,i,e),l=await ta._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(l.user),l}function gM(n,e,t,i){return Fn(n).onIdTokenChanged(e,t,i)}function yM(n,e,t){return Fn(n).beforeAuthStateChanged(e,t)}function _M(n,e,t,i){return Fn(n).onAuthStateChanged(e,t,i)}function vM(n){return Fn(n).signOut()}const uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=1e3,EM=10;class O0 extends L0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=b0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,h,y)=>{this.notifyListeners(d,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);Ww()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,EM):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},TM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}O0.type="LOCAL";const SM=O0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends L0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}F0.type="SESSION";const q0=F0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Mf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:l}=t.data,d=this.handlersMap[s];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(d).map(async p=>p(t.origin,l)),y=await CM(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,d;return new Promise((h,y)=>{const p=sp("",20);s.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(_),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),s.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return window}function IM(n){yi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(){return typeof yi().WorkerGlobalScope<"u"&&typeof yi().importScripts=="function"}async function RM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wM(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function MM(){return B0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebaseLocalStorageDb",DM=1,cf="firebaseLocalStorage",G0="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Df(n,e){return n.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function xM(){const n=indexedDB.deleteDatabase(H0);return new iu(n).toPromise()}function vm(){const n=indexedDB.open(H0,DM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(cf,{keyPath:G0})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(cf)?e(i):(i.close(),await xM(),e(await vm()))})})}async function xv(n,e,t){const i=Df(n,!0).put({[G0]:e,value:t});return new iu(i).toPromise()}async function NM(n,e){const t=Df(n,!1).get(e),i=await new iu(t).toPromise();return i===void 0?null:i.value}function Nv(n,e){const t=Df(n,!0).delete(e);return new iu(t).toPromise()}const bM=800,PM=3;class z0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>PM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mf._getInstance(MM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await RM(),!this.activeServiceWorker)return;this.sender=new AM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vm();return await xv(e,uf,"1"),await Nv(e,uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>xv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>NM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Df(s,!1).getAll();return new iu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z0.type="LOCAL";const kM=z0;new tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(n,e){return e?ji(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends V0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VM(n){return pM(n.auth,new ap(n),n.bypassAuthState)}function UM(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),mM(t,new ap(n),n.bypassAuthState)}async function LM(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),hM(t,new ap(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t,i,s,l=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:l,error:d,type:h}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VM;case"linkViaPopup":case"linkViaRedirect":return LM;case"reauthViaPopup":case"reauthViaRedirect":return UM;default:Si(this.auth,"internal-error")}}resolve(e){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){no(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new tu(2e3,1e4);async function FM(n,e,t){if(Kn(n.app))return Promise.reject(Xn(n,"operation-not-supported-in-this-environment"));const i=wf(n);Pw(n,e,rp);const s=Y0(i,t);return new kr(i,"signInViaPopup",e,s).executeNotNull()}class kr extends $0{constructor(e,t,i,s,l){super(e,t,s,l),this.provider=i,this.authWindow=null,this.pollId=null,kr.currentPopupAction&&kr.currentPopupAction.cancel(),kr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){no(this.filter.length===1,"Popup operations only handle one event");const e=sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OM.get())};e()}}kr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="pendingRedirect",Yc=new Map;class BM extends $0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const i=await HM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HM(n,e){const t=YM(e),i=zM(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function GM(n,e){Yc.set(n._key(),e)}function zM(n){return ji(n._redirectPersistence)}function YM(n){return zc(qM,n.config.apiKey,n.name)}async function $M(n,e,t=!1){if(Kn(n.app))return Promise.reject(Ur(n));const i=wf(n),s=Y0(i,e),d=await new BM(i,s,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=600*1e3;class JM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!K0(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Xn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KM&&this.cachedEventUids.clear(),this.cachedEventUids.has(bv(e))}saveEventToCache(e){this.cachedEventUids.add(bv(e)),this.lastProcessedEventTime=Date.now()}}function bv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function K0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(n,e={}){return ca(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZM=/^https?/;async function jM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await XM(n);for(const t of e)try{if(e1(t))return}catch{}Si(n,"unauthorized-domain")}function e1(n){const e=ym(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!ZM.test(t))return!1;if(WM.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new tu(3e4,6e4);function Pv(){const n=yi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function n1(n){return new Promise((e,t)=>{var s,l,d;function i(){Pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pv(),t(Xn(n,"network-request-failed"))},timeout:t1.get()})}if((l=(s=yi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((d=yi().gapi)!=null&&d.load)i();else{const h=sM("iframefcb");return yi()[h]=()=>{gapi.load?i():t(Xn(n,"network-request-failed"))},oM(`${rM()}?onload=${h}`).catch(y=>t(y))}}).catch(e=>{throw $c=null,e})}let $c=null;function i1(n){return $c=$c||n1(n),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new tu(5e3,15e3),r1="__/auth/iframe",s1="emulator/auth/iframe",a1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u1(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ep(e,s1):`https://${n.config.authDomain}/${r1}`,i={apiKey:e.apiKey,appName:n.name,v:ua},s=l1.get(n.config.apiHost);s&&(i.eid=s);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${eu(i).slice(1)}`}async function c1(n){const e=await i1(n),t=yi().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:u1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a1,dontclear:!0},i=>new Promise(async(s,l)=>{await i.restyle({setHideOnLeave:!1});const d=Xn(n,"network-request-failed"),h=yi().setTimeout(()=>{l(d)},o1.get());function y(){yi().clearTimeout(h),s(i)}i.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d1=500,h1=600,m1="_blank",p1="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g1(n,e,t,i=d1,s=h1){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const y={...f1,width:i.toString(),height:s.toString(),top:l,left:d},p=rn().toLowerCase();t&&(h=w0(p)?m1:t),I0(p)&&(e=e||p1,y.scrollbars="yes");const _=Object.entries(y).reduce((S,[w,V])=>`${S}${w}=${V},`,"");if(Xw(p)&&h!=="_self")return y1(e||"",h),new kv(null);const E=window.open(e||"",h,_);Re(E,n,"popup-blocked");try{E.focus()}catch{}return new kv(E)}function y1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="__/auth/handler",v1="emulator/auth/handler",T1=encodeURIComponent("fac");async function Vv(n,e,t,i,s,l){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ua,eventId:s};if(e instanceof rp){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",yR(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))d[_]=E}if(e instanceof nu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(d.scopes=_.join(","))}n.tenantId&&(d.tid=n.tenantId);const h=d;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const y=await n._getAppCheckToken(),p=y?`#${T1}=${encodeURIComponent(y)}`:"";return`${E1(n)}?${eu(h).slice(1)}${p}`}function E1({config:n}){return n.emulator?ep(n,v1):`https://${n.authDomain}/${_1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="webStorageSupport";class S1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q0,this._completeRedirectFn=$M,this._overrideRedirectResult=GM}async _openPopup(e,t,i,s){var d;no((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const l=await Vv(e,t,i,ym(),s);return g1(e,l,sp())}async _openRedirect(e,t,i,s){await this._originValidation(e);const l=await Vv(e,t,i,ym(),s);return IM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(no(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await c1(e),i=new JM(e);return t.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(om,{type:om},s=>{var d;const l=(d=s==null?void 0:s[0])==null?void 0:d[om];l!==void 0&&t(!!l),Si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return b0()||R0()||ip()}}const C1=S1;var Uv="@firebase/auth",Lv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R1(n){ea(new Fr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=i.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P0(n)},p=new nM(i,s,l,y);return lM(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ea(new Fr("auth-internal",e=>{const t=wf(e.getProvider("auth").getImmediate());return(i=>new A1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zo(Uv,Lv,I1(n)),zo(Uv,Lv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=300,M1=u0("authIdTokenMaxAge")||w1;let Ov=null;const D1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>M1)return;const s=t==null?void 0:t.token;Ov!==s&&(Ov=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function x1(n=p0()){const e=Wm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=aM(n,{popupRedirectResolver:C1,persistence:[kM,SM,q0]}),i=u0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=D1(l.toString());yM(t,d,()=>d(t.currentUser)),gM(t,h=>d(h))}}const s=a0("auth");return s&&uM(t,`http://${s}`),t}function N1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}iM({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const l=Xn("internal-error");l.customData=s,t(l)},i.type="text/javascript",i.charset="UTF-8",N1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R1("Browser");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yo,J0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,M){function D(){}D.prototype=M.prototype,x.D=M.prototype,x.prototype=new D,x.prototype.constructor=x,x.C=function(b,k,F){for(var P=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)P[ct-2]=arguments[ct];return M.prototype[k].apply(b,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,M,D){D||(D=0);var b=Array(16);if(typeof M=="string")for(var k=0;16>k;++k)b[k]=M.charCodeAt(D++)|M.charCodeAt(D++)<<8|M.charCodeAt(D++)<<16|M.charCodeAt(D++)<<24;else for(k=0;16>k;++k)b[k]=M[D++]|M[D++]<<8|M[D++]<<16|M[D++]<<24;M=x.g[0],D=x.g[1],k=x.g[2];var F=x.g[3],P=M+(F^D&(k^F))+b[0]+3614090360&4294967295;M=D+(P<<7&4294967295|P>>>25),P=F+(k^M&(D^k))+b[1]+3905402710&4294967295,F=M+(P<<12&4294967295|P>>>20),P=k+(D^F&(M^D))+b[2]+606105819&4294967295,k=F+(P<<17&4294967295|P>>>15),P=D+(M^k&(F^M))+b[3]+3250441966&4294967295,D=k+(P<<22&4294967295|P>>>10),P=M+(F^D&(k^F))+b[4]+4118548399&4294967295,M=D+(P<<7&4294967295|P>>>25),P=F+(k^M&(D^k))+b[5]+1200080426&4294967295,F=M+(P<<12&4294967295|P>>>20),P=k+(D^F&(M^D))+b[6]+2821735955&4294967295,k=F+(P<<17&4294967295|P>>>15),P=D+(M^k&(F^M))+b[7]+4249261313&4294967295,D=k+(P<<22&4294967295|P>>>10),P=M+(F^D&(k^F))+b[8]+1770035416&4294967295,M=D+(P<<7&4294967295|P>>>25),P=F+(k^M&(D^k))+b[9]+2336552879&4294967295,F=M+(P<<12&4294967295|P>>>20),P=k+(D^F&(M^D))+b[10]+4294925233&4294967295,k=F+(P<<17&4294967295|P>>>15),P=D+(M^k&(F^M))+b[11]+2304563134&4294967295,D=k+(P<<22&4294967295|P>>>10),P=M+(F^D&(k^F))+b[12]+1804603682&4294967295,M=D+(P<<7&4294967295|P>>>25),P=F+(k^M&(D^k))+b[13]+4254626195&4294967295,F=M+(P<<12&4294967295|P>>>20),P=k+(D^F&(M^D))+b[14]+2792965006&4294967295,k=F+(P<<17&4294967295|P>>>15),P=D+(M^k&(F^M))+b[15]+1236535329&4294967295,D=k+(P<<22&4294967295|P>>>10),P=M+(k^F&(D^k))+b[1]+4129170786&4294967295,M=D+(P<<5&4294967295|P>>>27),P=F+(D^k&(M^D))+b[6]+3225465664&4294967295,F=M+(P<<9&4294967295|P>>>23),P=k+(M^D&(F^M))+b[11]+643717713&4294967295,k=F+(P<<14&4294967295|P>>>18),P=D+(F^M&(k^F))+b[0]+3921069994&4294967295,D=k+(P<<20&4294967295|P>>>12),P=M+(k^F&(D^k))+b[5]+3593408605&4294967295,M=D+(P<<5&4294967295|P>>>27),P=F+(D^k&(M^D))+b[10]+38016083&4294967295,F=M+(P<<9&4294967295|P>>>23),P=k+(M^D&(F^M))+b[15]+3634488961&4294967295,k=F+(P<<14&4294967295|P>>>18),P=D+(F^M&(k^F))+b[4]+3889429448&4294967295,D=k+(P<<20&4294967295|P>>>12),P=M+(k^F&(D^k))+b[9]+568446438&4294967295,M=D+(P<<5&4294967295|P>>>27),P=F+(D^k&(M^D))+b[14]+3275163606&4294967295,F=M+(P<<9&4294967295|P>>>23),P=k+(M^D&(F^M))+b[3]+4107603335&4294967295,k=F+(P<<14&4294967295|P>>>18),P=D+(F^M&(k^F))+b[8]+1163531501&4294967295,D=k+(P<<20&4294967295|P>>>12),P=M+(k^F&(D^k))+b[13]+2850285829&4294967295,M=D+(P<<5&4294967295|P>>>27),P=F+(D^k&(M^D))+b[2]+4243563512&4294967295,F=M+(P<<9&4294967295|P>>>23),P=k+(M^D&(F^M))+b[7]+1735328473&4294967295,k=F+(P<<14&4294967295|P>>>18),P=D+(F^M&(k^F))+b[12]+2368359562&4294967295,D=k+(P<<20&4294967295|P>>>12),P=M+(D^k^F)+b[5]+4294588738&4294967295,M=D+(P<<4&4294967295|P>>>28),P=F+(M^D^k)+b[8]+2272392833&4294967295,F=M+(P<<11&4294967295|P>>>21),P=k+(F^M^D)+b[11]+1839030562&4294967295,k=F+(P<<16&4294967295|P>>>16),P=D+(k^F^M)+b[14]+4259657740&4294967295,D=k+(P<<23&4294967295|P>>>9),P=M+(D^k^F)+b[1]+2763975236&4294967295,M=D+(P<<4&4294967295|P>>>28),P=F+(M^D^k)+b[4]+1272893353&4294967295,F=M+(P<<11&4294967295|P>>>21),P=k+(F^M^D)+b[7]+4139469664&4294967295,k=F+(P<<16&4294967295|P>>>16),P=D+(k^F^M)+b[10]+3200236656&4294967295,D=k+(P<<23&4294967295|P>>>9),P=M+(D^k^F)+b[13]+681279174&4294967295,M=D+(P<<4&4294967295|P>>>28),P=F+(M^D^k)+b[0]+3936430074&4294967295,F=M+(P<<11&4294967295|P>>>21),P=k+(F^M^D)+b[3]+3572445317&4294967295,k=F+(P<<16&4294967295|P>>>16),P=D+(k^F^M)+b[6]+76029189&4294967295,D=k+(P<<23&4294967295|P>>>9),P=M+(D^k^F)+b[9]+3654602809&4294967295,M=D+(P<<4&4294967295|P>>>28),P=F+(M^D^k)+b[12]+3873151461&4294967295,F=M+(P<<11&4294967295|P>>>21),P=k+(F^M^D)+b[15]+530742520&4294967295,k=F+(P<<16&4294967295|P>>>16),P=D+(k^F^M)+b[2]+3299628645&4294967295,D=k+(P<<23&4294967295|P>>>9),P=M+(k^(D|~F))+b[0]+4096336452&4294967295,M=D+(P<<6&4294967295|P>>>26),P=F+(D^(M|~k))+b[7]+1126891415&4294967295,F=M+(P<<10&4294967295|P>>>22),P=k+(M^(F|~D))+b[14]+2878612391&4294967295,k=F+(P<<15&4294967295|P>>>17),P=D+(F^(k|~M))+b[5]+4237533241&4294967295,D=k+(P<<21&4294967295|P>>>11),P=M+(k^(D|~F))+b[12]+1700485571&4294967295,M=D+(P<<6&4294967295|P>>>26),P=F+(D^(M|~k))+b[3]+2399980690&4294967295,F=M+(P<<10&4294967295|P>>>22),P=k+(M^(F|~D))+b[10]+4293915773&4294967295,k=F+(P<<15&4294967295|P>>>17),P=D+(F^(k|~M))+b[1]+2240044497&4294967295,D=k+(P<<21&4294967295|P>>>11),P=M+(k^(D|~F))+b[8]+1873313359&4294967295,M=D+(P<<6&4294967295|P>>>26),P=F+(D^(M|~k))+b[15]+4264355552&4294967295,F=M+(P<<10&4294967295|P>>>22),P=k+(M^(F|~D))+b[6]+2734768916&4294967295,k=F+(P<<15&4294967295|P>>>17),P=D+(F^(k|~M))+b[13]+1309151649&4294967295,D=k+(P<<21&4294967295|P>>>11),P=M+(k^(D|~F))+b[4]+4149444226&4294967295,M=D+(P<<6&4294967295|P>>>26),P=F+(D^(M|~k))+b[11]+3174756917&4294967295,F=M+(P<<10&4294967295|P>>>22),P=k+(M^(F|~D))+b[2]+718787259&4294967295,k=F+(P<<15&4294967295|P>>>17),P=D+(F^(k|~M))+b[9]+3951481745&4294967295,x.g[0]=x.g[0]+M&4294967295,x.g[1]=x.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+F&4294967295}i.prototype.u=function(x,M){M===void 0&&(M=x.length);for(var D=M-this.blockSize,b=this.B,k=this.h,F=0;F<M;){if(k==0)for(;F<=D;)s(this,x,F),F+=this.blockSize;if(typeof x=="string"){for(;F<M;)if(b[k++]=x.charCodeAt(F++),k==this.blockSize){s(this,b),k=0;break}}else for(;F<M;)if(b[k++]=x[F++],k==this.blockSize){s(this,b),k=0;break}}this.h=k,this.o+=M},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var M=1;M<x.length-8;++M)x[M]=0;var D=8*this.o;for(M=x.length-8;M<x.length;++M)x[M]=D&255,D/=256;for(this.u(x),x=Array(16),M=D=0;4>M;++M)for(var b=0;32>b;b+=8)x[D++]=this.g[M]>>>b&255;return x};function l(x,M){var D=h;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=M(x)}function d(x,M){this.h=M;for(var D=[],b=!0,k=x.length-1;0<=k;k--){var F=x[k]|0;b&&F==M||(D[k]=F,b=!1)}this.g=D}var h={};function y(x){return-128<=x&&128>x?l(x,function(M){return new d([M|0],0>M?-1:0)}):new d([x|0],0>x?-1:0)}function p(x){if(isNaN(x)||!isFinite(x))return E;if(0>x)return H(p(-x));for(var M=[],D=1,b=0;x>=D;b++)M[b]=x/D|0,D*=4294967296;return new d(M,0)}function _(x,M){if(x.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(x.charAt(0)=="-")return H(_(x.substring(1),M));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=p(Math.pow(M,8)),b=E,k=0;k<x.length;k+=8){var F=Math.min(8,x.length-k),P=parseInt(x.substring(k,k+F),M);8>F?(F=p(Math.pow(M,F)),b=b.j(F).add(p(P))):(b=b.j(D),b=b.add(p(P)))}return b}var E=y(0),S=y(1),w=y(16777216);n=d.prototype,n.m=function(){if(q(this))return-H(this).m();for(var x=0,M=1,D=0;D<this.g.length;D++){var b=this.i(D);x+=(0<=b?b:4294967296+b)*M,M*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(V(this))return"0";if(q(this))return"-"+H(this).toString(x);for(var M=p(Math.pow(x,6)),D=this,b="";;){var k=j(D,M).g;D=oe(D,k.j(M));var F=((0<D.g.length?D.g[0]:D.h)>>>0).toString(x);if(D=k,V(D))return F+b;for(;6>F.length;)F="0"+F;b=F+b}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function V(x){if(x.h!=0)return!1;for(var M=0;M<x.g.length;M++)if(x.g[M]!=0)return!1;return!0}function q(x){return x.h==-1}n.l=function(x){return x=oe(this,x),q(x)?-1:V(x)?0:1};function H(x){for(var M=x.g.length,D=[],b=0;b<M;b++)D[b]=~x.g[b];return new d(D,~x.h).add(S)}n.abs=function(){return q(this)?H(this):this},n.add=function(x){for(var M=Math.max(this.g.length,x.g.length),D=[],b=0,k=0;k<=M;k++){var F=b+(this.i(k)&65535)+(x.i(k)&65535),P=(F>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);b=P>>>16,F&=65535,P&=65535,D[k]=P<<16|F}return new d(D,D[D.length-1]&-2147483648?-1:0)};function oe(x,M){return x.add(H(M))}n.j=function(x){if(V(this)||V(x))return E;if(q(this))return q(x)?H(this).j(H(x)):H(H(this).j(x));if(q(x))return H(this.j(H(x)));if(0>this.l(w)&&0>x.l(w))return p(this.m()*x.m());for(var M=this.g.length+x.g.length,D=[],b=0;b<2*M;b++)D[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<x.g.length;k++){var F=this.i(b)>>>16,P=this.i(b)&65535,ct=x.i(k)>>>16,qe=x.i(k)&65535;D[2*b+2*k]+=P*qe,Q(D,2*b+2*k),D[2*b+2*k+1]+=F*qe,Q(D,2*b+2*k+1),D[2*b+2*k+1]+=P*ct,Q(D,2*b+2*k+1),D[2*b+2*k+2]+=F*ct,Q(D,2*b+2*k+2)}for(b=0;b<M;b++)D[b]=D[2*b+1]<<16|D[2*b];for(b=M;b<2*M;b++)D[b]=0;return new d(D,0)};function Q(x,M){for(;(x[M]&65535)!=x[M];)x[M+1]+=x[M]>>>16,x[M]&=65535,M++}function X(x,M){this.g=x,this.h=M}function j(x,M){if(V(M))throw Error("division by zero");if(V(x))return new X(E,E);if(q(x))return M=j(H(x),M),new X(H(M.g),H(M.h));if(q(M))return M=j(x,H(M)),new X(H(M.g),M.h);if(30<x.g.length){if(q(x)||q(M))throw Error("slowDivide_ only works with positive integers.");for(var D=S,b=M;0>=b.l(x);)D=J(D),b=J(b);var k=se(D,1),F=se(b,1);for(b=se(b,2),D=se(D,2);!V(b);){var P=F.add(b);0>=P.l(x)&&(k=k.add(D),F=P),b=se(b,1),D=se(D,1)}return M=oe(x,k.j(M)),new X(k,M)}for(k=E;0<=x.l(M);){for(D=Math.max(1,Math.floor(x.m()/M.m())),b=Math.ceil(Math.log(D)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),F=p(D),P=F.j(M);q(P)||0<P.l(x);)D-=b,F=p(D),P=F.j(M);V(F)&&(F=S),k=k.add(F),x=oe(x,P)}return new X(k,x)}n.A=function(x){return j(this,x).h},n.and=function(x){for(var M=Math.max(this.g.length,x.g.length),D=[],b=0;b<M;b++)D[b]=this.i(b)&x.i(b);return new d(D,this.h&x.h)},n.or=function(x){for(var M=Math.max(this.g.length,x.g.length),D=[],b=0;b<M;b++)D[b]=this.i(b)|x.i(b);return new d(D,this.h|x.h)},n.xor=function(x){for(var M=Math.max(this.g.length,x.g.length),D=[],b=0;b<M;b++)D[b]=this.i(b)^x.i(b);return new d(D,this.h^x.h)};function J(x){for(var M=x.g.length+1,D=[],b=0;b<M;b++)D[b]=x.i(b)<<1|x.i(b-1)>>>31;return new d(D,x.h)}function se(x,M){var D=M>>5;M%=32;for(var b=x.g.length-D,k=[],F=0;F<b;F++)k[F]=0<M?x.i(F+D)>>>M|x.i(F+D+1)<<32-M:x.i(F+D);return new d(k,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,J0=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=_,Yo=d}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q0,xl,X0,Kc,Tm,W0,Z0,j0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,T,C){return m==Array.prototype||m==Object.prototype||(m[T]=C.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vc=="object"&&Vc];for(var T=0;T<m.length;++T){var C=m[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function s(m,T){if(T)e:{var C=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var G=m[R];if(!(G in C))break e;C=C[G]}m=m[m.length-1],R=C[m],T=T(R),T!=R&&T!=null&&e(C,m,{configurable:!0,writable:!0,value:T})}}function l(m,T){m instanceof String&&(m+="");var C=0,R=!1,G={next:function(){if(!R&&C<m.length){var W=C++;return{value:T(W,m[W]),done:!1}}return R=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(m){return m||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},h=this||self;function y(m){var T=typeof m;return T=T!="object"?T:m?Array.isArray(m)?"array":T:"null",T=="array"||T=="object"&&typeof m.length=="number"}function p(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function _(m,T,C){return m.call.apply(m.bind,arguments)}function E(m,T,C){if(!m)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,R),m.apply(T,G)}}return function(){return m.apply(T,arguments)}}function S(m,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function w(m,T){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function V(m,T){function C(){}C.prototype=T.prototype,m.aa=T.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(R,G,W){for(var ue=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ue[Be-2]=arguments[Be];return T.prototype[G].apply(R,ue)}}function q(m){const T=m.length;if(0<T){const C=Array(T);for(let R=0;R<T;R++)C[R]=m[R];return C}return[]}function H(m,T){for(let C=1;C<arguments.length;C++){const R=arguments[C];if(y(R)){const G=m.length||0,W=R.length||0;m.length=G+W;for(let ue=0;ue<W;ue++)m[G+ue]=R[ue]}else m.push(R)}}class oe{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function Q(m){return/^[\s\xa0]*$/.test(m)}function X(){var m=h.navigator;return m&&(m=m.userAgent)?m:""}function j(m){return j[" "](m),m}j[" "]=function(){};var J=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function se(m,T,C){for(const R in m)T.call(C,m[R],R,m)}function x(m,T){for(const C in m)T.call(void 0,m[C],C,m)}function M(m){const T={};for(const C in m)T[C]=m[C];return T}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(m,T){let C,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(C in R)m[C]=R[C];for(let W=0;W<D.length;W++)C=D[W],Object.prototype.hasOwnProperty.call(R,C)&&(m[C]=R[C])}}function k(m){var T=1;m=m.split(":");const C=[];for(;0<T&&m.length;)C.push(m.shift()),T--;return m.length&&C.push(m.join(":")),C}function F(m){h.setTimeout(()=>{throw m},0)}function P(){var m=Ye;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class ct{constructor(){this.h=this.g=null}add(T,C){const R=qe.get();R.set(T,C),this.h?this.h.next=R:this.g=R,this.h=R}}var qe=new oe(()=>new Z,m=>m.reset());class Z{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,pe=!1,Ye=new ct,U=()=>{const m=h.Promise.resolve(void 0);ce=()=>{m.then(re)}};var re=()=>{for(var m;m=P();){try{m.h.call(m.g)}catch(C){F(C)}var T=qe;T.j(m),100>T.h&&(T.h++,m.next=T.g,T.g=m)}pe=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};h.addEventListener("test",C,T),h.removeEventListener("test",C,T)}catch{}return m})();function be(m,T){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget){if(J){e:{try{j(T.nodeName);var G=!0;break e}catch{}G=!1}G||(T=null)}}else C=="mouseover"?T=m.fromElement:C=="mouseout"&&(T=m.toElement);this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ae[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&be.aa.h.call(this)}}V(be,le);var Ae={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),De=0;function yt(m,T,C,R,G){this.listener=m,this.proxy=null,this.src=T,this.type=C,this.capture=!!R,this.ha=G,this.key=++De,this.da=this.fa=!1}function Mt(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function qn(m){this.src=m,this.g={},this.h=0}qn.prototype.add=function(m,T,C,R,G){var W=m.toString();m=this.g[W],m||(m=this.g[W]=[],this.h++);var ue=jn(m,T,R,G);return-1<ue?(T=m[ue],C||(T.fa=!1)):(T=new yt(T,this.src,W,!!R,G),T.fa=C,m.push(T)),T};function Zn(m,T){var C=T.type;if(C in m.g){var R=m.g[C],G=Array.prototype.indexOf.call(R,T,void 0),W;(W=0<=G)&&Array.prototype.splice.call(R,G,1),W&&(Mt(T),m.g[C].length==0&&(delete m.g[C],m.h--))}}function jn(m,T,C,R){for(var G=0;G<m.length;++G){var W=m[G];if(!W.da&&W.listener==T&&W.capture==!!C&&W.ha==R)return G}return-1}var so="closure_lm_"+(1e6*Math.random()|0),va={};function cu(m,T,C,R,G){if(Array.isArray(T)){for(var W=0;W<T.length;W++)cu(m,T[W],C,R,G);return null}return C=fu(C),m&&m[Ee]?m.K(T,C,p(R)?!!R.capture:!1,G):Cn(m,T,C,!1,R,G)}function Cn(m,T,C,R,G,W){if(!T)throw Error("Invalid event type");var ue=p(G)?!!G.capture:!!G,Be=Wr(m);if(Be||(m[so]=Be=new qn(m)),C=Be.add(T,C,R,ue,W),C.proxy)return C;if(R=$f(),C.proxy=R,R.src=m,R.listener=C,m.addEventListener)_e||(G=ue),G===void 0&&(G=!1),m.addEventListener(T.toString(),R,G);else if(m.attachEvent)m.attachEvent(jo(T.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function $f(){function m(C){return T.call(m.src,m.listener,C)}const T=Kf;return m}function Ta(m,T,C,R,G){if(Array.isArray(T))for(var W=0;W<T.length;W++)Ta(m,T[W],C,R,G);else R=p(R)?!!R.capture:!!R,C=fu(C),m&&m[Ee]?(m=m.i,T=String(T).toString(),T in m.g&&(W=m.g[T],C=jn(W,C,R,G),-1<C&&(Mt(W[C]),Array.prototype.splice.call(W,C,1),W.length==0&&(delete m.g[T],m.h--)))):m&&(m=Wr(m))&&(T=m.g[T.toString()],m=-1,T&&(m=jn(T,C,R,G)),(C=-1<m?T[m]:null)&&Xr(C))}function Xr(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[Ee])Zn(T.i,m);else{var C=m.type,R=m.proxy;T.removeEventListener?T.removeEventListener(C,R,m.capture):T.detachEvent?T.detachEvent(jo(C),R):T.addListener&&T.removeListener&&T.removeListener(R),(C=Wr(T))?(Zn(C,m),C.h==0&&(C.src=null,T[so]=null)):Mt(m)}}}function jo(m){return m in va?va[m]:va[m]="on"+m}function Kf(m,T){if(m.da)m=!0;else{T=new be(T,this);var C=m.listener,R=m.ha||m.src;m.fa&&Xr(m),m=C.call(R,T)}return m}function Wr(m){return m=m[so],m instanceof qn?m:null}var Ea="__closure_events_fn_"+(1e9*Math.random()>>>0);function fu(m){return typeof m=="function"?m:(m[Ea]||(m[Ea]=function(T){return m.handleEvent(T)}),m[Ea])}function mt(){fe.call(this),this.i=new qn(this),this.M=this,this.F=null}V(mt,fe),mt.prototype[Ee]=!0,mt.prototype.removeEventListener=function(m,T,C,R){Ta(this,m,T,C,R)};function We(m,T){var C,R=m.F;if(R)for(C=[];R;R=R.F)C.push(R);if(m=m.M,R=T.type||T,typeof T=="string")T=new le(T,m);else if(T instanceof le)T.target=T.target||m;else{var G=T;T=new le(R,m),b(T,G)}if(G=!0,C)for(var W=C.length-1;0<=W;W--){var ue=T.g=C[W];G=mn(ue,R,!0,T)&&G}if(ue=T.g=m,G=mn(ue,R,!0,T)&&G,G=mn(ue,R,!1,T)&&G,C)for(W=0;W<C.length;W++)ue=T.g=C[W],G=mn(ue,R,!1,T)&&G}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var m=this.i,T;for(T in m.g){for(var C=m.g[T],R=0;R<C.length;R++)Mt(C[R]);delete m.g[T],m.h--}}this.F=null},mt.prototype.K=function(m,T,C,R){return this.i.add(String(m),T,!1,C,R)},mt.prototype.L=function(m,T,C,R){return this.i.add(String(m),T,!0,C,R)};function mn(m,T,C,R){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();for(var G=!0,W=0;W<T.length;++W){var ue=T[W];if(ue&&!ue.da&&ue.capture==C){var Be=ue.listener,xt=ue.ha||ue.src;ue.fa&&Zn(m.i,ue),G=Be.call(xt,R)!==!1&&G}}return G&&!R.defaultPrevented}function Wt(m,T,C){if(typeof m=="function")C&&(m=S(m,C));else if(m&&typeof m.handleEvent=="function")m=S(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:h.setTimeout(m,T||0)}function du(m){m.g=Wt(()=>{m.g=null,m.i&&(m.i=!1,du(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class Jf extends fe{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:du(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(m){fe.call(this),this.h=m,this.g={}}V(er,fe);var tr=[];function nr(m){se(m.g,function(T,C){this.g.hasOwnProperty(C)&&Xr(T)},m),m.g={}}er.prototype.N=function(){er.aa.N.call(this),nr(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=h.JSON.stringify,Zr=h.JSON.parse,ir=class{stringify(m){return h.JSON.stringify(m,void 0)}parse(m){return h.JSON.parse(m,void 0)}};function Sa(){}Sa.prototype.h=null;function Ca(m){return m.h||(m.h=m.i())}function Aa(){}var Ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wi(){le.call(this,"d")}V(wi,le);function Ia(){le.call(this,"c")}V(Ia,le);var ei={},Ra=null;function ao(){return Ra=Ra||new mt}ei.La="serverreachability";function jr(m){le.call(this,ei.La,m)}V(jr,le);function lo(m){const T=ao();We(T,new jr(T))}ei.STAT_EVENT="statevent";function hu(m,T){le.call(this,ei.STAT_EVENT,m),this.stat=T}V(hu,le);function lt(m){const T=ao();We(T,new hu(T,m))}ei.Ma="timingevent";function Dt(m,T){le.call(this,ei.Ma,m),this.size=T}V(Dt,le);function St(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){m()},T)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function wa(m,T,C,R,G,W){m.info(function(){if(m.g)if(W)for(var ue="",Be=W.split("&"),xt=0;xt<Be.length;xt++){var He=Be[xt].split("=");if(1<He.length){var Lt=He[0];He=He[1];var Nt=Lt.split("_");ue=2<=Nt.length&&Nt[1]=="type"?ue+(Lt+"="+He+"&"):ue+(Lt+"=redacted&")}}else ue=null;else ue=W;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+T+`
`+C+`
`+ue})}function Qf(m,T,C,R,G,W,ue){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+T+`
`+C+`
`+W+" "+ue})}function uo(m,T,C,R){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+or(m,C)+(R?" "+R:"")})}function mu(m,T){m.info(function(){return"TIMEOUT: "+T})}An.prototype.info=function(){};function or(m,T){if(!m.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var R=C[m];if(!(2>R.length)){var G=R[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ue=1;ue<G.length;ue++)G[ue]=""}}}}return Bn(C)}catch{return T}}var co={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ni(){}V(ni,Sa),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},ti=new ni;function sn(m,T,C,R){this.j=m,this.i=T,this.l=C,this.R=R||1,this.U=new er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}var Ma={},es={};function Hn(m,T,C){m.L=1,m.v=ur(pn(T)),m.m=C,m.P=!0,Di(m,null)}function Di(m,T){m.F=Date.now(),rr(m),m.A=pn(m.v);var C=m.A,R=m.R;Array.isArray(R)||(R=[String(R)]),ka(C.i,"t",R),m.C=0,C=m.j.J,m.h=new _t,m.g=xu(m.j,C?T:null,!m.m),0<m.O&&(m.M=new Jf(S(m.Y,m,m.g),m.O)),T=m.U,C=m.g,R=m.ca;var G="readystatechange";Array.isArray(G)||(G&&(tr[0]=G.toString()),G=tr);for(var W=0;W<G.length;W++){var ue=cu(C,G[W],R||T.handleEvent,!1,T.h||T);if(!ue)break;T.g[ue.key]=ue}T=m.H?M(m.H):{},m.m?(m.u||(m.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,T)):(m.u="GET",m.g.ea(m.A,m.u,null,T)),lo(),wa(m.i,m.u,m.A,m.l,m.R,m.m)}sn.prototype.ca=function(m){m=m.target;const T=this.M;T&&Mn(m)==3?T.j():this.Y(m)},sn.prototype.Y=function(m){try{if(m==this.g)e:{const Nt=Mn(this.g);var T=this.g.Ba();const Li=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Su(this.g)))){this.J||Nt!=4||T==7||(T==8||0>=Li?lo(3):lo(2)),fo(this);var C=this.g.Z();this.X=C;t:if(pu(this)){var R=Su(this.g);m="";var G=R.length,W=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),ii(this);var ue="";break t}this.h.i=new h.TextDecoder}for(T=0;T<G;T++)this.h.h=!0,m+=this.h.i.decode(R[T],{stream:!(W&&T==G-1)});R.length=0,this.h.g+=m,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=C==200,Qf(this.i,this.u,this.A,this.l,this.R,Nt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,xt=this.g;if((Be=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Be)){var He=Be;break t}}He=null}if(C=He)uo(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sr(this,C);else{this.o=!1,this.s=3,lt(12),Gt(this),ii(this);break e}}if(this.P){C=!0;let zt;for(;!this.J&&this.C<ue.length;)if(zt=gu(this,ue),zt==es){Nt==4&&(this.s=4,lt(14),C=!1),uo(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Ma){this.s=4,lt(15),uo(this.i,this.l,ue,"[Invalid Chunk]"),C=!1;break}else uo(this.i,this.l,zt,null),sr(this,zt);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ue.length!=0||this.h.h||(this.s=1,lt(16),C=!1),this.o=this.o&&C,!C)uo(this.i,this.l,ue,"[Invalid Chunked Response]"),Gt(this),ii(this);else if(0<ue.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),yr(Lt),Lt.M=!0,lt(11))}}else uo(this.i,this.l,ue,null),sr(this,ue);Nt==4&&Gt(this),this.o&&!this.J&&(Nt==4?wu(this.j,this):(this.o=!1,rr(this)))}else ed(this.g),C==400&&0<ue.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Gt(this),ii(this)}}}catch{}finally{}};function pu(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function gu(m,T){var C=m.C,R=T.indexOf(`
`,C);return R==-1?es:(C=Number(T.substring(C,R)),isNaN(C)?Ma:(R+=1,R+C>T.length?es:(T=T.slice(R,R+C),m.C=R+C,T)))}sn.prototype.cancel=function(){this.J=!0,Gt(this)};function rr(m){m.S=Date.now()+m.I,yu(m,m.I)}function yu(m,T){if(m.B!=null)throw Error("WatchDog timer not null");m.B=St(S(m.ba,m),T)}function fo(m){m.B&&(h.clearTimeout(m.B),m.B=null)}sn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(mu(this.i,this.A),this.L!=2&&(lo(),lt(17)),Gt(this),this.s=2,ii(this)):yu(this,this.S-m)};function ii(m){m.j.G==0||m.J||wu(m.j,m)}function Gt(m){fo(m);var T=m.M;T&&typeof T.ma=="function"&&T.ma(),m.M=null,nr(m.U),m.g&&(T=m.g,m.g=null,T.abort(),T.ma())}function sr(m,T){try{var C=m.j;if(C.G!=0&&(C.g==m||Da(C.h,m))){if(!m.K&&Da(C.h,m)&&C.G==3){try{var R=C.Da.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)ds(C),cs(C);else break e;Fa(C),lt(18)}}else C.za=G[1],0<C.za-C.T&&37500>G[2]&&C.F&&C.v==0&&!C.C&&(C.C=St(S(C.Za,C),6e3));if(1>=ns(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ui(C,11)}else if((m.K||C.g==m)&&ds(C),!Q(T))for(G=C.Da.g.parse(T),T=0;T<G.length;T++){let He=G[T];if(C.T=He[0],He=He[1],C.G==2)if(He[0]=="c"){C.K=He[1],C.ia=He[2];const Lt=He[3];Lt!=null&&(C.la=Lt,C.j.info("VER="+C.la));const Nt=He[4];Nt!=null&&(C.Aa=Nt,C.j.info("SVER="+C.Aa));const Li=He[5];Li!=null&&typeof Li=="number"&&0<Li&&(R=1.5*Li,C.L=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const zt=m.g;if(zt){const ci=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ci){var W=R.h;W.g||ci.indexOf("spdy")==-1&&ci.indexOf("quic")==-1&&ci.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(is(W,W.h),W.h=null))}if(R.D){const Ba=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ba&&(R.ya=Ba,et(R.I,R.D,Ba))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),R=C;var ue=m;if(R.qa=Du(R,R.J?R.ia:null,R.W),ue.K){an(R.h,ue);var Be=ue,xt=R.L;xt&&(Be.I=xt),Be.B&&(fo(Be),rr(Be)),R.g=ue}else Iu(R);0<C.i.length&&fs(C)}else He[0]!="stop"&&He[0]!="close"||Ui(C,7);else C.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ui(C,7):La(C):He[0]!="noop"&&C.l&&C.l.ta(He),C.v=0)}}lo(4)}catch{}}var _u=class{constructor(m,T){this.g=m,this.map=T}};function xi(m){this.l=m||10,h.PerformanceNavigationTiming?(m=h.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ts(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ns(m){return m.h?1:m.g?m.g.size:0}function Da(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function is(m,T){m.g?m.g.add(T):m.h=T}function an(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}xi.prototype.cancel=function(){if(this.i=xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function xa(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const C of m.g.values())T=T.concat(C.D);return T}return q(m.i)}function Xf(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(y(m)){for(var T=[],C=m.length,R=0;R<C;R++)T.push(m[R]);return T}T=[],C=0;for(R in m)T[C++]=m[R];return T}function os(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(y(m)||typeof m=="string"){var T=[];m=m.length;for(var C=0;C<m;C++)T.push(C);return T}T=[],C=0;for(const R in m)T[C++]=R;return T}}}function Na(m,T){if(m.forEach&&typeof m.forEach=="function")m.forEach(T,void 0);else if(y(m)||typeof m=="string")Array.prototype.forEach.call(m,T,void 0);else for(var C=os(m),R=Xf(m),G=R.length,W=0;W<G;W++)T.call(void 0,R[W],C&&C[W],m)}var ar=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wf(m,T){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var R=m[C].indexOf("="),G=null;if(0<=R){var W=m[C].substring(0,R);G=m[C].substring(R+1)}else W=m[C];T(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ct(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ct){this.h=m.h,lr(this,m.j),this.o=m.o,this.g=m.g,ho(this,m.s),this.l=m.l;var T=m.i,C=new bi;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Ni(this,C),this.m=m.m}else m&&(T=String(m).match(ar))?(this.h=!1,lr(this,T[1]||"",!0),this.o=In(T[2]||""),this.g=In(T[3]||"",!0),ho(this,T[4]),this.l=In(T[5]||"",!0),Ni(this,T[6]||"",!0),this.m=In(T[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}Ct.prototype.toString=function(){var m=[],T=this.j;T&&m.push(cr(T,ba,!0),":");var C=this.g;return(C||T=="file")&&(m.push("//"),(T=this.o)&&m.push(cr(T,ba,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(cr(C,C.charAt(0)=="/"?Zf:Pa,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",cr(C,rs)),m.join("")};function pn(m){return new Ct(m)}function lr(m,T,C){m.j=C?In(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function ho(m,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);m.s=T}else m.s=null}function Ni(m,T,C){T instanceof bi?(m.i=T,Tu(m.i,m.h)):(C||(T=cr(T,jf)),m.i=new bi(T,m.h))}function et(m,T,C){m.i.set(T,C)}function ur(m){return et(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function In(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function cr(m,T,C){return typeof m=="string"?(m=encodeURI(m).replace(T,vu),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function vu(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ba=/[#\/\?@]/g,Pa=/[#\?:]/g,Zf=/[#\?]/g,jf=/[#\?@]/g,rs=/#/g;function bi(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Rn(m){m.g||(m.g=new Map,m.h=0,m.i&&Wf(m.i,function(T,C){m.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=bi.prototype,n.add=function(m,T){Rn(this),this.i=null,m=oi(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(T),this.h+=1,this};function Pi(m,T){Rn(m),T=oi(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function ki(m,T){return Rn(m),T=oi(m,T),m.g.has(T)}n.forEach=function(m,T){Rn(this),this.g.forEach(function(C,R){C.forEach(function(G){m.call(T,G,R,this)},this)},this)},n.na=function(){Rn(this);const m=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let R=0;R<T.length;R++){const G=m[R];for(let W=0;W<G.length;W++)C.push(T[R])}return C},n.V=function(m){Rn(this);let T=[];if(typeof m=="string")ki(this,m)&&(T=T.concat(this.g.get(oi(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)T=T.concat(m[C])}return T},n.set=function(m,T){return Rn(this),this.i=null,m=oi(this,m),ki(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=this.V(m),0<m.length?String(m[0]):T):T};function ka(m,T,C){Pi(m,T),0<C.length&&(m.i=null,m.g.set(oi(m,T),q(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var R=T[C];const W=encodeURIComponent(String(R)),ue=this.V(R);for(R=0;R<ue.length;R++){var G=W;ue[R]!==""&&(G+="="+encodeURIComponent(String(ue[R]))),m.push(G)}}return this.i=m.join("&")};function oi(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function Tu(m,T){T&&!m.j&&(Rn(m),m.i=null,m.g.forEach(function(C,R){var G=R.toLowerCase();R!=G&&(Pi(this,R),ka(this,G,C))},m)),m.j=T}function fr(m,T){const C=new An;if(h.Image){const R=new Image;R.onload=w(wn,C,"TestLoadImage: loaded",!0,T,R),R.onerror=w(wn,C,"TestLoadImage: error",!1,T,R),R.onabort=w(wn,C,"TestLoadImage: abort",!1,T,R),R.ontimeout=w(wn,C,"TestLoadImage: timeout",!1,T,R),h.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else T(!1)}function Gn(m,T){const C=new An,R=new AbortController,G=setTimeout(()=>{R.abort(),wn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:R.signal}).then(W=>{clearTimeout(G),W.ok?wn(C,"TestPingServer: ok",!0,T):wn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(G),wn(C,"TestPingServer: error",!1,T)})}function wn(m,T,C,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(C)}catch{}}function dr(){this.g=new ir}function ri(m,T,C){const R=C||"";try{Na(m,function(G,W){let ue=G;p(G)&&(ue=Bn(G)),T.push(R+W+"="+encodeURIComponent(ue))})}catch(G){throw T.push(R+"type="+encodeURIComponent("_badmap")),G}}function mo(m){this.l=m.Ub||null,this.j=m.eb||!1}V(mo,Sa),mo.prototype.g=function(){return new Vi(this.l,this.j)},mo.prototype.i=(function(m){return function(){return m}})({});function Vi(m,T){mt.call(this),this.D=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Vi,mt),n=Vi.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=T,this.readyState=1,ai(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(T.body=m),(this.D||h).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,si(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Va(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Va(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?si(this):ai(this),this.readyState==3&&Va(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,si(this))},n.Qa=function(m){this.g&&(this.response=m,si(this))},n.ga=function(){this.g&&si(this)};function si(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ai(m)}n.setRequestHeader=function(m,T){this.u.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=T.next();return m.join(`\r
`)};function ai(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ua(m){let T="";return se(m,function(C,R){T+=R,T+=":",T+=C,T+=`\r
`}),T}function Ut(m,T,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=Ua(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):et(m,T,C))}function Qe(m){mt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Qe,mt);var ss=/^https?$/i,hr=["POST","PUT"];n=Qe.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,T,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?Ca(this.o):Ca(ti),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(W){Eu(this,W);return}if(m=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)C.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const W of R.keys())C.set(W,R.get(W));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find(W=>W.toLowerCase()=="content-type"),G=h.FormData&&m instanceof h.FormData,!(0<=Array.prototype.indexOf.call(hr,T,void 0))||R||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ue]of C)this.g.setRequestHeader(W,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mr(this),this.u=!0,this.g.send(m),this.u=!1}catch(W){Eu(this,W)}};function Eu(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.m=5,as(m),li(m)}function as(m){m.A||(m.A=!0,We(m,"complete"),We(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,We(this,"complete"),We(this,"abort"),li(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ls(this):this.bb())},n.bb=function(){ls(this)};function ls(m){if(m.h&&typeof d<"u"&&(!m.v[1]||Mn(m)!=4||m.Z()!=2)){if(m.u&&Mn(m)==4)Wt(m.Ea,0,m);else if(We(m,"readystatechange"),Mn(m)==4){m.h=!1;try{const ue=m.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var R;if(R=ue===0){var G=String(m.D).match(ar)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),R=!ss.test(G?G.toLowerCase():"")}C=R}if(C)We(m,"complete"),We(m,"success");else{m.m=6;try{var W=2<Mn(m)?m.g.statusText:""}catch{W=""}m.l=W+" ["+m.Z()+"]",as(m)}}finally{li(m)}}}}function li(m,T){if(m.g){mr(m);const C=m.g,R=m.v[0]?()=>{}:null;m.g=null,m.v=null,T||We(m,"ready");try{C.onreadystatechange=R}catch{}}}function mr(m){m.I&&(h.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Mn(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),Zr(T)}};function Su(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ed(m){const T={};m=(m.g&&2<=Mn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(Q(m[R]))continue;var C=k(m[R]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const W=T[G]||[];T[G]=W,W.push(C)}x(T,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(m,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||T}function us(m){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pr("baseRetryDelayMs",5e3,m),this.cb=pr("retryDelaySeedMs",1e4,m),this.Wa=pr("forwardChannelMaxRetries",2,m),this.wa=pr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new xi(m&&m.concurrentRequestLimit),this.Da=new dr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=us.prototype,n.la=8,n.G=1,n.connect=function(m,T,C,R){lt(0),this.W=m,this.H=T||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.I=Du(this,null,this.W),fs(this)};function La(m){if(Cu(m),m.G==3){var T=m.U++,C=pn(m.I);if(et(C,"SID",m.K),et(C,"RID",T),et(C,"TYPE","terminate"),gr(m,C),T=new sn(m,m.j,T),T.L=2,T.v=ur(pn(C)),C=!1,h.navigator&&h.navigator.sendBeacon)try{C=h.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&h.Image&&(new Image().src=T.v,C=!0),C||(T.g=xu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),rr(T)}Mu(m)}function cs(m){m.g&&(yr(m),m.g.cancel(),m.g=null)}function Cu(m){cs(m),m.u&&(h.clearTimeout(m.u),m.u=null),ds(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&h.clearTimeout(m.s),m.s=null)}function fs(m){if(!ts(m.h)&&!m.s){m.s=!0;var T=m.Ga;ce||U(),pe||(ce(),pe=!0),Ye.add(T,m),m.B=0}}function td(m,T){return ns(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=T.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=St(S(m.Ga,m,T),qa(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const G=new sn(this,this.j,m);let W=this.o;if(this.S&&(W?(W=M(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=Au(this,G,T),C=pn(this.I),et(C,"RID",m),et(C,"CVER",22),this.D&&et(C,"X-HTTP-Session-Id",this.D),gr(this,C),W&&(this.O?T="headers="+encodeURIComponent(String(Ua(W)))+"&"+T:this.m&&Ut(C,this.m,W)),is(this.h,G),this.Ua&&et(C,"TYPE","init"),this.P?(et(C,"$req",T),et(C,"SID","null"),G.T=!0,Hn(G,C,null)):Hn(G,C,T),this.G=2}}else this.G==3&&(m?Oa(this,m):this.i.length==0||ts(this.h)||Oa(this))};function Oa(m,T){var C;T?C=T.l:C=m.U++;const R=pn(m.I);et(R,"SID",m.K),et(R,"RID",C),et(R,"AID",m.T),gr(m,R),m.m&&m.o&&Ut(R,m.m,m.o),C=new sn(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),T&&(m.i=T.D.concat(m.i)),T=Au(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),is(m.h,C),Hn(C,R,T)}function gr(m,T){m.H&&se(m.H,function(C,R){et(T,R,C)}),m.l&&Na({},function(C,R){et(T,R,C)})}function Au(m,T,C){C=Math.min(m.i.length,C);var R=m.l?S(m.l.Na,m.l,m):null;e:{var G=m.i;let W=-1;for(;;){const ue=["count="+C];W==-1?0<C?(W=G[0].g,ue.push("ofs="+W)):W=0:ue.push("ofs="+W);let Be=!0;for(let xt=0;xt<C;xt++){let He=G[xt].g;const Lt=G[xt].map;if(He-=W,0>He)W=Math.max(0,G[xt].g-100),Be=!1;else try{ri(Lt,ue,"req"+He+"_")}catch{R&&R(Lt)}}if(Be){R=ue.join("&");break e}}}return m=m.i.splice(0,C),T.D=m,R}function Iu(m){if(!m.g&&!m.u){m.Y=1;var T=m.Fa;ce||U(),pe||(ce(),pe=!0),Ye.add(T,m),m.v=0}}function Fa(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=St(S(m.Fa,m),qa(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Ru(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=St(S(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),cs(this),Ru(this))};function yr(m){m.A!=null&&(h.clearTimeout(m.A),m.A=null)}function Ru(m){m.g=new sn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var T=pn(m.qa);et(T,"RID","rpc"),et(T,"SID",m.K),et(T,"AID",m.T),et(T,"CI",m.F?"0":"1"),!m.F&&m.ja&&et(T,"TO",m.ja),et(T,"TYPE","xmlhttp"),gr(m,T),m.m&&m.o&&Ut(T,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=ur(pn(T)),C.m=null,C.P=!0,Di(C,m)}n.Za=function(){this.C!=null&&(this.C=null,cs(this),Fa(this),lt(19))};function ds(m){m.C!=null&&(h.clearTimeout(m.C),m.C=null)}function wu(m,T){var C=null;if(m.g==T){ds(m),yr(m),m.g=null;var R=2}else if(Da(m.h,T))C=T.D,an(m.h,T),R=1;else return;if(m.G!=0){if(T.o)if(R==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var G=m.B;R=ao(),We(R,new Dt(R,C)),fs(m)}else Iu(m);else if(G=T.s,G==3||G==0&&0<T.X||!(R==1&&td(m,T)||R==2&&Fa(m)))switch(C&&0<C.length&&(T=m.h,T.i=T.i.concat(C)),G){case 1:Ui(m,5);break;case 4:Ui(m,10);break;case 3:Ui(m,6);break;default:Ui(m,2)}}}function qa(m,T){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*T}function Ui(m,T){if(m.j.info("Error code "+T),T==2){var C=S(m.fb,m),R=m.Xa;const G=!R;R=new Ct(R||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||lr(R,"https"),ur(R),G?fr(R.toString(),C):Gn(R.toString(),C)}else lt(2);m.G=0,m.l&&m.l.sa(T),Mu(m),Cu(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Mu(m){if(m.G=0,m.ka=[],m.l){const T=xa(m.h);(T.length!=0||m.i.length!=0)&&(H(m.ka,T),H(m.ka,m.i),m.h.i.length=0,q(m.i),m.i.length=0),m.l.ra()}}function Du(m,T,C){var R=C instanceof Ct?pn(C):new Ct(C);if(R.g!="")T&&(R.g=T+"."+R.g),ho(R,R.s);else{var G=h.location;R=G.protocol,T=T?T+"."+G.hostname:G.hostname,G=+G.port;var W=new Ct(null);R&&lr(W,R),T&&(W.g=T),G&&ho(W,G),C&&(W.l=C),R=W}return C=m.D,T=m.ya,C&&T&&et(R,C,T),et(R,"VER",m.la),gr(m,R),R}function xu(m,T,C){if(T&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Ca&&!m.pa?new Qe(new mo({eb:C})):new Qe(m.pa),T.Ha(m.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}n=Nu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hs(){}hs.prototype.g=function(m,T){return new ln(m,T)};function ln(m,T){mt.call(this),this.g=new us(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(m?m["X-WebChannel-Client-Profile"]=T.va:m={"X-WebChannel-Client-Profile":T.va}),this.g.S=m,(m=T&&T.Sb)&&!Q(m)&&(this.g.m=m),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!Q(T)&&(this.g.D=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new ui(this)}V(ln,mt),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){La(this.g)},ln.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=Bn(m),m=C);T.i.push(new _u(T.Ya++,m)),T.G==3&&fs(T)},ln.prototype.N=function(){this.g.l=null,delete this.j,La(this.g),delete this.g,ln.aa.N.call(this)};function bu(m){wi.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const C in T){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}V(bu,wi);function Pu(){Ia.call(this),this.status=1}V(Pu,Ia);function ui(m){this.g=m}V(ui,Nu),ui.prototype.ua=function(){We(this.g,"a")},ui.prototype.ta=function(m){We(this.g,new bu(m))},ui.prototype.sa=function(m){We(this.g,new Pu)},ui.prototype.ra=function(){We(this.g,"b")},hs.prototype.createWebChannel=hs.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,j0=function(){return new hs},Z0=function(){return ao()},W0=ei,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},co.NO_ERROR=0,co.TIMEOUT=8,co.HTTP_ERROR=6,Kc=co,Mi.COMPLETE="complete",X0=Mi,Aa.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",mt.prototype.listen=mt.prototype.K,xl=Aa,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Q0=Qe}).apply(typeof Vc<"u"?Vc:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore",Bv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Qm("@firebase/firestore");function Hs(){return Br.logLevel}function de(n,...e){if(Br.logLevel<=Le.DEBUG){const t=e.map(lp);Br.debug(`Firestore (${fa}): ${n}`,...t)}}function io(n,...e){if(Br.logLevel<=Le.ERROR){const t=e.map(lp);Br.error(`Firestore (${fa}): ${n}`,...t)}}function na(n,...e){if(Br.logLevel<=Le.WARN){const t=e.map(lp);Br.warn(`Firestore (${fa}): ${n}`,...t)}}function lp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,eS(n,i,t)}function eS(n,e,t){let i=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw io(i),new Error(i)}function Xe(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||eS(e,s,i)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Wn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class P1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class k1{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new $o;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new $o,e.enqueueRetryable((()=>s(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await s(this.currentUser)}))},h=y=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>h(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?h(y):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new $o)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xe(typeof i.accessToken=="string",31837,{l:i}),new tS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class V1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new V1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const s=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=O1(40);for(let l=0;l<s.length;++l)i.length<20&&s[l]<t&&(i+=e.charAt(s[l]%62))}return i}}function Oe(n,e){return n<e?-1:n>e?1:0}function Em(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),l=e.charAt(i);if(s!==l)return rm(s)===rm(l)?Oe(s,l):rm(s)?1:-1}return Oe(n.length,e.length)}const F1=55296,q1=57343;function rm(n){const e=n.charCodeAt(0);return e>=F1&&e<=q1}function ia(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="__name__";class gi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const l=gi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const i=gi.isNumericId(e),s=gi.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?gi.extractNumericId(e).compare(gi.extractNumericId(t)):Em(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yo.fromString(e.substring(4,e.length-2))}}class dt extends gi{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const B1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends gi{construct(e,t,i){return new Qt(e,t,i)}static isValidIdentifier(e){return B1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gv}static keyField(){return new Qt([Gv])}static fromServerFormat(e){const t=[];let i="",s=0;const l=()=>{if(i.length===0)throw new ye(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ye(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[s+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ye(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,s+=2}else h==="`"?(d=!d,s++):h!=="."||d?(i+=h,s++):(l(),s++)}if(l(),d)throw new ye(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(dt.fromString(e))}static fromName(e){return new ve(dt.fromString(e).popFirst(5))}static empty(){return new ve(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n,e,t){if(!t)throw new ye(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function G1(n,e,t,i){if(e===!0&&i===!0)throw new ye(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zv(n){if(!ve.isDocumentKey(n))throw new ye(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function Yl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cp(n);throw new ye(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function ou(n,e){if(!nS(n))throw new ye(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const d=n[i];if(s&&typeof d!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ye(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=-62135596800,$v=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*$v);return new at(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Yv)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$v}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ou(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:wt("string",at._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new at(0,0))}static max(){return new we(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=-1;function z1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=we.fromTimestamp(i===1e9?new at(t+1,0):new at(t,i));return new Ko(s,ve.empty(),e)}function Y1(n){return new Ko(n.readTime,n.key,$l)}class Ko{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ko(we.min(),ve.empty(),$l)}static max(){return new Ko(we.max(),ve.empty(),$l)}}function $1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==K1)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((i,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,i)=>{t(e)}))}static reject(e){return new ie(((t,i)=>{i(e)}))}static waitFor(e){return new ie(((t,i)=>{let s=0,l=0,d=!1;e.forEach((h=>{++s,h.next((()=>{++l,d&&l===s&&t()}),(y=>i(y)))})),d=!0,l===s&&t()}))}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next((s=>s?ie.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,l)=>{i.push(t.call(this,s,l))})),this.waitFor(i)}static mapArray(e,t){return new ie(((i,s)=>{const l=e.length,d=new Array(l);let h=0;for(let y=0;y<l;y++){const p=y;t(e[p]).next((_=>{d[p]=_,++h,h===l&&i(d)}),(_=>s(_)))}}))}static doWhile(e,t){return new ie(((i,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):i()};l()}))}}function Q1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ha(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=-1;function Nf(n){return n==null}function ff(n){return n===0&&1/n==-1/0}function X1(n){return typeof n=="number"&&Number.isInteger(n)&&!ff(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="";function W1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Kv(e)),e=Z1(n.get(t),e);return Kv(e)}function Z1(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case iS:t+="";break;default:t+=l}}return t}function Kv(n){return n+iS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}}class Uc{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,i,s,l){this.key=e,this.value=t,this.color=i??Jt.RED,this.left=s??Jt.EMPTY,this.right=l??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,l){return new Jt(e??this.key,t??this.value,i??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const l=i(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,i),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Jt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,i,s,l){return this}insert(e,t,i){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Qn([])}unionWith(e){let t=new Vt(Qt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ia(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new rS("Invalid base64 string: "+l):l}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let d=0;d<s.length;++d)l+=String.fromCharCode(s[d]);return l})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const j1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jo(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=j1.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Qo(n){return typeof n=="string"?Xt.fromBase64String(n):Xt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="server_timestamp",aS="__type__",lS="__previous_value__",uS="__local_write_time__";function dp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[aS])==null?void 0:i.stringValue)===sS}function bf(n){const e=n.mapValue.fields[lS];return dp(e)?bf(e):e}function Kl(n){const e=Jo(n.mapValue.fields[uS].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t,i,s,l,d,h,y,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=h,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=_}}const df="(default)";class Jl{constructor(e,t){this.projectId=e,this.database=t||df}static empty(){return new Jl("","")}get isDefaultDatabase(){return this.database===df}isEqual(e){return e instanceof Jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="__type__",tD="__max__",Lc={mapValue:{}},fS="__vector__",hf="value";function Xo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dp(n)?4:iD(n)?9007199254740991:nD(n)?10:11:Ce(28295,{value:n})}function Ci(n,e){if(n===e)return!0;const t=Xo(n);if(t!==Xo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kl(n).isEqual(Kl(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const d=Jo(s.timestampValue),h=Jo(l.timestampValue);return d.seconds===h.seconds&&d.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return Qo(s.bytesValue).isEqual(Qo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return Et(s.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(s.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Et(s.integerValue)===Et(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const d=Et(s.doubleValue),h=Et(l.doubleValue);return d===h?ff(d)===ff(h):isNaN(d)&&isNaN(h)}return!1})(n,e);case 9:return ia(n.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return(function(s,l){const d=s.mapValue.fields||{},h=l.mapValue.fields||{};if(Jv(d)!==Jv(h))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(h[y]===void 0||!Ci(d[y],h[y])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function Ql(n,e){return(n.values||[]).find((t=>Ci(t,e)))!==void 0}function oa(n,e){if(n===e)return 0;const t=Xo(n),i=Xo(e);if(t!==i)return Oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(l,d){const h=Et(l.integerValue||l.doubleValue),y=Et(d.integerValue||d.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1})(n,e);case 3:return Xv(n.timestampValue,e.timestampValue);case 4:return Xv(Kl(n),Kl(e));case 5:return Em(n.stringValue,e.stringValue);case 6:return(function(l,d){const h=Qo(l),y=Qo(d);return h.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,d){const h=l.split("/"),y=d.split("/");for(let p=0;p<h.length&&p<y.length;p++){const _=Oe(h[p],y[p]);if(_!==0)return _}return Oe(h.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,d){const h=Oe(Et(l.latitude),Et(d.latitude));return h!==0?h:Oe(Et(l.longitude),Et(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Wv(n.arrayValue,e.arrayValue);case 10:return(function(l,d){var S,w,V,q;const h=l.fields||{},y=d.fields||{},p=(S=h[hf])==null?void 0:S.arrayValue,_=(w=y[hf])==null?void 0:w.arrayValue,E=Oe(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((q=_==null?void 0:_.values)==null?void 0:q.length)||0);return E!==0?E:Wv(p,_)})(n.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Lc.mapValue&&d===Lc.mapValue)return 0;if(l===Lc.mapValue)return 1;if(d===Lc.mapValue)return-1;const h=l.fields||{},y=Object.keys(h),p=d.fields||{},_=Object.keys(p);y.sort(),_.sort();for(let E=0;E<y.length&&E<_.length;++E){const S=Em(y[E],_[E]);if(S!==0)return S;const w=oa(h[y[E]],p[_[E]]);if(w!==0)return w}return Oe(y.length,_.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function Xv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Jo(n),i=Jo(e),s=Oe(t.seconds,i.seconds);return s!==0?s:Oe(t.nanos,i.nanos)}function Wv(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const l=oa(t[s],i[s]);if(l)return l}return Oe(t.length,i.length)}function ra(n){return Sm(n)}function Sm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Jo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Qo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ve.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const l of t.values||[])s?s=!1:i+=",",i+=Sm(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const d of i)l?l=!1:s+=",",s+=`${d}:${Sm(t.fields[d])}`;return s+"}"})(n.mapValue):Ce(61005,{value:n})}function Jc(n){switch(Xo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bf(n);return e?16+Jc(e):16;case 5:return 2*n.stringValue.length;case 6:return Qo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,l)=>s+Jc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return zr(i.fields,((l,d)=>{s+=l.length+Jc(d)})),s})(n.mapValue);default:throw Ce(13486,{value:n})}}function Cm(n){return!!n&&"integerValue"in n}function hp(n){return!!n&&"arrayValue"in n}function Zv(n){return!!n&&"nullValue"in n}function jv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qc(n){return!!n&&"mapValue"in n}function nD(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cS])==null?void 0:i.stringValue)===fS}function Ul(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ul(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ul(n.arrayValue.values[t]);return e}return{...n}}function iD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Qc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ul(t)}setAll(e){let t=Qt.emptyPath(),i={},s=[];e.forEach(((d,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,i,s),i={},s=[],t=h.popLast()}d?i[h.lastSegment()]=Ul(d):s.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,s)}delete(e){const t=this.field(e.popLast());Qc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Qc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){zr(t,((s,l)=>e[s]=l));for(const s of i)delete e[s]}clone(){return new Un(Ul(this.value))}}function dS(n){const e=[];return zr(n.fields,((t,i)=>{const s=new Qt([t]);if(Qc(i)){const l=dS(i.mapValue).fields;if(l.length===0)e.push(s);else for(const d of l)e.push(s.child(d))}else e.push(s)})),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,i,s,l,d,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=l,this.data=d,this.documentState=h}static newInvalidDocument(e){return new nn(e,0,we.min(),we.min(),we.min(),Un.empty(),0)}static newFoundDocument(e,t,i,s){return new nn(e,1,t,we.min(),i,s,0)}static newNoDocument(e,t){return new nn(e,2,t,we.min(),we.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,we.min(),we.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.position=e,this.inclusive=t}}function eT(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const l=e[s],d=n.position[s];if(l.field.isKeyField()?i=ve.comparator(ve.fromName(d.referenceValue),t.key):i=oa(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function tT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ci(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t="asc"){this.field=e,this.dir=t}}function oD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{}class kt extends hS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sD(e,t,i):t==="array-contains"?new uD(e,i):t==="in"?new cD(e,i):t==="not-in"?new fD(e,i):t==="array-contains-any"?new dD(e,i):new kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new aD(e,i):new lD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(oa(t,this.value)):t!==null&&Xo(this.value)===Xo(t)&&this.matchesComparison(oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends hS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ai(e,t)}matches(e){return mS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mS(n){return n.op==="and"}function pS(n){return rD(n)&&mS(n)}function rD(n){for(const e of n.filters)if(e instanceof Ai)return!1;return!0}function Am(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+ra(n.value);if(pS(n))return n.filters.map((e=>Am(e))).join(",");{const e=n.filters.map((t=>Am(t))).join(",");return`${n.op}(${e})`}}function gS(n,e){return n instanceof kt?(function(i,s){return s instanceof kt&&i.op===s.op&&i.field.isEqual(s.field)&&Ci(i.value,s.value)})(n,e):n instanceof Ai?(function(i,s){return s instanceof Ai&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((l,d,h)=>l&&gS(d,s.filters[h])),!0):!1})(n,e):void Ce(19439)}function yS(n){return n instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ra(t.value)}`})(n):n instanceof Ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(yS).join(" ,")+"}"})(n):"Filter"}class sD extends kt{constructor(e,t,i){super(e,t,i),this.key=ve.fromName(i.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class aD extends kt{constructor(e,t){super(e,"in",t),this.keys=_S("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lD extends kt{constructor(e,t){super(e,"not-in",t),this.keys=_S("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _S(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ve.fromName(i.referenceValue)))}class uD extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hp(t)&&Ql(t.arrayValue,this.value)}}class cD extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ql(this.value.arrayValue,t)}}class fD extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ql(this.value.arrayValue,t)}}class dD extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ql(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t=null,i=[],s=[],l=null,d=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=l,this.startAt=d,this.endAt=h,this.Te=null}}function nT(n,e=null,t=[],i=[],s=null,l=null,d=null){return new hD(n,e,t,i,s,l,d)}function mp(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Am(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ra(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ra(i))).join(",")),e.Te=t}return e.Te}function pp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tT(n.startAt,e.startAt)&&tT(n.endAt,e.endAt)}function Im(n){return ve.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t=null,i=[],s=[],l=null,d="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=l,this.limitType=d,this.startAt=h,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mD(n,e,t,i,s,l,d,h){return new Pf(n,e,t,i,s,l,d,h)}function gp(n){return new Pf(n)}function iT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pD(n){return n.collectionGroup!==null}function Ll(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let h=new Vt(Qt.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pf(l,i))})),t.has(Qt.keyField().canonicalString())||e.Ie.push(new pf(Qt.keyField(),i))}return e.Ie}function _i(n){const e=Me(n);return e.Ee||(e.Ee=gD(e,Ll(n))),e.Ee}function gD(n,e){if(n.limitType==="F")return nT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new pf(s.field,l)}));const t=n.endAt?new mf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mf(n.startAt.position,n.startAt.inclusive):null;return nT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Rm(n,e,t){return new Pf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kf(n,e){return pp(_i(n),_i(e))&&n.limitType===e.limitType}function vS(n){return`${mp(_i(n))}|lt:${n.limitType}`}function Gs(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>yS(s))).join(", ")}]`),Nf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>ra(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>ra(s))).join(",")),`Target(${i})`})(_i(n))}; limitType=${n.limitType})`}function Vf(n,e){return e.isFoundDocument()&&(function(i,s){const l=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,s){for(const l of Ll(i))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const l of i.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(d,h,y){const p=eT(d,h,y);return d.inclusive?p<=0:p<0})(i.startAt,Ll(i),s)||i.endAt&&!(function(d,h,y){const p=eT(d,h,y);return d.inclusive?p>=0:p>0})(i.endAt,Ll(i),s))})(n,e)}function yD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TS(n){return(e,t)=>{let i=!1;for(const s of Ll(n)){const l=_D(s,e,t);if(l!==0)return l;i=i||s.field.isKeyField()}return 0}}function _D(n,e,t){const i=n.field.isKeyField()?ve.comparator(e.key,t.key):(function(l,d,h){const y=d.data.field(l),p=h.data.field(l);return y!==null&&p!==null?oa(y,p):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,l]of i)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,((t,i)=>{for(const[s,l]of i)e(s,l)}))}isEmpty(){return oS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new ht(ve.comparator);function oo(){return vD}const ES=new ht(ve.comparator);function Nl(...n){let e=ES;for(const t of n)e=e.insert(t.key,t);return e}function SS(n){let e=ES;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Vr(){return Ol()}function CS(){return Ol()}function Ol(){return new Yr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const TD=new ht(ve.comparator),ED=new Vt(ve.comparator);function Fe(...n){let e=ED;for(const t of n)e=e.add(t);return e}const SD=new Vt(Oe);function CD(){return SD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ff(e)?"-0":e}}function AS(n){return{integerValue:""+n}}function AD(n,e){return X1(e)?AS(e):yp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this._=void 0}}function ID(n,e,t){return n instanceof gf?(function(s,l){const d={fields:{[aS]:{stringValue:sS},[uS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&dp(l)&&(l=bf(l)),l&&(d.fields[lS]=l),{mapValue:d}})(t,e):n instanceof Xl?RS(n,e):n instanceof Wl?wS(n,e):(function(s,l){const d=IS(s,l),h=oT(d)+oT(s.Ae);return Cm(d)&&Cm(s.Ae)?AS(h):yp(s.serializer,h)})(n,e)}function RD(n,e,t){return n instanceof Xl?RS(n,e):n instanceof Wl?wS(n,e):t}function IS(n,e){return n instanceof yf?(function(i){return Cm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class gf extends Uf{}class Xl extends Uf{constructor(e){super(),this.elements=e}}function RS(n,e){const t=MS(e);for(const i of n.elements)t.some((s=>Ci(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Wl extends Uf{constructor(e){super(),this.elements=e}}function wS(n,e){let t=MS(e);for(const i of n.elements)t=t.filter((s=>!Ci(s,i)));return{arrayValue:{values:t}}}class yf extends Uf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oT(n){return Et(n.integerValue||n.doubleValue)}function MS(n){return hp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function wD(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Xl&&s instanceof Xl||i instanceof Wl&&s instanceof Wl?ia(i.elements,s.elements,Ci):i instanceof yf&&s instanceof yf?Ci(i.Ae,s.Ae):i instanceof gf&&s instanceof gf})(n.transform,e.transform)}class MD{constructor(e,t){this.version=e,this.transformResults=t}}class eo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new eo}static exists(e){return new eo(void 0,e)}static updateTime(e){return new eo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Lf{}function DS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new NS(n.key,eo.none()):new ru(n.key,n.data,eo.none());{const t=n.data,i=Un.empty();let s=new Vt(Qt.comparator);for(let l of e.fields)if(!s.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),s=s.add(l)}return new $r(n.key,i,new Qn(s.toArray()),eo.none())}}function DD(n,e,t){n instanceof ru?(function(s,l,d){const h=s.value.clone(),y=sT(s.fieldTransforms,l,d.transformResults);h.setAll(y),l.convertToFoundDocument(d.version,h).setHasCommittedMutations()})(n,e,t):n instanceof $r?(function(s,l,d){if(!Xc(s.precondition,l))return void l.convertToUnknownDocument(d.version);const h=sT(s.fieldTransforms,l,d.transformResults),y=l.data;y.setAll(xS(s)),y.setAll(h),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(n,e,t):(function(s,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Fl(n,e,t,i){return n instanceof ru?(function(l,d,h,y){if(!Xc(l.precondition,d))return h;const p=l.value.clone(),_=aT(l.fieldTransforms,y,d);return p.setAll(_),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof $r?(function(l,d,h,y){if(!Xc(l.precondition,d))return h;const p=aT(l.fieldTransforms,y,d),_=d.data;return _.setAll(xS(l)),_.setAll(p),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,d,h){return Xc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):h})(n,e,t)}function xD(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),l=IS(i.transform,s||null);l!=null&&(t===null&&(t=Un.empty()),t.set(i.field,l))}return t||null}function rT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ia(i,s,((l,d)=>wD(l,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ru extends Lf{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $r extends Lf{constructor(e,t,i,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function xS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function sT(n,e,t){const i=new Map;Xe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const l=n[s],d=l.transform,h=e.data.field(l.field);i.set(l.field,RD(d,h,t[s]))}return i}function aT(n,e,t){const i=new Map;for(const s of n){const l=s.transform,d=t.data.field(s.field);i.set(s.field,ID(l,d,e))}return i}class NS extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ND extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&DD(l,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Fl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Fl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=CS();return this.mutations.forEach((s=>{const l=e.get(s.key),d=l.overlayedDocument;let h=this.applyToLocalView(d,l.mutatedFields);h=t.has(s.key)?null:h;const y=DS(d,h);y!==null&&i.set(s.key,y),d.isValidDocument()||d.convertToNoDocument(we.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&ia(this.mutations,e.mutations,((t,i)=>rT(t,i)))&&ia(this.baseMutations,e.baseMutations,((t,i)=>rT(t,i)))}}class _p{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Xe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return TD})();const l=e.mutations;for(let d=0;d<l.length;d++)s=s.insert(l[d].key,i[d].version);return new _p(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt,ze;function VD(n){switch(n){case ae.OK:return Ce(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function bS(n){if(n===void 0)return io("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Rt.OK:return ae.OK;case Rt.CANCELLED:return ae.CANCELLED;case Rt.UNKNOWN:return ae.UNKNOWN;case Rt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Rt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Rt.INTERNAL:return ae.INTERNAL;case Rt.UNAVAILABLE:return ae.UNAVAILABLE;case Rt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Rt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Rt.NOT_FOUND:return ae.NOT_FOUND;case Rt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Rt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Rt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Rt.ABORTED:return ae.ABORTED;case Rt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Rt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Rt.DATA_LOSS:return ae.DATA_LOSS;default:return Ce(39323,{code:n})}}(ze=Rt||(Rt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new Yo([4294967295,4294967295],0);function lT(n){const e=UD().encode(n),t=new J0;return t.update(e),new Uint8Array(t.digest())}function uT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Yo([t,i],0),new Yo([s,l],0)]}class vp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new bl(`Invalid padding: ${t}`);if(i<0)throw new bl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new bl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Yo.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Yo.fromNumber(i)));return s.compare(LD)===1&&(s=new Yo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lT(e),[i,s]=uT(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(i,s,l);if(!this.we(d))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new vp(l,s,t);return i.forEach((h=>d.insert(h))),d}insert(e){if(this.ge===0)return;const t=lT(e),[i,s]=uT(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(i,s,l);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,i,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,su.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Of(we.min(),s,new ht(Oe),oo(),Fe())}}class su{constructor(e,t,i,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new su(i,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class PS{constructor(e,t){this.targetId=e,this.Ce=t}}class kS{constructor(e,t,i=Xt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class cT{constructor(){this.ve=0,this.Fe=fT(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),i=Fe();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Ce(38017,{changeType:l})}})),new su(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=fT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class OD{constructor(e){this.Ge=e,this.ze=new Map,this.je=oo(),this.Je=Oc(),this.He=Oc(),this.Ye=new ht(Oe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Im(l))if(i===0){const d=new ve(l.path);this.et(t,d,nn.newNoDocument(d,we.min()))}else Xe(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const h=this.ut(e),y=h?this.ct(h,e,d):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:l=0}=t;let d,h;try{d=Qo(i).toUint8Array()}catch(y){if(y instanceof rS)return na("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{h=new vp(d,s,l)}catch(y){return na(y instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((l=>{const d=this.Ge.ht(),h=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const h=this.ot(d);if(h){if(l.current&&Im(h.target)){const y=new ve(h.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,nn.newNoDocument(y,e))}l.Be&&(t.set(d,l.ke()),l.qe())}}));let i=Fe();this.He.forEach(((l,d)=>{let h=!0;d.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const s=new Of(e,t,this.Ye,this.je,i);return this.je=oo(),this.Je=Oc(),this.He=Oc(),this.Ye=new ht(Oe),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new cT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Vt(Oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Vt(Oe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Oc(){return new ht(ve.comparator)}function fT(){return new ht(ve.comparator)}const FD={asc:"ASCENDING",desc:"DESCENDING"},qD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BD={and:"AND",or:"OR"};class HD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wm(n,e){return n.useProto3Json||Nf(e)?e:{value:e}}function _f(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GD(n,e){return _f(n,e.toTimestamp())}function vi(n){return Xe(!!n,49232),we.fromTimestamp((function(t){const i=Jo(t);return new at(i.seconds,i.nanos)})(n))}function Tp(n,e){return Mm(n,e).canonicalString()}function Mm(n,e){const t=(function(s){return new dt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function US(n){const e=dt.fromString(n);return Xe(BS(e),10190,{key:e.toString()}),e}function Dm(n,e){return Tp(n.databaseId,e.path)}function sm(n,e){const t=US(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ve(OS(t))}function LS(n,e){return Tp(n.databaseId,e)}function zD(n){const e=US(n);return e.length===4?dt.emptyPath():OS(e)}function xm(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OS(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dT(n,e,t){return{name:Dm(n,e),fields:t.value.mapValue.fields}}function YD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(Xe(_===void 0||typeof _=="string",58123),Xt.fromBase64String(_||"")):(Xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Xt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,h=d&&(function(p){const _=p.code===void 0?ae.UNKNOWN:bS(p.code);return new ye(_,p.message||"")})(d);t=new kS(i,s,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sm(n,i.document.name),l=vi(i.document.updateTime),d=i.document.createTime?vi(i.document.createTime):we.min(),h=new Un({mapValue:{fields:i.document.fields}}),y=nn.newFoundDocument(s,l,d,h),p=i.targetIds||[],_=i.removedTargetIds||[];t=new Wc(p,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sm(n,i.document),l=i.readTime?vi(i.readTime):we.min(),d=nn.newNoDocument(s,l),h=i.removedTargetIds||[];t=new Wc([],h,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sm(n,i.document),l=i.removedTargetIds||[];t=new Wc([],l,s,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:l}=i,d=new kD(s,l),h=i.targetId;t=new PS(h,d)}}return t}function $D(n,e){let t;if(e instanceof ru)t={update:dT(n,e.key,e.value)};else if(e instanceof NS)t={delete:Dm(n,e.key)};else if(e instanceof $r)t={update:dT(n,e.key,e.data),updateMask:tx(e.fieldMask)};else{if(!(e instanceof ND))return Ce(16599,{Vt:e.type});t={verify:Dm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const h=d.transform;if(h instanceof gf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Xl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Wl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof yf)return{fieldPath:d.field.canonicalString(),increment:h.Ae};throw Ce(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:GD(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function KD(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(s,l){let d=s.updateTime?vi(s.updateTime):vi(l);return d.isEqual(we.min())&&(d=vi(l)),new MD(d,s.transformResults||[])})(t,e)))):[]}function JD(n,e){return{documents:[LS(n,e.path)]}}function QD(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=LS(n,s);const l=(function(p){if(p.length!==0)return qS(Ai.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(p){if(p.length!==0)return p.map((_=>(function(S){return{field:zs(S.field),direction:ZD(S.dir)}})(_)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const h=wm(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function XD(n){let e=zD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Xe(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const S=FS(E);return S instanceof Ai&&pS(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(E){return E.map((S=>(function(V){return new pf(Ys(V.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(E){let S;return S=typeof E=="object"?E.value:E,Nf(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(E){const S=!!E.before,w=E.values||[];return new mf(w,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,w=E.values||[];return new mf(w,S)})(t.endAt)),mD(e,s,d,l,h,"F",y,p)}function WD(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ys(t.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ys(t.unaryFilter.field);return kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ys(t.unaryFilter.field);return kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ys(t.unaryFilter.field);return kt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return kt.create(Ys(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ai.create(t.compositeFilter.filters.map((i=>FS(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function ZD(n){return FD[n]}function jD(n){return qD[n]}function ex(n){return BD[n]}function zs(n){return{fieldPath:n.canonicalString()}}function Ys(n){return Qt.fromServerFormat(n.fieldPath)}function qS(n){return n instanceof kt?(function(t){if(t.op==="=="){if(jv(t.value))return{unaryFilter:{field:zs(t.field),op:"IS_NAN"}};if(Zv(t.value))return{unaryFilter:{field:zs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jv(t.value))return{unaryFilter:{field:zs(t.field),op:"IS_NOT_NAN"}};if(Zv(t.value))return{unaryFilter:{field:zs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(t.field),op:jD(t.op),value:t.value}}})(n):n instanceof Ai?(function(t){const i=t.getFilters().map((s=>qS(s)));return i.length===1?i[0]:{compositeFilter:{op:ex(t.op),filters:i}}})(n):Ce(54877,{filter:n})}function tx(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t,i,s,l=we.min(),d=we.min(),h=Xt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=h,this.expectedCount=y}withSequenceNumber(e){return new qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.yt=e}}function ix(n){const e=XD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.Cn=new rx}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ko.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class rx{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Vt(dt.comparator),l=!s.has(i);return this.index[t]=s.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Vt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HS=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(HS,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new sa(0)}static cr(){return new sa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="LruGarbageCollector",sx=1048576;function pT([n,e],[t,i]){const s=Oe(n,t);return s===0?Oe(e,i):s}class ax{constructor(e){this.Ir=e,this.buffer=new Vt(pT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();pT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lx{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(mT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ha(t)?de(mT,"Ignoring IndexedDB error during garbage collection: ",t):await da(t)}await this.Vr(3e5)}))}}class ux{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(xf.ce);const i=new ax(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(hT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,l,d,h,y,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,d=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,h=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(p=Date.now(),Hs()<=Le.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${s} in `+(h-d)+`ms
	Removed ${l} targets in `+(y-h)+`ms
	Removed ${E} documents in `+(p-y)+`ms
Total Duration: ${p-_}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function cx(n,e){return new ux(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.changes=new Yr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Fl(i.mutation,s,Qn.empty(),at.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Fe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Fe()){const s=Vr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((l=>{let d=Nl();return l.forEach(((h,y)=>{d=d.insert(h,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=Vr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Fe())))}populateOverlays(e,t,i){const s=[];return i.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((d,h)=>{t.set(d,h)}))}))}computeViews(e,t,i,s){let l=oo();const d=Ol(),h=(function(){return Ol()})();return t.forEach(((y,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof $r)?l=l.insert(p.key,p):_!==void 0?(d.set(p.key,_.mutation.getFieldMask()),Fl(_.mutation,p,_.mutation.getFieldMask(),at.now())):d.set(p.key,Qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((p,_)=>d.set(p,_))),t.forEach(((p,_)=>h.set(p,new dx(_,d.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=Ol();let s=new ht(((d,h)=>d-h)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const h of d)h.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let _=i.get(y)||Qn.empty();_=h.applyToLocalView(p,_),i.set(y,_);const E=(s.get(h.batchId)||Fe()).add(y);s=s.insert(h.batchId,E)}))})).next((()=>{const d=[],h=s.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),p=y.key,_=y.value,E=CS();_.forEach((S=>{if(!l.has(S)){const w=DS(t.get(S),i.get(S));w!==null&&E.set(S,w),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,E))}return ie.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((l=>{const d=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-l.size):ie.resolve(Vr());let h=$l,y=l;return d.next((p=>ie.forEach(p,((_,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),l.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{y=y.insert(_,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,y,p,Fe()))).next((_=>({batchId:h,changes:SS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next((i=>{let s=Nl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const l=t.collectionGroup;let d=Nl();return this.indexManager.getCollectionParents(e,l).next((h=>ie.forEach(h,(y=>{const p=(function(E,S){return new Pf(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next((_=>{_.forEach(((E,S)=>{d=d.insert(E,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,s)))).next((d=>{l.forEach(((y,p)=>{const _=p.getKey();d.get(_)===null&&(d=d.insert(_,nn.newInvalidDocument(_)))}));let h=Nl();return d.forEach(((y,p)=>{const _=l.get(y);_!==void 0&&Fl(_.mutation,p,Qn.empty(),at.now()),Vf(t,p)&&(h=h.insert(y,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:vi(s.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:ix(s.bundledQuery),readTime:vi(s.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.overlays=new ht(ve.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Vr();return ie.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&i.set(s,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const s=Vr(),l=t.length+1,d=new ve(t.child("")),h=this.overlays.getIteratorFrom(d);for(;h.hasNext();){const y=h.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&y.largestBatchId>i&&s.set(y.getKey(),y)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let l=new ht(((p,_)=>p-_));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=l.get(p.largestBatchId);_===null&&(_=Vr(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=Vr(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,_)=>h.set(p,_))),!(h.size()>=s)););return ie.resolve(h)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const d=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new PD(t,i));let l=this.qr.get(t);l===void 0&&(l=Fe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this.Qr=new Vt(Bt.$r),this.Ur=new Vt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Bt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Bt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ve(new dt([])),i=new Bt(t,e),s=new Bt(t,e+1),l=[];return this.Ur.forEachInRange([i,s],(d=>{this.Gr(d),l.push(d.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new dt([])),i=new Bt(t,e),s=new Bt(t,e+1);let l=Fe();return this.Ur.forEachInRange([i,s],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Bt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Oe(e.Yr,t.Yr)}static Kr(e,t){return Oe(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Bt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new bD(l,t,i,s);this.mutationQueue.push(d);for(const h of s)this.Zr=this.Zr.add(new Bt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ie.resolve(d)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),l=s<0?0:s;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?fp:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Bt(t,0),s=new Bt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,s],(d=>{const h=this.Xr(d.Yr);l.push(h)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Vt(Oe);return t.forEach((s=>{const l=new Bt(s,0),d=new Bt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,d],(h=>{i=i.add(h.Yr)}))})),ie.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let l=i;ve.isDocumentKey(l)||(l=l.child(""));const d=new Bt(new ve(l),0);let h=new Vt(Oe);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(y.Yr)),!0)}),d),ie.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Xe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ie.forEach(t.mutations,(s=>{const l=new Bt(s.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Bt(t,0),s=this.Zr.firstAfterOrEqual(i);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.ri=e,this.docs=(function(){return new ht(ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),l=s?s.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let i=oo();return t.forEach((s=>{const l=this.docs.get(s);i=i.insert(s,l?l.document.mutableCopy():nn.newInvalidDocument(s))})),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let l=oo();const d=t.path,h=new ve(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(h);for(;y.hasNext();){const{key:p,value:{document:_}}=y.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||$1(Y1(_),i)<=0||(s.has(_.key)||Vf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,i,s){Ce(9500)}ii(e,t){return ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new vx(this)}getSize(e){return ie.resolve(this.size)}}class vx extends fx{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.persistence=e,this.si=new Yr((t=>mp(t)),pp),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new Ep,this.targetCount=0,this.ai=sa.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new sa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let s=0;const l=[];return this.si.forEach(((d,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(d),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),ie.waitFor(l).next((()=>s))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((d=>{l.push(s.markPotentiallyOrphaned(e,d))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.ui={},this.overlays={},this.ci=new xf(0),this.li=!1,this.li=!0,this.hi=new gx,this.referenceDelegate=e(this),this.Pi=new Tx(this),this.indexManager=new ox,this.remoteDocumentCache=(function(s){return new _x(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new nx(t),this.Ii=new mx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new px,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new yx(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const s=new Ex(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Ex extends J1{constructor(e){super(),this.currentSequenceNumber=e}}class Sp{constructor(e){this.persistence=e,this.Ri=new Ep,this.Vi=null}static mi(e){return new Sp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(i=>{const s=ve.fromPath(i);return this.gi(e,s).next((l=>{l||t.removeEntry(s,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vf{constructor(e,t){this.persistence=e,this.pi=new Yr((i=>W1(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=cx(this,t)}static mi(e,t){return new vf(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((i,s)=>this.br(e,i,s).next((l=>l?ie.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ii(e,(d=>this.br(e,d,t).next((h=>{h||(i++,l.removeEntry(d,we.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jc(e.data.value)),t}br(e,t,i){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return ie.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Fe(),s=Fe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Cp(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fR()?8:Q1(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const l={result:null};return this.ys(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ws(e,t,s,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new Sx;return this.Ss(e,t,d).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,d,h.size)}))})).next((()=>l.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Hs()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Gs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Hs()<=Le.DEBUG&&de("QueryEngine","Query:",Gs(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Hs()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Gs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(t))):ie.resolve())}ys(e,t){if(iT(t))return ie.resolve(null);let i=_i(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Rm(t,null,"F"),i=_i(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=Fe(...l);return this.ps.getDocuments(e,d).next((h=>this.indexManager.getMinOffset(e,i).next((y=>{const p=this.Ds(t,h);return this.Cs(t,p,d,y.readTime)?this.ys(e,Rm(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,i,s){return iT(t)||s.isEqual(we.min())?ie.resolve(null):this.ps.getDocuments(e,i).next((l=>{const d=this.Ds(t,l);return this.Cs(t,d,i,s)?ie.resolve(null):(Hs()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gs(t)),this.vs(e,d,t,z1(s,$l)).next((h=>h)))}))}Ds(e,t){let i=new Vt(TS(e));return t.forEach(((s,l)=>{Vf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Ss(e,t,i){return Hs()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Gs(t)),this.ps.getDocumentsMatchingQuery(e,t,Ko.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="LocalStore",Ax=3e8;class Ix{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new ht(Oe),this.xs=new Yr((l=>mp(l)),pp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Rx(n,e,t,i){return new Ix(n,e,t,i)}async function zS(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((l=>(s=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],h=[];let y=Fe();for(const p of s){d.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}for(const p of l){h.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}return t.localDocuments.getDocuments(i,y).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:h})))}))}))}function wx(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,y,p,_){const E=p.batch,S=E.keys();let w=ie.resolve();return S.forEach((V=>{w=w.next((()=>_.getEntry(y,V))).next((q=>{const H=p.docVersions.get(V);Xe(H!==null,48541),q.version.compareTo(H)<0&&(E.applyToRemoteDocument(q,p),q.isValidDocument()&&(q.setReadTime(p.commitVersion),_.addEntry(q)))}))})),w.next((()=>h.mutationQueue.removeMutationBatch(y,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let y=Fe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(y=y.add(h.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function YS(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Mx(n,e){const t=Me(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((_,E)=>{const S=s.get(E);if(!S)return;h.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E))));let w=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(Xt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,i)),s=s.insert(E,w),(function(q,H,oe){return q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=Ax?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(S,w,_)&&h.push(t.Pi.updateTargetData(l,w))}));let y=oo(),p=Fe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),h.push(Dx(l,d,e.documentUpdates).next((_=>{y=_.ks,p=_.qs}))),!i.isEqual(we.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(_)}return ie.waitFor(h).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,p))).next((()=>y))})).then((l=>(t.Ms=s,l)))}function Dx(n,e,t){let i=Fe(),s=Fe();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let d=oo();return t.forEach(((h,y)=>{const p=l.get(h);y.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),y.isNoDocument()&&y.version.isEqual(we.min())?(e.removeEntry(h,y.readTime),d=d.insert(h,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),d=d.insert(h,y)):de(Ap,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",y.version)})),{ks:d,qs:s}}))}function xx(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=fp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Nx(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((l=>l?(s=l,ie.resolve(s)):t.Pi.allocateTargetId(i).next((d=>(s=new qo(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Nm(n,e,t){const i=Me(n),s=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!ha(d))throw d;de(Ap,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function gT(n,e,t){const i=Me(n);let s=we.min(),l=Fe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,p,_){const E=Me(y),S=E.xs.get(_);return S!==void 0?ie.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,_)})(i,d,_i(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,h.targetId).next((y=>{l=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?s:we.min(),t?l:Fe()))).next((h=>(bx(i,yD(e),h),{documents:h,Qs:l})))))}function bx(n,e,t){let i=n.Os.get(e)||we.min();t.forEach(((s,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class yT{constructor(){this.activeTargetIds=CD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Px{constructor(){this.Mo=new yT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="ConnectivityMonitor";class vT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(_T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(_T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc=null;function bm(){return Fc===null?Fc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fc++,"0x"+Fc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="RestConnection",Vx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ux{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===df?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,l){const d=bm(),h=this.zo(e,t.toUriEncodedString());de(am,`Sending RPC '${e}' ${d}:`,h,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,s,l);const{host:p}=new URL(h),_=la(p);return this.Jo(e,h,y,i,_).then((E=>(de(am,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw na(am,`RPC '${e}' ${d} failed with error: `,E,"url: ",h,"request:",i),E}))}Ho(e,t,i,s,l,d){return this.Go(e,t,i,s,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),i&&i.headers.forEach(((s,l)=>e[l]=s))}zo(e,t){const i=Vx[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class Ox extends Ux{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,l){const d=bm();return new Promise(((h,y)=>{const p=new Q0;p.setWithCredentials(!0),p.listenOnce(X0.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Kc.NO_ERROR:const E=p.getResponseJson();de(en,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),h(E);break;case Kc.TIMEOUT:de(en,`RPC '${e}' ${d} timed out`),y(new ye(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const S=p.getStatus();if(de(en,`RPC '${e}' ${d} failed with status:`,S,"response text:",p.getResponseText()),S>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const V=w==null?void 0:w.error;if(V&&V.status&&V.message){const q=(function(oe){const Q=oe.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Q)>=0?Q:ae.UNKNOWN})(V.status);y(new ye(q,V.message))}else y(new ye(ae.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new ye(ae.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{de(en,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(s);de(en,`RPC '${e}' ${d} sending request:`,s),p.send(t,"POST",_,i,15)}))}T_(e,t,i){const s=bm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=j0(),h=Z0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const _=l.join("");de(en,`Creating RPC '${e}' stream ${s}: ${_}`,y);const E=d.createWebChannel(_,y);this.I_(E);let S=!1,w=!1;const V=new Lx({Yo:H=>{w?de(en,`Not sending because RPC '${e}' stream ${s} is closed:`,H):(S||(de(en,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),de(en,`RPC '${e}' stream ${s} sending:`,H),E.send(H))},Zo:()=>E.close()}),q=(H,oe,Q)=>{H.listen(oe,(X=>{try{Q(X)}catch(j){setTimeout((()=>{throw j}),0)}}))};return q(E,xl.EventType.OPEN,(()=>{w||(de(en,`RPC '${e}' stream ${s} transport opened.`),V.o_())})),q(E,xl.EventType.CLOSE,(()=>{w||(w=!0,de(en,`RPC '${e}' stream ${s} transport closed`),V.a_(),this.E_(E))})),q(E,xl.EventType.ERROR,(H=>{w||(w=!0,na(en,`RPC '${e}' stream ${s} transport errored. Name:`,H.name,"Message:",H.message),V.a_(new ye(ae.UNAVAILABLE,"The operation could not be completed")))})),q(E,xl.EventType.MESSAGE,(H=>{var oe;if(!w){const Q=H.data[0];Xe(!!Q,16349);const X=Q,j=(X==null?void 0:X.error)||((oe=X[0])==null?void 0:oe.error);if(j){de(en,`RPC '${e}' stream ${s} received error:`,j);const J=j.status;let se=(function(D){const b=Rt[D];if(b!==void 0)return bS(b)})(J),x=j.message;se===void 0&&(se=ae.INTERNAL,x="Unknown error status: "+J+" with message "+j.message),w=!0,V.a_(new ye(se,x)),E.close()}else de(en,`RPC '${e}' stream ${s} received:`,Q),V.u_(Q)}})),q(h,W0.STAT_EVENT,(H=>{H.stat===Tm.PROXY?de(en,`RPC '${e}' stream ${s} detected buffering proxy`):H.stat===Tm.NOPROXY&&de(en,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n){return new HD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t,i=1e3,s=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="PersistentStream";class KS{constructor(e,t,i,s,l,d,h,y){this.Mi=e,this.S_=i,this.b_=s,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(io(t.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new ye(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(TT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(TT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fx extends KS{constructor(e,t,i,s,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=YD(this.serializer,e),i=(function(l){if(!("targetChange"in l))return we.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?we.min():d.readTime?vi(d.readTime):we.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=xm(this.serializer),t.addTarget=(function(l,d){let h;const y=d.target;if(h=Im(y)?{documents:JD(l,y)}:{query:QD(l,y).ft},h.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){h.resumeToken=VS(l,d.resumeToken);const p=wm(l,d.expectedCount);p!==null&&(h.expectedCount=p)}else if(d.snapshotVersion.compareTo(we.min())>0){h.readTime=_f(l,d.snapshotVersion.toTimestamp());const p=wm(l,d.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const i=WD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=xm(this.serializer),t.removeTarget=e,this.q_(t)}}class qx extends KS{constructor(e,t,i,s,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,d),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=KD(e.writeResults,e.commitTime),i=vi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=xm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$D(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{}class Hx extends Bx{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Go(e,Mm(t,i),s,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(ae.UNKNOWN,l.toString())}))}Ho(e,t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,h])=>this.connection.Ho(e,Mm(t,i),s,d,h,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(ae.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Gx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(io(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="RemoteStore";class zx{constructor(e,t,i,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Kr(this)&&(de(Hr,"Restarting streams for network reachability change."),await(async function(y){const p=Me(y);p.Ea.add(4),await au(p),p.Ra.set("Unknown"),p.Ea.delete(4),await qf(p)})(this))}))})),this.Ra=new Gx(i,s)}}async function qf(n){if(Kr(n))for(const e of n.da)await e(!0)}async function au(n){for(const e of n.da)await e(!1)}function JS(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mp(t)?wp(t):ma(t).O_()&&Rp(t,e))}function Ip(n,e){const t=Me(n),i=ma(t);t.Ia.delete(e),i.O_()&&QS(t,e),t.Ia.size===0&&(i.O_()?i.L_():Kr(t)&&t.Ra.set("Unknown"))}function Rp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ma(n).Y_(e)}function QS(n,e){n.Va.Ue(e),ma(n).Z_(e)}function wp(n){n.Va=new OD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ma(n).start(),n.Ra.ua()}function Mp(n){return Kr(n)&&!ma(n).x_()&&n.Ia.size>0}function Kr(n){return Me(n).Ea.size===0}function XS(n){n.Va=void 0}async function Yx(n){n.Ra.set("Online")}async function $x(n){n.Ia.forEach(((e,t)=>{Rp(n,e)}))}async function Kx(n,e){XS(n),Mp(n)?(n.Ra.ha(e),wp(n)):n.Ra.set("Unknown")}async function Jx(n,e,t){if(n.Ra.set("Online"),e instanceof kS&&e.state===2&&e.cause)try{await(async function(s,l){const d=l.cause;for(const h of l.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,d),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(i){de(Hr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Tf(n,i)}else if(e instanceof Wc?n.Va.Ze(e):e instanceof PS?n.Va.st(e):n.Va.tt(e),!t.isEqual(we.min()))try{const i=await YS(n.localStore);t.compareTo(i)>=0&&await(function(l,d){const h=l.Va.Tt(d);return h.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(y.resumeToken,d))}})),h.targetMismatches.forEach(((y,p)=>{const _=l.Ia.get(y);if(!_)return;l.Ia.set(y,_.withResumeToken(Xt.EMPTY_BYTE_STRING,_.snapshotVersion)),QS(l,y);const E=new qo(_.target,y,p,_.sequenceNumber);Rp(l,E)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){de(Hr,"Failed to raise snapshot:",i),await Tf(n,i)}}async function Tf(n,e,t){if(!ha(e))throw e;n.Ea.add(1),await au(n),n.Ra.set("Offline"),t||(t=()=>YS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Hr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await qf(n)}))}function WS(n,e){return e().catch((t=>Tf(n,t,e)))}async function Bf(n){const e=Me(n),t=Wo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fp;for(;Qx(e);)try{const s=await xx(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,Xx(e,s)}catch(s){await Tf(e,s)}ZS(e)&&jS(e)}function Qx(n){return Kr(n)&&n.Ta.length<10}function Xx(n,e){n.Ta.push(e);const t=Wo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ZS(n){return Kr(n)&&!Wo(n).x_()&&n.Ta.length>0}function jS(n){Wo(n).start()}async function Wx(n){Wo(n).ra()}async function Zx(n){const e=Wo(n);for(const t of n.Ta)e.ea(t.mutations)}async function jx(n,e,t){const i=n.Ta.shift(),s=_p.from(i,e,t);await WS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Bf(n)}async function eN(n,e){e&&Wo(n).X_&&await(async function(i,s){if((function(d){return VD(d)&&d!==ae.ABORTED})(s.code)){const l=i.Ta.shift();Wo(i).B_(),await WS(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Bf(i)}})(n,e),ZS(n)&&jS(n)}async function ET(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),de(Hr,"RemoteStore received new credentials");const i=Kr(t);t.Ea.add(3),await au(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qf(t)}async function tN(n,e){const t=Me(n);e?(t.Ea.delete(2),await qf(t)):e||(t.Ea.add(2),await au(t),t.Ra.set("Unknown"))}function ma(n){return n.ma||(n.ma=(function(t,i,s){const l=Me(t);return l.sa(),new Fx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Xo:Yx.bind(null,n),t_:$x.bind(null,n),r_:Kx.bind(null,n),H_:Jx.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Mp(n)?wp(n):n.Ra.set("Unknown")):(await n.ma.stop(),XS(n))}))),n.ma}function Wo(n){return n.fa||(n.fa=(function(t,i,s){const l=Me(t);return l.sa(),new qx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Wx.bind(null,n),r_:eN.bind(null,n),ta:Zx.bind(null,n),na:jx.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Bf(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Hr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t,i,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=l,this.deferred=new $o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,l){const d=Date.now()+i,h=new Dp(e,t,d,s,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(n,e){if(io("AsyncQueue",`${e}: ${n}`),ha(n))return new ye(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{static emptySet(e){return new Xs(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ve.comparator(t.key,i.key):(t,i)=>ve.comparator(t.key,i.key),this.keyedMap=Nl(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xs)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Xs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.ga=new ht(ve.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class aa{constructor(e,t,i,s,l,d,h,y,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,l){const d=[];return t.forEach((h=>{d.push({type:0,doc:h})})),new aa(e,t,Xs.emptySet(t),d,i,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iN{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=Me(t),l=s.queries;s.queries=CT(),l.forEach(((d,h)=>{for(const y of h.Sa)y.onError(i)}))})(this,new ye(ae.ABORTED,"Firestore shutting down"))}}function CT(){return new Yr((n=>vS(n)),kf)}async function oN(n,e){const t=Me(n);let i=3;const s=e.query;let l=t.queries.get(s);l?!l.ba()&&e.Da()&&(i=2):(l=new nN,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(d){const h=xp(d,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Np(t)}async function rN(n,e){const t=Me(n),i=e.query;let s=3;const l=t.queries.get(i);if(l){const d=l.Sa.indexOf(e);d>=0&&(l.Sa.splice(d,1),l.Sa.length===0?s=e.Da()?0:1:!l.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function sN(n,e){const t=Me(n);let i=!1;for(const s of e){const l=s.query,d=t.queries.get(l);if(d){for(const h of d.Sa)h.Fa(s)&&(i=!0);d.wa=s}}i&&Np(t)}function aN(n,e,t){const i=Me(n),s=i.queries.get(e);if(s)for(const l of s.Sa)l.onError(t);i.queries.delete(e)}function Np(n){n.Ca.forEach((e=>{e.next()}))}var Pm,AT;(AT=Pm||(Pm={})).Ma="default",AT.Cache="cache";class lN{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new aa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class uN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=TS(e),this.tu=new Xs(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ST,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=s,h=!1;const y=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const S=s.get(_),w=Vf(this.query,E)?E:null,V=!!S&&this.mutatedKeys.has(S.key),q=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let H=!1;S&&w?S.data.isEqual(w.data)?V!==q&&(i.track({type:3,doc:w}),H=!0):this.su(S,w)||(i.track({type:2,doc:w}),H=!0,(y&&this.eu(w,y)>0||p&&this.eu(w,p)<0)&&(h=!0)):!S&&w?(i.track({type:0,doc:w}),H=!0):S&&!w&&(i.track({type:1,doc:S}),H=!0,(y||p)&&(h=!0)),H&&(w?(d=d.add(w),l=q?l.add(_):l.delete(_)):(d=d.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:d,iu:i,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,E)=>(function(w,V){const q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:H})}};return q(w)-q(V)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),s=s??!1;const h=t&&!s?this._u():[],y=this.Xa.size===0&&this.current&&!s?1:0,p=y!==this.Za;return this.Za=y,d.length!==0||p?{snapshot:new aa(this.query,e.tu,l,d,e.mutatedKeys,y===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ST,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new tC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new eC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return aa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bp="SyncEngine";class cN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class fN{constructor(e){this.key=e,this.hu=!1}}class dN{constructor(e,t,i,s,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Yr((h=>vS(h)),kf),this.Iu=new Map,this.Eu=new Set,this.du=new ht(ve.comparator),this.Au=new Map,this.Ru=new Ep,this.Vu={},this.mu=new Map,this.fu=sa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hN(n,e,t=!0){const i=aC(n);let s;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await nC(i,e,t,!0),s}async function mN(n,e){const t=aC(n);await nC(t,e,!0,!1)}async function nC(n,e,t,i){const s=await Nx(n.localStore,_i(e)),l=s.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await pN(n,e,l,d==="current",s.resumeToken)),n.isPrimaryClient&&t&&JS(n.remoteStore,s),h}async function pN(n,e,t,i,s){n.pu=(E,S,w)=>(async function(q,H,oe,Q){let X=H.view.ru(oe);X.Cs&&(X=await gT(q.localStore,H.query,!1).then((({documents:x})=>H.view.ru(x,X))));const j=Q&&Q.targetChanges.get(H.targetId),J=Q&&Q.targetMismatches.get(H.targetId)!=null,se=H.view.applyChanges(X,q.isPrimaryClient,j,J);return RT(q,H.targetId,se.au),se.snapshot})(n,E,S,w);const l=await gT(n.localStore,e,!0),d=new uN(e,l.Qs),h=d.ru(l.documents),y=su.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=d.applyChanges(h,n.isPrimaryClient,y);RT(n,t,p.au);const _=new cN(e,t,d);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function gN(n,e,t){const i=Me(n),s=i.Tu.get(e),l=i.Iu.get(s.targetId);if(l.length>1)return i.Iu.set(s.targetId,l.filter((d=>!kf(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Nm(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Ip(i.remoteStore,s.targetId),km(i,s.targetId)})).catch(da)):(km(i,s.targetId),await Nm(i.localStore,s.targetId,!0))}async function yN(n,e){const t=Me(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(t.remoteStore,i.targetId))}async function _N(n,e,t){const i=IN(n);try{const s=await(function(d,h){const y=Me(d),p=at.now(),_=h.reduce(((w,V)=>w.add(V.key)),Fe());let E,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let V=oo(),q=Fe();return y.Ns.getEntries(w,_).next((H=>{V=H,V.forEach(((oe,Q)=>{Q.isValidDocument()||(q=q.add(oe))}))})).next((()=>y.localDocuments.getOverlayedDocuments(w,V))).next((H=>{E=H;const oe=[];for(const Q of h){const X=xD(Q,E.get(Q.key).overlayedDocument);X!=null&&oe.push(new $r(Q.key,X,dS(X.value.mapValue),eo.exists(!0)))}return y.mutationQueue.addMutationBatch(w,p,oe,h)})).next((H=>{S=H;const oe=H.applyToLocalDocumentSet(E,q);return y.documentOverlayCache.saveOverlays(w,H.batchId,oe)}))})).then((()=>({batchId:S.batchId,changes:SS(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(d,h,y){let p=d.Vu[d.currentUser.toKey()];p||(p=new ht(Oe)),p=p.insert(h,y),d.Vu[d.currentUser.toKey()]=p})(i,s.batchId,t),await lu(i,s.changes),await Bf(i.remoteStore)}catch(s){const l=xp(s,"Failed to persist write");t.reject(l)}}async function iC(n,e){const t=Me(n);try{const i=await Mx(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const d=t.Au.get(l);d&&(Xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?d.hu=!0:s.modifiedDocuments.size>0?Xe(d.hu,14607):s.removedDocuments.size>0&&(Xe(d.hu,42227),d.hu=!1))})),await lu(t,i,e)}catch(i){await da(i)}}function IT(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((l,d)=>{const h=d.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(d,h){const y=Me(d);y.onlineState=h;let p=!1;y.queries.forEach(((_,E)=>{for(const S of E.Sa)S.va(h)&&(p=!0)})),p&&Np(y)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vN(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),l=s&&s.key;if(l){let d=new ht(ve.comparator);d=d.insert(l,nn.newNoDocument(l,we.min()));const h=Fe().add(l),y=new Of(we.min(),new Map,new ht(Oe),d,h);await iC(i,y),i.du=i.du.remove(l),i.Au.delete(e),Pp(i)}else await Nm(i.localStore,e,!1).then((()=>km(i,e,t))).catch(da)}async function TN(n,e){const t=Me(n),i=e.batch.batchId;try{const s=await wx(t.localStore,e);rC(t,i,null),oC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await lu(t,s)}catch(s){await da(s)}}async function EN(n,e,t){const i=Me(n);try{const s=await(function(d,h){const y=Me(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return y.mutationQueue.lookupMutationBatch(p,h).next((E=>(Xe(E!==null,37113),_=E.keys(),y.mutationQueue.removeMutationBatch(p,E)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,_,h))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>y.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);rC(i,e,t),oC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await lu(i,s)}catch(s){await da(s)}}function oC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function rC(n,e,t){const i=Me(n);let s=i.Vu[i.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||sC(n,i)}))}function sC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ip(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Pp(n))}function RT(n,e,t){for(const i of t)i instanceof eC?(n.Ru.addReference(i.key,e),SN(n,i)):i instanceof tC?(de(bp,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||sC(n,i.key)):Ce(19791,{wu:i})}function SN(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(de(bp,"New document in limbo: "+t),n.Eu.add(i),Pp(n))}function Pp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ve(dt.fromString(e)),i=n.fu.next();n.Au.set(i,new fN(t)),n.du=n.du.insert(t,i),JS(n.remoteStore,new qo(_i(gp(t.path)),i,"TargetPurposeLimboResolution",xf.ce))}}async function lu(n,e,t){const i=Me(n),s=[],l=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,y)=>{d.push(i.pu(y,e,t).then((p=>{var _;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(p){s.push(p);const E=Cp.As(y.targetId,p);l.push(E)}})))})),await Promise.all(d),i.Pu.H_(s),await(async function(y,p){const _=Me(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(p,(S=>ie.forEach(S.Es,(w=>_.persistence.referenceDelegate.addReference(E,S.targetId,w))).next((()=>ie.forEach(S.ds,(w=>_.persistence.referenceDelegate.removeReference(E,S.targetId,w)))))))))}catch(E){if(!ha(E))throw E;de(Ap,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const w=_.Ms.get(S),V=w.snapshotVersion,q=w.withLastLimboFreeSnapshotVersion(V);_.Ms=_.Ms.insert(S,q)}}})(i.localStore,l))}async function CN(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){de(bp,"User change. New user:",e.toKey());const i=await zS(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((h=>{h.forEach((y=>{y.reject(new ye(ae.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await lu(t,i.Ls)}}function AN(n,e){const t=Me(n),i=t.Au.get(e);if(i&&i.hu)return Fe().add(i.key);{let s=Fe();const l=t.Iu.get(e);if(!l)return s;for(const d of l){const h=t.Tu.get(d);s=s.unionWith(h.view.nu)}return s}}function aC(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vN.bind(null,e),e.Pu.H_=sN.bind(null,e.eventManager),e.Pu.yu=aN.bind(null,e.eventManager),e}function IN(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EN.bind(null,e),e}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Rx(this.persistence,new Cx,e.initialUser,this.serializer)}Cu(e){return new GS(Sp.mi,this.serializer)}Du(e){return new Px}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class RN extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Xe(this.persistence.referenceDelegate instanceof vf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new lx(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new GS((i=>vf.mi(i,t)),this.serializer)}}class Vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>IT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=CN.bind(null,this.syncEngine),await tN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iN})()}createDatastore(e){const t=Ff(e.databaseInfo.databaseId),i=(function(l){return new Ox(l)})(e.databaseInfo);return(function(l,d,h,y){return new Hx(l,d,h,y)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,l,d,h){return new zx(i,s,l,d,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>IT(this.syncEngine,t,0)),(function(){return vT.v()?new vT:new kx})())}createSyncEngine(e,t){return(function(s,l,d,h,y,p,_){const E=new dN(s,l,d,h,y,p);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Me(s);de(Hr,"RemoteStore shutting down."),l.Ea.add(5),await au(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="FirestoreClient";class MN{constructor(e,t,i,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=tn.UNAUTHENTICATED,this.clientId=up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{de(Zo,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(de(Zo,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=xp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function um(n,e){n.asyncQueue.verifyOperationInProgress(),de(Zo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await zS(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function wT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DN(n);de(Zo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>ET(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>ET(e.remoteStore,s))),n._onlineComponents=e}async function DN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(Zo,"Using user provided OfflineComponentProvider");try{await um(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;na("Error using user provided cache. Falling back to memory cache: "+t),await um(n,new Ef)}}else de(Zo,"Using default OfflineComponentProvider"),await um(n,new RN(void 0));return n._offlineComponents}async function lC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(Zo,"Using user provided OnlineComponentProvider"),await wT(n,n._uninitializedComponentsProvider._online)):(de(Zo,"Using default OnlineComponentProvider"),await wT(n,new Vm))),n._onlineComponents}function xN(n){return lC(n).then((e=>e.syncEngine))}async function NN(n){const e=await lC(n),t=e.eventManager;return t.onListen=hN.bind(null,e.syncEngine),t.onUnlisten=gN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yN.bind(null,e.syncEngine),t}function bN(n,e,t={}){const i=new $o;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,h,y,p){const _=new wN({next:S=>{_.Nu(),d.enqueueAndForget((()=>rN(l,E)));const w=S.docs.has(h);!w&&S.fromCache?p.reject(new ye(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&S.fromCache&&y&&y.source==="server"?p.reject(new ye(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new lN(gp(h.path),_,{includeMetadataChanges:!0,qa:!0});return oN(l,E)})(await NN(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firestore.googleapis.com",DT=!0;class xT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cC,this.ssl=DT}else this.host=e.host,this.ssl=e.ssl??DT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sx)throw new ye(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new b1;switch(i.type){case"firstParty":return new U1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=MT.get(t);i&&(de("ComponentProvider","Removing Datastore"),MT.delete(t),i.terminate())})(this),Promise.resolve()}}function PN(n,e,t,i={}){var p;n=Yl(n,kp);const s=la(e),l=n._getSettings(),d={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(c0(`https://${h}`),f0("Firestore",!0)),l.host!==cC&&l.host!==h&&na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:h,ssl:s,emulatorOptions:i};if(!Or(y,d)&&(n._setSettings(y),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=tn.MOCK_USER;else{_=nR(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ye(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new tn(S)}n._authCredentials=new P1(new tS(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vp(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ou(t,Ht._jsonSchema))return new Ht(e,i||null,new ve(dt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:wt("string",Ht._jsonSchemaVersion),referencePath:wt("string")};class Zl extends Vp{constructor(e,t,i){super(e,t,gp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new ve(e))}withConverter(e){return new Zl(this.firestore,e,this._path)}}function fC(n,e,...t){if(n=Fn(n),arguments.length===1&&(e=up.newId()),H1("doc","path",e),n instanceof kp){const i=dt.fromString(e,...t);return zv(i),new Ht(n,null,new ve(i))}{if(!(n instanceof Ht||n instanceof Zl))throw new ye(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dt.fromString(e,...t));return zv(i),new Ht(n.firestore,n instanceof Zl?n.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="AsyncQueue";class bT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const i=lm();i&&de(NT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=lm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $o;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ha(e))throw e;de(NT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,io("INTERNAL UNHANDLED ERROR: ",PT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Dp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:PT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function PT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Up extends kp{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new bT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bT(e),this._firestoreClient=void 0,await e}}}function kN(n,e){const t=typeof n=="object"?n:p0(),i=typeof n=="string"?n:df,s=Wm(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const l=eR("firestore");l&&PN(s,...l)}return s}function dC(n){if(n._terminated)throw new ye(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VN(n),n._firestoreClient}function VN(n){var i,s,l;const e=n._freezeSettings(),t=(function(h,y,p,_){return new eD(h,y,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,uC(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new MN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const y=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Xt.fromBase64String(e))}catch(t){throw new ye(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ln(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ou(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:wt("string",Ln._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(ou(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:wt("string",Ti._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ou(e,Ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ei(e.vectorValues);throw new ye(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ei._jsonSchemaVersion="firestore/vectorValue/1.0",Ei._jsonSchema={type:wt("string",Ei._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=/^__.*__$/;class LN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,t,this.fieldTransforms):new ru(e,this.data,t,this.fieldTransforms)}}function mC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class Op{constructor(e,t,i,s,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Op({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mC(this.Ac)&&UN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ON{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ff(e)}Cc(e,t,i,s=!1){return new Op({Ac:e,methodName:t,Dc:i,path:Qt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FN(n){const e=n._freezeSettings(),t=Ff(n._databaseId);return new ON(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qN(n,e,t,i,s,l={}){const d=n.Cc(l.merge||l.mergeFields?2:0,e,t,s);_C("Data must be an object, but it was:",d,i);const h=gC(i,d);let y,p;if(l.merge)y=new Qn(d.fieldMask),p=d.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=BN(e,E,t);if(!d.contains(S))throw new ye(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);GN(_,S)||_.push(S)}y=new Qn(_),p=d.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,p=d.fieldTransforms;return new LN(new Un(h),y,p)}function pC(n,e){if(yC(n=Fn(n)))return _C("Unsupported field value:",e,n),gC(n,e);if(n instanceof hC)return(function(i,s){if(!mC(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const l=[];let d=0;for(const h of i){let y=pC(h,s.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(n,e)}return(function(i,s){if((i=Fn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return AD(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=at.fromDate(i);return{timestampValue:_f(s.serializer,l)}}if(i instanceof at){const l=new at(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_f(s.serializer,l)}}if(i instanceof Ti)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ln)return{bytesValue:VS(s.serializer,i._byteString)};if(i instanceof Ht){const l=s.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw s.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Tp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Ei)return(function(d,h){return{mapValue:{fields:{[cS]:{stringValue:fS},[hf]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return yp(h.serializer,p)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${cp(i)}`)})(n,e)}function gC(n,e){const t={};return oS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(n,((i,s)=>{const l=pC(s,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function yC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof Ti||n instanceof Ln||n instanceof Ht||n instanceof hC||n instanceof Ei)}function _C(n,e,t){if(!yC(t)||!nS(t)){const i=cp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function BN(n,e,t){if((e=Fn(e))instanceof Lp)return e._internalPath;if(typeof e=="string")return vC(n,e);throw Sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const HN=new RegExp("[~\\*/\\[\\]]");function vC(n,e,t){if(e.search(HN)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lp(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sf(n,e,t,i,s){const l=i&&!i.isEmpty(),d=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${i}`),d&&(y+=` in document ${s}`),y+=")"),new ye(ae.INVALID_ARGUMENT,h+n+y)}function GN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t,i,s,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(EC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zN extends TC{data(){return super.data()}}function EC(n,e){return typeof e=="string"?vC(n,e):e instanceof Lp?e._internalPath:e._delegate._internalPath}class YN{convertValue(e,t="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return zr(e,((s,l)=>{i[s]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,s,l;const t=(l=(s=(i=e.fields)==null?void 0:i[hf].arrayValue)==null?void 0:s.values)==null?void 0:l.map((d=>Et(d.doubleValue)));return new Ei(t)}convertGeoPoint(e){return new Ti(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=bf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Kl(e));default:return null}}convertTimestamp(e){const t=Jo(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);Xe(BS(i),9688,{name:e});const s=new Jl(i.get(1),i.get(3)),l=new ve(i.popFirst(5));return s.isEqual(t)||io(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lr extends TC{constructor(e,t,i,s,l,d){super(e,t,i,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(EC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Lr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Lr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lr._jsonSchema={type:wt("string",Lr._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class Zc extends Lr{data(e={}){return super.data(e)}}class ql{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Pl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Zc(this._firestore,this._userDataWriter,i.key,i,new Pl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map((h=>{const y=new Zc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Pl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const y=new Zc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Pl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=d.indexOf(h.doc.key),d=d.delete(h.doc.key)),h.type!==1&&(d=d.add(h.doc),_=d.indexOf(h.doc.key)),{type:KN(h.type),doc:y,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ql._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(n){n=Yl(n,Ht);const e=Yl(n.firestore,Up);return bN(dC(e),n._key).then((t=>ZN(e,n,t)))}ql._jsonSchemaVersion="firestore/querySnapshot/1.0",ql._jsonSchema={type:wt("string",ql._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class QN extends YN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function XN(n,e,t){n=Yl(n,Ht);const i=Yl(n.firestore,Up),s=$N(n.converter,e);return WN(i,[qN(FN(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,eo.none())])}function WN(n,e){return(function(i,s){const l=new $o;return i.asyncQueue.enqueueAndForget((async()=>_N(await xN(i),s,l))),l.promise})(dC(n),e)}function ZN(n,e,t){const i=t.docs.get(e._key),s=new QN(n);return new Lr(n,s,e._key,i,new Pl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){fa=s})(ua),ea(new Fr("firestore",((i,{instanceIdentifier:s,options:l})=>{const d=i.getProvider("app").getImmediate(),h=new Up(new k1(i.getProvider("auth-internal")),new L1(d,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(p.options.projectId,_)})(d,s),d);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),zo(qv,Bv,e),zo(qv,Bv,"esm2020")})();const Um={apiKey:"AIzaSyBQPhgF-vn3-4_zcjfVPo5igOzX8NkKKt8",authDomain:"tablit-b6e78.firebaseapp.com",projectId:"tablit-b6e78",storageBucket:"tablit-b6e78.firebasestorage.app",messagingSenderId:"993416386108",appId:"1:993416386108:web:1e6d42be34beb6a8efd539",measurementId:"G-YJP77FD8GZ"},SC=m0(Um),Fp=x1(SC),CC=kN(SC),AC=new Wi;AC.setCustomParameters({prompt:"select_account"});const IC=n=>({uid:n.uid,displayName:n.displayName,photoURL:n.photoURL}),jN=n=>{const e={};return Array.isArray(n)&&n.forEach((t,i)=>{Array.isArray(t)&&t.forEach((s,l)=>{s&&s.length>0&&(e[`${i}-${l}`]=s)})}),e},eb=(n,e)=>{const i=e.periods||7,s=Array(7).fill(0).map(()=>Array(i).fill(0).map(()=>[]));if(!n)return s;for(const l in n){const[d,h]=l.split("-").map(Number);d<7&&h<i&&(s[d][h]=n[l])}return s},RC=(n,e)=>{throw console.error(`Firestore ${e} Error:`,n),n instanceof Wn&&(n.code==="permission-denied"?alert(`Firestore  (permission-denied)


Firestore

---  ---

 1. Firebase: https://console.firebase.google.com/
 2.  (${Um.projectId})  > Firestore Database
 3. 
 4. :

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      // 
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}

 5. 



`):(n.code==="unavailable"||n.message.includes("offline")||n.message.includes("Failed to get document"))&&alert(`Firestore 


FirebaseFirestore

---  ---

 1. Firestore 
   - Firebase: https://console.firebase.google.com/
   -  (${Um.projectId})  > Firestore Database
   - 
   - 
   - : asia-northeast1

 2. API
   - 
   - : https://console.cloud.google.com/apis/library/firestore.googleapis.com
   - Cloud Firestore API

`)),n},tb=async()=>{try{const n=await FM(Fp,AC);return IC(n.user)}catch(n){throw n instanceof Wn?(console.error("Firebase Auth Error:",{code:n.code,message:n.message}),n.code==="auth/popup-blocked"?alert(""):n.code==="auth/popup-closed-by-user"?console.log("Login popup was closed by the user."):n.code==="auth/configuration-not-found"?alert(`Google (auth/configuration-not-found)

Firebase
Firebase

---  ---

 1. Google 
   - Firebase: https://console.firebase.google.com/
   -  > Authentication > Sign-in method
   - Google

 2. 
   - Authentication > Settings
   - : localhost

 3. Firebase
   -  > 
   -  'firebaseConfig'  'firebaseConfig.ts' 

3`):alert("")):(console.error("An unexpected error occurred during sign-in:",n),alert("")),n}},nb=()=>vM(Fp),ib=n=>_M(Fp,e=>{n(e?IC(e):null)}),ob=async(n,e)=>{try{const t={...e,timetables:e.timetables.map(s=>({...s,grid:jN(s.grid)}))},i=fC(CC,"users",n);await XN(i,{timetableData:t})}catch(t){RC(t,"")}},rb=async n=>{try{const e=fC(CC,"users",n),t=await JN(e);if(t.exists()){const i=t.data().timetableData;return{...i,timetables:i.timetables.map(l=>({...l,grid:eb(l.grid,l.settings)}))}}else return null}catch(e){return RC(e,""),null}},cm=()=>({id:`timetable-${Date.now()}`,name:"",settings:{days:Hl.slice(0,5),periods:7},grid:Array(7).fill(0).map(()=>Array(7).fill(0).map(()=>[]))}),sb=n=>{const[e,t]=Ne.useState([]),[i,s]=Ne.useState(null),[l,d]=Ne.useState("idle"),[h,y]=Ne.useState(!0),p=Ne.useRef(null);Ne.useEffect(()=>{(async()=>{y(!0);try{let J=null,se=null;if(n){const x=await rb(n.uid);x&&(J=x.timetables,se=x.activeTimetableId)}else{const x=localStorage.getItem("timetables"),M=localStorage.getItem("activeTimetableId");x&&(J=JSON.parse(x),se=M)}if(J&&J.length>0)t(J),se&&J.some(x=>x.id===se)?s(se):s(J[0].id);else{const x=cm();t([x]),s(x.id)}}catch(J){console.error("Failed to load data:",J);const se=cm();t([se]),s(se.id)}finally{y(!1),d("idle")}})()},[n]),Ne.useEffect(()=>{if(!(h||e.length===0))return d("saving"),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{const j={timetables:e,activeTimetableId:i};try{n?ob(n.uid,j):(localStorage.setItem("timetables",JSON.stringify(e)),i&&localStorage.setItem("activeTimetableId",i)),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(J){console.error("Failed to save data:",J),d("idle")}},1e3),()=>{p.current&&clearTimeout(p.current)}},[e,i,n,h]);const _=e.find(j=>j.id===i),E=Ne.useCallback(j=>{t(J=>J.map(se=>se.id===i?j:se))},[i]),S=j=>{const J={...cm(),name:j,id:`timetable-${Date.now()}`};t(se=>[...se,J]),s(J.id)},w=Ne.useCallback(j=>{try{const J=JSON.parse(j);if(typeof J.name!="string"||typeof J.settings!="object"||!Array.isArray(J.grid))throw new Error("Invalid timetable format.");const se={...J,id:`timetable-${Date.now()}`};return t(x=>[...x,se]),s(se.id),!0}catch(J){return console.error("Failed to import timetable:",J),!1}},[]),V=j=>{t(J=>{const se=J.filter(x=>x.id!==j);return i===j&&s(se.length>0?se[0].id:null),se})},q=Ne.useCallback(j=>{if(!_)return;const J=Array(Hl.length).fill(0).map((se,x)=>Array(j.periods).fill(0).map((M,D)=>{var k;const b=Hl[x];return _.settings.days.includes(b)&&x<_.settings.days.length&&D<_.settings.periods?((k=_.grid[x])==null?void 0:k[D])||[]:[]}));E({..._,settings:j,grid:J})},[_,E]),H=Ne.useCallback((j,J,se)=>{if(!_)return;const x=_.grid.map(b=>b.map(k=>[...k])),M=x[J][se],D=M.findIndex(b=>b.id===j.id);D>-1?M[D]=j:M.push(j),E({..._,grid:x})},[_,E]),oe=Ne.useCallback((j,J,se)=>{if(!_)return;const x=_.grid.map(M=>M.map(D=>[...D]));x[J][se]=x[J][se].filter(M=>M.id!==j),E({..._,grid:x})},[_,E]),Q=Ne.useCallback((j,J,se)=>{if(!_)return;const x=_.grid.map(M=>M.map(D=>[...D]));x[J.dayIndex][J.periodIndex]=x[J.dayIndex][J.periodIndex].filter(M=>M.id!==j.id),x[se.dayIndex][se.periodIndex].push(j),E({..._,grid:x})},[_,E]),X=_?[...new Set(_.grid.flat(2).map(j=>j.id))].map(j=>_.grid.flat(2).find(J=>J.id===j)).reduce((j,J)=>j+((J==null?void 0:J.credits)||0),0):0;return{timetables:e,activeTimetable:_,activeTimetableId:i,setActiveTimetableId:s,addTimetable:S,importTimetable:w,deleteTimetable:V,updateTimetableSettings:q,saveSubject:H,deleteSubject:oe,moveSubject:Q,totalCredits:X,saveStatus:l,isLoading:h}},qp=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),wC=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Hf=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),MC=({className:n})=>O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),ab=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),lb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),ub=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),cb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),fb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),db=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),hb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),mb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),pb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),gb=({className:n})=>O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:n,children:O.jsx("path",{d:"M3.105 2.289a.75.75 0 00-.826.95l1.414 4.949a.75.75 0 00.95.826L11.25 8.25l-5.607-1.402a.75.75 0 00-.95.826l1.414 4.949a.75.75 0 00.95.826L11.25 11.75l-5.607-1.402a.75.75 0 00-.95.826l1.414 4.949a.75.75 0 00.95.826L16.25 12l-12.2-9.148a.75.75 0 00-.945-.563z"})}),yb=({status:n})=>{if(n==="idle")return null;const t={saving:{icon:O.jsx(pb,{className:"w-4 h-4 animate-spin"}),text:"...",color:"text-gray-700 dark:text-gray-300"},saved:{icon:O.jsx(mb,{className:"w-4 h-4"}),text:"",color:"text-emerald-600 dark:text-emerald-400"}}[n];return O.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-medium px-2 py-1 rounded-full bg-black/5 dark:bg-white/10 ${t.color}`,children:[t.icon,O.jsx("span",{children:t.text})]})},_b=({timetables:n,activeTimetableId:e,setActiveTimetableId:t,onAddTimetable:i,onDeleteTimetable:s,onOpenSettings:l,onToggleChat:d,totalCredits:h,theme:y,toggleTheme:p,onExport:_,onImport:E,user:S,onLogin:w,onLogout:V,saveStatus:q})=>O.jsxs("header",{className:"sticky top-0 z-30 p-4 bg-gray-100/80 dark:bg-gray-900/70 backdrop-blur-lg shadow-md border-b border-black/10 dark:border-white/10 flex flex-wrap justify-between items-center gap-4",children:[O.jsx("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap",children:e?O.jsxs(O.Fragment,{children:[O.jsx("select",{value:e,onChange:H=>t(H.target.value),className:"bg-gray-200/50 dark:bg-gray-700/50 border border-black/10 dark:border-white/10 rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-sky-500 transition-colors",children:n.map(H=>O.jsx("option",{value:H.id,className:"bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white",children:H.name},H.id))}),O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:O.jsx(qp,{className:"w-5 h-5"})}),O.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors text-red-500 hover:text-red-600",title:"",children:O.jsx(wC,{className:"w-5 h-5"})})]}),O.jsxs("div",{className:"bg-sky-500/20 text-sky-800 dark:text-sky-200 text-sm font-bold px-3 py-1.5 rounded-full",children:[": ",h]}),O.jsx(yb,{status:q})]}):O.jsx("button",{onClick:i,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})}),O.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[O.jsxs("label",{htmlFor:"import-file",className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors cursor-pointer",title:" (.tmx)",children:[O.jsx(fb,{className:"w-6 h-6"}),O.jsx("input",{id:"import-file",type:"file",accept:".tmx",className:"hidden",onChange:E})]}),O.jsx("button",{onClick:_,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:" (.tmx)",children:O.jsx(cb,{className:"w-6 h-6"})}),O.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:O.jsx(MC,{className:"w-6 h-6"})}),O.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"AI",children:O.jsx(ab,{className:"w-6 h-6"})}),O.jsx("button",{onClick:p,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:y==="light"?O.jsx(ub,{className:"w-6 h-6"}):O.jsx(lb,{className:"w-6 h-6"})}),O.jsx("div",{className:"border-l border-gray-300 dark:border-gray-600 pl-2 ml-1",children:S?O.jsxs("div",{className:"flex items-center gap-2",children:[S.photoURL?O.jsx("img",{src:S.photoURL,alt:"profile",className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-500"}):O.jsx(db,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"}),O.jsx("button",{onClick:V,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:O.jsx(hb,{className:"w-6 h-6"})})]}):O.jsx("button",{onClick:w,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm py-2 px-4 rounded-lg transition-colors",children:"Google"})})]})]}),vb=({subject:n,onClick:e,dayIndex:t,periodIndex:i})=>{const s=h=>{const y={subject:n,from:{dayIndex:t,periodIndex:i}};h.dataTransfer.setData("application/json",JSON.stringify(y)),h.currentTarget.style.opacity="0.5",h.currentTarget.style.transform="scale(0.95)"},l=h=>{h.currentTarget.style.opacity="1",h.currentTarget.style.transform="scale(1)"},d=n.tasks.filter(h=>!h.completed).length;return O.jsxs("div",{draggable:!0,onDragStart:s,onDragEnd:l,onClick:e,className:`${n.color} rounded-lg p-1.5 text-white text-xs cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex flex-col justify-between h-full`,children:[O.jsxs("div",{children:[O.jsx("p",{className:"font-bold text-sm leading-tight break-words",children:n.name}),O.jsx("p",{className:"text-white/80 break-words",children:n.room})]}),d>0&&O.jsx("div",{className:"mt-1 flex items-center self-end",children:O.jsx("span",{className:"text-xs bg-white/30 text-white rounded-full px-1.5 py-0.5 font-bold",children:d})})]})},Tb=({timetable:n,onAddSubject:e,onEditSubject:t,onMoveSubject:i})=>{const{settings:s,grid:l}=n,d=p=>{p.preventDefault(),p.currentTarget.classList.add("bg-sky-400/30")},h=p=>{p.currentTarget.classList.remove("bg-sky-400/30")},y=(p,_,E)=>{p.preventDefault(),p.currentTarget.classList.remove("bg-sky-400/30");const S=p.dataTransfer.getData("application/json");if(S){const{subject:w,from:V}=JSON.parse(S);i(w,V,{dayIndex:_,periodIndex:E})}};return O.jsx("div",{className:"p-2 md:p-8 flex-grow fade-in",children:O.jsxs("div",{className:"grid gap-0.5 md:gap-1 bg-gray-500/10 backdrop-blur-md rounded-2xl p-1 md:p-2 border border-black/10 dark:border-white/10",style:{gridTemplateColumns:`auto repeat(${s.days.length}, 1fr)`},children:[O.jsx("div",{className:"p-2"}),s.days.map((p,_)=>O.jsx("div",{className:"text-center font-bold py-3 text-xs md:text-base text-gray-700 dark:text-gray-300",children:p},_)),Array.from({length:s.periods}).map((p,_)=>O.jsxs(i0.Fragment,{children:[O.jsx("div",{className:"text-center font-bold px-1 md:px-2 py-4 text-xs md:text-base text-gray-700 dark:text-gray-300",children:_+1}),s.days.map((E,S)=>{var q;const w=Eb.indexOf(E),V=((q=l[w])==null?void 0:q[_])||[];return O.jsxs("div",{className:"min-h-[90px] md:min-h-[110px] bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 rounded-lg p-1 flex flex-col gap-1 transition-colors duration-300",onDragOver:d,onDragLeave:h,onDrop:H=>y(H,w,_),children:[V.map(H=>O.jsx(vb,{subject:H,onClick:()=>t(H,w,_),dayIndex:w,periodIndex:_},H.id)),O.jsx("button",{onClick:()=>e(w,_),className:"mt-auto w-full flex-grow flex items-center justify-center text-gray-400/50 hover:bg-black/5 dark:hover:bg-white/5 rounded-md transition-colors",children:O.jsx(qp,{className:"w-5 h-5"})})]},`${S}-${_}`)})]},_))]})})},Eb=["","","","","","",""],kT={name:"",teacher:"",room:"",credits:0,memo:"",color:Hc[0],tasks:[]},Sb=({isOpen:n,onClose:e,onSave:t,onDelete:i,subjectData:s})=>{const[l,d]=Ne.useState({...kT,id:`subject-${Date.now()}`}),[h,y]=Ne.useState(""),[p,_]=Ne.useState("");Ne.useEffect(()=>{n&&(s.subject?d(s.subject):d({...kT,id:`subject-${Date.now()}`,color:Hc[Math.floor(Math.random()*Hc.length)]}))},[n,s]);const E=Q=>{const{name:X,value:j}=Q.target;d(J=>({...J,[X]:X==="credits"?parseInt(j)||0:j}))},S=Q=>{d(X=>({...X,color:Q}))},w=()=>{if(h.trim()==="")return;const Q={id:`task-${Date.now()}`,content:h,dueDate:p,completed:!1};d(X=>({...X,tasks:[...X.tasks,Q]})),y(""),_("")},V=Q=>{d(X=>({...X,tasks:X.tasks.map(j=>j.id===Q?{...j,completed:!j.completed}:j)}))},q=Q=>{d(X=>({...X,tasks:X.tasks.filter(j=>j.id!==Q)}))},H=()=>{t(l,s.dayIndex,s.periodIndex),e()},oe=()=>{i&&s.subject&&(i(s.subject.id,s.dayIndex,s.periodIndex),e())};return O.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:O.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[O.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[O.jsx("h2",{className:"text-xl font-bold",children:s.subject?"":""}),O.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:O.jsx(Hf,{className:"w-6 h-6"})})]}),O.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsx("input",{name:"name",value:l.name,onChange:E,placeholder:"",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("input",{name:"teacher",value:l.teacher,onChange:E,placeholder:"",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("input",{name:"room",value:l.room,onChange:E,placeholder:"",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("input",{name:"credits",type:"number",value:l.credits,onChange:E,placeholder:"",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"})]}),O.jsx("textarea",{name:"memo",value:l.memo,onChange:E,placeholder:"",className:"w-full bg-black/5 dark:bg-white/5 p-2 rounded-md h-24 resize-none focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("div",{className:"flex flex-wrap gap-2",children:Hc.map(Q=>O.jsx("button",{onClick:()=>S(Q),className:`w-8 h-8 rounded-full ${Q} transition-transform hover:scale-110 ${l.color===Q?"ring-2 ring-offset-2 ring-offset-gray-100 dark:ring-offset-gray-900 ring-sky-500":""}`},Q))}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),O.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:l.tasks.map(Q=>O.jsxs("div",{className:"flex items-center gap-2 bg-black/5 dark:bg-white/5 p-2 rounded-md",children:[O.jsx("input",{type:"checkbox",checked:Q.completed,onChange:()=>V(Q.id),className:"form-checkbox h-5 w-5 rounded bg-gray-300 dark:bg-gray-600 border-gray-400 dark:border-gray-500 text-sky-600 focus:ring-sky-500"}),O.jsxs("div",{className:"flex-grow",children:[O.jsx("p",{className:`${Q.completed?"line-through text-gray-500":""}`,children:Q.content}),Q.dueDate&&O.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[": ",Q.dueDate]})]}),O.jsx("button",{onClick:()=>q(Q.id),className:"p-1 rounded-full text-gray-500 hover:bg-red-500/20 hover:text-red-500",children:O.jsx(wC,{className:"w-4 h-4"})})]},Q.id))}),O.jsxs("div",{className:"mt-4 flex gap-2",children:[O.jsx("input",{value:h,onChange:Q=>y(Q.target.value),placeholder:"",className:"flex-grow bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),O.jsx("input",{type:"date",value:p,onChange:Q=>_(Q.target.value),className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500"}),O.jsx("button",{onClick:w,className:"bg-sky-600 hover:bg-sky-700 text-white p-2 rounded-md",children:O.jsx(qp,{className:"w-5 h-5"})})]})]})]}),O.jsxs("div",{className:"p-4 flex justify-between items-center border-t border-black/10 dark:border-white/10 mt-auto",children:[O.jsx("div",{children:s.subject&&i&&O.jsx("button",{onClick:oe,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})}),O.jsx("button",{onClick:H,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})]})]})})},Cb=({isOpen:n,onClose:e,onSave:t,currentSettings:i})=>{const[s,l]=Ne.useState(i);if(Ne.useEffect(()=>{n&&l(i)},[n,i]),!n)return null;const d=p=>{const _=s.days.includes(p)?s.days.filter(S=>S!==p):[...s.days,p],E=Hl.filter(S=>_.includes(S));l(S=>({...S,days:E}))},h=p=>{const _=Math.max(1,Math.min(10,parseInt(p.target.value)||1));l(E=>({...E,periods:_}))},y=()=>{t(s),e()};return O.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:O.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[O.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[O.jsx("h2",{className:"text-xl font-bold",children:""}),O.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:O.jsx(Hf,{className:"w-6 h-6"})})]}),O.jsxs("div",{className:"p-6 space-y-6",children:[O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),O.jsx("div",{className:"flex flex-wrap gap-2",children:Hl.map(p=>O.jsxs("button",{onClick:()=>d(p),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${s.days.includes(p)?"bg-sky-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[p,""]},p))})]}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("input",{type:"range",min:"1",max:"10",value:s.periods,onChange:h,className:"w-full h-2 bg-gray-300 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-sky-600"}),O.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 rounded-md px-3 py-1 font-bold",children:s.periods})]})]})]}),O.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10",children:O.jsx("button",{onClick:y,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ab,Ib;function Rb(){return{geminiUrl:Ab,vertexUrl:Ib}}function wb(n,e,t,i){var s,l;if(!(n!=null&&n.baseUrl)){const d=Rb();return e?(s=d.vertexUrl)!==null&&s!==void 0?s:t:(l=d.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jr{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(n,e,t){for(let l=0;l<e.length-1;l++){const d=e[l];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[h])){const y=n[h];if(Array.isArray(t))for(let p=0;p<y.length;p++){const _=y[p];c(_,e.slice(l+1),t[p])}else for(const p of y)c(p,e.slice(l+1),t)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in n||(n[h]=[{}]);const y=n[h];c(y[0],e.slice(l+1),t);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function u(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const l=n[s];return Array.isArray(l)?l.map(d=>u(d,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(VT||(VT={}));var UT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(UT||(UT={}));var Bo;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Bo||(Bo={}));var LT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(LT||(LT={}));var OT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(OT||(OT={}));var FT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(FT||(FT={}));var qT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(qT||(qT={}));var BT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(BT||(BT={}));var HT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(HT||(HT={}));var GT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(GT||(GT={}));var zT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(zT||(zT={}));var YT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(YT||(YT={}));var $T;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($T||($T={}));var KT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(KT||(KT={}));var JT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(JT||(JT={}));var Cf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Cf||(Cf={}));var QT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(QT||(QT={}));var Om;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Om||(Om={}));var XT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(XT||(XT={}));var WT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(WT||(WT={}));var ZT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ZT||(ZT={}));var jT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(jT||(jT={}));var eE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(eE||(eE={}));var tE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tE||(tE={}));var nE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(nE||(nE={}));var iE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(iE||(iE={}));var oE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(oE||(oE={}));var rE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(rE||(rE={}));var sE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sE||(sE={}));var aE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aE||(aE={}));var lE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lE||(lE={}));var uE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uE||(uE={}));var cE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(cE||(cE={}));var fE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(fE||(fE={}));var dE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(dE||(dE={}));var hE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(hE||(hE={}));var mE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(mE||(mE={}));var pE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(pE||(pE={}));var gE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gE||(gE={}));var yE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yE||(yE={}));var _E;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(_E||(_E={}));var vE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vE||(vE={}));var TE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(TE||(TE={}));var EE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(EE||(EE={}));var SE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(SE||(SE={}));var $s;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})($s||($s={}));class Fm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Dl{get text(){var e,t,i,s,l,d,h,y;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const E=[];for(const S of(y=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[w,V]of Object.entries(S))w!=="text"&&w!=="thought"&&(V!==null||V!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,t,i,s,l,d,h,y;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const E of(y=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,s,l,d,h,y;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(y=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,s,l,d,h,y,p;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(y=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,s,l,d,h,y,p;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(y=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class CE{}class AE{}class Mb{}class Db{}class xb{}class Nb{}class IE{}class RE{}class wE{}class bb{}class ME{}class Af{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new Af;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,t){const s=e.response;if(s){const l=new ME,d=s.videos;l.generatedVideos=d==null?void 0:d.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?Lm(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),l.raiMediaFilteredCount=s.raiMediaFilteredCount,l.raiMediaFilteredReasons=s.raiMediaFilteredReasons,i.response=l}}else{const s=e.response;if(s){const l=new ME,d=s.generateVideoResponse,h=d==null?void 0:d.generatedSamples;l.generatedVideos=h==null?void 0:h.map(y=>{const p=y.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Lm(p==null?void 0:p.encodedVideo):void 0,mimeType:y.encoding}}}),l.raiMediaFilteredCount=d==null?void 0:d.raiMediaFilteredCount,l.raiMediaFilteredReasons=d==null?void 0:d.raiMediaFilteredReasons,i.response=l}}return i}}class DE{}class xE{}class NE{}class Pb{}class kb{}class Vb{}class bE{}class Ub{get text(){var e,t,i;let s="",l=!1;const d=[];for(const h of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[y,p]of Object.entries(h))y!=="text"&&y!=="thought"&&p!==null&&d.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,s+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,t,i;let s="";const l=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,y]of Object.entries(d))h!=="inlineData"&&y!==null&&l.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(s+=atob(d.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Lb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Je(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function DC(n,e){const t=Je(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function xC(n){return Array.isArray(n)?n.map(e=>If(e)):[If(n)]}function If(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function NC(n){const e=If(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bC(n){const e=If(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function PE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function PC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>PE(e)):[PE(n)]}function qm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function kE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function VE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function on(n){if(n==null)throw new Error("ContentUnion is required");return qm(n)?n:{role:"user",parts:PC(n)}}function kC(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=on(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=on(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>on(t)):[on(e)]}function On(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(kE(n)||VE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(n)]}const e=[],t=[],i=qm(n[0]);for(const s of n){const l=qm(s);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(kE(s)||VE(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:PC(t)}),e}function Ob(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Bo).includes(t[0].toUpperCase())?t[0].toUpperCase():Bo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Bo).includes(i.toUpperCase())?i.toUpperCase():Bo.TYPE_UNSPECIFIED})}}function Ws(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Ob(n.type,e);for(const[d,h]of Object.entries(n))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Bo).includes(h.toUpperCase())?h.toUpperCase():Bo.TYPE_UNSPECIFIED}else if(t.includes(d))e[d]=Ws(h);else if(i.includes(d)){const y=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}y.push(Ws(p))}e[d]=y}else if(s.includes(d)){const y={};for(const[p,_]of Object.entries(h))y[p]=Ws(_);e[d]=y}else{if(d==="additionalProperties")continue;e[d]=h}return e}function Bp(n){return Ws(n)}function Hp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Gp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function pa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ws(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ws(e.response));return n}function ga(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Fb(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function ro(n,e){if(typeof e!="string")throw new Error("name must be a string");return Fb(n,e,"cachedContents")}function VC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Qr(n){return Lm(n)}function qb(n){return n!=null&&typeof n=="object"&&"name"in n}function Bb(n){return n!=null&&typeof n=="object"&&"video"in n}function Hb(n){return n!=null&&typeof n=="object"&&"uri"in n}function UC(n){var e;let t;if(qb(n)&&(t=n.name),!(Hb(n)&&(t=n.uri,t===void 0))&&!(Bb(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function LC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function OC(n){for(const e of["models","tunedModels","publisherModels"])if(Gb(n,e))return n[e];return[]}function Gb(n,e){return n!==null&&typeof n=="object"&&e in n}function zb(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Yb(n,e={}){const t=[],i=new Set;for(const s of n){const l=s.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const d=zb(s,e);d.functionDeclarations&&t.push(...d.functionDeclarations)}return{functionDeclarations:t}}function FC(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function $b(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ya(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function qC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kb(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function Jb(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Qb(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Xb(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Kb(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],Jb(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],Qb(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function BC(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Xb(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function Wb(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const y=u(n,["items"]);y!=null&&c(e,["items"],y);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const _=u(n,["maxLength"]);_!=null&&c(e,["maxLength"],_);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const w=u(n,["minItems"]);w!=null&&c(e,["minItems"],w);const V=u(n,["minLength"]);V!=null&&c(e,["minLength"],V);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const H=u(n,["minimum"]);H!=null&&c(e,["minimum"],H);const oe=u(n,["nullable"]);oe!=null&&c(e,["nullable"],oe);const Q=u(n,["pattern"]);Q!=null&&c(e,["pattern"],Q);const X=u(n,["properties"]);X!=null&&c(e,["properties"],X);const j=u(n,["propertyOrdering"]);j!=null&&c(e,["propertyOrdering"],j);const J=u(n,["required"]);J!=null&&c(e,["required"],J);const se=u(n,["title"]);se!=null&&c(e,["title"],se);const x=u(n,["type"]);return x!=null&&c(e,["type"],x),e}function Zb(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&c(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function jb(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function eP(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function tP(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],eP(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function nP(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function iP(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],nP(t)),e}function oP(){return{}}function rP(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function sP(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(p=>jb(p))),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],tP(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],iP(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],oP());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],rP(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function aP(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function lP(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function uP(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],lP(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function cP(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],aP(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],uP(i)),e}function fP(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function HC(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],fP(t)),e}function dP(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],HC(i)),e}function hP(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>dP(s))),c(e,["speakerVoiceConfigs"],i)}return e}function mP(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],HC(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],hP(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function pP(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function gP(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],BC(on(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const y=u(e,["candidateCount"]);y!=null&&c(i,["candidateCount"],y);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const _=u(e,["stopSequences"]);_!=null&&c(i,["stopSequences"],_);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const w=u(e,["presencePenalty"]);w!=null&&c(i,["presencePenalty"],w);const V=u(e,["frequencyPenalty"]);V!=null&&c(i,["frequencyPenalty"],V);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const H=u(e,["responseMimeType"]);H!=null&&c(i,["responseMimeType"],H);const oe=u(e,["responseSchema"]);oe!=null&&c(i,["responseSchema"],Wb(Bp(oe)));const Q=u(e,["responseJsonSchema"]);if(Q!=null&&c(i,["responseJsonSchema"],Q),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=u(e,["safetySettings"]);if(t!==void 0&&X!=null){let k=X;Array.isArray(k)&&(k=k.map(F=>Zb(F))),c(t,["safetySettings"],k)}const j=u(e,["tools"]);if(t!==void 0&&j!=null){let k=ga(j);Array.isArray(k)&&(k=k.map(F=>sP(pa(F)))),c(t,["tools"],k)}const J=u(e,["toolConfig"]);if(t!==void 0&&J!=null&&c(t,["toolConfig"],cP(J)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=u(e,["cachedContent"]);t!==void 0&&se!=null&&c(t,["cachedContent"],ro(n,se));const x=u(e,["responseModalities"]);x!=null&&c(i,["responseModalities"],x);const M=u(e,["mediaResolution"]);M!=null&&c(i,["mediaResolution"],M);const D=u(e,["speechConfig"]);if(D!=null&&c(i,["speechConfig"],mP(Hp(D))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=u(e,["thinkingConfig"]);return b!=null&&c(i,["thinkingConfig"],pP(b)),i}function yP(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["request","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=On(s);Array.isArray(d)&&(d=d.map(h=>BC(h))),c(t,["request","contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["request","generationConfig"],gP(n,l,t)),t}function _P(n,e){const t={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&c(t,["fileName"],i);const s=u(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>yP(n,d))),c(t,["requests","requests"],l)}return t}function vP(n,e){const t={},i=u(n,["displayName"]);if(e!==void 0&&i!=null&&c(e,["batch","displayName"],i),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function UE(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["src"]);s!=null&&c(t,["batch","inputConfig"],_P(n,FC(n,s)));const l=u(e,["config"]);return l!=null&&c(t,["config"],vP(l,t)),t}function TP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ya(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function EP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ya(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function SP(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);if(e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function CP(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],SP(t,e)),e}function AP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ya(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function IP(n){const e={},t=u(n,["format"]);t!=null&&c(e,["instancesFormat"],t);const i=u(n,["gcsUri"]);i!=null&&c(e,["gcsSource","uris"],i);const s=u(n,["bigqueryUri"]);if(s!=null&&c(e,["bigquerySource","inputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function RP(n){const e={},t=u(n,["format"]);t!=null&&c(e,["predictionsFormat"],t);const i=u(n,["gcsUri"]);i!=null&&c(e,["gcsDestination","outputUriPrefix"],i);const s=u(n,["bigqueryUri"]);if(s!=null&&c(e,["bigqueryDestination","outputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function wP(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["dest"]);return e!==void 0&&s!=null&&c(e,["outputConfig"],RP($b(s))),t}function MP(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],Je(n,i));const s=u(e,["src"]);s!=null&&c(t,["inputConfig"],IP(FC(n,s)));const l=u(e,["config"]);return l!=null&&c(t,["config"],wP(l,t)),t}function DP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ya(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function xP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ya(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function NP(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function bP(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],NP(t,e)),e}function PP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ya(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function kP(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function VP(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function UP(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function LP(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],kP(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],VP(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],UP(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function OP(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>LP(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function FP(n){const e={},t=u(n,["citationSources"]);return t!=null&&c(e,["citations"],t),e}function qP(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function BP(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>qP(s))),c(e,["urlMetadata"],i)}return e}function HP(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],OP(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],FP(i));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],BP(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(e,["groundingMetadata"],y);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const _=u(n,["logprobsResult"]);_!=null&&c(e,["logprobsResult"],_);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function GP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(p=>HP(p))),c(e,["candidates"],y)}const s=u(n,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const l=u(n,["promptFeedback"]);l!=null&&c(e,["promptFeedback"],l);const d=u(n,["responseId"]);d!=null&&c(e,["responseId"],d);const h=u(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function GC(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["code"]);i!=null&&c(e,["code"],i);const s=u(n,["message"]);return s!=null&&c(e,["message"],s),e}function zP(n){const e={},t=u(n,["response"]);t!=null&&c(e,["response"],GP(t));const i=u(n,["error"]);return i!=null&&c(e,["error"],GC(i)),e}function YP(n){const e={},t=u(n,["responsesFile"]);t!=null&&c(e,["fileName"],t);const i=u(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>zP(l))),c(e,["inlinedResponses"],s)}return e}function jc(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata","displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["metadata","state"]);s!=null&&c(e,["state"],qC(s));const l=u(n,["metadata","createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["metadata","endTime"]);d!=null&&c(e,["endTime"],d);const h=u(n,["metadata","updateTime"]);h!=null&&c(e,["updateTime"],h);const y=u(n,["metadata","model"]);y!=null&&c(e,["model"],y);const p=u(n,["metadata","output"]);return p!=null&&c(e,["dest"],YP(p)),e}function $P(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>jc(d))),c(e,["batchJobs"],l)}return e}function KP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);return l!=null&&c(e,["error"],GC(l)),e}function zC(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["code"]);i!=null&&c(e,["code"],i);const s=u(n,["message"]);return s!=null&&c(e,["message"],s),e}function JP(n){const e={},t=u(n,["instancesFormat"]);t!=null&&c(e,["format"],t);const i=u(n,["gcsSource","uris"]);i!=null&&c(e,["gcsUri"],i);const s=u(n,["bigquerySource","inputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function QP(n){const e={},t=u(n,["predictionsFormat"]);t!=null&&c(e,["format"],t);const i=u(n,["gcsDestination","outputUriPrefix"]);i!=null&&c(e,["gcsUri"],i);const s=u(n,["bigqueryDestination","outputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function Bm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],qC(s));const l=u(n,["error"]);l!=null&&c(e,["error"],zC(l));const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["startTime"]);h!=null&&c(e,["startTime"],h);const y=u(n,["endTime"]);y!=null&&c(e,["endTime"],y);const p=u(n,["updateTime"]);p!=null&&c(e,["updateTime"],p);const _=u(n,["model"]);_!=null&&c(e,["model"],_);const E=u(n,["inputConfig"]);E!=null&&c(e,["src"],JP(E));const S=u(n,["outputConfig"]);return S!=null&&c(e,["dest"],QP(S)),e}function XP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Bm(d))),c(e,["batchJobs"],l)}return e}function WP(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);return l!=null&&c(e,["error"],zC(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Gr||(Gr={}));class uu{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!i||Object.keys(i).length===0?d={config:{}}:typeof i=="object"?d=Object.assign({},i):d=i,d.config&&(d.config.pageToken=t.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(l=(s=d.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZP extends Jr{constructor(e){super(),this.apiClient=e,this.create=async t=>{var i,s;if(this.apiClient.isVertexAI()){const d=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${d}`;else throw new Error("Unsupported source:"+t.src)}else if(Array.isArray(t.src)||typeof t.src!="string"&&t.src.inlinedRequests){let l="",d={};const h=UE(this.apiClient,t);l=me("{model}:batchGenerateContent",h._url),d=h._query;const _=h.batch.inputConfig.requests,E=_.requests,S=[];for(const V of E){const q=V;if(q.systemInstruction){const H=q.systemInstruction;delete q.systemInstruction;const oe=q.request;oe.systemInstruction=H,q.request=oe}S.push(q)}return _.requests=S,delete h.config,delete h._url,delete h._query,this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(V=>V.json()).then(V=>jc(V))}return await this.createInternal(t)},this.list=async(t={})=>new uu(Gr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}async createInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=MP(this.apiClient,e);return h=me("batchPredictionJobs",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Bm(_))}else{const p=UE(this.apiClient,e);return h=me("{model}:batchGenerateContent",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>jc(_))}}async get(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=DP(this.apiClient,e);return h=me("batchPredictionJobs/{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Bm(_))}else{const p=TP(this.apiClient,e);return h=me("batches/{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>jc(_))}}async cancel(e){var t,i,s,l;let d="",h={};if(this.apiClient.isVertexAI()){const y=xP(this.apiClient,e);d=me("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y.config,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const y=EP(this.apiClient,e);d=me("batches/{name}:cancel",y._url),h=y._query,delete y.config,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=bP(e);return h=me("batchPredictionJobs",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=XP(_),S=new bE;return Object.assign(S,E),S})}else{const p=CP(e);return h=me("batches",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=$P(_),S=new bE;return Object.assign(S,E),S})}}async delete(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=PP(this.apiClient,e);return h=me("batchPredictionJobs/{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>WP(_))}else{const p=AP(this.apiClient,e);return h=me("batches/{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>KP(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jP(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function e2(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function t2(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function n2(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],jP(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],e2(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],t2(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function LE(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>n2(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function i2(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function o2(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function r2(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],o2(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function s2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function a2(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],s2(t)),e}function l2(){return{}}function u2(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function c2(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(p=>i2(p))),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],r2(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],a2(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],l2());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],u2(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function f2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function d2(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function h2(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],d2(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function m2(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],f2(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],h2(i)),e}function p2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const l=u(n,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let _=On(d);Array.isArray(_)&&(_=_.map(E=>LE(E))),c(e,["contents"],_)}const h=u(n,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],LE(on(h)));const y=u(n,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(E=>c2(E))),c(e,["tools"],_)}const p=u(n,["toolConfig"]);if(e!==void 0&&p!=null&&c(e,["toolConfig"],m2(p)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function g2(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],DC(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],p2(s,t)),t}function y2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ro(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function _2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ro(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function v2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),t}function T2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ro(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],v2(s,t)),t}function E2(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function S2(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],E2(t,e)),e}function C2(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function A2(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function I2(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function R2(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],C2(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],A2(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],I2(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function OE(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>R2(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function w2(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function M2(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function D2(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],M2(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function x2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function N2(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],x2(t)),e}function b2(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function P2(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function k2(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],P2(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function V2(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],k2(t)),e}function U2(){return{}}function L2(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function O2(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>w2(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],D2(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],N2(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],b2(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],V2(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],U2());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],L2(p));const _=u(n,["codeExecution"]);return _!=null&&c(e,["codeExecution"],_),e}function F2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function q2(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function B2(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],q2(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function H2(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],F2(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],B2(i)),e}function G2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const l=u(n,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let E=On(d);Array.isArray(E)&&(E=E.map(S=>OE(S))),c(e,["contents"],E)}const h=u(n,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],OE(on(h)));const y=u(n,["tools"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(S=>O2(S))),c(e,["tools"],E)}const p=u(n,["toolConfig"]);e!==void 0&&p!=null&&c(e,["toolConfig"],H2(p));const _=u(n,["kmsKeyName"]);return e!==void 0&&_!=null&&c(e,["encryption_spec","kmsKeyName"],_),t}function z2(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],DC(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],G2(s,t)),t}function Y2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ro(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function $2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ro(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function K2(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),t}function J2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],ro(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],K2(s,t)),t}function Q2(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function X2(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],Q2(t,e)),e}function ef(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["model"]);s!=null&&c(e,["model"],s);const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(n,["expireTime"]);h!=null&&c(e,["expireTime"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(e,["usageMetadata"],y),e}function W2(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function Z2(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>ef(d))),c(e,["cachedContents"],l)}return e}function tf(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["model"]);s!=null&&c(e,["model"],s);const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(n,["expireTime"]);h!=null&&c(e,["expireTime"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(e,["usageMetadata"],y),e}function j2(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function ek(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>tf(d))),c(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tk extends Jr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uu(Gr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=z2(this.apiClient,e);return h=me("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>tf(_))}else{const p=g2(this.apiClient,e);return h=me("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>ef(_))}}async get(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=Y2(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>tf(_))}else{const p=y2(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>ef(_))}}async delete(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=$2(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=j2(_),S=new xE;return Object.assign(S,E),S})}else{const p=_2(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=W2(_),S=new xE;return Object.assign(S,E),S})}}async update(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=J2(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>tf(_))}else{const p=T2(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>ef(_))}}async listInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=X2(e);return h=me("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=ek(_),S=new NE;return Object.assign(S,E),S})}else{const p=S2(e);return h=me("cachedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=Z2(_),S=new NE;return Object.assign(S,E),S})}}}function FE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function st(n){return this instanceof st?(this.v=n,this):new st(n)}function Zs(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),s[Symbol.asyncIterator]=function(){return this},s;function d(w){return function(V){return Promise.resolve(V).then(w,E)}}function h(w,V){i[w]&&(s[w]=function(q){return new Promise(function(H,oe){l.push([w,q,H,oe])>1||y(w,q)})},V&&(s[w]=V(s[w])))}function y(w,V){try{p(i[w](V))}catch(q){S(l[0][3],q)}}function p(w){w.value instanceof st?Promise.resolve(w.value.v).then(_,E):S(l[0][2],w)}function _(w){y("next",w)}function E(w){y("throw",w)}function S(w,V){w(V),l.shift(),l.length&&y(l[0][0],l[0][1])}}function Bl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof FE=="function"?FE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(d){return new Promise(function(h,y){d=n[l](d),s(h,y,d.done,d.value)})}}function s(l,d,h,y){Promise.resolve(y).then(function(p){l({value:p,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:YC(t)}function YC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ik(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function qE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let l=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),l&&!YC(n[i])&&(l=!1),i++;l?e.push(...s):e.pop()}return e}class ok{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new rk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class rk{constructor(e,t,i,s={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),ik(l)}async sendMessage(e){var t;await this.sendPromise;const i=on(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,d,h;const y=await s,p=(d=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content,_=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(h=_.slice(E))!==null&&h!==void 0?h:[]);const w=p?[p]:[];this.recordHistory(i,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=on(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?qE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,s;return Zs(this,arguments,function*(){var d,h,y,p;const _=[];try{for(var E=!0,S=Bl(e),w;w=yield st(S.next()),d=w.done,!d;E=!0){p=w.value,E=!1;const V=p;if(nk(V)){const q=(s=(i=V.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;q!==void 0&&_.push(q)}yield yield st(V)}}catch(V){h={error:V}}finally{try{!E&&!d&&(y=S.return)&&(yield st(y.call(S)))}finally{if(h)throw h.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(l=>l.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...qE(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Gf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sk(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function ak(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],sk(t,e)),e}function lk(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["message"]);i!=null&&c(e,["message"],i);const s=u(n,["code"]);return s!=null&&c(e,["code"],s),e}function uk(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const l=u(n,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const y=u(n,["updateTime"]);y!=null&&c(e,["updateTime"],y);const p=u(n,["sha256Hash"]);p!=null&&c(e,["sha256Hash"],p);const _=u(n,["uri"]);_!=null&&c(e,["uri"],_);const E=u(n,["downloadUri"]);E!=null&&c(e,["downloadUri"],E);const S=u(n,["state"]);S!=null&&c(e,["state"],S);const w=u(n,["source"]);w!=null&&c(e,["source"],w);const V=u(n,["videoMetadata"]);V!=null&&c(e,["videoMetadata"],V);const q=u(n,["error"]);return q!=null&&c(e,["error"],lk(q)),e}function ck(n){const e={},t=u(n,["file"]);t!=null&&c(e,["file"],uk(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function fk(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","file"],UC(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function dk(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","file"],UC(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function hk(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["message"]);i!=null&&c(e,["message"],i);const s=u(n,["code"]);return s!=null&&c(e,["code"],s),e}function Hm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const l=u(n,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const y=u(n,["updateTime"]);y!=null&&c(e,["updateTime"],y);const p=u(n,["sha256Hash"]);p!=null&&c(e,["sha256Hash"],p);const _=u(n,["uri"]);_!=null&&c(e,["uri"],_);const E=u(n,["downloadUri"]);E!=null&&c(e,["downloadUri"],E);const S=u(n,["state"]);S!=null&&c(e,["state"],S);const w=u(n,["source"]);w!=null&&c(e,["source"],w);const V=u(n,["videoMetadata"]);V!=null&&c(e,["videoMetadata"],V);const q=u(n,["error"]);return q!=null&&c(e,["error"],hk(q)),e}function mk(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Hm(d))),c(e,["files"],l)}return e}function pk(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function gk(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yk extends Jr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new uu(Gr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Hm(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ak(e);return l=me("files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:y.headers},_})),s.then(y=>{const p=mk(y),_=new Pb;return Object.assign(_,p),_})}}async createInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ck(e);return l=me("upload/v1beta/files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),s.then(y=>{const p=pk(y),_=new kb;return Object.assign(_,p),_})}}async get(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=fk(e);return l=me("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),s.then(y=>Hm(y))}}async delete(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dk(e);return l=me("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:y.headers},_})),s.then(y=>{const p=gk(y),_=new Vb;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _k(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function $C(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],_k(t)),e}function vk(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],$C(i)),e}function Tk(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>vk(s))),c(e,["speakerVoiceConfigs"],i)}return e}function Ek(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],$C(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],Tk(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Sk(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function Ck(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Ak(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Ik(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Sk(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],Ck(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],Ak(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function Rk(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>Ik(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function wk(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function Mk(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function Dk(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],Mk(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function xk(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function Nk(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],xk(t)),e}function bk(){return{}}function Pk(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function kk(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(p=>wk(p))),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],Dk(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],Nk(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],bk());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],Pk(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function Vk(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function BE(){return{}}function Uk(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function Lk(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],Uk(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function Ok(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function Fk(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],Ok(i)),e}function qk(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function Bk(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const y=u(n,["maxOutputTokens"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","maxOutputTokens"],y);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const _=u(n,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Ek(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const w=u(n,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],Rk(on(w)));const V=u(n,["tools"]);if(e!==void 0&&V!=null){let J=ga(V);Array.isArray(J)&&(J=J.map(se=>kk(pa(se)))),c(e,["setup","tools"],J)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],Vk(q));const H=u(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&c(e,["setup","inputAudioTranscription"],BE());const oe=u(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&c(e,["setup","outputAudioTranscription"],BE());const Q=u(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&c(e,["setup","realtimeInputConfig"],Lk(Q));const X=u(n,["contextWindowCompression"]);e!==void 0&&X!=null&&c(e,["setup","contextWindowCompression"],Fk(X));const j=u(n,["proactivity"]);return e!==void 0&&j!=null&&c(e,["setup","proactivity"],qk(j)),t}function Hk(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],Bk(s,t)),t}function Gk(){return{}}function zk(){return{}}function Yk(n){const e={},t=u(n,["media"]);t!=null&&c(e,["mediaChunks"],xC(t));const i=u(n,["audio"]);i!=null&&c(e,["audio"],bC(i));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const l=u(n,["video"]);l!=null&&c(e,["video"],NC(l));const d=u(n,["text"]);return d!=null&&c(e,["text"],d),u(n,["activityStart"])!=null&&c(e,["activityStart"],Gk()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],zk()),e}function KC(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["weight"]);return i!=null&&c(e,["weight"],i),e}function $k(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>KC(s))),c(e,["weightedPrompts"],i)}return e}function JC(n){const e={},t=u(n,["temperature"]);t!=null&&c(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&c(e,["topK"],i);const s=u(n,["seed"]);s!=null&&c(e,["seed"],s);const l=u(n,["guidance"]);l!=null&&c(e,["guidance"],l);const d=u(n,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(n,["density"]);h!=null&&c(e,["density"],h);const y=u(n,["brightness"]);y!=null&&c(e,["brightness"],y);const p=u(n,["scale"]);p!=null&&c(e,["scale"],p);const _=u(n,["muteBass"]);_!=null&&c(e,["muteBass"],_);const E=u(n,["muteDrums"]);E!=null&&c(e,["muteDrums"],E);const S=u(n,["onlyBassAndDrums"]);S!=null&&c(e,["onlyBassAndDrums"],S);const w=u(n,["musicGenerationMode"]);return w!=null&&c(e,["musicGenerationMode"],w),e}function Kk(n){const e={},t=u(n,["musicGenerationConfig"]);return t!=null&&c(e,["musicGenerationConfig"],JC(t)),e}function QC(n){const e={},t=u(n,["model"]);return t!=null&&c(e,["model"],t),e}function XC(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>KC(s))),c(e,["weightedPrompts"],i)}return e}function Gm(n){const e={},t=u(n,["setup"]);t!=null&&c(e,["setup"],QC(t));const i=u(n,["clientContent"]);i!=null&&c(e,["clientContent"],XC(i));const s=u(n,["musicGenerationConfig"]);s!=null&&c(e,["musicGenerationConfig"],JC(s));const l=u(n,["playbackControl"]);return l!=null&&c(e,["playbackControl"],l),e}function Jk(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function Qk(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],Jk(t)),e}function Xk(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&c(e,["voiceConfig"],Qk(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function Wk(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function Zk(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function jk(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function eV(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Wk(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],Zk(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],jk(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function tV(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>eV(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function nV(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function iV(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function oV(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],iV(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function rV(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function sV(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],rV(t)),e}function aV(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function lV(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function uV(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],lV(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function cV(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],uV(t)),e}function fV(){return{}}function dV(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function hV(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>nV(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],oV(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],sV(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],aV(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],cV(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],fV());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],dV(p));const _=u(n,["codeExecution"]);return _!=null&&c(e,["codeExecution"],_),e}function mV(n){const e={},t=u(n,["handle"]);t!=null&&c(e,["handle"],t);const i=u(n,["transparent"]);return i!=null&&c(e,["transparent"],i),e}function HE(){return{}}function pV(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function gV(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],pV(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function yV(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function _V(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],yV(i)),e}function vV(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function TV(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const y=u(n,["maxOutputTokens"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","maxOutputTokens"],y);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const _=u(n,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Xk(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const w=u(n,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],tV(on(w)));const V=u(n,["tools"]);if(e!==void 0&&V!=null){let J=ga(V);Array.isArray(J)&&(J=J.map(se=>hV(pa(se)))),c(e,["setup","tools"],J)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],mV(q));const H=u(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&c(e,["setup","inputAudioTranscription"],HE());const oe=u(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&c(e,["setup","outputAudioTranscription"],HE());const Q=u(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&c(e,["setup","realtimeInputConfig"],gV(Q));const X=u(n,["contextWindowCompression"]);e!==void 0&&X!=null&&c(e,["setup","contextWindowCompression"],_V(X));const j=u(n,["proactivity"]);return e!==void 0&&j!=null&&c(e,["setup","proactivity"],vV(j)),t}function EV(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],TV(s,t)),t}function SV(){return{}}function CV(){return{}}function AV(n){const e={},t=u(n,["media"]);t!=null&&c(e,["mediaChunks"],xC(t));const i=u(n,["audio"]);i!=null&&c(e,["audio"],bC(i));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const l=u(n,["video"]);l!=null&&c(e,["video"],NC(l));const d=u(n,["text"]);return d!=null&&c(e,["text"],d),u(n,["activityStart"])!=null&&c(e,["activityStart"],SV()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],CV()),e}function IV(){return{}}function RV(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function wV(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function MV(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function DV(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],RV(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],wV(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],MV(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function xV(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>DV(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function GE(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["finished"]);return i!=null&&c(e,["finished"],i),e}function NV(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function bV(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>NV(s))),c(e,["urlMetadata"],i)}return e}function PV(n){const e={},t=u(n,["modelTurn"]);t!=null&&c(e,["modelTurn"],xV(t));const i=u(n,["turnComplete"]);i!=null&&c(e,["turnComplete"],i);const s=u(n,["interrupted"]);s!=null&&c(e,["interrupted"],s);const l=u(n,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const d=u(n,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(n,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],GE(h));const y=u(n,["outputTranscription"]);y!=null&&c(e,["outputTranscription"],GE(y));const p=u(n,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],bV(p)),e}function kV(n){const e={},t=u(n,["id"]);t!=null&&c(e,["id"],t);const i=u(n,["args"]);i!=null&&c(e,["args"],i);const s=u(n,["name"]);return s!=null&&c(e,["name"],s),e}function VV(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>kV(s))),c(e,["functionCalls"],i)}return e}function UV(n){const e={},t=u(n,["ids"]);return t!=null&&c(e,["ids"],t),e}function qc(n){const e={},t=u(n,["modality"]);t!=null&&c(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&c(e,["tokenCount"],i),e}function LV(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const s=u(n,["responseTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const l=u(n,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(n,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const y=u(n,["promptTokensDetails"]);if(y!=null){let S=y;Array.isArray(S)&&(S=S.map(w=>qc(w))),c(e,["promptTokensDetails"],S)}const p=u(n,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(w=>qc(w))),c(e,["cacheTokensDetails"],S)}const _=u(n,["responseTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>qc(w))),c(e,["responseTokensDetails"],S)}const E=u(n,["toolUsePromptTokensDetails"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>qc(w))),c(e,["toolUsePromptTokensDetails"],S)}return e}function OV(n){const e={},t=u(n,["timeLeft"]);return t!=null&&c(e,["timeLeft"],t),e}function FV(n){const e={},t=u(n,["newHandle"]);t!=null&&c(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&c(e,["resumable"],i);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&c(e,["lastConsumedClientMessageIndex"],s),e}function qV(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],IV());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],PV(i));const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],VV(s));const l=u(n,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],UV(l));const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],LV(d));const h=u(n,["goAway"]);h!=null&&c(e,["goAway"],OV(h));const y=u(n,["sessionResumptionUpdate"]);return y!=null&&c(e,["sessionResumptionUpdate"],FV(y)),e}function BV(){return{}}function HV(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["weight"]);return i!=null&&c(e,["weight"],i),e}function GV(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>HV(s))),c(e,["weightedPrompts"],i)}return e}function zV(n){const e={},t=u(n,["temperature"]);t!=null&&c(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&c(e,["topK"],i);const s=u(n,["seed"]);s!=null&&c(e,["seed"],s);const l=u(n,["guidance"]);l!=null&&c(e,["guidance"],l);const d=u(n,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(n,["density"]);h!=null&&c(e,["density"],h);const y=u(n,["brightness"]);y!=null&&c(e,["brightness"],y);const p=u(n,["scale"]);p!=null&&c(e,["scale"],p);const _=u(n,["muteBass"]);_!=null&&c(e,["muteBass"],_);const E=u(n,["muteDrums"]);E!=null&&c(e,["muteDrums"],E);const S=u(n,["onlyBassAndDrums"]);S!=null&&c(e,["onlyBassAndDrums"],S);const w=u(n,["musicGenerationMode"]);return w!=null&&c(e,["musicGenerationMode"],w),e}function YV(n){const e={},t=u(n,["clientContent"]);t!=null&&c(e,["clientContent"],GV(t));const i=u(n,["musicGenerationConfig"]);return i!=null&&c(e,["musicGenerationConfig"],zV(i)),e}function $V(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);i!=null&&c(e,["mimeType"],i);const s=u(n,["sourceMetadata"]);return s!=null&&c(e,["sourceMetadata"],YV(s)),e}function KV(n){const e={},t=u(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>$V(s))),c(e,["audioChunks"],i)}return e}function JV(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["filteredReason"]);return i!=null&&c(e,["filteredReason"],i),e}function QV(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],BV());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],KV(i));const s=u(n,["filteredPrompt"]);return s!=null&&c(e,["filteredPrompt"],JV(s)),e}function XV(n){const e={},t=u(n,["sessionId"]);return t!=null&&c(e,["sessionId"],t),e}function WV(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function ZV(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function jV(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function eU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],WV(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],ZV(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],jV(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function tU(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>eU(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function zE(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["finished"]);return i!=null&&c(e,["finished"],i),e}function nU(n){const e={},t=u(n,["modelTurn"]);t!=null&&c(e,["modelTurn"],tU(t));const i=u(n,["turnComplete"]);i!=null&&c(e,["turnComplete"],i);const s=u(n,["interrupted"]);s!=null&&c(e,["interrupted"],s);const l=u(n,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const d=u(n,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(n,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],zE(h));const y=u(n,["outputTranscription"]);return y!=null&&c(e,["outputTranscription"],zE(y)),e}function iU(n){const e={},t=u(n,["args"]);t!=null&&c(e,["args"],t);const i=u(n,["name"]);return i!=null&&c(e,["name"],i),e}function oU(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>iU(s))),c(e,["functionCalls"],i)}return e}function rU(n){const e={},t=u(n,["ids"]);return t!=null&&c(e,["ids"],t),e}function Bc(n){const e={},t=u(n,["modality"]);t!=null&&c(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&c(e,["tokenCount"],i),e}function sU(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const s=u(n,["candidatesTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const l=u(n,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(n,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const y=u(n,["promptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(V=>Bc(V))),c(e,["promptTokensDetails"],w)}const p=u(n,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(V=>Bc(V))),c(e,["cacheTokensDetails"],w)}const _=u(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(V=>Bc(V))),c(e,["responseTokensDetails"],w)}const E=u(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(V=>Bc(V))),c(e,["toolUsePromptTokensDetails"],w)}const S=u(n,["trafficType"]);return S!=null&&c(e,["trafficType"],S),e}function aU(n){const e={},t=u(n,["timeLeft"]);return t!=null&&c(e,["timeLeft"],t),e}function lU(n){const e={},t=u(n,["newHandle"]);t!=null&&c(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&c(e,["resumable"],i);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&c(e,["lastConsumedClientMessageIndex"],s),e}function uU(n){const e={},t=u(n,["setupComplete"]);t!=null&&c(e,["setupComplete"],XV(t));const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],nU(i));const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],oU(s));const l=u(n,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],rU(l));const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],sU(d));const h=u(n,["goAway"]);h!=null&&c(e,["goAway"],aU(h));const y=u(n,["sessionResumptionUpdate"]);return y!=null&&c(e,["sessionResumptionUpdate"],lU(y)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cU(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function fU(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function dU(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function hU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],cU(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],fU(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],dU(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function zf(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>hU(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function mU(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const y=u(n,["items"]);y!=null&&c(e,["items"],y);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const _=u(n,["maxLength"]);_!=null&&c(e,["maxLength"],_);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const w=u(n,["minItems"]);w!=null&&c(e,["minItems"],w);const V=u(n,["minLength"]);V!=null&&c(e,["minLength"],V);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const H=u(n,["minimum"]);H!=null&&c(e,["minimum"],H);const oe=u(n,["nullable"]);oe!=null&&c(e,["nullable"],oe);const Q=u(n,["pattern"]);Q!=null&&c(e,["pattern"],Q);const X=u(n,["properties"]);X!=null&&c(e,["properties"],X);const j=u(n,["propertyOrdering"]);j!=null&&c(e,["propertyOrdering"],j);const J=u(n,["required"]);J!=null&&c(e,["required"],J);const se=u(n,["title"]);se!=null&&c(e,["title"],se);const x=u(n,["type"]);return x!=null&&c(e,["type"],x),e}function pU(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&c(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function gU(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function yU(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function _U(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],yU(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function vU(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function TU(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],vU(t)),e}function EU(){return{}}function SU(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function CU(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(p=>gU(p))),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],_U(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],TU(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],EU());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],SU(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function AU(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function IU(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function RU(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],IU(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function wU(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],AU(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],RU(i)),e}function MU(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function WC(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],MU(t)),e}function DU(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],WC(i)),e}function xU(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>DU(s))),c(e,["speakerVoiceConfigs"],i)}return e}function NU(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],WC(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],xU(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function bU(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function PU(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],zf(on(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const y=u(e,["candidateCount"]);y!=null&&c(i,["candidateCount"],y);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const _=u(e,["stopSequences"]);_!=null&&c(i,["stopSequences"],_);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const w=u(e,["presencePenalty"]);w!=null&&c(i,["presencePenalty"],w);const V=u(e,["frequencyPenalty"]);V!=null&&c(i,["frequencyPenalty"],V);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const H=u(e,["responseMimeType"]);H!=null&&c(i,["responseMimeType"],H);const oe=u(e,["responseSchema"]);oe!=null&&c(i,["responseSchema"],mU(Bp(oe)));const Q=u(e,["responseJsonSchema"]);if(Q!=null&&c(i,["responseJsonSchema"],Q),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=u(e,["safetySettings"]);if(t!==void 0&&X!=null){let k=X;Array.isArray(k)&&(k=k.map(F=>pU(F))),c(t,["safetySettings"],k)}const j=u(e,["tools"]);if(t!==void 0&&j!=null){let k=ga(j);Array.isArray(k)&&(k=k.map(F=>CU(pa(F)))),c(t,["tools"],k)}const J=u(e,["toolConfig"]);if(t!==void 0&&J!=null&&c(t,["toolConfig"],wU(J)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const se=u(e,["cachedContent"]);t!==void 0&&se!=null&&c(t,["cachedContent"],ro(n,se));const x=u(e,["responseModalities"]);x!=null&&c(i,["responseModalities"],x);const M=u(e,["mediaResolution"]);M!=null&&c(i,["mediaResolution"],M);const D=u(e,["speechConfig"]);if(D!=null&&c(i,["speechConfig"],NU(Hp(D))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const b=u(e,["thinkingConfig"]);return b!=null&&c(i,["thinkingConfig"],bU(b)),i}function YE(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=On(s);Array.isArray(d)&&(d=d.map(h=>zf(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["generationConfig"],PU(n,l,t)),t}function kU(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["requests[]","title"],s);const l=u(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&c(e,["requests[]","outputDimensionality"],l),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function VU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);s!=null&&c(t,["requests[]","content"],kC(n,s));const l=u(e,["config"]);l!=null&&c(t,["config"],kU(l,t));const d=u(e,["model"]);return d!==void 0&&c(t,["requests[]","model"],Je(n,d)),t}function UU(n,e){const t={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=u(n,["guidanceScale"]);if(e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const h=u(n,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const y=u(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&c(e,["parameters","includeSafetyAttributes"],y);const p=u(n,["includeRaiReason"]);e!==void 0&&p!=null&&c(e,["parameters","includeRaiReason"],p);const _=u(n,["language"]);e!==void 0&&_!=null&&c(e,["parameters","language"],_);const E=u(n,["outputMimeType"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","mimeType"],E);const S=u(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&c(e,["parameters","outputOptions","compressionQuality"],S),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const w=u(n,["imageSize"]);if(e!==void 0&&w!=null&&c(e,["parameters","sampleImageSize"],w),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function LU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["config"]);return l!=null&&c(t,["config"],UU(l,t)),t}function OU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function FU(n,e,t){const i={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const l=u(e,["pageToken"]);t!==void 0&&l!=null&&c(t,["_query","pageToken"],l);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const h=u(e,["queryBase"]);return t!==void 0&&h!=null&&c(t,["_url","models_url"],LC(n,h)),i}function qU(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],FU(n,i,t)),t}function BU(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const l=u(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),t}function HU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],BU(s,t)),t}function GU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function zU(n){const e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function YU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=On(s);Array.isArray(d)&&(d=d.map(h=>zf(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],zU(l)),t}function ZC(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=u(n,["imageBytes"]);t!=null&&c(e,["bytesBase64Encoded"],Qr(t));const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function $U(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);if(e!==void 0&&s!=null&&c(e,["instances[0]","image"],ZC(s)),u(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return t}function KU(n,e){const t={},i=u(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(n,["durationSeconds"]);if(e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=u(n,["aspectRatio"]);if(e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l),u(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=u(n,["personGeneration"]);if(e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(n,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const y=u(n,["enhancePrompt"]);if(e!==void 0&&y!=null&&c(e,["parameters","enhancePrompt"],y),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function JU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["image"]);if(l!=null&&c(t,["instances[0]","image"],ZC(l)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const d=u(e,["source"]);d!=null&&c(t,["config"],$U(d,t));const h=u(e,["config"]);return h!=null&&c(t,["config"],KU(h,t)),t}function QU(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function XU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function WU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function ZU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],QU(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],XU(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],WU(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function _a(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>ZU(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function jU(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const y=u(n,["items"]);y!=null&&c(e,["items"],y);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const _=u(n,["maxLength"]);_!=null&&c(e,["maxLength"],_);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const w=u(n,["minItems"]);w!=null&&c(e,["minItems"],w);const V=u(n,["minLength"]);V!=null&&c(e,["minLength"],V);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const H=u(n,["minimum"]);H!=null&&c(e,["minimum"],H);const oe=u(n,["nullable"]);oe!=null&&c(e,["nullable"],oe);const Q=u(n,["pattern"]);Q!=null&&c(e,["pattern"],Q);const X=u(n,["properties"]);X!=null&&c(e,["properties"],X);const j=u(n,["propertyOrdering"]);j!=null&&c(e,["propertyOrdering"],j);const J=u(n,["required"]);J!=null&&c(e,["required"],J);const se=u(n,["title"]);se!=null&&c(e,["title"],se);const x=u(n,["type"]);return x!=null&&c(e,["type"],x),e}function eL(n){const e={},t=u(n,["featureSelectionPreference"]);return t!=null&&c(e,["featureSelectionPreference"],t),e}function tL(n){const e={},t=u(n,["method"]);t!=null&&c(e,["method"],t);const i=u(n,["category"]);i!=null&&c(e,["category"],i);const s=u(n,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function nL(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function iL(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function oL(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],iL(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function rL(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function sL(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],rL(t)),e}function aL(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function lL(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function uL(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],lL(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function cL(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],uL(t)),e}function fL(){return{}}function dL(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function jC(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>nL(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],oL(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],sL(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],aL(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],cL(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],fL());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],dL(p));const _=u(n,["codeExecution"]);return _!=null&&c(e,["codeExecution"],_),e}function hL(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function mL(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function pL(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],mL(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function gL(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],hL(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],pL(i)),e}function yL(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function _L(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],yL(t)),e}function vL(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&c(e,["voiceConfig"],_L(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function TL(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function EL(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],_a(on(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const y=u(e,["candidateCount"]);y!=null&&c(i,["candidateCount"],y);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const _=u(e,["stopSequences"]);_!=null&&c(i,["stopSequences"],_);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const w=u(e,["presencePenalty"]);w!=null&&c(i,["presencePenalty"],w);const V=u(e,["frequencyPenalty"]);V!=null&&c(i,["frequencyPenalty"],V);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const H=u(e,["responseMimeType"]);H!=null&&c(i,["responseMimeType"],H);const oe=u(e,["responseSchema"]);oe!=null&&c(i,["responseSchema"],jU(Bp(oe)));const Q=u(e,["responseJsonSchema"]);Q!=null&&c(i,["responseJsonSchema"],Q);const X=u(e,["routingConfig"]);X!=null&&c(i,["routingConfig"],X);const j=u(e,["modelSelectionConfig"]);j!=null&&c(i,["modelConfig"],eL(j));const J=u(e,["safetySettings"]);if(t!==void 0&&J!=null){let qe=J;Array.isArray(qe)&&(qe=qe.map(Z=>tL(Z))),c(t,["safetySettings"],qe)}const se=u(e,["tools"]);if(t!==void 0&&se!=null){let qe=ga(se);Array.isArray(qe)&&(qe=qe.map(Z=>jC(pa(Z)))),c(t,["tools"],qe)}const x=u(e,["toolConfig"]);t!==void 0&&x!=null&&c(t,["toolConfig"],gL(x));const M=u(e,["labels"]);t!==void 0&&M!=null&&c(t,["labels"],M);const D=u(e,["cachedContent"]);t!==void 0&&D!=null&&c(t,["cachedContent"],ro(n,D));const b=u(e,["responseModalities"]);b!=null&&c(i,["responseModalities"],b);const k=u(e,["mediaResolution"]);k!=null&&c(i,["mediaResolution"],k);const F=u(e,["speechConfig"]);F!=null&&c(i,["speechConfig"],vL(Hp(F)));const P=u(e,["audioTimestamp"]);P!=null&&c(i,["audioTimestamp"],P);const ct=u(e,["thinkingConfig"]);return ct!=null&&c(i,["thinkingConfig"],TL(ct)),i}function $E(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=On(s);Array.isArray(d)&&(d=d.map(h=>_a(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["generationConfig"],EL(n,l,t)),t}function SL(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&c(e,["instances[]","task_type"],i);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["instances[]","title"],s);const l=u(n,["outputDimensionality"]);e!==void 0&&l!=null&&c(e,["parameters","outputDimensionality"],l);const d=u(n,["mimeType"]);e!==void 0&&d!=null&&c(e,["instances[]","mimeType"],d);const h=u(n,["autoTruncate"]);return e!==void 0&&h!=null&&c(e,["parameters","autoTruncate"],h),t}function CL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);s!=null&&c(t,["instances[]","content"],kC(n,s));const l=u(e,["config"]);return l!=null&&c(t,["config"],SL(l,t)),t}function AL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const l=u(n,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(n,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const y=u(n,["seed"]);e!==void 0&&y!=null&&c(e,["parameters","seed"],y);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const _=u(n,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const E=u(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&c(e,["parameters","includeSafetyAttributes"],E);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const w=u(n,["language"]);e!==void 0&&w!=null&&c(e,["parameters","language"],w);const V=u(n,["outputMimeType"]);e!==void 0&&V!=null&&c(e,["parameters","outputOptions","mimeType"],V);const q=u(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&c(e,["parameters","outputOptions","compressionQuality"],q);const H=u(n,["addWatermark"]);e!==void 0&&H!=null&&c(e,["parameters","addWatermark"],H);const oe=u(n,["imageSize"]);e!==void 0&&oe!=null&&c(e,["parameters","sampleImageSize"],oe);const Q=u(n,["enhancePrompt"]);return e!==void 0&&Q!=null&&c(e,["parameters","enhancePrompt"],Q),t}function IL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["config"]);return l!=null&&c(t,["config"],AL(l,t)),t}function Ii(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["imageBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Qr(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function RL(n){const e={},t=u(n,["maskMode"]);t!=null&&c(e,["maskMode"],t);const i=u(n,["segmentationClasses"]);i!=null&&c(e,["maskClasses"],i);const s=u(n,["maskDilation"]);return s!=null&&c(e,["dilation"],s),e}function wL(n){const e={},t=u(n,["controlType"]);t!=null&&c(e,["controlType"],t);const i=u(n,["enableControlImageComputation"]);return i!=null&&c(e,["computeControl"],i),e}function ML(n){const e={},t=u(n,["styleDescription"]);return t!=null&&c(e,["styleDescription"],t),e}function DL(n){const e={},t=u(n,["subjectType"]);t!=null&&c(e,["subjectType"],t);const i=u(n,["subjectDescription"]);return i!=null&&c(e,["subjectDescription"],i),e}function xL(n){const e={},t=u(n,["referenceImage"]);t!=null&&c(e,["referenceImage"],Ii(t));const i=u(n,["referenceId"]);i!=null&&c(e,["referenceId"],i);const s=u(n,["referenceType"]);s!=null&&c(e,["referenceType"],s);const l=u(n,["maskImageConfig"]);l!=null&&c(e,["maskImageConfig"],RL(l));const d=u(n,["controlImageConfig"]);d!=null&&c(e,["controlImageConfig"],wL(d));const h=u(n,["styleImageConfig"]);h!=null&&c(e,["styleImageConfig"],ML(h));const y=u(n,["subjectImageConfig"]);return y!=null&&c(e,["subjectImageConfig"],DL(y)),e}function NL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const l=u(n,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(n,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const y=u(n,["seed"]);e!==void 0&&y!=null&&c(e,["parameters","seed"],y);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const _=u(n,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const E=u(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&c(e,["parameters","includeSafetyAttributes"],E);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const w=u(n,["language"]);e!==void 0&&w!=null&&c(e,["parameters","language"],w);const V=u(n,["outputMimeType"]);e!==void 0&&V!=null&&c(e,["parameters","outputOptions","mimeType"],V);const q=u(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&c(e,["parameters","outputOptions","compressionQuality"],q);const H=u(n,["addWatermark"]);e!==void 0&&H!=null&&c(e,["parameters","addWatermark"],H);const oe=u(n,["editMode"]);e!==void 0&&oe!=null&&c(e,["parameters","editMode"],oe);const Q=u(n,["baseSteps"]);return e!==void 0&&Q!=null&&c(e,["parameters","editConfig","baseSteps"],Q),t}function bL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(y=>xL(y))),c(t,["instances[0]","referenceImages"],h)}const d=u(e,["config"]);return d!=null&&c(t,["config"],NL(d,t)),t}function PL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const l=u(n,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);const d=u(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&c(e,["parameters","outputOptions","compressionQuality"],d);const h=u(n,["enhanceInputImage"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=u(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const p=u(n,["numberOfImages"]);e!==void 0&&p!=null&&c(e,["parameters","sampleCount"],p);const _=u(n,["mode"]);return e!==void 0&&_!=null&&c(e,["parameters","mode"],_),t}function kL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["image"]);s!=null&&c(t,["instances[0]","image"],Ii(s));const l=u(e,["upscaleFactor"]);l!=null&&c(t,["parameters","upscaleConfig","upscaleFactor"],l);const d=u(e,["config"]);return d!=null&&c(t,["config"],PL(d,t)),t}function VL(n){const e={},t=u(n,["productImage"]);return t!=null&&c(e,["image"],Ii(t)),e}function UL(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["personImage"]);e!==void 0&&s!=null&&c(e,["instances[0]","personImage","image"],Ii(s));const l=u(n,["productImages"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>VL(h))),c(e,["instances[0]","productImages"],d)}return t}function LL(n,e){const t={},i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["baseSteps"]);e!==void 0&&s!=null&&c(e,["parameters","editConfig","baseSteps"],s);const l=u(n,["outputGcsUri"]);e!==void 0&&l!=null&&c(e,["parameters","storageUri"],l);const d=u(n,["seed"]);e!==void 0&&d!=null&&c(e,["parameters","seed"],d);const h=u(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const y=u(n,["personGeneration"]);e!==void 0&&y!=null&&c(e,["parameters","personGeneration"],y);const p=u(n,["addWatermark"]);e!==void 0&&p!=null&&c(e,["parameters","addWatermark"],p);const _=u(n,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const E=u(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","compressionQuality"],E);const S=u(n,["enhancePrompt"]);return e!==void 0&&S!=null&&c(e,["parameters","enhancePrompt"],S),t}function OL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["source"]);s!=null&&c(t,["config"],UL(s,t));const l=u(e,["config"]);return l!=null&&c(t,["config"],LL(l,t)),t}function FL(n){const e={},t=u(n,["image"]);return t!=null&&c(e,["image"],Ii(t)),e}function qL(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],Ii(s));const l=u(n,["scribbleImage"]);return e!==void 0&&l!=null&&c(e,["instances[0]","scribble"],FL(l)),t}function BL(n,e){const t={},i=u(n,["mode"]);e!==void 0&&i!=null&&c(e,["parameters","mode"],i);const s=u(n,["maxPredictions"]);e!==void 0&&s!=null&&c(e,["parameters","maxPredictions"],s);const l=u(n,["confidenceThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","confidenceThreshold"],l);const d=u(n,["maskDilation"]);e!==void 0&&d!=null&&c(e,["parameters","maskDilation"],d);const h=u(n,["binaryColorThreshold"]);return e!==void 0&&h!=null&&c(e,["parameters","binaryColorThreshold"],h),t}function HL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["source"]);s!=null&&c(t,["config"],qL(s,t));const l=u(e,["config"]);return l!=null&&c(t,["config"],BL(l,t)),t}function GL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function zL(n,e,t){const i={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const l=u(e,["pageToken"]);t!==void 0&&l!=null&&c(t,["_query","pageToken"],l);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const h=u(e,["queryBase"]);return t!==void 0&&h!=null&&c(t,["_url","models_url"],LC(n,h)),i}function YL(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],zL(n,i,t)),t}function $L(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const l=u(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),t}function KL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],$L(s,t)),t}function JL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function QL(n,e){const t={},i=u(n,["systemInstruction"]);e!==void 0&&i!=null&&c(e,["systemInstruction"],_a(on(i)));const s=u(n,["tools"]);if(e!==void 0&&s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>jC(h))),c(e,["tools"],d)}const l=u(n,["generationConfig"]);return e!==void 0&&l!=null&&c(e,["generationConfig"],l),t}function XL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=On(s);Array.isArray(d)&&(d=d.map(h=>_a(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],QL(l,t)),t}function WL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["contents"]);if(s!=null){let d=On(s);Array.isArray(d)&&(d=d.map(h=>_a(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],l),t}function eA(n){const e={},t=u(n,["uri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["videoBytes"]);i!=null&&c(e,["bytesBase64Encoded"],Qr(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function ZL(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],Ii(s));const l=u(n,["video"]);return e!==void 0&&l!=null&&c(e,["instances[0]","video"],eA(l)),t}function jL(n){const e={},t=u(n,["image"]);t!=null&&c(e,["image"],Ii(t));const i=u(n,["referenceType"]);return i!=null&&c(e,["referenceType"],i),e}function e4(n,e){const t={},i=u(n,["numberOfVideos"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const l=u(n,["fps"]);e!==void 0&&l!=null&&c(e,["parameters","fps"],l);const d=u(n,["durationSeconds"]);e!==void 0&&d!=null&&c(e,["parameters","durationSeconds"],d);const h=u(n,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const y=u(n,["aspectRatio"]);e!==void 0&&y!=null&&c(e,["parameters","aspectRatio"],y);const p=u(n,["resolution"]);e!==void 0&&p!=null&&c(e,["parameters","resolution"],p);const _=u(n,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const E=u(n,["pubsubTopic"]);e!==void 0&&E!=null&&c(e,["parameters","pubsubTopic"],E);const S=u(n,["negativePrompt"]);e!==void 0&&S!=null&&c(e,["parameters","negativePrompt"],S);const w=u(n,["enhancePrompt"]);e!==void 0&&w!=null&&c(e,["parameters","enhancePrompt"],w);const V=u(n,["generateAudio"]);e!==void 0&&V!=null&&c(e,["parameters","generateAudio"],V);const q=u(n,["lastFrame"]);e!==void 0&&q!=null&&c(e,["instances[0]","lastFrame"],Ii(q));const H=u(n,["referenceImages"]);if(e!==void 0&&H!=null){let Q=H;Array.isArray(Q)&&(Q=Q.map(X=>jL(X))),c(e,["instances[0]","referenceImages"],Q)}const oe=u(n,["compressionQuality"]);return e!==void 0&&oe!=null&&c(e,["parameters","compressionQuality"],oe),t}function t4(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Je(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["image"]);l!=null&&c(t,["instances[0]","image"],Ii(l));const d=u(e,["video"]);d!=null&&c(t,["instances[0]","video"],eA(d));const h=u(e,["source"]);h!=null&&c(t,["config"],ZL(h,t));const y=u(e,["config"]);return y!=null&&c(t,["config"],e4(y,t)),t}function n4(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function i4(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function o4(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function r4(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],n4(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],i4(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],o4(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function s4(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>r4(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function a4(n){const e={},t=u(n,["citationSources"]);return t!=null&&c(e,["citations"],t),e}function l4(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function u4(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>l4(s))),c(e,["urlMetadata"],i)}return e}function c4(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],s4(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],a4(i));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],u4(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(e,["groundingMetadata"],y);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const _=u(n,["logprobsResult"]);_!=null&&c(e,["logprobsResult"],_);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function KE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(p=>c4(p))),c(e,["candidates"],y)}const s=u(n,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const l=u(n,["promptFeedback"]);l!=null&&c(e,["promptFeedback"],l);const d=u(n,["responseId"]);d!=null&&c(e,["responseId"],d);const h=u(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function f4(n){const e={},t=u(n,["values"]);return t!=null&&c(e,["values"],t),e}function d4(){return{}}function h4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>f4(d))),c(e,["embeddings"],l)}return u(n,["metadata"])!=null&&c(e,["metadata"],d4()),e}function m4(n){const e={},t=u(n,["bytesBase64Encoded"]);t!=null&&c(e,["imageBytes"],Qr(t));const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function tA(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function p4(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],m4(t));const i=u(n,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);const s=u(n,["_self"]);return s!=null&&c(e,["safetyAttributes"],tA(s)),e}function g4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>p4(d))),c(e,["generatedImages"],l)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],tA(s)),e}function y4(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function zm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["version"]);l!=null&&c(e,["version"],l);const d=u(n,["_self"]);d!=null&&c(e,["tunedModelInfo"],y4(d));const h=u(n,["inputTokenLimit"]);h!=null&&c(e,["inputTokenLimit"],h);const y=u(n,["outputTokenLimit"]);y!=null&&c(e,["outputTokenLimit"],y);const p=u(n,["supportedGenerationMethods"]);return p!=null&&c(e,["supportedActions"],p),e}function _4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["_self"]);if(s!=null){let l=OC(s);Array.isArray(l)&&(l=l.map(d=>zm(d))),c(e,["models"],l)}return e}function v4(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function T4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["totalTokens"]);i!=null&&c(e,["totalTokens"],i);const s=u(n,["cachedContentTokenCount"]);return s!=null&&c(e,["cachedContentTokenCount"],s),e}function E4(n){const e={},t=u(n,["video","uri"]);t!=null&&c(e,["uri"],t);const i=u(n,["video","encodedVideo"]);i!=null&&c(e,["videoBytes"],Qr(i));const s=u(n,["encoding"]);return s!=null&&c(e,["mimeType"],s),e}function S4(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],E4(t)),e}function C4(n){const e={},t=u(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(d=>S4(d))),c(e,["generatedVideos"],l)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function A4(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);l!=null&&c(e,["error"],l);const d=u(n,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],C4(d)),e}function I4(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function R4(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function w4(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function M4(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],I4(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],R4(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],w4(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function D4(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>M4(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function x4(n){const e={},t=u(n,["citations"]);return t!=null&&c(e,["citations"],t),e}function N4(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function b4(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>N4(s))),c(e,["urlMetadata"],i)}return e}function P4(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],D4(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],x4(i));const s=u(n,["finishMessage"]);s!=null&&c(e,["finishMessage"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],b4(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const y=u(n,["groundingMetadata"]);y!=null&&c(e,["groundingMetadata"],y);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const _=u(n,["logprobsResult"]);_!=null&&c(e,["logprobsResult"],_);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function JE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(_=>P4(_))),c(e,["candidates"],p)}const s=u(n,["createTime"]);s!=null&&c(e,["createTime"],s);const l=u(n,["modelVersion"]);l!=null&&c(e,["modelVersion"],l);const d=u(n,["promptFeedback"]);d!=null&&c(e,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(e,["responseId"],h);const y=u(n,["usageMetadata"]);return y!=null&&c(e,["usageMetadata"],y),e}function k4(n){const e={},t=u(n,["truncated"]);t!=null&&c(e,["truncated"],t);const i=u(n,["token_count"]);return i!=null&&c(e,["tokenCount"],i),e}function V4(n){const e={},t=u(n,["values"]);t!=null&&c(e,["values"],t);const i=u(n,["statistics"]);return i!=null&&c(e,["statistics"],k4(i)),e}function U4(n){const e={},t=u(n,["billableCharacterCount"]);return t!=null&&c(e,["billableCharacterCount"],t),e}function L4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>V4(d))),c(e,["embeddings"],l)}const s=u(n,["metadata"]);return s!=null&&c(e,["metadata"],U4(s)),e}function nA(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["imageBytes"],Qr(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function iA(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function Yf(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],nA(t));const i=u(n,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);const s=u(n,["_self"]);s!=null&&c(e,["safetyAttributes"],iA(s));const l=u(n,["prompt"]);return l!=null&&c(e,["enhancedPrompt"],l),e}function O4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Yf(d))),c(e,["generatedImages"],l)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],iA(s)),e}function F4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Yf(l))),c(e,["generatedImages"],s)}return e}function q4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Yf(l))),c(e,["generatedImages"],s)}return e}function B4(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Yf(s))),c(e,["generatedImages"],i)}return e}function H4(n){const e={},t=u(n,["label"]);t!=null&&c(e,["label"],t);const i=u(n,["score"]);return i!=null&&c(e,["score"],i),e}function G4(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["mask"],nA(t));const i=u(n,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>H4(l))),c(e,["labels"],s)}return e}function z4(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>G4(s))),c(e,["generatedMasks"],i)}return e}function Y4(n){const e={},t=u(n,["endpoint"]);t!=null&&c(e,["name"],t);const i=u(n,["deployedModelId"]);return i!=null&&c(e,["deployedModelId"],i),e}function $4(n){const e={},t=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function K4(n){const e={},t=u(n,["checkpointId"]);t!=null&&c(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&c(e,["epoch"],i);const s=u(n,["step"]);return s!=null&&c(e,["step"],s),e}function Ym(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["versionId"]);l!=null&&c(e,["version"],l);const d=u(n,["deployedModels"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(S=>Y4(S))),c(e,["endpoints"],E)}const h=u(n,["labels"]);h!=null&&c(e,["labels"],h);const y=u(n,["_self"]);y!=null&&c(e,["tunedModelInfo"],$4(y));const p=u(n,["defaultCheckpointId"]);p!=null&&c(e,["defaultCheckpointId"],p);const _=u(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>K4(S))),c(e,["checkpoints"],E)}return e}function J4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["_self"]);if(s!=null){let l=OC(s);Array.isArray(l)&&(l=l.map(d=>Ym(d))),c(e,["models"],l)}return e}function Q4(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function X4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["totalTokens"]);return i!=null&&c(e,["totalTokens"],i),e}function W4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["tokensInfo"]);return i!=null&&c(e,["tokensInfo"],i),e}function Z4(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["uri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],Qr(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function j4(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],Z4(t)),e}function e6(n){const e={},t=u(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(d=>j4(d))),c(e,["generatedVideos"],l)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function t6(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);l!=null&&c(e,["error"],l);const d=u(n,["response"]);return d!=null&&c(e,["response"],e6(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n6="Content-Type",i6="X-Server-Timeout",o6="User-Agent",$m="x-goog-api-client",r6="1.16.0",s6=`google-genai-sdk/${r6}`,a6="v1beta1",l6="v1beta",QE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class u6{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:a6,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:l6,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))s.searchParams.append(d,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(t))typeof l=="object"?i[s]=Object.assign(Object.assign({},i[s]),l):l!==void 0&&(i[s]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const s=new AbortController,l=s.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>s.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=l}return t&&t.extraBody!==null&&c6(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await XE(s),new Fm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await XE(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return Zs(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let d="";for(;;){const{done:h,value:y}=yield st(s.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(y,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),w=S.status,V=S.code,q=`got status: ${w}. ${JSON.stringify(E)}`;if(V>=400&&V<600)throw new Gf({message:q,status:V})}}catch(E){if(E.name==="ApiError")throw E}d+=p;let _=d.match(QE);for(;_;){const E=_[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield st(new Fm(S)),d=d.slice(_[0].length),_=d.match(QE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=s6+" "+this.clientOptions.userAgentExtra;return e[o6]=t,e[$m]=t,e[n6]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))t.append(i,s);e.timeout&&e.timeout>0&&t.append(i6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,d=await l.stat(e);s.sizeBytes=String(d.size);const h=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=h;const y=await this.fetchUploadUrl(s,t);return l.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let s={};t!=null&&t.httpOptions?s=t.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},d=await this.request({path:me("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=d==null?void 0:d.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function XE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Gf({message:s,status:t}):new Error(s)}}function c6(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,d){const h=Object.assign({},l);for(const y in d)if(Object.prototype.hasOwnProperty.call(d,y)){const p=d[y],_=h[y];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?h[y]=i(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),h[y]=p)}return h}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f6="mcp_used/unknown";let d6=!1;function oA(n){for(const e of n)if(h6(e)||typeof e=="object"&&"inputSchema"in e)return!0;return d6}function rA(n){var e;const t=(e=n[$m])!==null&&e!==void 0?e:"";n[$m]=(t+` ${f6}`).trimStart()}function h6(n){return n!==null&&typeof n=="object"&&n instanceof zp}function m6(n,e=100){return Zs(this,arguments,function*(){let i,s=0;for(;s<e;){const l=yield st(n.listTools({cursor:i}));for(const d of l.tools)yield yield st(d),s++;if(!l.nextCursor)break;i=l.nextCursor}})}class zp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new zp(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const l={},d=[];for(const _ of this.mcpClients)try{for(var h=!0,y=(t=void 0,Bl(m6(_))),p;p=await y.next(),e=p.done,!e;h=!0){s=p.value,h=!1;const E=s;d.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(E){t={error:E}}finally{try{!h&&!e&&(i=y.return)&&await i.call(y)}finally{if(t)throw t.error}}this.mcpTools=d,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Yb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const d=await s.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:d.isError?{error:d}:d}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function p6(n,e,t){const i=new Lb;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data);const l=QV(s);Object.assign(i,l),e(i)}class g6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),d=v6(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const _=new Promise(X=>{p=X}),E=e.callbacks,S=function(){p({})},w=this.apiClient,V={onopen:S,onmessage:X=>{p6(w,E.onmessage,X)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(X){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(X){}},q=this.webSocketFactory.create(y,_6(d),V);q.connect(),await _;const H=Je(this.apiClient,e.model),oe=QC({model:H}),Q=Gm({setup:oe});return q.send(JSON.stringify(Q)),new y6(q,this.apiClient)}}class y6{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=$k(e),i=XC(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Kk(e),i=Gm(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=Gm({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl($s.PLAY)}pause(){this.sendPlaybackControl($s.PAUSE)}stop(){this.sendPlaybackControl($s.STOP)}resetContext(){this.sendPlaybackControl($s.RESET_CONTEXT)}close(){this.conn.close()}}function _6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function v6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const T6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function E6(n,e,t){const i=new Ub;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const l=JSON.parse(s);if(n.isVertexAI()){const d=uU(l);Object.assign(i,d)}else{const d=qV(l);Object.assign(i,d)}e(i)}class S6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new g6(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,l,d,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&oA(e.config.tools)&&rA(E);const S=R6(E);if(this.apiClient.isVertexAI())_=`${y}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const D=this.apiClient.getApiKey();let b="BidiGenerateContent",k="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",k="access_token"),_=`${y}/ws/google.ai.generativelanguage.${p}.GenerativeService.${b}?${k}=${D}`}let w=()=>{};const V=new Promise(D=>{w=D}),q=e.callbacks,H=function(){var D;(D=q==null?void 0:q.onopen)===null||D===void 0||D.call(q),w({})},oe=this.apiClient,Q={onopen:H,onmessage:D=>{E6(oe,q.onmessage,D)},onerror:(t=q==null?void 0:q.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=q==null?void 0:q.onclose)!==null&&i!==void 0?i:function(D){}},X=this.webSocketFactory.create(_,I6(S),Q);X.connect(),await V;let j=Je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const D=this.apiClient.getProject(),b=this.apiClient.getLocation();j=`projects/${D}/locations/${b}/`+j}let J={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Cf.AUDIO]}:e.config.responseModalities=[Cf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const se=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],x=[];for(const D of se)if(this.isCallableTool(D)){const b=D;x.push(await b.tool())}else x.push(D);x.length>0&&(e.config.tools=x);const M={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=EV(this.apiClient,M):J=Hk(this.apiClient,M),delete J.config,X.send(JSON.stringify(J)),new A6(X,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const C6={turnComplete:!0};class A6{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=On(t.turns),e.isVertexAI()?i=i.map(s=>_a(s)):i=i.map(s=>zf(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(T6)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},C6),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:AV(e)}:t={realtimeInput:Yk(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function I6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function R6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WE=10;function ZE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const d of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(js(d)){s=!0;break}if(!s)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function js(n){return"callTool"in n&&typeof n.callTool=="function"}function w6(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>js(s)))!==null&&i!==void 0?i:!1}function M6(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>!js(s)))!==null&&i!==void 0?i:!1}function jE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D6 extends Jr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,l,d,h;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!w6(t)||ZE(t.config))return await this.generateContentInternal(y);if(M6(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,_;const E=On(y.contents),S=(l=(s=(i=y.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:WE;let w=0;for(;w<S&&(p=await this.generateContentInternal(y),!(!p.functionCalls||p.functionCalls.length===0));){const V=p.candidates[0].content,q=[];for(const H of(h=(d=t.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(js(H)){const Q=await H.callTool(p.functionCalls);q.push(...Q)}w++,_={role:"user",parts:q},y.contents=On(y.contents),y.contents.push(V),y.contents.push(_),jE(y.config)&&(E.push(V),E.push(_))}return jE(y.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),ZE(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let l;const d=[];if(i!=null&&i.generatedImages)for(const y of i.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((s=y==null?void 0:y.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:d.push(y);let h;return l?h={generatedImages:d,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:h={generatedImages:d,sdkHttpResponse:i.sdkHttpResponse},h}),this.list=async t=>{var i;const d={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((i=d.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new uu(Gr.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const d=await Promise.all(l.map(async y=>js(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&oA(e.config.tools)){const y=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let p=Object.assign({},y);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),rA(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var t,i,s;const l=new Map;for(const d of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(js(d)){const h=d,y=await h.tool();for(const p of(s=y.functionDeclarations)!==null&&s!==void 0?s:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var t,i,s;const l=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:WE;let d=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(p,_,E){var S,w;return Zs(this,arguments,function*(){for(var V,q,H,oe;h<l;){d&&(h++,d=!1);const J=yield st(p.processParamsMaybeAddMcpUsage(E)),se=yield st(p.generateContentStreamInternal(J)),x=[],M=[];try{for(var Q=!0,X=(q=void 0,Bl(se)),j;j=yield st(X.next()),V=j.done,!V;Q=!0){oe=j.value,Q=!1;const D=oe;if(yield yield st(D),D.candidates&&(!((S=D.candidates[0])===null||S===void 0)&&S.content)){M.push(D.candidates[0].content);for(const b of(w=D.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(h<l&&b.functionCall){if(!b.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(b.functionCall.name)){const k=yield st(_.get(b.functionCall.name).callTool([b.functionCall]));x.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${b.functionCall.name}`)}}}}catch(D){q={error:D}}finally{try{!Q&&!V&&(H=X.return)&&(yield st(H.call(X)))}finally{if(q)throw q.error}}if(x.length>0){d=!0;const D=new Dl;D.candidates=[{content:{role:"user",parts:x}}],yield yield st(D);const b=[];b.push(...M),b.push({role:"user",parts:x});const k=On(E.contents).concat(b);E.contents=k}else break}})})(this,y,e)}async generateContentInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=$E(this.apiClient,e);return h=me("{model}:generateContent",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=JE(_),S=new Dl;return Object.assign(S,E),S})}else{const p=YE(this.apiClient,e);return h=me("{model}:generateContent",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=KE(_),S=new Dl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=$E(this.apiClient,e);return h=me("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),d.then(function(E){return Zs(this,arguments,function*(){var S,w,V,q;try{for(var H=!0,oe=Bl(E),Q;Q=yield st(oe.next()),S=Q.done,!S;H=!0){q=Q.value,H=!1;const X=q,j=JE(yield st(X.json()));j.sdkHttpResponse={headers:X.headers};const J=new Dl;Object.assign(J,j),yield yield st(J)}}catch(X){w={error:X}}finally{try{!H&&!S&&(V=oe.return)&&(yield st(V.call(oe)))}finally{if(w)throw w.error}}})})}else{const p=YE(this.apiClient,e);return h=me("{model}:streamGenerateContent?alt=sse",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),d.then(function(E){return Zs(this,arguments,function*(){var S,w,V,q;try{for(var H=!0,oe=Bl(E),Q;Q=yield st(oe.next()),S=Q.done,!S;H=!0){q=Q.value,H=!1;const X=q,j=KE(yield st(X.json()));j.sdkHttpResponse={headers:X.headers};const J=new Dl;Object.assign(J,j),yield yield st(J)}}catch(X){w={error:X}}finally{try{!H&&!S&&(V=oe.return)&&(yield st(V.call(oe)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=CL(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=L4(_),S=new CE;return Object.assign(S,E),S})}else{const p=VU(this.apiClient,e);return h=me("{model}:batchEmbedContents",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=h4(_),S=new CE;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=IL(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=O4(_),S=new AE;return Object.assign(S,E),S})}else{const p=LU(this.apiClient,e);return h=me("{model}:predict",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=g4(_),S=new AE;return Object.assign(S,E),S})}}async editImageInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=bL(this.apiClient,e);return l=me("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:y.headers},_})),s.then(y=>{const p=F4(y),_=new Mb;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=kL(this.apiClient,e);return l=me("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:y.headers},_})),s.then(y=>{const p=q4(y),_=new Db;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=OL(this.apiClient,e);return l=me("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),s.then(y=>{const p=B4(y),_=new xb;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=HL(this.apiClient,e);return l=me("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),s.then(y=>{const p=z4(y),_=new Nb;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=GL(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Ym(_))}else{const p=OU(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>zm(_))}}async listInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=YL(this.apiClient,e);return h=me("{models_url}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=J4(_),S=new IE;return Object.assign(S,E),S})}else{const p=qU(this.apiClient,e);return h=me("{models_url}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=_4(_),S=new IE;return Object.assign(S,E),S})}}async update(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=KL(this.apiClient,e);return h=me("{model}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Ym(_))}else{const p=HU(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>zm(_))}}async delete(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=JL(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=Q4(_),S=new RE;return Object.assign(S,E),S})}else{const p=GU(this.apiClient,e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=v4(_),S=new RE;return Object.assign(S,E),S})}}async countTokens(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=XL(this.apiClient,e);return h=me("{model}:countTokens",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=X4(_),S=new wE;return Object.assign(S,E),S})}else{const p=YU(this.apiClient,e);return h=me("{model}:countTokens",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=T4(_),S=new wE;return Object.assign(S,E),S})}}async computeTokens(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=WL(this.apiClient,e);return l=me("{model}:computeTokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:y.headers},_})),s.then(y=>{const p=W4(y),_=new bb;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=t4(this.apiClient,e);return h=me("{model}:predictLongRunning",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>{const E=t6(_),S=new Af;return Object.assign(S,E),S})}else{const p=JU(this.apiClient,e);return h=me("{model}:predictLongRunning",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>{const E=A4(_),S=new Af;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function N6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["operationName"],t);const i=u(n,["resourceName"]);i!=null&&c(e,["_url","resourceName"],i);const s=u(n,["config"]);return s!=null&&c(e,["config"],s),e}function b6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P6 extends Jr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=b6(e);return h=me("{operationName}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d}else{const p=x6(e);return h=me("{operationName}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d}}async fetchPredictVideosOperationInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=N6(e);return l=me("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k6(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function sA(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],k6(t)),e}function V6(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],sA(i)),e}function U6(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>V6(s))),c(e,["speakerVoiceConfigs"],i)}return e}function L6(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],sA(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],U6(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function O6(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function F6(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function q6(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function B6(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],O6(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],F6(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],q6(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const y=u(n,["executableCode"]);y!=null&&c(e,["executableCode"],y);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function H6(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>B6(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function G6(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const y=u(n,["responseJsonSchema"]);return y!=null&&c(e,["responseJsonSchema"],y),e}function z6(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function Y6(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],z6(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function $6(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function K6(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],$6(t)),e}function J6(){return{}}function Q6(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function X6(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(p=>G6(p))),c(e,["functionDeclarations"],y)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],Y6(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],K6(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],J6());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],Q6(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function W6(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function e0(){return{}}function Z6(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function j6(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],Z6(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function e3(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function t3(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],e3(i)),e}function n3(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function i3(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const y=u(n,["maxOutputTokens"]);e!==void 0&&y!=null&&c(e,["setup","generationConfig","maxOutputTokens"],y);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const _=u(n,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],L6(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const w=u(n,["systemInstruction"]);e!==void 0&&w!=null&&c(e,["setup","systemInstruction"],H6(on(w)));const V=u(n,["tools"]);if(e!==void 0&&V!=null){let J=ga(V);Array.isArray(J)&&(J=J.map(se=>X6(pa(se)))),c(e,["setup","tools"],J)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],W6(q));const H=u(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&c(e,["setup","inputAudioTranscription"],e0());const oe=u(n,["outputAudioTranscription"]);e!==void 0&&oe!=null&&c(e,["setup","outputAudioTranscription"],e0());const Q=u(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&c(e,["setup","realtimeInputConfig"],j6(Q));const X=u(n,["contextWindowCompression"]);e!==void 0&&X!=null&&c(e,["setup","contextWindowCompression"],t3(X));const j=u(n,["proactivity"]);return e!==void 0&&j!=null&&c(e,["setup","proactivity"],n3(j)),t}function o3(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Je(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],i3(s,t)),t}function r3(n,e,t){const i={},s=u(e,["expireTime"]);t!==void 0&&s!=null&&c(t,["expireTime"],s);const l=u(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&c(t,["newSessionExpireTime"],l);const d=u(e,["uses"]);t!==void 0&&d!=null&&c(t,["uses"],d);const h=u(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&c(t,["bidiGenerateContentSetup"],o3(n,h));const y=u(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&c(t,["fieldMask"],y),i}function s3(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],r3(n,i,t)),t}function a3(n){const e={},t=u(n,["name"]);return t!=null&&c(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(l=>`${t}.${l}`);e.push(...s)}else e.push(t)}return e.join(",")}function u3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const l=l3(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];s.length>0&&(h=s.map(p=>d.includes(p)?`generationConfig.${p}`:p));const y=[];l&&y.push(l),h.length>0&&y.push(...h),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class c3 extends Jr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=s3(this.apiClient,e);l=me("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const y=u3(h,e.config);return s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>a3(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function d3(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function h3(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],d3(t,e)),e}function m3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function p3(n){const e={},t=u(n,["textInput"]);t!=null&&c(e,["textInput"],t);const i=u(n,["output"]);return i!=null&&c(e,["output"],i),e}function g3(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=u(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>p3(s))),c(e,["examples","examples"],i)}return e}function y3(n,e){const t={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=u(n,["epochCount"]);e!==void 0&&s!=null&&c(e,["tuningTask","hyperparameters","epochCount"],s);const l=u(n,["learningRateMultiplier"]);if(l!=null&&c(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=u(n,["batchSize"]);e!==void 0&&d!=null&&c(e,["tuningTask","hyperparameters","batchSize"],d);const h=u(n,["learningRate"]);return e!==void 0&&h!=null&&c(e,["tuningTask","hyperparameters","learningRate"],h),t}function _3(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["preTunedModel"]);i!=null&&c(e,["preTunedModel"],i);const s=u(n,["trainingDataset"]);s!=null&&c(e,["tuningTask","trainingData"],g3(s));const l=u(n,["config"]);return l!=null&&c(e,["config"],y3(l,e)),e}function v3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function T3(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function E3(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],T3(t,e)),e}function S3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function C3(n,e){const t={},i=u(n,["gcsUri"]);e!==void 0&&i!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=u(n,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s),u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function A3(n,e){const t={},i=u(n,["gcsUri"]);i!=null&&c(t,["validationDatasetUri"],i);const s=u(n,["vertexDatasetResource"]);return e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s),t}function I3(n,e){const t={},i=u(n,["validationDataset"]);e!==void 0&&i!=null&&c(e,["supervisedTuningSpec"],A3(i,t));const s=u(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&c(e,["tunedModelDisplayName"],s);const l=u(n,["description"]);e!==void 0&&l!=null&&c(e,["description"],l);const d=u(n,["epochCount"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const h=u(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const y=u(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y);const p=u(n,["preTunedModelCheckpointId"]);p!=null&&c(t,["preTunedModel","checkpointId"],p);const _=u(n,["adapterSize"]);if(e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_),u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function R3(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["preTunedModel"]);i!=null&&c(e,["preTunedModel"],i);const s=u(n,["trainingDataset"]);s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],C3(s,e));const l=u(n,["config"]);return l!=null&&c(e,["config"],I3(l,e)),e}function w3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["model"],t);const i=u(n,["name"]);return i!=null&&c(e,["endpoint"],i),e}function aA(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],VC(s));const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["tuningTask","startTime"]);d!=null&&c(e,["startTime"],d);const h=u(n,["tuningTask","completeTime"]);h!=null&&c(e,["endTime"],h);const y=u(n,["updateTime"]);y!=null&&c(e,["updateTime"],y);const p=u(n,["description"]);p!=null&&c(e,["description"],p);const _=u(n,["baseModel"]);_!=null&&c(e,["baseModel"],_);const E=u(n,["_self"]);E!=null&&c(e,["tunedModel"],w3(E));const S=u(n,["customBaseModel"]);S!=null&&c(e,["customBaseModel"],S);const w=u(n,["experiment"]);w!=null&&c(e,["experiment"],w);const V=u(n,["labels"]);V!=null&&c(e,["labels"],V);const q=u(n,["outputUri"]);q!=null&&c(e,["outputUri"],q);const H=u(n,["pipelineJob"]);H!=null&&c(e,["pipelineJob"],H);const oe=u(n,["serviceAccount"]);oe!=null&&c(e,["serviceAccount"],oe);const Q=u(n,["tunedModelDisplayName"]);return Q!=null&&c(e,["tunedModelDisplayName"],Q),e}function M3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>aA(d))),c(e,["tuningJobs"],l)}return e}function D3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["metadata"]);s!=null&&c(e,["metadata"],s);const l=u(n,["done"]);l!=null&&c(e,["done"],l);const d=u(n,["error"]);return d!=null&&c(e,["error"],d),e}function x3(n){const e={},t=u(n,["checkpointId"]);t!=null&&c(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&c(e,["epoch"],i);const s=u(n,["step"]);s!=null&&c(e,["step"],s);const l=u(n,["endpoint"]);return l!=null&&c(e,["endpoint"],l),e}function N3(n){const e={},t=u(n,["model"]);t!=null&&c(e,["model"],t);const i=u(n,["endpoint"]);i!=null&&c(e,["endpoint"],i);const s=u(n,["checkpoints"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>x3(d))),c(e,["checkpoints"],l)}return e}function Km(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],VC(s));const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["startTime"]);d!=null&&c(e,["startTime"],d);const h=u(n,["endTime"]);h!=null&&c(e,["endTime"],h);const y=u(n,["updateTime"]);y!=null&&c(e,["updateTime"],y);const p=u(n,["error"]);p!=null&&c(e,["error"],p);const _=u(n,["description"]);_!=null&&c(e,["description"],_);const E=u(n,["baseModel"]);E!=null&&c(e,["baseModel"],E);const S=u(n,["tunedModel"]);S!=null&&c(e,["tunedModel"],N3(S));const w=u(n,["preTunedModel"]);w!=null&&c(e,["preTunedModel"],w);const V=u(n,["supervisedTuningSpec"]);V!=null&&c(e,["supervisedTuningSpec"],V);const q=u(n,["tuningDataStats"]);q!=null&&c(e,["tuningDataStats"],q);const H=u(n,["encryptionSpec"]);H!=null&&c(e,["encryptionSpec"],H);const oe=u(n,["partnerModelTuningSpec"]);oe!=null&&c(e,["partnerModelTuningSpec"],oe);const Q=u(n,["customBaseModel"]);Q!=null&&c(e,["customBaseModel"],Q);const X=u(n,["experiment"]);X!=null&&c(e,["experiment"],X);const j=u(n,["labels"]);j!=null&&c(e,["labels"],j);const J=u(n,["outputUri"]);J!=null&&c(e,["outputUri"],J);const se=u(n,["pipelineJob"]);se!=null&&c(e,["pipelineJob"],se);const x=u(n,["serviceAccount"]);x!=null&&c(e,["serviceAccount"],x);const M=u(n,["tunedModelDisplayName"]);return M!=null&&c(e,["tunedModelDisplayName"],M),e}function b3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Km(d))),c(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P3 extends Jr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new uu(Gr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel},s=Object.assign(Object.assign({},t),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),s=await this.tuneMldevInternal(i);let l="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?l=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(l=s.name.split("/operations/")[0]),{name:l,state:Om.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=v3(e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>Km(_))}else{const p=f3(e);return h=me("{name}",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>aA(_))}}async listInternal(e){var t,i,s,l;let d,h="",y={};if(this.apiClient.isVertexAI()){const p=E3(e);return h=me("tuningJobs",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=b3(_),S=new DE;return Object.assign(S,E),S})}else{const p=h3(e);return h=me("tunedModels",p._url),y=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=M3(_),S=new DE;return Object.assign(S,E),S})}}async cancel(e){var t,i,s,l;let d="",h={};if(this.apiClient.isVertexAI()){const y=S3(e);d=me("{name}:cancel",y._url),h=y._query,delete y.config,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const y=m3(e);d=me("{name}:cancel",y._url),h=y._query,delete y.config,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=R3(e);return l=me("tuningJobs",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:y.headers},_})),s.then(y=>Km(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=_3(e);return l=me("tunedModels",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:y.headers},_})),s.then(y=>D3(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const V3=1024*1024*8,U3=3,L3=1e3,O3=2,fm="x-goog-upload-status";async function F3(n,e,t){var i,s,l;let d=0,h=0,y=new Fm(new Response),p="upload";for(d=n.size;h<d;){const E=Math.min(V3,d-h),S=n.slice(h,h+E);h+E>=d&&(p+=", finalize");let w=0,V=L3;for(;w<U3&&(y=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((i=y==null?void 0:y.headers)===null||i===void 0)&&i[fm]));)w++,await B3(V),V=V*O3;if(h+=E,((s=y==null?void 0:y.headers)===null||s===void 0?void 0:s[fm])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const _=await(y==null?void 0:y.json());if(((l=y==null?void 0:y.headers)===null||l===void 0?void 0:l[fm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return _.file}async function q3(n){return{size:n.size,type:n.type}}function B3(n){return new Promise(e=>setTimeout(e,n))}class H3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await F3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await q3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G3{create(e,t,i){return new z3(e,t,i)}}class z3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t0="x-goog-api-key";class Y3{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(t0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(t0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $3="gl-node/";class K3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=wb(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new Y3(this.apiKey);this.apiClient=new u6({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:$3+"web",uploader:new H3,downloader:new k3}),this.models=new D6(this.apiClient),this.live=new S6(this.apiClient,s,new G3),this.batches=new ZP(this.apiClient),this.chats=new ok(this.models,this.apiClient),this.caches=new tk(this.apiClient),this.files=new yk(this.apiClient),this.operations=new P6(this.apiClient),this.authTokens=new c3(this.apiClient),this.tunings=new P3(this.apiClient)}}const J3=async(n,e,t)=>{const{apiKey:i,model:s}=e;if(!i)throw new Error(`: Gemini API

AIGoogle Gemini API

APIGoogle AI Studio`);if(!n)throw new Error(": ");const l=new K3({apiKey:i}),d=n.grid.flat(2),h=new Map;d.forEach(_=>{_.id&&!h.has(_.id)&&h.set(_.id,{name:_.name,teacher:_.teacher,room:_.room,credits:_.credits,memo:_.memo,tasks:_.tasks.filter(E=>!E.completed).map(E=>({content:E.content,dueDate:E.dueDate}))})});const y={name:n.name,settings:n.settings,subjects:Array.from(h.values())},p=`


# 
- 
- 
- Markdown
- 

#  (JSON)
${JSON.stringify(y,null,2)}

# 
"${t}"


`;try{return await l.models.generateContentStream({model:s,contents:p})}catch(_){throw console.error("Error analyzing with Gemini API:",_),_ instanceof Error&&_.message.includes("API key not valid")?new Error(": APIAI"):new Error("AI")}},Q3=({isOpen:n,onClose:e,onSave:t,currentApiKey:i,currentModel:s})=>{const[l,d]=Ne.useState(i),[h,y]=Ne.useState(s);if(Ne.useEffect(()=>{n&&(d(i),y(s))},[n,i,s]),!n)return null;const p=()=>{t(l,h),e()};return O.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:O.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[O.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[O.jsx("h2",{className:"text-xl font-bold",children:"AI"}),O.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:O.jsx(Hf,{className:"w-6 h-6"})})]}),O.jsxs("div",{className:"p-6 space-y-6",children:[O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Gemini API"}),O.jsx("input",{type:"password",value:l,onChange:_=>d(_.target.value),placeholder:"API",className:"w-full bg-gray-200/50 dark:bg-gray-700/50 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500","aria-label":"Gemini API Key"}),O.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"API"})]}),O.jsxs("div",{children:[O.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),O.jsx("select",{value:h,onChange:_=>y(_.target.value),className:"w-full bg-gray-200/50 dark:bg-gray-700/50 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500","aria-label":"AI Model",children:zI.map(_=>O.jsx("option",{value:_,className:"bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white",children:_},_))})]})]}),O.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10",children:O.jsx("button",{onClick:p,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})})]})})},X3=({isOpen:n,onClose:e,timetable:t,apiKey:i,model:s,onSaveSettings:l,user:d})=>{var Q;const[h,y]=Ne.useState([]),[p,_]=Ne.useState(!1),[E,S]=Ne.useState(""),[w,V]=Ne.useState(!1),q=Ne.useRef(null),H=()=>{var X;(X=q.current)==null||X.scrollIntoView({behavior:"smooth"})};Ne.useEffect(()=>{H()},[h]),Ne.useEffect(()=>{n&&h.length===0&&y([{role:"model",text:`
`}])},[n,h.length]);const oe=async X=>{if(X.preventDefault(),!E.trim()||p)return;const j=E;y(J=>[...J,{role:"user",text:j},{role:"model",text:""}]),S(""),_(!0);try{const J=await J3(t,{apiKey:i,model:s},j);for await(const se of J){const x=se.text;y(M=>{const D=M.length-1,b=[...M];return b[D]={...b[D],text:b[D].text+x},b})}}catch(J){const se=J instanceof Error?J.message:"";y(x=>{const M=x.length-1,D=[...x];return D[M]={...D[M],text:se},D})}finally{_(!1)}};return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:`fixed inset-0 bg-black/30 flex justify-end z-40 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:O.jsxs("div",{className:`w-full max-w-md h-full bg-gray-100/90 dark:bg-gray-900/90 backdrop-blur-xl border-l border-black/10 dark:border-white/10 shadow-2xl flex flex-col transition-transform duration-300 ${n?"translate-x-0":"translate-x-full"}`,children:[O.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[O.jsx("h2",{className:"text-xl font-bold",children:"AI"}),O.jsxs("div",{children:[O.jsx("button",{onClick:()=>V(!0),className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",title:"AI",children:O.jsx(MC,{className:"w-6 h-6"})}),O.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 ml-2",title:"",children:O.jsx(Hf,{className:"w-6 h-6"})})]})]}),O.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[h.map((X,j)=>O.jsx("div",{className:`flex ${X.role==="user"?"justify-end":"justify-start"}`,children:O.jsx("div",{className:`max-w-xs md:max-w-sm lg:max-w-md p-3 rounded-2xl ${X.role==="user"?"bg-sky-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:X.role==="model"?O.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:window.marked?window.marked.parse(X.text):X.text.replace(/</g,"&lt;").replace(/>/g,"&gt;")}}):O.jsx("p",{className:"whitespace-pre-wrap",children:X.text})})},j)),p&&((Q=h[h.length-1])==null?void 0:Q.text)===""&&O.jsx("div",{className:"flex justify-start",children:O.jsx("div",{className:"p-3 rounded-2xl bg-gray-200 dark:bg-gray-700",children:O.jsxs("div",{className:"flex items-center gap-2",children:[O.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse"}),O.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse [animation-delay:0.2s]"}),O.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse [animation-delay:0.4s]"})]})})}),O.jsx("div",{ref:q})]}),O.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 mt-auto",children:O.jsxs("form",{onSubmit:oe,className:"flex items-center gap-2",children:[O.jsx("input",{type:"text",value:E,onChange:X=>S(X.target.value),placeholder:p?"AI...":"...",className:"w-full bg-gray-200/50 dark:bg-gray-800/50 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 transition-colors placeholder:text-gray-500",disabled:p,"aria-label":""}),O.jsx("button",{type:"submit",disabled:p||!E.trim(),className:"bg-sky-600 hover:bg-sky-700 text-white p-3 rounded-lg transition-colors disabled:bg-sky-400 disabled:cursor-not-allowed flex-shrink-0","aria-label":"",children:O.jsx(gb,{className:"w-5 h-5"})})]})})]})}),O.jsx(Q3,{isOpen:w,onClose:()=>V(!1),onSave:l,currentApiKey:i,currentModel:s})]})};function W3(){const[n,e]=Ne.useState(null),[t,i]=Ne.useState(!0),{timetables:s,activeTimetable:l,activeTimetableId:d,setActiveTimetableId:h,addTimetable:y,importTimetable:p,deleteTimetable:_,updateTimetableSettings:E,saveSubject:S,deleteSubject:w,moveSubject:V,totalCredits:q,saveStatus:H,isLoading:oe}=sb(n),[Q,X]=Ne.useState(""),[j,J]=Ne.useState(YI),[se,x]=Ne.useState(()=>{if(typeof window<"u"&&window.localStorage){const Ee=window.localStorage.getItem("theme");if(Ee==="light"||Ee==="dark")return Ee;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"});Ne.useEffect(()=>{const Ee=ib(Mt=>{e(Mt),i(!1)}),De=localStorage.getItem("geminiApiKey");De&&X(De);const yt=localStorage.getItem("geminiModel");return yt&&J(yt),()=>Ee()},[]),Ne.useEffect(()=>{const Ee=window.document.documentElement;Ee.classList.remove(se==="dark"?"light":"dark"),Ee.classList.add(se),localStorage.setItem("theme",se),document.body.classList.remove("glassmorphism-bg","dark"),se==="dark"?document.body.classList.add("dark","glassmorphism-bg"):document.body.classList.add("glassmorphism-bg")},[se]);const M=()=>{x(Ee=>Ee==="light"?"dark":"light")},D=async()=>{try{await tb()}catch(Ee){console.error("Login failed",Ee)}},b=async()=>{try{await nb()}catch(Ee){console.error("Logout failed",Ee)}},[k,F]=Ne.useState(!1),[P,ct]=Ne.useState(!1),[qe,Z]=Ne.useState(!1),[ce,pe]=Ne.useState({subject:null,dayIndex:0,periodIndex:0}),Ye=(Ee,De)=>{pe({subject:null,dayIndex:Ee,periodIndex:De}),F(!0)},U=(Ee,De,yt)=>{pe({subject:Ee,dayIndex:De,periodIndex:yt}),F(!0)},re=()=>{const Ee=prompt(":",` ${s.length+1}`);Ee&&y(Ee)},fe=()=>{l&&window.confirm(`${l.name}`)&&_(l.id)},le=()=>{if(!l)return;const Ee=JSON.stringify(l,null,2),De=new Blob([Ee],{type:"application/json"}),yt=URL.createObjectURL(De),Mt=document.createElement("a");Mt.href=yt,Mt.download=`${l.name}.tmx`,document.body.appendChild(Mt),Mt.click(),document.body.removeChild(Mt),URL.revokeObjectURL(yt)},_e=Ee=>{var Mt;const De=(Mt=Ee.target.files)==null?void 0:Mt[0];if(!De)return;const yt=new FileReader;yt.onload=qn=>{var jn;const Zn=(jn=qn.target)==null?void 0:jn.result;typeof Zn=="string"&&(p(Zn)||alert(""))},yt.readAsText(De),Ee.target.value=""},be=Ee=>{E(Ee)},Ae=(Ee,De)=>{X(Ee),J(De),localStorage.setItem("geminiApiKey",Ee),localStorage.setItem("geminiModel",De)};return t||oe?O.jsx("div",{className:"min-h-screen flex justify-center items-center",children:O.jsx("div",{className:"text-xl font-semibold text-white/80",children:"..."})}):O.jsxs("div",{className:"min-h-screen text-gray-800 dark:text-white font-sans transition-colors duration-300",children:[O.jsx(_b,{timetables:s,activeTimetableId:d,setActiveTimetableId:h,onAddTimetable:re,onDeleteTimetable:fe,onOpenSettings:()=>ct(!0),onToggleChat:()=>Z(!qe),totalCredits:q,theme:se,toggleTheme:M,onExport:le,onImport:_e,user:n,onLogin:D,onLogout:b,saveStatus:H}),O.jsx("main",{children:l?O.jsx(Tb,{timetable:l,onAddSubject:Ye,onEditSubject:U,onMoveSubject:V}):O.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-100px)]",children:O.jsx("p",{className:"text-2xl text-white/70",children:""})})}),O.jsx(Sb,{isOpen:k,onClose:()=>F(!1),onSave:S,onDelete:w,subjectData:ce}),l&&O.jsx(Cb,{isOpen:P,onClose:()=>ct(!1),onSave:be,currentSettings:l.settings}),O.jsx(X3,{isOpen:qe,onClose:()=>Z(!1),timetable:l,apiKey:Q,model:j,onSaveSettings:Ae,user:n})]})}const lA=document.getElementById("root");if(!lA)throw new Error("Could not find root element to mount to");const Z3=GI.createRoot(lA);Z3.render(O.jsx(i0.StrictMode,{children:O.jsx(W3,{})}));
