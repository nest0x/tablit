(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function n0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $h={exports:{}},xl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function PI(){if(tv)return xl;tv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,l){var d=null;if(l!==void 0&&(d=""+l),s.key!==void 0&&(d=""+s.key),"key"in s){l={};for(var h in s)h!=="key"&&(l[h]=s[h])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:d,ref:s!==void 0?s:null,props:l}}return xl.Fragment=e,xl.jsx=t,xl.jsxs=t,xl}var nv;function kI(){return nv||(nv=1,$h.exports=PI()),$h.exports}var k=kI(),Kh={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function VI(){if(iv)return be;iv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function H(L,re,fe){this.props=L,this.context=re,this.refs=q,this.updater=fe||x}H.prototype.isReactComponent={},H.prototype.setState=function(L,re){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,re,"setState")},H.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ie(){}ie.prototype=H.prototype;function K(L,re,fe){this.props=L,this.context=re,this.refs=q,this.updater=fe||x}var X=K.prototype=new ie;X.constructor=K,U(X,H.prototype),X.isPureReactComponent=!0;var ae=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function b(L,re,fe,le,_e,Ne){return fe=Ne.ref,{$$typeof:n,type:L,key:re,ref:fe!==void 0?fe:null,props:Ne}}function R(L,re){return b(L.type,re,void 0,void 0,void 0,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function N(L){var re={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(fe){return re[fe]})}var V=/\/+/g;function O(L,re){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):re.toString(36)}function D(){}function et(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(D,D):(L.status="pending",L.then(function(re){L.status==="pending"&&(L.status="fulfilled",L.value=re)},function(re){L.status==="pending"&&(L.status="rejected",L.reason=re)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ke(L,re,fe,le,_e){var Ne=typeof L;(Ne==="undefined"||Ne==="boolean")&&(L=null);var Ae=!1;if(L===null)Ae=!0;else switch(Ne){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(L.$$typeof){case n:case e:Ae=!0;break;case _:return Ae=L._init,ke(Ae(L._payload),re,fe,le,_e)}}if(Ae)return _e=_e(L),Ae=le===""?"."+O(L,0):le,ae(_e)?(fe="",Ae!=null&&(fe=Ae.replace(V,"$&/")+"/"),ke(_e,re,fe,"",function(In){return In})):_e!=null&&(M(_e)&&(_e=R(_e,fe+(_e.key==null||L&&L.key===_e.key?"":(""+_e.key).replace(V,"$&/")+"/")+Ae)),re.push(_e)),1;Ae=0;var Ct=le===""?".":le+":";if(ae(L))for(var tt=0;tt<L.length;tt++)le=L[tt],Ne=Ct+O(le,tt),Ae+=ke(le,re,fe,Ne,_e);else if(tt=S(L),typeof tt=="function")for(L=tt.call(L),tt=0;!(le=L.next()).done;)le=le.value,Ne=Ct+O(le,tt++),Ae+=ke(le,re,fe,Ne,_e);else if(Ne==="object"){if(typeof L.then=="function")return ke(et(L),re,fe,le,_e);throw re=String(L),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function j(L,re,fe){if(L==null)return L;var le=[],_e=0;return ke(L,le,"","",function(Ne){return re.call(fe,Ne,_e++)}),le}function ue(L){if(L._status===-1){var re=L._result;re=re(),re.then(function(fe){(L._status===0||L._status===-1)&&(L._status=1,L._result=fe)},function(fe){(L._status===0||L._status===-1)&&(L._status=2,L._result=fe)}),L._status===-1&&(L._status=0,L._result=re)}if(L._status===1)return L._result.default;throw L._result}var he=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function qe(){}return be.Children={map:j,forEach:function(L,re,fe){j(L,function(){re.apply(this,arguments)},fe)},count:function(L){var re=0;return j(L,function(){re++}),re},toArray:function(L){return j(L,function(re){return re})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},be.Component=H,be.Fragment=t,be.Profiler=s,be.PureComponent=K,be.StrictMode=i,be.Suspense=g,be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,be.__COMPILER_RUNTIME={__proto__:null,c:function(L){return W.H.useMemoCache(L)}},be.cache=function(L){return function(){return L.apply(null,arguments)}},be.cloneElement=function(L,re,fe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var le=U({},L.props),_e=L.key,Ne=void 0;if(re!=null)for(Ae in re.ref!==void 0&&(Ne=void 0),re.key!==void 0&&(_e=""+re.key),re)!J.call(re,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&re.ref===void 0||(le[Ae]=re[Ae]);var Ae=arguments.length-2;if(Ae===1)le.children=fe;else if(1<Ae){for(var Ct=Array(Ae),tt=0;tt<Ae;tt++)Ct[tt]=arguments[tt+2];le.children=Ct}return b(L.type,_e,void 0,void 0,Ne,le)},be.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},be.createElement=function(L,re,fe){var le,_e={},Ne=null;if(re!=null)for(le in re.key!==void 0&&(Ne=""+re.key),re)J.call(re,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(_e[le]=re[le]);var Ae=arguments.length-2;if(Ae===1)_e.children=fe;else if(1<Ae){for(var Ct=Array(Ae),tt=0;tt<Ae;tt++)Ct[tt]=arguments[tt+2];_e.children=Ct}if(L&&L.defaultProps)for(le in Ae=L.defaultProps,Ae)_e[le]===void 0&&(_e[le]=Ae[le]);return b(L,Ne,void 0,void 0,null,_e)},be.createRef=function(){return{current:null}},be.forwardRef=function(L){return{$$typeof:h,render:L}},be.isValidElement=M,be.lazy=function(L){return{$$typeof:_,_payload:{_status:-1,_result:L},_init:ue}},be.memo=function(L,re){return{$$typeof:p,type:L,compare:re===void 0?null:re}},be.startTransition=function(L){var re=W.T,fe={};W.T=fe;try{var le=L(),_e=W.S;_e!==null&&_e(fe,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(qe,he)}catch(Ne){he(Ne)}finally{W.T=re}},be.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},be.use=function(L){return W.H.use(L)},be.useActionState=function(L,re,fe){return W.H.useActionState(L,re,fe)},be.useCallback=function(L,re){return W.H.useCallback(L,re)},be.useContext=function(L){return W.H.useContext(L)},be.useDebugValue=function(){},be.useDeferredValue=function(L,re){return W.H.useDeferredValue(L,re)},be.useEffect=function(L,re,fe){var le=W.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(L,re)},be.useId=function(){return W.H.useId()},be.useImperativeHandle=function(L,re,fe){return W.H.useImperativeHandle(L,re,fe)},be.useInsertionEffect=function(L,re){return W.H.useInsertionEffect(L,re)},be.useLayoutEffect=function(L,re){return W.H.useLayoutEffect(L,re)},be.useMemo=function(L,re){return W.H.useMemo(L,re)},be.useOptimistic=function(L,re){return W.H.useOptimistic(L,re)},be.useReducer=function(L,re,fe){return W.H.useReducer(L,re,fe)},be.useRef=function(L){return W.H.useRef(L)},be.useState=function(L){return W.H.useState(L)},be.useSyncExternalStore=function(L,re,fe){return W.H.useSyncExternalStore(L,re,fe)},be.useTransition=function(){return W.H.useTransition()},be.version="19.1.1",be}var ov;function Jm(){return ov||(ov=1,Kh.exports=VI()),Kh.exports}var ve=Jm();const i0=n0(ve);var Jh={exports:{}},bl={},Qh={exports:{}},Xh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv;function UI(){return rv||(rv=1,(function(n){function e(j,ue){var he=j.length;j.push(ue);e:for(;0<he;){var qe=he-1>>>1,L=j[qe];if(0<s(L,ue))j[qe]=ue,j[he]=L,he=qe;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var ue=j[0],he=j.pop();if(he!==ue){j[0]=he;e:for(var qe=0,L=j.length,re=L>>>1;qe<re;){var fe=2*(qe+1)-1,le=j[fe],_e=fe+1,Ne=j[_e];if(0>s(le,he))_e<L&&0>s(Ne,le)?(j[qe]=Ne,j[_e]=he,qe=_e):(j[qe]=le,j[fe]=he,qe=fe);else if(_e<L&&0>s(Ne,he))j[qe]=Ne,j[_e]=he,qe=_e;else break e}}return ue}function s(j,ue){var he=j.sortIndex-ue.sortIndex;return he!==0?he:j.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();n.unstable_now=function(){return d.now()-h}}var g=[],p=[],_=1,E=null,S=3,x=!1,U=!1,q=!1,H=!1,ie=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function ae(j){for(var ue=t(p);ue!==null;){if(ue.callback===null)i(p);else if(ue.startTime<=j)i(p),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(p)}}function W(j){if(q=!1,ae(j),!U)if(t(g)!==null)U=!0,J||(J=!0,O());else{var ue=t(p);ue!==null&&ke(W,ue.startTime-j)}}var J=!1,b=-1,R=5,M=-1;function N(){return H?!0:!(n.unstable_now()-M<R)}function V(){if(H=!1,J){var j=n.unstable_now();M=j;var ue=!0;try{e:{U=!1,q&&(q=!1,K(b),b=-1),x=!0;var he=S;try{t:{for(ae(j),E=t(g);E!==null&&!(E.expirationTime>j&&N());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,S=E.priorityLevel;var L=qe(E.expirationTime<=j);if(j=n.unstable_now(),typeof L=="function"){E.callback=L,ae(j),ue=!0;break t}E===t(g)&&i(g),ae(j)}else i(g);E=t(g)}if(E!==null)ue=!0;else{var re=t(p);re!==null&&ke(W,re.startTime-j),ue=!1}}break e}finally{E=null,S=he,x=!1}ue=void 0}}finally{ue?O():J=!1}}}var O;if(typeof X=="function")O=function(){X(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,et=D.port2;D.port1.onmessage=V,O=function(){et.postMessage(null)}}else O=function(){ie(V,0)};function ke(j,ue){b=ie(function(){j(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(j){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var he=S;S=ue;try{return j()}finally{S=he}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(j,ue){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var he=S;S=j;try{return ue()}finally{S=he}},n.unstable_scheduleCallback=function(j,ue,he){var qe=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?qe+he:qe):he=qe,j){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=he+L,j={id:_++,callback:ue,priorityLevel:j,startTime:he,expirationTime:L,sortIndex:-1},he>qe?(j.sortIndex=he,e(p,j),t(g)===null&&j===t(p)&&(q?(K(b),b=-1):q=!0,ke(W,he-qe))):(j.sortIndex=L,e(g,j),U||x||(U=!0,J||(J=!0,O()))),j},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(j){var ue=S;return function(){var he=S;S=ue;try{return j.apply(this,arguments)}finally{S=he}}}})(Xh)),Xh}var sv;function LI(){return sv||(sv=1,Qh.exports=UI()),Qh.exports}var Wh={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function OI(){if(av)return en;av=1;var n=Jm();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(g,p,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:g,containerInfo:p,implementation:_}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,_)},en.flushSync=function(g){var p=d.T,_=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=p,i.p=_,i.d.f()}},en.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},en.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},en.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,E=h(_,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:x}):_==="script"&&i.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},en.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=h(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},en.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,E=h(_,p.crossOrigin);i.d.L(g,_,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},en.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=h(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},en.requestFormReset=function(g){i.d.r(g)},en.unstable_batchedUpdates=function(g,p){return g(p)},en.useFormState=function(g,p,_){return d.H.useFormState(g,p,_)},en.useFormStatus=function(){return d.H.useHostTransitionStatus()},en.version="19.1.1",en}var lv;function FI(){if(lv)return Wh.exports;lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wh.exports=OI(),Wh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function qI(){if(uv)return bl;uv=1;var n=LI(),e=Jm(),t=FI();function i(o){var r="https://react.dev/errors/"+o;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+o+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function l(o){var r=o,a=o;if(o.alternate)for(;r.return;)r=r.return;else{o=r;do r=o,(r.flags&4098)!==0&&(a=r.return),o=r.return;while(o)}return r.tag===3?a:null}function d(o){if(o.tag===13){var r=o.memoizedState;if(r===null&&(o=o.alternate,o!==null&&(r=o.memoizedState)),r!==null)return r.dehydrated}return null}function h(o){if(l(o)!==o)throw Error(i(188))}function g(o){var r=o.alternate;if(!r){if(r=l(o),r===null)throw Error(i(188));return r!==o?null:o}for(var a=o,f=r;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(f=y.return,f!==null){a=f;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return h(y),o;if(v===f)return h(y),r;v=v.sibling}throw Error(i(188))}if(a.return!==f.return)a=y,f=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,f=v;break}if(I===f){A=!0,f=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,f=y;break}if(I===f){A=!0,f=v,a=y;break}I=I.sibling}if(!A)throw Error(i(189))}}if(a.alternate!==f)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?o:r}function p(o){var r=o.tag;if(r===5||r===26||r===27||r===6)return o;for(o=o.child;o!==null;){if(r=p(o),r!==null)return r;o=o.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),K=Symbol.for("react.consumer"),X=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function O(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var D=Symbol.for("react.client.reference");function et(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===D?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case U:return"Fragment";case H:return"Profiler";case q:return"StrictMode";case W:return"Suspense";case J:return"SuspenseList";case M:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case X:return(o.displayName||"Context")+".Provider";case K:return(o._context.displayName||"Context")+".Consumer";case ae:var r=o.render;return o=o.displayName,o||(o=r.displayName||r.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case b:return r=o.displayName||null,r!==null?r:et(o.type)||"Memo";case R:r=o._payload,o=o._init;try{return et(o(r))}catch{}}return null}var ke=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},qe=[],L=-1;function re(o){return{current:o}}function fe(o){0>L||(o.current=qe[L],qe[L]=null,L--)}function le(o,r){L++,qe[L]=o.current,o.current=r}var _e=re(null),Ne=re(null),Ae=re(null),Ct=re(null);function tt(o,r){switch(le(Ae,r),le(Ne,o),le(_e,null),r.nodeType){case 9:case 11:o=(o=r.documentElement)&&(o=o.namespaceURI)?x_(o):0;break;default:if(o=r.tagName,r=r.namespaceURI)r=x_(r),o=b_(r,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}fe(_e),le(_e,o)}function In(){fe(_e),fe(Ne),fe(Ae)}function ei(o){o.memoizedState!==null&&le(Ct,o);var r=_e.current,a=b_(r,o.type);r!==a&&(le(Ne,o),le(_e,a))}function Hn(o){Ne.current===o&&(fe(_e),fe(Ne)),Ct.current===o&&(fe(Ct),Al._currentValue=he)}var Mi=Object.prototype.hasOwnProperty,xi=n.unstable_scheduleCallback,bi=n.unstable_cancelCallback,we=n.unstable_shouldYield,st=n.unstable_requestPaint,Xe=n.unstable_now,fn=n.unstable_getCurrentPriorityLevel,or=n.unstable_ImmediatePriority,Ni=n.unstable_UserBlockingPriority,ti=n.unstable_NormalPriority,hu=n.unstable_LowPriority,ts=n.unstable_IdlePriority,Ca=n.log,mu=n.unstable_setDisableYieldValue,gt=null,We=null;function gn(o){if(typeof Ca=="function"&&mu(o),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(gt,o)}catch{}}var Zt=Math.clz32?Math.clz32:rr,pu=Math.log,Jf=Math.LN2;function rr(o){return o>>>=0,o===0?32:31-(pu(o)/Jf|0)|0}var sr=256,ar=4194304;function Gn(o){var r=o&42;if(r!==0)return r;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ns(o,r,a){var f=o.pendingLanes;if(f===0)return 0;var y=0,v=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var I=f&134217727;return I!==0?(f=I&~v,f!==0?y=Gn(f):(A&=I,A!==0?y=Gn(A):a||(a=I&~o,a!==0&&(y=Gn(a))))):(I=f&~v,I!==0?y=Gn(I):A!==0?y=Gn(A):a||(a=f&~o,a!==0&&(y=Gn(a)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,a=r&-r,v>=a||v===32&&(a&4194048)!==0)?r:y}function lr(o,r){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&r)===0}function Aa(o,r){switch(o){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ia(){var o=sr;return sr<<=1,(sr&4194048)===0&&(sr=256),o}function Ra(){var o=ar;return ar<<=1,(ar&62914560)===0&&(ar=4194304),o}function Di(o){for(var r=[],a=0;31>a;a++)r.push(o);return r}function Pi(o,r){o.pendingLanes|=r,r!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function wa(o,r,a,f,y,v){var A=o.pendingLanes;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=a,o.entangledLanes&=a,o.errorRecoveryDisabledLanes&=a,o.shellSuspendCounter=0;var I=o.entanglements,P=o.expirationTimes,Y=o.hiddenUpdates;for(a=A&~a;0<a;){var ee=31-Zt(a),ne=1<<ee;I[ee]=0,P[ee]=-1;var $=Y[ee];if($!==null)for(Y[ee]=null,ee=0;ee<$.length;ee++){var Q=$[ee];Q!==null&&(Q.lane&=-536870913)}a&=~ne}f!==0&&ni(o,f,0),v!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=v&~(A&~r))}function ni(o,r,a){o.pendingLanes|=r,o.suspendedLanes&=~r;var f=31-Zt(r);o.entangledLanes|=r,o.entanglements[f]=o.entanglements[f]|1073741824|a&4194090}function Ma(o,r){var a=o.entangledLanes|=r;for(o=o.entanglements;a;){var f=31-Zt(a),y=1<<f;y&r|o[f]&r&&(o[f]|=r),a&=~y}}function ho(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function is(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function mo(){var o=ue.p;return o!==0?o:(o=window.event,o===void 0?32:Q_(o.type))}function gu(o,r){var a=ue.p;try{return ue.p=o,r()}finally{ue.p=a}}var ft=Math.random().toString(36).slice(2),bt="__reactFiber$"+ft,At="__reactProps$"+ft,Rn="__reactContainer$"+ft,xa="__reactEvents$"+ft,Qf="__reactListeners$"+ft,po="__reactHandles$"+ft,yu="__reactResources$"+ft,ur="__reactMarker$"+ft;function go(o){delete o[bt],delete o[At],delete o[xa],delete o[Qf],delete o[po]}function ki(o){var r=o[bt];if(r)return r;for(var a=o.parentNode;a;){if(r=a[Rn]||a[bt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(o=k_(o);o!==null;){if(a=o[bt])return a;o=k_(o)}return r}o=a,a=o.parentNode}return null}function ii(o){if(o=o[bt]||o[Rn]){var r=o.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return o}return null}function oi(o){var r=o.tag;if(r===5||r===26||r===27||r===6)return o.stateNode;throw Error(i(33))}function an(o){var r=o[yu];return r||(r=o[yu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vt(o){o[ur]=!0}var ba=new Set,os={};function zn(o,r){Vi(o,r),Vi(o+"Capture",r)}function Vi(o,r){for(os[o]=r,o=0;o<r.length;o++)ba.add(r[o])}var _u=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vu={},cr={};function Tu(o){return Mi.call(cr,o)?!0:Mi.call(vu,o)?!1:_u.test(o)?cr[o]=!0:(vu[o]=!0,!1)}function yo(o,r,a){if(Tu(r))if(a===null)o.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":o.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(r);return}}o.setAttribute(r,""+a)}}function ri(o,r,a){if(a===null)o.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(r);return}o.setAttribute(r,""+a)}}function zt(o,r,a,f){if(f===null)o.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(a);return}o.setAttributeNS(r,a,""+f)}}var fr,Eu;function Ui(o){if(fr===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);fr=r&&r[1]||"",Eu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fr+o+Eu}var rs=!1;function ss(o,r){if(!o||rs)return"";rs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var $=Q}Reflect.construct(o,[],ne)}else{try{ne.call()}catch(Q){$=Q}o.call(ne.prototype)}}else{try{throw Error()}catch(Q){$=Q}(ne=o())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var P=A.split(`
`),Y=I.split(`
`);for(y=f=0;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(f===P.length||y===Y.length)for(f=P.length-1,y=Y.length-1;1<=f&&0<=y&&P[f]!==Y[y];)y--;for(;1<=f&&0<=y;f--,y--)if(P[f]!==Y[y]){if(f!==1||y!==1)do if(f--,y--,0>y||P[f]!==Y[y]){var ee=`
`+P[f].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=f&&0<=y);break}}}finally{rs=!1,Error.prepareStackTrace=a}return(a=o?o.displayName||o.name:"")?Ui(a):""}function Na(o){switch(o.tag){case 26:case 27:case 5:return Ui(o.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return ss(o.type,!1);case 11:return ss(o.type.render,!1);case 1:return ss(o.type,!0);case 31:return Ui("Activity");default:return""}}function as(o){try{var r="";do r+=Na(o),o=o.return;while(o);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ln(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Da(o){var r=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Xf(o){var r=Da(o)?"checked":"value",a=Object.getOwnPropertyDescriptor(o.constructor.prototype,r),f=""+o[r];if(!o.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,v=a.set;return Object.defineProperty(o,r,{configurable:!0,get:function(){return y.call(this)},set:function(A){f=""+A,v.call(this,A)}}),Object.defineProperty(o,r,{enumerable:a.enumerable}),{getValue:function(){return f},setValue:function(A){f=""+A},stopTracking:function(){o._valueTracker=null,delete o[r]}}}}function ls(o){o._valueTracker||(o._valueTracker=Xf(o))}function Pa(o){if(!o)return!1;var r=o._valueTracker;if(!r)return!0;var a=r.getValue(),f="";return o&&(f=Da(o)?o.checked?"true":"false":o.value),o=f,o!==a?(r.setValue(o),!0):!1}function dr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Wf=/[\n"\\]/g;function It(o){return o.replace(Wf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function yn(o,r,a,f,y,v,A,I){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),r!=null?A==="number"?(r===0&&o.value===""||o.value!=r)&&(o.value=""+ln(r)):o.value!==""+ln(r)&&(o.value=""+ln(r)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),r!=null?_o(o,A,ln(r)):a!=null?_o(o,A,ln(a)):f!=null&&o.removeAttribute("value"),y==null&&v!=null&&(o.defaultChecked=!!v),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+ln(I):o.removeAttribute("name")}function hr(o,r,a,f,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),r!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||r!=null))return;a=a!=null?""+ln(a):"",r=r!=null?""+ln(r):a,I||r===o.value||(o.value=r),o.defaultValue=r}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=I?o.checked:!!f,o.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A)}function _o(o,r,a){r==="number"&&dr(o.ownerDocument)===o||o.defaultValue===""+a||(o.defaultValue=""+a)}function Li(o,r,a,f){if(o=o.options,r){r={};for(var y=0;y<a.length;y++)r["$"+a[y]]=!0;for(a=0;a<o.length;a++)y=r.hasOwnProperty("$"+o[a].value),o[a].selected!==y&&(o[a].selected=y),y&&f&&(o[a].defaultSelected=!0)}else{for(a=""+ln(a),r=null,y=0;y<o.length;y++){if(o[y].value===a){o[y].selected=!0,f&&(o[y].defaultSelected=!0);return}r!==null||o[y].disabled||(r=o[y])}r!==null&&(r.selected=!0)}}function nt(o,r,a){if(r!=null&&(r=""+ln(r),r!==o.value&&(o.value=r),a==null)){o.defaultValue!==r&&(o.defaultValue=r);return}o.defaultValue=a!=null?""+ln(a):""}function mr(o,r,a,f){if(r==null){if(f!=null){if(a!=null)throw Error(i(92));if(ke(f)){if(1<f.length)throw Error(i(93));f=f[0]}a=f}a==null&&(a=""),r=a}a=ln(r),o.defaultValue=a,f=o.textContent,f===a&&f!==""&&f!==null&&(o.value=f)}function wn(o,r){if(r){var a=o.firstChild;if(a&&a===o.lastChild&&a.nodeType===3){a.nodeValue=r;return}}o.textContent=r}var pr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Su(o,r,a){var f=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?f?o.setProperty(r,""):r==="float"?o.cssFloat="":o[r]="":f?o.setProperty(r,a):typeof a!="number"||a===0||pr.has(r)?r==="float"?o.cssFloat=a:o[r]=(""+a).trim():o[r]=a+"px"}function ka(o,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(o=o.style,a!=null){for(var f in a)!a.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var y in r)f=r[y],r.hasOwnProperty(y)&&a[y]!==f&&Su(o,y,f)}else for(var v in r)r.hasOwnProperty(v)&&Su(o,v,r[v])}function Va(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function us(o){return jf.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Oi=null;function Mn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Fi=null,qi=null;function Ua(o){var r=ii(o);if(r&&(o=r.stateNode)){var a=o[At]||null;e:switch(o=r.stateNode,r.type){case"input":if(yn(o,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=o;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+It(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var f=a[r];if(f!==o&&f.form===o.form){var y=f[At]||null;if(!y)throw Error(i(90));yn(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<a.length;r++)f=a[r],f.form===o.form&&Pa(f)}break e;case"textarea":nt(o,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Li(o,!!a.multiple,r,!1)}}}var si=!1;function Cu(o,r,a){if(si)return o(r,a);si=!0;try{var f=o(r);return f}finally{if(si=!1,(Fi!==null||qi!==null)&&(gc(),Fi&&(r=Fi,o=qi,qi=Fi=null,Ua(r),o)))for(r=0;r<o.length;r++)Ua(o[r])}}function gr(o,r){var a=o.stateNode;if(a===null)return null;var f=a[At]||null;if(f===null)return null;a=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xn=!1;if(Yn)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){xn=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{xn=!1}var ai=null,vo=null,Bi=null;function La(){if(Bi)return Bi;var o,r=vo,a=r.length,f,y="value"in ai?ai.value:ai.textContent,v=y.length;for(o=0;o<a&&r[o]===y[o];o++);var A=a-o;for(f=1;f<=A&&r[a-f]===y[v-f];f++);return Bi=y.slice(o,1<f?1-f:void 0)}function li(o){var r=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&r===13&&(o=13)):o=r,o===10&&(o=13),32<=o||o===13?o:0}function ui(){return!0}function Oa(){return!1}function Lt(o){function r(a,f,y,v,A){this._reactName=a,this._targetInst=y,this.type=f,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(a=o[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ui:Oa,this.isPropagationStopped=Oa,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),r}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=Lt(Je),_r=_({},Je,{view:0,detail:0}),Au=Lt(_r),fs,ds,ci,vr=_({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ci&&(ci&&o.type==="mousemove"?(fs=o.screenX-ci.screenX,ds=o.screenY-ci.screenY):ds=fs=0,ci=o),fs)},movementY:function(o){return"movementY"in o?o.movementY:ds}}),bn=Lt(vr),Iu=_({},vr,{dataTransfer:0}),ed=Lt(Iu),Tr=_({},_r,{relatedTarget:0}),hs=Lt(Tr),Fa=_({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),ms=Lt(Fa),Ru=_({},Je,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ps=Lt(Ru),td=_({},Je,{data:0}),qa=Lt(td),Er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ba(o){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(o):(o=Mu[o])?!!r[o]:!1}function Sr(){return Ba}var xu=_({},_r,{key:function(o){if(o.key){var r=Er[o.key]||o.key;if(r!=="Unidentified")return r}return o.type==="keypress"?(o=li(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?wu[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(o){return o.type==="keypress"?li(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?li(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),gs=Lt(xu),bu=_({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ha=Lt(bu),Hi=_({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr}),Nu=Lt(Hi),Du=_({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pu=Lt(Du),ku=_({},vr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ys=Lt(ku),un=_({},Je,{newState:0,oldState:0}),Vu=Lt(un),Uu=[9,13,27,32],fi=Yn&&"CompositionEvent"in window,m=null;Yn&&"documentMode"in document&&(m=document.documentMode);var T=Yn&&"TextEvent"in window&&!m,C=Yn&&(!fi||m&&8<m&&11>=m),w=" ",G=!1;function Z(o,r){switch(o){case"keyup":return Uu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Be=!1;function Nt(o,r){switch(o){case"compositionend":return ce(r);case"keypress":return r.which!==32?null:(G=!0,w);case"textInput":return o=r.data,o===w&&G?null:o;default:return null}}function He(o,r){if(Be)return o==="compositionend"||!fi&&Z(o,r)?(o=La(),Bi=vo=ai=null,Be=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return C&&r.locale!=="ko"?null:r.data;default:return null}}var Ot={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dt(o){var r=o&&o.nodeName&&o.nodeName.toLowerCase();return r==="input"?!!Ot[o.type]:r==="textarea"}function Gi(o,r,a,f){Fi?qi?qi.push(f):qi=[f]:Fi=f,r=Sc(r,"onChange"),0<r.length&&(a=new cs("onChange","change",null,a,f),o.push({event:a,listeners:r}))}var Yt=null,di=null;function Ga(o){A_(o,0)}function Lu(o){var r=oi(o);if(Pa(r))return o}function Yp(o,r){if(o==="change")return r}var $p=!1;if(Yn){var nd;if(Yn){var id="oninput"in document;if(!id){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),id=typeof Kp.oninput=="function"}nd=id}else nd=!1;$p=nd&&(!document.documentMode||9<document.documentMode)}function Jp(){Yt&&(Yt.detachEvent("onpropertychange",Qp),di=Yt=null)}function Qp(o){if(o.propertyName==="value"&&Lu(di)){var r=[];Gi(r,di,o,Mn(o)),Cu(Ga,r)}}function uA(o,r,a){o==="focusin"?(Jp(),Yt=r,di=a,Yt.attachEvent("onpropertychange",Qp)):o==="focusout"&&Jp()}function cA(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Lu(di)}function fA(o,r){if(o==="click")return Lu(r)}function dA(o,r){if(o==="input"||o==="change")return Lu(r)}function hA(o,r){return o===r&&(o!==0||1/o===1/r)||o!==o&&r!==r}var _n=typeof Object.is=="function"?Object.is:hA;function za(o,r){if(_n(o,r))return!0;if(typeof o!="object"||o===null||typeof r!="object"||r===null)return!1;var a=Object.keys(o),f=Object.keys(r);if(a.length!==f.length)return!1;for(f=0;f<a.length;f++){var y=a[f];if(!Mi.call(r,y)||!_n(o[y],r[y]))return!1}return!0}function Xp(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Wp(o,r){var a=Xp(o);o=0;for(var f;a;){if(a.nodeType===3){if(f=o+a.textContent.length,o<=r&&f>=r)return{node:a,offset:r-o};o=f}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xp(a)}}function Zp(o,r){return o&&r?o===r?!0:o&&o.nodeType===3?!1:r&&r.nodeType===3?Zp(o,r.parentNode):"contains"in o?o.contains(r):o.compareDocumentPosition?!!(o.compareDocumentPosition(r)&16):!1:!1}function jp(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var r=dr(o.document);r instanceof o.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)o=r.contentWindow;else break;r=dr(o.document)}return r}function od(o){var r=o&&o.nodeName&&o.nodeName.toLowerCase();return r&&(r==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||r==="textarea"||o.contentEditable==="true")}var mA=Yn&&"documentMode"in document&&11>=document.documentMode,_s=null,rd=null,Ya=null,sd=!1;function eg(o,r,a){var f=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sd||_s==null||_s!==dr(f)||(f=_s,"selectionStart"in f&&od(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ya&&za(Ya,f)||(Ya=f,f=Sc(rd,"onSelect"),0<f.length&&(r=new cs("onSelect","select",null,r,a),o.push({event:r,listeners:f}),r.target=_s)))}function Cr(o,r){var a={};return a[o.toLowerCase()]=r.toLowerCase(),a["Webkit"+o]="webkit"+r,a["Moz"+o]="moz"+r,a}var vs={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionrun:Cr("Transition","TransitionRun"),transitionstart:Cr("Transition","TransitionStart"),transitioncancel:Cr("Transition","TransitionCancel"),transitionend:Cr("Transition","TransitionEnd")},ad={},tg={};Yn&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Ar(o){if(ad[o])return ad[o];if(!vs[o])return o;var r=vs[o],a;for(a in r)if(r.hasOwnProperty(a)&&a in tg)return ad[o]=r[a];return o}var ng=Ar("animationend"),ig=Ar("animationiteration"),og=Ar("animationstart"),pA=Ar("transitionrun"),gA=Ar("transitionstart"),yA=Ar("transitioncancel"),rg=Ar("transitionend"),sg=new Map,ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ld.push("scrollEnd");function $n(o,r){sg.set(o,r),zn(r,[o])}var ag=new WeakMap;function Nn(o,r){if(typeof o=="object"&&o!==null){var a=ag.get(o);return a!==void 0?a:(r={value:o,source:r,stack:as(r)},ag.set(o,r),r)}return{value:o,source:r,stack:as(r)}}var Dn=[],Ts=0,ud=0;function Ou(){for(var o=Ts,r=ud=Ts=0;r<o;){var a=Dn[r];Dn[r++]=null;var f=Dn[r];Dn[r++]=null;var y=Dn[r];Dn[r++]=null;var v=Dn[r];if(Dn[r++]=null,f!==null&&y!==null){var A=f.pending;A===null?y.next=y:(y.next=A.next,A.next=y),f.pending=y}v!==0&&lg(a,y,v)}}function Fu(o,r,a,f){Dn[Ts++]=o,Dn[Ts++]=r,Dn[Ts++]=a,Dn[Ts++]=f,ud|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function cd(o,r,a,f){return Fu(o,r,a,f),qu(o)}function Es(o,r){return Fu(o,null,null,r),qu(o)}function lg(o,r,a){o.lanes|=a;var f=o.alternate;f!==null&&(f.lanes|=a);for(var y=!1,v=o.return;v!==null;)v.childLanes|=a,f=v.alternate,f!==null&&(f.childLanes|=a),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(y=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,y&&r!==null&&(y=31-Zt(a),o=v.hiddenUpdates,f=o[y],f===null?o[y]=[r]:f.push(r),r.lane=a|536870912),v):null}function qu(o){if(50<gl)throw gl=0,gh=null,Error(i(185));for(var r=o.return;r!==null;)o=r,r=o.return;return o.tag===3?o.stateNode:null}var Ss={};function _A(o,r,a,f){this.tag=o,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(o,r,a,f){return new _A(o,r,a,f)}function fd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function zi(o,r){var a=o.alternate;return a===null?(a=vn(o.tag,r,o.key,o.mode),a.elementType=o.elementType,a.type=o.type,a.stateNode=o.stateNode,a.alternate=o,o.alternate=a):(a.pendingProps=r,a.type=o.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=o.flags&65011712,a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,r=o.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=o.sibling,a.index=o.index,a.ref=o.ref,a.refCleanup=o.refCleanup,a}function ug(o,r){o.flags&=65011714;var a=o.alternate;return a===null?(o.childLanes=0,o.lanes=r,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,r=a.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),o}function Bu(o,r,a,f,y,v){var A=0;if(f=o,typeof o=="function")fd(o)&&(A=1);else if(typeof o=="string")A=TI(o,a,_e.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case M:return o=vn(31,a,r,y),o.elementType=M,o.lanes=v,o;case U:return Ir(a.children,y,v,r);case q:A=8,y|=24;break;case H:return o=vn(12,a,r,y|2),o.elementType=H,o.lanes=v,o;case W:return o=vn(13,a,r,y),o.elementType=W,o.lanes=v,o;case J:return o=vn(19,a,r,y),o.elementType=J,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ie:case X:A=10;break e;case K:A=9;break e;case ae:A=11;break e;case b:A=14;break e;case R:A=16,f=null;break e}A=29,a=Error(i(130,o===null?"null":typeof o,"")),f=null}return r=vn(A,a,r,y),r.elementType=o,r.type=f,r.lanes=v,r}function Ir(o,r,a,f){return o=vn(7,o,f,r),o.lanes=a,o}function dd(o,r,a){return o=vn(6,o,null,r),o.lanes=a,o}function hd(o,r,a){return r=vn(4,o.children!==null?o.children:[],o.key,r),r.lanes=a,r.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},r}var Cs=[],As=0,Hu=null,Gu=0,Pn=[],kn=0,Rr=null,Yi=1,$i="";function wr(o,r){Cs[As++]=Gu,Cs[As++]=Hu,Hu=o,Gu=r}function cg(o,r,a){Pn[kn++]=Yi,Pn[kn++]=$i,Pn[kn++]=Rr,Rr=o;var f=Yi;o=$i;var y=32-Zt(f)-1;f&=~(1<<y),a+=1;var v=32-Zt(r)+y;if(30<v){var A=y-y%5;v=(f&(1<<A)-1).toString(32),f>>=A,y-=A,Yi=1<<32-Zt(r)+y|a<<y|f,$i=v+o}else Yi=1<<v|a<<y|f,$i=o}function md(o){o.return!==null&&(wr(o,1),cg(o,1,0))}function pd(o){for(;o===Hu;)Hu=Cs[--As],Cs[As]=null,Gu=Cs[--As],Cs[As]=null;for(;o===Rr;)Rr=Pn[--kn],Pn[kn]=null,$i=Pn[--kn],Pn[kn]=null,Yi=Pn[--kn],Pn[kn]=null}var cn=null,yt=null,$e=!1,Mr=null,hi=!1,gd=Error(i(519));function xr(o){var r=Error(i(418,""));throw Ja(Nn(r,o)),gd}function fg(o){var r=o.stateNode,a=o.type,f=o.memoizedProps;switch(r[bt]=o,r[At]=f,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<_l.length;a++)Ue(_l[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),hr(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ls(r);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),mr(r,f.value,f.defaultValue,f.children),ls(r)}a=f.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||f.suppressHydrationWarning===!0||M_(r.textContent,a)?(f.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),f.onScroll!=null&&Ue("scroll",r),f.onScrollEnd!=null&&Ue("scrollend",r),f.onClick!=null&&(r.onclick=Cc),r=!0):r=!1,r||xr(o)}function dg(o){for(cn=o.return;cn;)switch(cn.tag){case 5:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:cn=cn.return}}function $a(o){if(o!==cn)return!1;if(!$e)return dg(o),$e=!0,!1;var r=o.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=o.type,a=!(a!=="form"&&a!=="button")||Dh(o.type,o.memoizedProps)),a=!a),a&&yt&&xr(o),dg(o),r===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,r=0;o;){if(o.nodeType===8)if(a=o.data,a==="/$"){if(r===0){yt=Jn(o.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;o=o.nextSibling}yt=null}}else r===27?(r=yt,Vo(o.type)?(o=Uh,Uh=null,yt=o):yt=r):yt=cn?Jn(o.stateNode.nextSibling):null;return!0}function Ka(){yt=cn=null,$e=!1}function hg(){var o=Mr;return o!==null&&(mn===null?mn=o:mn.push.apply(mn,o),Mr=null),o}function Ja(o){Mr===null?Mr=[o]:Mr.push(o)}var yd=re(null),br=null,Ki=null;function To(o,r,a){le(yd,r._currentValue),r._currentValue=a}function Ji(o){o._currentValue=yd.current,fe(yd)}function _d(o,r,a){for(;o!==null;){var f=o.alternate;if((o.childLanes&r)!==r?(o.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),o===a)break;o=o.return}}function vd(o,r,a,f){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var P=0;P<r.length;P++)if(I.context===r[P]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),_d(v.return,a,o),f||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),_d(A,a,o),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===o){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Qa(o,r,a,f){o=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var I=y.type;_n(y.pendingProps.value,A.value)||(o!==null?o.push(I):o=[I])}}else if(y===Ct.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Al):o=[Al])}y=y.return}o!==null&&vd(r,o,a,f),r.flags|=262144}function zu(o){for(o=o.firstContext;o!==null;){if(!_n(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Nr(o){br=o,Ki=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function jt(o){return mg(br,o)}function Yu(o,r){return br===null&&Nr(o),mg(o,r)}function mg(o,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Ki===null){if(o===null)throw Error(i(308));Ki=r,o.dependencies={lanes:0,firstContext:r},o.flags|=524288}else Ki=Ki.next=r;return a}var vA=typeof AbortController<"u"?AbortController:function(){var o=[],r=this.signal={aborted:!1,addEventListener:function(a,f){o.push(f)}};this.abort=function(){r.aborted=!0,o.forEach(function(a){return a()})}},TA=n.unstable_scheduleCallback,EA=n.unstable_NormalPriority,Pt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Td(){return{controller:new vA,data:new Map,refCount:0}}function Xa(o){o.refCount--,o.refCount===0&&TA(EA,function(){o.controller.abort()})}var Wa=null,Ed=0,Is=0,Rs=null;function SA(o,r){if(Wa===null){var a=Wa=[];Ed=0,Is=Ch(),Rs={status:"pending",value:void 0,then:function(f){a.push(f)}}}return Ed++,r.then(pg,pg),r}function pg(){if(--Ed===0&&Wa!==null){Rs!==null&&(Rs.status="fulfilled");var o=Wa;Wa=null,Is=0,Rs=null;for(var r=0;r<o.length;r++)(0,o[r])()}}function CA(o,r){var a=[],f={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return o.then(function(){f.status="fulfilled",f.value=r;for(var y=0;y<a.length;y++)(0,a[y])(r)},function(y){for(f.status="rejected",f.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),f}var gg=j.S;j.S=function(o,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&SA(o,r),gg!==null&&gg(o,r)};var Dr=re(null);function Sd(){var o=Dr.current;return o!==null?o:lt.pooledCache}function $u(o,r){r===null?le(Dr,Dr.current):le(Dr,r.pool)}function yg(){var o=Sd();return o===null?null:{parent:Pt._currentValue,pool:o}}var Za=Error(i(460)),_g=Error(i(474)),Ku=Error(i(542)),Cd={then:function(){}};function vg(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ju(){}function Tg(o,r,a){switch(a=o[a],a===void 0?o.push(r):a!==r&&(r.then(Ju,Ju),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw o=r.reason,Sg(o),o;default:if(typeof r.status=="string")r.then(Ju,Ju);else{if(o=lt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=r,o.status="pending",o.then(function(f){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=f}},function(f){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw o=r.reason,Sg(o),o}throw ja=r,Za}}var ja=null;function Eg(){if(ja===null)throw Error(i(459));var o=ja;return ja=null,o}function Sg(o){if(o===Za||o===Ku)throw Error(i(483))}var Eo=!1;function Ad(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(o,r){o=o.updateQueue,r.updateQueue===o&&(r.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function So(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Co(o,r,a){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(Ze&2)!==0){var y=f.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),f.pending=r,r=qu(o),lg(o,null,a),r}return Fu(o,f,r,a),qu(o)}function el(o,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var f=r.lanes;f&=o.pendingLanes,a|=f,r.lanes=a,Ma(o,a)}}function Rd(o,r){var a=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,a===f)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=r:v=v.next=r}else y=v=r;a={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},o.updateQueue=a;return}o=a.lastBaseUpdate,o===null?a.firstBaseUpdate=r:o.next=r,a.lastBaseUpdate=r}var wd=!1;function tl(){if(wd){var o=Rs;if(o!==null)throw o}}function nl(o,r,a,f){wd=!1;var y=o.updateQueue;Eo=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var P=I,Y=P.next;P.next=null,A===null?v=Y:A.next=Y,A=P;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,I=ee.lastBaseUpdate,I!==A&&(I===null?ee.firstBaseUpdate=Y:I.next=Y,ee.lastBaseUpdate=P))}if(v!==null){var ne=y.baseState;A=0,ee=Y=P=null,I=v;do{var $=I.lane&-536870913,Q=$!==I.lane;if(Q?(Ge&$)===$:(f&$)===$){$!==0&&$===Is&&(wd=!0),ee!==null&&(ee=ee.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ie=o,Ee=I;$=r;var rt=a;switch(Ee.tag){case 1:if(Ie=Ee.payload,typeof Ie=="function"){ne=Ie.call(rt,ne,$);break e}ne=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ee.payload,$=typeof Ie=="function"?Ie.call(rt,ne,$):Ie,$==null)break e;ne=_({},ne,$);break e;case 2:Eo=!0}}$=I.callback,$!==null&&(o.flags|=64,Q&&(o.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[$]:Q.push($))}else Q={lane:$,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ee===null?(Y=ee=Q,P=ne):ee=ee.next=Q,A|=$;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Q=I,I=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);ee===null&&(P=ne),y.baseState=P,y.firstBaseUpdate=Y,y.lastBaseUpdate=ee,v===null&&(y.shared.lanes=0),No|=A,o.lanes=A,o.memoizedState=ne}}function Cg(o,r){if(typeof o!="function")throw Error(i(191,o));o.call(r)}function Ag(o,r){var a=o.callbacks;if(a!==null)for(o.callbacks=null,o=0;o<a.length;o++)Cg(a[o],r)}var ws=re(null),Qu=re(0);function Ig(o,r){o=to,le(Qu,o),le(ws,r),to=o|r.baseLanes}function Md(){le(Qu,to),le(ws,ws.current)}function xd(){to=Qu.current,fe(ws),fe(Qu)}var Ao=0,De=null,it=null,Rt=null,Xu=!1,Ms=!1,Pr=!1,Wu=0,il=0,xs=null,AA=0;function Tt(){throw Error(i(321))}function bd(o,r){if(r===null)return!1;for(var a=0;a<r.length&&a<o.length;a++)if(!_n(o[a],r[a]))return!1;return!0}function Nd(o,r,a,f,y,v){return Ao=v,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=o===null||o.memoizedState===null?ly:uy,Pr=!1,v=a(f,y),Pr=!1,Ms&&(v=wg(r,a,f,y)),Rg(o),v}function Rg(o){j.H=ic;var r=it!==null&&it.next!==null;if(Ao=0,Rt=it=De=null,Xu=!1,il=0,xs=null,r)throw Error(i(300));o===null||Ft||(o=o.dependencies,o!==null&&zu(o)&&(Ft=!0))}function wg(o,r,a,f){De=o;var y=0;do{if(Ms&&(xs=null),il=0,Ms=!1,25<=y)throw Error(i(301));if(y+=1,Rt=it=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}j.H=NA,v=r(a,f)}while(Ms);return v}function IA(){var o=j.H,r=o.useState()[0];return r=typeof r.then=="function"?ol(r):r,o=o.useState()[0],(it!==null?it.memoizedState:null)!==o&&(De.flags|=1024),r}function Dd(){var o=Wu!==0;return Wu=0,o}function Pd(o,r,a){r.updateQueue=o.updateQueue,r.flags&=-2053,o.lanes&=~a}function kd(o){if(Xu){for(o=o.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Xu=!1}Ao=0,Rt=it=De=null,Ms=!1,il=Wu=0,xs=null}function dn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?De.memoizedState=Rt=o:Rt=Rt.next=o,Rt}function wt(){if(it===null){var o=De.alternate;o=o!==null?o.memoizedState:null}else o=it.next;var r=Rt===null?De.memoizedState:Rt.next;if(r!==null)Rt=r,it=o;else{if(o===null)throw De.alternate===null?Error(i(467)):Error(i(310));it=o,o={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Rt===null?De.memoizedState=Rt=o:Rt=Rt.next=o}return Rt}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(o){var r=il;return il+=1,xs===null&&(xs=[]),o=Tg(xs,o,r),r=De,(Rt===null?r.memoizedState:Rt.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?ly:uy),o}function Zu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ol(o);if(o.$$typeof===X)return jt(o)}throw Error(i(438,String(o)))}function Ud(o){var r=null,a=De.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var f=De.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Vd(),De.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(o),f=0;f<o;f++)a[f]=N;return r.index++,a}function Qi(o,r){return typeof r=="function"?r(o):r}function ju(o){var r=wt();return Ld(r,it,o)}function Ld(o,r,a){var f=o.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=a;var y=o.baseQueue,v=f.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}r.baseQueue=y=v,f.pending=null}if(v=o.baseState,y===null)o.memoizedState=v;else{r=y.next;var I=A=null,P=null,Y=r,ee=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Ge&ne)===ne:(Ao&ne)===ne){var $=Y.revertLane;if($===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===Is&&(ee=!0);else if((Ao&$)===$){Y=Y.next,$===Is&&(ee=!0);continue}else ne={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(I=P=ne,A=v):P=P.next=ne,De.lanes|=$,No|=$;ne=Y.action,Pr&&a(v,ne),v=Y.hasEagerState?Y.eagerState:a(v,ne)}else $={lane:ne,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},P===null?(I=P=$,A=v):P=P.next=$,De.lanes|=ne,No|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(P===null?A=v:P.next=I,!_n(v,o.memoizedState)&&(Ft=!0,ee&&(a=Rs,a!==null)))throw a;o.memoizedState=v,o.baseState=A,o.baseQueue=P,f.lastRenderedState=v}return y===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function Od(o){var r=wt(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=o;var f=a.dispatch,y=a.pending,v=r.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=o(v,A.action),A=A.next;while(A!==y);_n(v,r.memoizedState)||(Ft=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),a.lastRenderedState=v}return[v,f]}function Mg(o,r,a){var f=De,y=wt(),v=$e;if(v){if(a===void 0)throw Error(i(407));a=a()}else a=r();var A=!_n((it||y).memoizedState,a);A&&(y.memoizedState=a,Ft=!0),y=y.queue;var I=Ng.bind(null,f,y,o);if(rl(2048,8,I,[o]),y.getSnapshot!==r||A||Rt!==null&&Rt.memoizedState.tag&1){if(f.flags|=2048,bs(9,ec(),bg.bind(null,f,y,a,r),null),lt===null)throw Error(i(349));v||(Ao&124)!==0||xg(f,r,a)}return a}function xg(o,r,a){o.flags|=16384,o={getSnapshot:r,value:a},r=De.updateQueue,r===null?(r=Vd(),De.updateQueue=r,r.stores=[o]):(a=r.stores,a===null?r.stores=[o]:a.push(o))}function bg(o,r,a,f){r.value=a,r.getSnapshot=f,Dg(r)&&Pg(o)}function Ng(o,r,a){return a(function(){Dg(r)&&Pg(o)})}function Dg(o){var r=o.getSnapshot;o=o.value;try{var a=r();return!_n(o,a)}catch{return!0}}function Pg(o){var r=Es(o,2);r!==null&&An(r,o,2)}function Fd(o){var r=dn();if(typeof o=="function"){var a=o;if(o=a(),Pr){gn(!0);try{a()}finally{gn(!1)}}}return r.memoizedState=r.baseState=o,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:o},r}function kg(o,r,a,f){return o.baseState=a,Ld(o,it,typeof f=="function"?f:Qi)}function RA(o,r,a,f,y){if(nc(o))throw Error(i(485));if(o=r.action,o!==null){var v={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};j.T!==null?a(!0):v.isTransition=!1,f(v),a=r.pending,a===null?(v.next=r.pending=v,Vg(r,v)):(v.next=a.next,r.pending=a.next=v)}}function Vg(o,r){var a=r.action,f=r.payload,y=o.state;if(r.isTransition){var v=j.T,A={};j.T=A;try{var I=a(y,f),P=j.S;P!==null&&P(A,I),Ug(o,r,I)}catch(Y){qd(o,r,Y)}finally{j.T=v}}else try{v=a(y,f),Ug(o,r,v)}catch(Y){qd(o,r,Y)}}function Ug(o,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(f){Lg(o,r,f)},function(f){return qd(o,r,f)}):Lg(o,r,a)}function Lg(o,r,a){r.status="fulfilled",r.value=a,Og(r),o.state=a,r=o.pending,r!==null&&(a=r.next,a===r?o.pending=null:(a=a.next,r.next=a,Vg(o,a)))}function qd(o,r,a){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=a,Og(r),r=r.next;while(r!==f)}o.action=null}function Og(o){o=o.listeners;for(var r=0;r<o.length;r++)(0,o[r])()}function Fg(o,r){return r}function qg(o,r){if($e){var a=lt.formState;if(a!==null){e:{var f=De;if($e){if(yt){t:{for(var y=yt,v=hi;y.nodeType!==8;){if(!v){y=null;break t}if(y=Jn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){yt=Jn(y.nextSibling),f=y.data==="F!";break e}}xr(f)}f=!1}f&&(r=a[0])}}return a=dn(),a.memoizedState=a.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fg,lastRenderedState:r},a.queue=f,a=ry.bind(null,De,f),f.dispatch=a,f=Fd(!1),v=Yd.bind(null,De,!1,f.queue),f=dn(),y={state:r,dispatch:null,action:o,pending:null},f.queue=y,a=RA.bind(null,De,y,v,a),y.dispatch=a,f.memoizedState=o,[r,a,!1]}function Bg(o){var r=wt();return Hg(r,it,o)}function Hg(o,r,a){if(r=Ld(o,r,Fg)[0],o=ju(Qi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=ol(r)}catch(A){throw A===Za?Ku:A}else f=r;r=wt();var y=r.queue,v=y.dispatch;return a!==r.memoizedState&&(De.flags|=2048,bs(9,ec(),wA.bind(null,y,a),null)),[f,v,o]}function wA(o,r){o.action=r}function Gg(o){var r=wt(),a=it;if(a!==null)return Hg(r,a,o);wt(),r=r.memoizedState,a=wt();var f=a.queue.dispatch;return a.memoizedState=o,[r,f,!1]}function bs(o,r,a,f){return o={tag:o,create:a,deps:f,inst:r,next:null},r=De.updateQueue,r===null&&(r=Vd(),De.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=o.next=o:(f=a.next,a.next=o,o.next=f,r.lastEffect=o),o}function ec(){return{destroy:void 0,resource:void 0}}function zg(){return wt().memoizedState}function tc(o,r,a,f){var y=dn();f=f===void 0?null:f,De.flags|=o,y.memoizedState=bs(1|r,ec(),a,f)}function rl(o,r,a,f){var y=wt();f=f===void 0?null:f;var v=y.memoizedState.inst;it!==null&&f!==null&&bd(f,it.memoizedState.deps)?y.memoizedState=bs(r,v,a,f):(De.flags|=o,y.memoizedState=bs(1|r,v,a,f))}function Yg(o,r){tc(8390656,8,o,r)}function $g(o,r){rl(2048,8,o,r)}function Kg(o,r){return rl(4,2,o,r)}function Jg(o,r){return rl(4,4,o,r)}function Qg(o,r){if(typeof r=="function"){o=o();var a=r(o);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return o=o(),r.current=o,function(){r.current=null}}function Xg(o,r,a){a=a!=null?a.concat([o]):null,rl(4,4,Qg.bind(null,r,o),a)}function Bd(){}function Wg(o,r){var a=wt();r=r===void 0?null:r;var f=a.memoizedState;return r!==null&&bd(r,f[1])?f[0]:(a.memoizedState=[o,r],o)}function Zg(o,r){var a=wt();r=r===void 0?null:r;var f=a.memoizedState;if(r!==null&&bd(r,f[1]))return f[0];if(f=o(),Pr){gn(!0);try{o()}finally{gn(!1)}}return a.memoizedState=[f,r],f}function Hd(o,r,a){return a===void 0||(Ao&1073741824)!==0?o.memoizedState=r:(o.memoizedState=a,o=t_(),De.lanes|=o,No|=o,a)}function jg(o,r,a,f){return _n(a,r)?a:ws.current!==null?(o=Hd(o,a,f),_n(o,r)||(Ft=!0),o):(Ao&42)===0?(Ft=!0,o.memoizedState=a):(o=t_(),De.lanes|=o,No|=o,r)}function ey(o,r,a,f,y){var v=ue.p;ue.p=v!==0&&8>v?v:8;var A=j.T,I={};j.T=I,Yd(o,!1,r,a);try{var P=y(),Y=j.S;if(Y!==null&&Y(I,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ee=CA(P,f);sl(o,r,ee,Cn(o))}else sl(o,r,f,Cn(o))}catch(ne){sl(o,r,{then:function(){},status:"rejected",reason:ne},Cn())}finally{ue.p=v,j.T=A}}function MA(){}function Gd(o,r,a,f){if(o.tag!==5)throw Error(i(476));var y=ty(o).queue;ey(o,y,r,he,a===null?MA:function(){return ny(o),a(f)})}function ty(o){var r=o.memoizedState;if(r!==null)return r;r={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:he},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:a},next:null},o.memoizedState=r,o=o.alternate,o!==null&&(o.memoizedState=r),r}function ny(o){var r=ty(o).next.queue;sl(o,r,{},Cn())}function zd(){return jt(Al)}function iy(){return wt().memoizedState}function oy(){return wt().memoizedState}function xA(o){for(var r=o.return;r!==null;){switch(r.tag){case 24:case 3:var a=Cn();o=So(a);var f=Co(r,o,a);f!==null&&(An(f,r,a),el(f,r,a)),r={cache:Td()},o.payload=r;return}r=r.return}}function bA(o,r,a){var f=Cn();a={lane:f,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},nc(o)?sy(r,a):(a=cd(o,r,a,f),a!==null&&(An(a,o,f),ay(a,r,f)))}function ry(o,r,a){var f=Cn();sl(o,r,a,f)}function sl(o,r,a,f){var y={lane:f,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(nc(o))sy(r,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,_n(I,A))return Fu(o,r,y,0),lt===null&&Ou(),!1}catch{}finally{}if(a=cd(o,r,y,f),a!==null)return An(a,o,f),ay(a,r,f),!0}return!1}function Yd(o,r,a,f){if(f={lane:2,revertLane:Ch(),action:f,hasEagerState:!1,eagerState:null,next:null},nc(o)){if(r)throw Error(i(479))}else r=cd(o,a,f,2),r!==null&&An(r,o,2)}function nc(o){var r=o.alternate;return o===De||r!==null&&r===De}function sy(o,r){Ms=Xu=!0;var a=o.pending;a===null?r.next=r:(r.next=a.next,a.next=r),o.pending=r}function ay(o,r,a){if((a&4194048)!==0){var f=r.lanes;f&=o.pendingLanes,a|=f,r.lanes=a,Ma(o,a)}}var ic={readContext:jt,use:Zu,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},ly={readContext:jt,use:Zu,useCallback:function(o,r){return dn().memoizedState=[o,r===void 0?null:r],o},useContext:jt,useEffect:Yg,useImperativeHandle:function(o,r,a){a=a!=null?a.concat([o]):null,tc(4194308,4,Qg.bind(null,r,o),a)},useLayoutEffect:function(o,r){return tc(4194308,4,o,r)},useInsertionEffect:function(o,r){tc(4,2,o,r)},useMemo:function(o,r){var a=dn();r=r===void 0?null:r;var f=o();if(Pr){gn(!0);try{o()}finally{gn(!1)}}return a.memoizedState=[f,r],f},useReducer:function(o,r,a){var f=dn();if(a!==void 0){var y=a(r);if(Pr){gn(!0);try{a(r)}finally{gn(!1)}}}else y=r;return f.memoizedState=f.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},f.queue=o,o=o.dispatch=bA.bind(null,De,o),[f.memoizedState,o]},useRef:function(o){var r=dn();return o={current:o},r.memoizedState=o},useState:function(o){o=Fd(o);var r=o.queue,a=ry.bind(null,De,r);return r.dispatch=a,[o.memoizedState,a]},useDebugValue:Bd,useDeferredValue:function(o,r){var a=dn();return Hd(a,o,r)},useTransition:function(){var o=Fd(!1);return o=ey.bind(null,De,o.queue,!0,!1),dn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,r,a){var f=De,y=dn();if($e){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),lt===null)throw Error(i(349));(Ge&124)!==0||xg(f,r,a)}y.memoizedState=a;var v={value:a,getSnapshot:r};return y.queue=v,Yg(Ng.bind(null,f,v,o),[o]),f.flags|=2048,bs(9,ec(),bg.bind(null,f,v,a,r),null),a},useId:function(){var o=dn(),r=lt.identifierPrefix;if($e){var a=$i,f=Yi;a=(f&~(1<<32-Zt(f)-1)).toString(32)+a,r=""+r+"R"+a,a=Wu++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=AA++,r=""+r+"r"+a.toString(32)+"";return o.memoizedState=r},useHostTransitionStatus:zd,useFormState:qg,useActionState:qg,useOptimistic:function(o){var r=dn();r.memoizedState=r.baseState=o;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Yd.bind(null,De,!0,a),a.dispatch=r,[o,r]},useMemoCache:Ud,useCacheRefresh:function(){return dn().memoizedState=xA.bind(null,De)}},uy={readContext:jt,use:Zu,useCallback:Wg,useContext:jt,useEffect:$g,useImperativeHandle:Xg,useInsertionEffect:Kg,useLayoutEffect:Jg,useMemo:Zg,useReducer:ju,useRef:zg,useState:function(){return ju(Qi)},useDebugValue:Bd,useDeferredValue:function(o,r){var a=wt();return jg(a,it.memoizedState,o,r)},useTransition:function(){var o=ju(Qi)[0],r=wt().memoizedState;return[typeof o=="boolean"?o:ol(o),r]},useSyncExternalStore:Mg,useId:iy,useHostTransitionStatus:zd,useFormState:Bg,useActionState:Bg,useOptimistic:function(o,r){var a=wt();return kg(a,it,o,r)},useMemoCache:Ud,useCacheRefresh:oy},NA={readContext:jt,use:Zu,useCallback:Wg,useContext:jt,useEffect:$g,useImperativeHandle:Xg,useInsertionEffect:Kg,useLayoutEffect:Jg,useMemo:Zg,useReducer:Od,useRef:zg,useState:function(){return Od(Qi)},useDebugValue:Bd,useDeferredValue:function(o,r){var a=wt();return it===null?Hd(a,o,r):jg(a,it.memoizedState,o,r)},useTransition:function(){var o=Od(Qi)[0],r=wt().memoizedState;return[typeof o=="boolean"?o:ol(o),r]},useSyncExternalStore:Mg,useId:iy,useHostTransitionStatus:zd,useFormState:Gg,useActionState:Gg,useOptimistic:function(o,r){var a=wt();return it!==null?kg(a,it,o,r):(a.baseState=o,[o,a.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:oy},Ns=null,al=0;function oc(o){var r=al;return al+=1,Ns===null&&(Ns=[]),Tg(Ns,o,r)}function ll(o,r){r=r.props.ref,o.ref=r!==void 0?r:null}function rc(o,r){throw r.$$typeof===E?Error(i(525)):(o=Object.prototype.toString.call(r),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":o)))}function cy(o){var r=o._init;return r(o._payload)}function fy(o){function r(B,F){if(o){var z=B.deletions;z===null?(B.deletions=[F],B.flags|=16):z.push(F)}}function a(B,F){if(!o)return null;for(;F!==null;)r(B,F),F=F.sibling;return null}function f(B){for(var F=new Map;B!==null;)B.key!==null?F.set(B.key,B):F.set(B.index,B),B=B.sibling;return F}function y(B,F){return B=zi(B,F),B.index=0,B.sibling=null,B}function v(B,F,z){return B.index=z,o?(z=B.alternate,z!==null?(z=z.index,z<F?(B.flags|=67108866,F):z):(B.flags|=67108866,F)):(B.flags|=1048576,F)}function A(B){return o&&B.alternate===null&&(B.flags|=67108866),B}function I(B,F,z,te){return F===null||F.tag!==6?(F=dd(z,B.mode,te),F.return=B,F):(F=y(F,z),F.return=B,F)}function P(B,F,z,te){var me=z.type;return me===U?ee(B,F,z.props.children,te,z.key):F!==null&&(F.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&cy(me)===F.type)?(F=y(F,z.props),ll(F,z),F.return=B,F):(F=Bu(z.type,z.key,z.props,null,B.mode,te),ll(F,z),F.return=B,F)}function Y(B,F,z,te){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=hd(z,B.mode,te),F.return=B,F):(F=y(F,z.children||[]),F.return=B,F)}function ee(B,F,z,te,me){return F===null||F.tag!==7?(F=Ir(z,B.mode,te,me),F.return=B,F):(F=y(F,z),F.return=B,F)}function ne(B,F,z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=dd(""+F,B.mode,z),F.return=B,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case S:return z=Bu(F.type,F.key,F.props,null,B.mode,z),ll(z,F),z.return=B,z;case x:return F=hd(F,B.mode,z),F.return=B,F;case R:var te=F._init;return F=te(F._payload),ne(B,F,z)}if(ke(F)||O(F))return F=Ir(F,B.mode,z,null),F.return=B,F;if(typeof F.then=="function")return ne(B,oc(F),z);if(F.$$typeof===X)return ne(B,Yu(B,F),z);rc(B,F)}return null}function $(B,F,z,te){var me=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return me!==null?null:I(B,F,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===me?P(B,F,z,te):null;case x:return z.key===me?Y(B,F,z,te):null;case R:return me=z._init,z=me(z._payload),$(B,F,z,te)}if(ke(z)||O(z))return me!==null?null:ee(B,F,z,te,null);if(typeof z.then=="function")return $(B,F,oc(z),te);if(z.$$typeof===X)return $(B,F,Yu(B,z),te);rc(B,z)}return null}function Q(B,F,z,te,me){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(z)||null,I(F,B,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return B=B.get(te.key===null?z:te.key)||null,P(F,B,te,me);case x:return B=B.get(te.key===null?z:te.key)||null,Y(F,B,te,me);case R:var Pe=te._init;return te=Pe(te._payload),Q(B,F,z,te,me)}if(ke(te)||O(te))return B=B.get(z)||null,ee(F,B,te,me,null);if(typeof te.then=="function")return Q(B,F,z,oc(te),me);if(te.$$typeof===X)return Q(B,F,z,Yu(F,te),me);rc(F,te)}return null}function Ie(B,F,z,te){for(var me=null,Pe=null,ge=F,Se=F=0,Bt=null;ge!==null&&Se<z.length;Se++){ge.index>Se?(Bt=ge,ge=null):Bt=ge.sibling;var Ye=$(B,ge,z[Se],te);if(Ye===null){ge===null&&(ge=Bt);break}o&&ge&&Ye.alternate===null&&r(B,ge),F=v(Ye,F,Se),Pe===null?me=Ye:Pe.sibling=Ye,Pe=Ye,ge=Bt}if(Se===z.length)return a(B,ge),$e&&wr(B,Se),me;if(ge===null){for(;Se<z.length;Se++)ge=ne(B,z[Se],te),ge!==null&&(F=v(ge,F,Se),Pe===null?me=ge:Pe.sibling=ge,Pe=ge);return $e&&wr(B,Se),me}for(ge=f(ge);Se<z.length;Se++)Bt=Q(ge,B,Se,z[Se],te),Bt!==null&&(o&&Bt.alternate!==null&&ge.delete(Bt.key===null?Se:Bt.key),F=v(Bt,F,Se),Pe===null?me=Bt:Pe.sibling=Bt,Pe=Bt);return o&&ge.forEach(function(qo){return r(B,qo)}),$e&&wr(B,Se),me}function Ee(B,F,z,te){if(z==null)throw Error(i(151));for(var me=null,Pe=null,ge=F,Se=F=0,Bt=null,Ye=z.next();ge!==null&&!Ye.done;Se++,Ye=z.next()){ge.index>Se?(Bt=ge,ge=null):Bt=ge.sibling;var qo=$(B,ge,Ye.value,te);if(qo===null){ge===null&&(ge=Bt);break}o&&ge&&qo.alternate===null&&r(B,ge),F=v(qo,F,Se),Pe===null?me=qo:Pe.sibling=qo,Pe=qo,ge=Bt}if(Ye.done)return a(B,ge),$e&&wr(B,Se),me;if(ge===null){for(;!Ye.done;Se++,Ye=z.next())Ye=ne(B,Ye.value,te),Ye!==null&&(F=v(Ye,F,Se),Pe===null?me=Ye:Pe.sibling=Ye,Pe=Ye);return $e&&wr(B,Se),me}for(ge=f(ge);!Ye.done;Se++,Ye=z.next())Ye=Q(ge,B,Se,Ye.value,te),Ye!==null&&(o&&Ye.alternate!==null&&ge.delete(Ye.key===null?Se:Ye.key),F=v(Ye,F,Se),Pe===null?me=Ye:Pe.sibling=Ye,Pe=Ye);return o&&ge.forEach(function(DI){return r(B,DI)}),$e&&wr(B,Se),me}function rt(B,F,z,te){if(typeof z=="object"&&z!==null&&z.type===U&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var me=z.key;F!==null;){if(F.key===me){if(me=z.type,me===U){if(F.tag===7){a(B,F.sibling),te=y(F,z.props.children),te.return=B,B=te;break e}}else if(F.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&cy(me)===F.type){a(B,F.sibling),te=y(F,z.props),ll(te,z),te.return=B,B=te;break e}a(B,F);break}else r(B,F);F=F.sibling}z.type===U?(te=Ir(z.props.children,B.mode,te,z.key),te.return=B,B=te):(te=Bu(z.type,z.key,z.props,null,B.mode,te),ll(te,z),te.return=B,B=te)}return A(B);case x:e:{for(me=z.key;F!==null;){if(F.key===me)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){a(B,F.sibling),te=y(F,z.children||[]),te.return=B,B=te;break e}else{a(B,F);break}else r(B,F);F=F.sibling}te=hd(z,B.mode,te),te.return=B,B=te}return A(B);case R:return me=z._init,z=me(z._payload),rt(B,F,z,te)}if(ke(z))return Ie(B,F,z,te);if(O(z)){if(me=O(z),typeof me!="function")throw Error(i(150));return z=me.call(z),Ee(B,F,z,te)}if(typeof z.then=="function")return rt(B,F,oc(z),te);if(z.$$typeof===X)return rt(B,F,Yu(B,z),te);rc(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,F!==null&&F.tag===6?(a(B,F.sibling),te=y(F,z),te.return=B,B=te):(a(B,F),te=dd(z,B.mode,te),te.return=B,B=te),A(B)):a(B,F)}return function(B,F,z,te){try{al=0;var me=rt(B,F,z,te);return Ns=null,me}catch(ge){if(ge===Za||ge===Ku)throw ge;var Pe=vn(29,ge,null,B.mode);return Pe.lanes=te,Pe.return=B,Pe}finally{}}}var Ds=fy(!0),dy=fy(!1),Vn=re(null),mi=null;function Io(o){var r=o.alternate;le(kt,kt.current&1),le(Vn,o),mi===null&&(r===null||ws.current!==null||r.memoizedState!==null)&&(mi=o)}function hy(o){if(o.tag===22){if(le(kt,kt.current),le(Vn,o),mi===null){var r=o.alternate;r!==null&&r.memoizedState!==null&&(mi=o)}}else Ro()}function Ro(){le(kt,kt.current),le(Vn,Vn.current)}function Xi(o){fe(Vn),mi===o&&(mi=null),fe(kt)}var kt=re(0);function sc(o){for(var r=o;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Vh(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break;for(;r.sibling===null;){if(r.return===null||r.return===o)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $d(o,r,a,f){r=o.memoizedState,a=a(f,r),a=a==null?r:_({},r,a),o.memoizedState=a,o.lanes===0&&(o.updateQueue.baseState=a)}var Kd={enqueueSetState:function(o,r,a){o=o._reactInternals;var f=Cn(),y=So(f);y.payload=r,a!=null&&(y.callback=a),r=Co(o,y,f),r!==null&&(An(r,o,f),el(r,o,f))},enqueueReplaceState:function(o,r,a){o=o._reactInternals;var f=Cn(),y=So(f);y.tag=1,y.payload=r,a!=null&&(y.callback=a),r=Co(o,y,f),r!==null&&(An(r,o,f),el(r,o,f))},enqueueForceUpdate:function(o,r){o=o._reactInternals;var a=Cn(),f=So(a);f.tag=2,r!=null&&(f.callback=r),r=Co(o,f,a),r!==null&&(An(r,o,a),el(r,o,a))}};function my(o,r,a,f,y,v,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,v,A):r.prototype&&r.prototype.isPureReactComponent?!za(a,f)||!za(y,v):!0}function py(o,r,a,f){o=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,f),r.state!==o&&Kd.enqueueReplaceState(r,r.state,null)}function kr(o,r){var a=r;if("ref"in r){a={};for(var f in r)f!=="ref"&&(a[f]=r[f])}if(o=o.defaultProps){a===r&&(a=_({},a));for(var y in o)a[y]===void 0&&(a[y]=o[y])}return a}var ac=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function gy(o){ac(o)}function yy(o){console.error(o)}function _y(o){ac(o)}function lc(o,r){try{var a=o.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function vy(o,r,a){try{var f=o.onCaughtError;f(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Jd(o,r,a){return a=So(a),a.tag=3,a.payload={element:null},a.callback=function(){lc(o,r)},a}function Ty(o){return o=So(o),o.tag=3,o}function Ey(o,r,a,f){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=f.value;o.payload=function(){return y(v)},o.callback=function(){vy(r,a,f)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){vy(r,a,f),typeof y!="function"&&(Do===null?Do=new Set([this]):Do.add(this));var I=f.stack;this.componentDidCatch(f.value,{componentStack:I!==null?I:""})})}function DA(o,r,a,f,y){if(a.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=a.alternate,r!==null&&Qa(r,a,y,!0),a=Vn.current,a!==null){switch(a.tag){case 13:return mi===null?_h():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=y,f===Cd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([f]):r.add(f),Th(o,f,y)),!1;case 22:return a.flags|=65536,f===Cd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([f]):a.add(f)),Th(o,f,y)),!1}throw Error(i(435,a.tag))}return Th(o,f,y),_h(),!1}if($e)return r=Vn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,f!==gd&&(o=Error(i(422),{cause:f}),Ja(Nn(o,a)))):(f!==gd&&(r=Error(i(423),{cause:f}),Ja(Nn(r,a))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,f=Nn(f,a),y=Jd(o.stateNode,f,y),Rd(o,y),_t!==4&&(_t=2)),!1;var v=Error(i(520),{cause:f});if(v=Nn(v,a),pl===null?pl=[v]:pl.push(v),_t!==4&&(_t=2),r===null)return!0;f=Nn(f,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,o=y&-y,a.lanes|=o,o=Jd(a.stateNode,f,o),Rd(a,o),!1;case 1:if(r=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Do===null||!Do.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Ty(y),Ey(y,o,a,f),Rd(a,y),!1}a=a.return}while(a!==null);return!1}var Sy=Error(i(461)),Ft=!1;function $t(o,r,a,f){r.child=o===null?dy(r,null,a,f):Ds(r,o.child,a,f)}function Cy(o,r,a,f,y){a=a.render;var v=r.ref;if("ref"in f){var A={};for(var I in f)I!=="ref"&&(A[I]=f[I])}else A=f;return Nr(r),f=Nd(o,r,a,A,v,y),I=Dd(),o!==null&&!Ft?(Pd(o,r,y),Wi(o,r,y)):($e&&I&&md(r),r.flags|=1,$t(o,r,f,y),r.child)}function Ay(o,r,a,f,y){if(o===null){var v=a.type;return typeof v=="function"&&!fd(v)&&v.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=v,Iy(o,r,v,f,y)):(o=Bu(a.type,null,f,r,r.mode,y),o.ref=r.ref,o.return=r,r.child=o)}if(v=o.child,!nh(o,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:za,a(A,f)&&o.ref===r.ref)return Wi(o,r,y)}return r.flags|=1,o=zi(v,f),o.ref=r.ref,o.return=r,r.child=o}function Iy(o,r,a,f,y){if(o!==null){var v=o.memoizedProps;if(za(v,f)&&o.ref===r.ref)if(Ft=!1,r.pendingProps=f=v,nh(o,y))(o.flags&131072)!==0&&(Ft=!0);else return r.lanes=o.lanes,Wi(o,r,y)}return Qd(o,r,a,f,y)}function Ry(o,r,a){var f=r.pendingProps,y=f.children,v=o!==null?o.memoizedState:null;if(f.mode==="hidden"){if((r.flags&128)!==0){if(f=v!==null?v.baseLanes|a:a,o!==null){for(y=r.child=o.child,v=0;y!==null;)v=v|y.lanes|y.childLanes,y=y.sibling;r.childLanes=v&~f}else r.childLanes=0,r.child=null;return wy(o,r,f,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},o!==null&&$u(r,v!==null?v.cachePool:null),v!==null?Ig(r,v):Md(),hy(r);else return r.lanes=r.childLanes=536870912,wy(o,r,v!==null?v.baseLanes|a:a,a)}else v!==null?($u(r,v.cachePool),Ig(r,v),Ro(),r.memoizedState=null):(o!==null&&$u(r,null),Md(),Ro());return $t(o,r,y,a),r.child}function wy(o,r,a,f){var y=Sd();return y=y===null?null:{parent:Pt._currentValue,pool:y},r.memoizedState={baseLanes:a,cachePool:y},o!==null&&$u(r,null),Md(),hy(r),o!==null&&Qa(o,r,f,!0),null}function uc(o,r){var a=r.ref;if(a===null)o!==null&&o.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(o===null||o.ref!==a)&&(r.flags|=4194816)}}function Qd(o,r,a,f,y){return Nr(r),a=Nd(o,r,a,f,void 0,y),f=Dd(),o!==null&&!Ft?(Pd(o,r,y),Wi(o,r,y)):($e&&f&&md(r),r.flags|=1,$t(o,r,a,y),r.child)}function My(o,r,a,f,y,v){return Nr(r),r.updateQueue=null,a=wg(r,f,a,y),Rg(o),f=Dd(),o!==null&&!Ft?(Pd(o,r,v),Wi(o,r,v)):($e&&f&&md(r),r.flags|=1,$t(o,r,a,v),r.child)}function xy(o,r,a,f,y){if(Nr(r),r.stateNode===null){var v=Ss,A=a.contextType;typeof A=="object"&&A!==null&&(v=jt(A)),v=new a(f,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Kd,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=f,v.state=r.memoizedState,v.refs={},Ad(r),A=a.contextType,v.context=typeof A=="object"&&A!==null?jt(A):Ss,v.state=r.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&($d(r,a,A,f),v.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Kd.enqueueReplaceState(v,v.state,null),nl(r,f,v,y),tl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(o===null){v=r.stateNode;var I=r.memoizedProps,P=kr(a,I);v.props=P;var Y=v.context,ee=a.contextType;A=Ss,typeof ee=="object"&&ee!==null&&(A=jt(ee));var ne=a.getDerivedStateFromProps;ee=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=r.pendingProps!==I,ee||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||Y!==A)&&py(r,v,f,A),Eo=!1;var $=r.memoizedState;v.state=$,nl(r,f,v,y),tl(),Y=r.memoizedState,I||$!==Y||Eo?(typeof ne=="function"&&($d(r,a,ne,f),Y=r.memoizedState),(P=Eo||my(r,a,P,f,$,Y,A))?(ee||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=Y),v.props=f,v.state=Y,v.context=A,f=P):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{v=r.stateNode,Id(o,r),A=r.memoizedProps,ee=kr(a,A),v.props=ee,ne=r.pendingProps,$=v.context,Y=a.contextType,P=Ss,typeof Y=="object"&&Y!==null&&(P=jt(Y)),I=a.getDerivedStateFromProps,(Y=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ne||$!==P)&&py(r,v,f,P),Eo=!1,$=r.memoizedState,v.state=$,nl(r,f,v,y),tl();var Q=r.memoizedState;A!==ne||$!==Q||Eo||o!==null&&o.dependencies!==null&&zu(o.dependencies)?(typeof I=="function"&&($d(r,a,I,f),Q=r.memoizedState),(ee=Eo||my(r,a,ee,f,$,Q,P)||o!==null&&o.dependencies!==null&&zu(o.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,Q,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,Q,P)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===o.memoizedProps&&$===o.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&$===o.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=Q),v.props=f,v.state=Q,v.context=P,f=ee):(typeof v.componentDidUpdate!="function"||A===o.memoizedProps&&$===o.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&$===o.memoizedState||(r.flags|=1024),f=!1)}return v=f,uc(o,r),f=(r.flags&128)!==0,v||f?(v=r.stateNode,a=f&&typeof a.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,o!==null&&f?(r.child=Ds(r,o.child,null,y),r.child=Ds(r,null,a,y)):$t(o,r,a,y),r.memoizedState=v.state,o=r.child):o=Wi(o,r,y),o}function by(o,r,a,f){return Ka(),r.flags|=256,$t(o,r,a,f),r.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wd(o){return{baseLanes:o,cachePool:yg()}}function Zd(o,r,a){return o=o!==null?o.childLanes&~a:0,r&&(o|=Un),o}function Ny(o,r,a){var f=r.pendingProps,y=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=o!==null&&o.memoizedState===null?!1:(kt.current&2)!==0),A&&(y=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,o===null){if($e){if(y?Io(r):Ro(),$e){var I=yt,P;if(P=I){e:{for(P=I,I=hi;P.nodeType!==8;){if(!I){I=null;break e}if(P=Jn(P.nextSibling),P===null){I=null;break e}}I=P}I!==null?(r.memoizedState={dehydrated:I,treeContext:Rr!==null?{id:Yi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},P=vn(18,null,null,0),P.stateNode=I,P.return=r,r.child=P,cn=r,yt=null,P=!0):P=!1}P||xr(r)}if(I=r.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return Vh(I)?r.lanes=32:r.lanes=536870912,null;Xi(r)}return I=f.children,f=f.fallback,y?(Ro(),y=r.mode,I=cc({mode:"hidden",children:I},y),f=Ir(f,y,a,null),I.return=r,f.return=r,I.sibling=f,r.child=I,y=r.child,y.memoizedState=Wd(a),y.childLanes=Zd(o,A,a),r.memoizedState=Xd,f):(Io(r),jd(r,I))}if(P=o.memoizedState,P!==null&&(I=P.dehydrated,I!==null)){if(v)r.flags&256?(Io(r),r.flags&=-257,r=eh(o,r,a)):r.memoizedState!==null?(Ro(),r.child=o.child,r.flags|=128,r=null):(Ro(),y=f.fallback,I=r.mode,f=cc({mode:"visible",children:f.children},I),y=Ir(y,I,a,null),y.flags|=2,f.return=r,y.return=r,f.sibling=y,r.child=f,Ds(r,o.child,null,a),f=r.child,f.memoizedState=Wd(a),f.childLanes=Zd(o,A,a),r.memoizedState=Xd,r=y);else if(Io(r),Vh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var Y=A.dgst;A=Y,f=Error(i(419)),f.stack="",f.digest=A,Ja({value:f,source:null,stack:null}),r=eh(o,r,a)}else if(Ft||Qa(o,r,a,!1),A=(a&o.childLanes)!==0,Ft||A){if(A=lt,A!==null&&(f=a&-a,f=(f&42)!==0?1:ho(f),f=(f&(A.suspendedLanes|a))!==0?0:f,f!==0&&f!==P.retryLane))throw P.retryLane=f,Es(o,f),An(A,o,f),Sy;I.data==="$?"||_h(),r=eh(o,r,a)}else I.data==="$?"?(r.flags|=192,r.child=o.child,r=null):(o=P.treeContext,yt=Jn(I.nextSibling),cn=r,$e=!0,Mr=null,hi=!1,o!==null&&(Pn[kn++]=Yi,Pn[kn++]=$i,Pn[kn++]=Rr,Yi=o.id,$i=o.overflow,Rr=r),r=jd(r,f.children),r.flags|=4096);return r}return y?(Ro(),y=f.fallback,I=r.mode,P=o.child,Y=P.sibling,f=zi(P,{mode:"hidden",children:f.children}),f.subtreeFlags=P.subtreeFlags&65011712,Y!==null?y=zi(Y,y):(y=Ir(y,I,a,null),y.flags|=2),y.return=r,f.return=r,f.sibling=y,r.child=f,f=y,y=r.child,I=o.child.memoizedState,I===null?I=Wd(a):(P=I.cachePool,P!==null?(Y=Pt._currentValue,P=P.parent!==Y?{parent:Y,pool:Y}:P):P=yg(),I={baseLanes:I.baseLanes|a,cachePool:P}),y.memoizedState=I,y.childLanes=Zd(o,A,a),r.memoizedState=Xd,f):(Io(r),a=o.child,o=a.sibling,a=zi(a,{mode:"visible",children:f.children}),a.return=r,a.sibling=null,o!==null&&(A=r.deletions,A===null?(r.deletions=[o],r.flags|=16):A.push(o)),r.child=a,r.memoizedState=null,a)}function jd(o,r){return r=cc({mode:"visible",children:r},o.mode),r.return=o,o.child=r}function cc(o,r){return o=vn(22,o,null,r),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function eh(o,r,a){return Ds(r,o.child,null,a),o=jd(r,r.pendingProps.children),o.flags|=2,r.memoizedState=null,o}function Dy(o,r,a){o.lanes|=r;var f=o.alternate;f!==null&&(f.lanes|=r),_d(o.return,r,a)}function th(o,r,a,f,y){var v=o.memoizedState;v===null?o.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:a,tailMode:y}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=a,v.tailMode=y)}function Py(o,r,a){var f=r.pendingProps,y=f.revealOrder,v=f.tail;if($t(o,r,f.children,a),f=kt.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=r.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Dy(o,a,r);else if(o.tag===19)Dy(o,a,r);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}f&=1}switch(le(kt,f),y){case"forwards":for(a=r.child,y=null;a!==null;)o=a.alternate,o!==null&&sc(o)===null&&(y=a),a=a.sibling;a=y,a===null?(y=r.child,r.child=null):(y=a.sibling,a.sibling=null),th(r,!1,y,a,v);break;case"backwards":for(a=null,y=r.child,r.child=null;y!==null;){if(o=y.alternate,o!==null&&sc(o)===null){r.child=y;break}o=y.sibling,y.sibling=a,a=y,y=o}th(r,!0,a,null,v);break;case"together":th(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Wi(o,r,a){if(o!==null&&(r.dependencies=o.dependencies),No|=r.lanes,(a&r.childLanes)===0)if(o!==null){if(Qa(o,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(o!==null&&r.child!==o.child)throw Error(i(153));if(r.child!==null){for(o=r.child,a=zi(o,o.pendingProps),r.child=a,a.return=r;o.sibling!==null;)o=o.sibling,a=a.sibling=zi(o,o.pendingProps),a.return=r;a.sibling=null}return r.child}function nh(o,r){return(o.lanes&r)!==0?!0:(o=o.dependencies,!!(o!==null&&zu(o)))}function PA(o,r,a){switch(r.tag){case 3:tt(r,r.stateNode.containerInfo),To(r,Pt,o.memoizedState.cache),Ka();break;case 27:case 5:ei(r);break;case 4:tt(r,r.stateNode.containerInfo);break;case 10:To(r,r.type,r.memoizedProps.value);break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(Io(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Ny(o,r,a):(Io(r),o=Wi(o,r,a),o!==null?o.sibling:null);Io(r);break;case 19:var y=(o.flags&128)!==0;if(f=(a&r.childLanes)!==0,f||(Qa(o,r,a,!1),f=(a&r.childLanes)!==0),y){if(f)return Py(o,r,a);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(kt,kt.current),f)break;return null;case 22:case 23:return r.lanes=0,Ry(o,r,a);case 24:To(r,Pt,o.memoizedState.cache)}return Wi(o,r,a)}function ky(o,r,a){if(o!==null)if(o.memoizedProps!==r.pendingProps)Ft=!0;else{if(!nh(o,a)&&(r.flags&128)===0)return Ft=!1,PA(o,r,a);Ft=(o.flags&131072)!==0}else Ft=!1,$e&&(r.flags&1048576)!==0&&cg(r,Gu,r.index);switch(r.lanes=0,r.tag){case 16:e:{o=r.pendingProps;var f=r.elementType,y=f._init;if(f=y(f._payload),r.type=f,typeof f=="function")fd(f)?(o=kr(f,o),r.tag=1,r=xy(null,r,f,o,a)):(r.tag=0,r=Qd(null,r,f,o,a));else{if(f!=null){if(y=f.$$typeof,y===ae){r.tag=11,r=Cy(null,r,f,o,a);break e}else if(y===b){r.tag=14,r=Ay(null,r,f,o,a);break e}}throw r=et(f)||f,Error(i(306,r,""))}}return r;case 0:return Qd(o,r,r.type,r.pendingProps,a);case 1:return f=r.type,y=kr(f,r.pendingProps),xy(o,r,f,y,a);case 3:e:{if(tt(r,r.stateNode.containerInfo),o===null)throw Error(i(387));f=r.pendingProps;var v=r.memoizedState;y=v.element,Id(o,r),nl(r,f,null,a);var A=r.memoizedState;if(f=A.cache,To(r,Pt,f),f!==v.cache&&vd(r,[Pt],a,!0),tl(),f=A.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=by(o,r,f,a);break e}else if(f!==y){y=Nn(Error(i(424)),r),Ja(y),r=by(o,r,f,a);break e}else{switch(o=r.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(yt=Jn(o.firstChild),cn=r,$e=!0,Mr=null,hi=!0,a=dy(r,null,f,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ka(),f===y){r=Wi(o,r,a);break e}$t(o,r,f,a)}r=r.child}return r;case 26:return uc(o,r),o===null?(a=O_(r.type,null,r.pendingProps,null))?r.memoizedState=a:$e||(a=r.type,o=r.pendingProps,f=Ac(Ae.current).createElement(a),f[bt]=r,f[At]=o,Jt(f,a,o),vt(f),r.stateNode=f):r.memoizedState=O_(r.type,o.memoizedProps,r.pendingProps,o.memoizedState),null;case 27:return ei(r),o===null&&$e&&(f=r.stateNode=V_(r.type,r.pendingProps,Ae.current),cn=r,hi=!0,y=yt,Vo(r.type)?(Uh=y,yt=Jn(f.firstChild)):yt=y),$t(o,r,r.pendingProps.children,a),uc(o,r),o===null&&(r.flags|=4194304),r.child;case 5:return o===null&&$e&&((y=f=yt)&&(f=aI(f,r.type,r.pendingProps,hi),f!==null?(r.stateNode=f,cn=r,yt=Jn(f.firstChild),hi=!1,y=!0):y=!1),y||xr(r)),ei(r),y=r.type,v=r.pendingProps,A=o!==null?o.memoizedProps:null,f=v.children,Dh(y,v)?f=null:A!==null&&Dh(y,A)&&(r.flags|=32),r.memoizedState!==null&&(y=Nd(o,r,IA,null,null,a),Al._currentValue=y),uc(o,r),$t(o,r,f,a),r.child;case 6:return o===null&&$e&&((o=a=yt)&&(a=lI(a,r.pendingProps,hi),a!==null?(r.stateNode=a,cn=r,yt=null,o=!0):o=!1),o||xr(r)),null;case 13:return Ny(o,r,a);case 4:return tt(r,r.stateNode.containerInfo),f=r.pendingProps,o===null?r.child=Ds(r,null,f,a):$t(o,r,f,a),r.child;case 11:return Cy(o,r,r.type,r.pendingProps,a);case 7:return $t(o,r,r.pendingProps,a),r.child;case 8:return $t(o,r,r.pendingProps.children,a),r.child;case 12:return $t(o,r,r.pendingProps.children,a),r.child;case 10:return f=r.pendingProps,To(r,r.type,f.value),$t(o,r,f.children,a),r.child;case 9:return y=r.type._context,f=r.pendingProps.children,Nr(r),y=jt(y),f=f(y),r.flags|=1,$t(o,r,f,a),r.child;case 14:return Ay(o,r,r.type,r.pendingProps,a);case 15:return Iy(o,r,r.type,r.pendingProps,a);case 19:return Py(o,r,a);case 31:return f=r.pendingProps,a=r.mode,f={mode:f.mode,children:f.children},o===null?(a=cc(f,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=zi(o.child,f),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return Ry(o,r,a);case 24:return Nr(r),f=jt(Pt),o===null?(y=Sd(),y===null&&(y=lt,v=Td(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),r.memoizedState={parent:f,cache:y},Ad(r),To(r,Pt,y)):((o.lanes&a)!==0&&(Id(o,r),nl(r,null,null,a),tl()),y=o.memoizedState,v=r.memoizedState,y.parent!==f?(y={parent:f,cache:f},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),To(r,Pt,f)):(f=v.cache,To(r,Pt,f),f!==y.cache&&vd(r,[Pt],a,!0))),$t(o,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Zi(o){o.flags|=4}function Vy(o,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!G_(r)){if(r=Vn.current,r!==null&&((Ge&4194048)===Ge?mi!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==mi))throw ja=Cd,_g;o.flags|=8192}}function fc(o,r){r!==null&&(o.flags|=4),o.flags&16384&&(r=o.tag!==22?Ra():536870912,o.lanes|=r,Us|=r)}function ul(o,r){if(!$e)switch(o.tailMode){case"hidden":r=o.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?o.tail=null:a.sibling=null;break;case"collapsed":a=o.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?r||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function ht(o){var r=o.alternate!==null&&o.alternate.child===o.child,a=0,f=0;if(r)for(var y=o.child;y!==null;)a|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)a|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=f,o.childLanes=a,r}function kA(o,r,a){var f=r.pendingProps;switch(pd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(r),null;case 1:return ht(r),null;case 3:return a=r.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Ji(Pt),In(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(o===null||o.child===null)&&($a(r)?Zi(r):o===null||o.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,hg())),ht(r),null;case 26:return a=r.memoizedState,o===null?(Zi(r),a!==null?(ht(r),Vy(r,a)):(ht(r),r.flags&=-16777217)):a?a!==o.memoizedState?(Zi(r),ht(r),Vy(r,a)):(ht(r),r.flags&=-16777217):(o.memoizedProps!==f&&Zi(r),ht(r),r.flags&=-16777217),null;case 27:Hn(r),a=Ae.current;var y=r.type;if(o!==null&&r.stateNode!=null)o.memoizedProps!==f&&Zi(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return ht(r),null}o=_e.current,$a(r)?fg(r):(o=V_(y,f,a),r.stateNode=o,Zi(r))}return ht(r),null;case 5:if(Hn(r),a=r.type,o!==null&&r.stateNode!=null)o.memoizedProps!==f&&Zi(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return ht(r),null}if(o=_e.current,$a(r))fg(r);else{switch(y=Ac(Ae.current),o){case 1:o=y.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:o=y.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":o=y.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":o=y.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":o=y.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof f.is=="string"?y.createElement("select",{is:f.is}):y.createElement("select"),f.multiple?o.multiple=!0:f.size&&(o.size=f.size);break;default:o=typeof f.is=="string"?y.createElement(a,{is:f.is}):y.createElement(a)}}o[bt]=r,o[At]=f;e:for(y=r.child;y!==null;){if(y.tag===5||y.tag===6)o.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}r.stateNode=o;e:switch(Jt(o,a,f),a){case"button":case"input":case"select":case"textarea":o=!!f.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Zi(r)}}return ht(r),r.flags&=-16777217,null;case 6:if(o&&r.stateNode!=null)o.memoizedProps!==f&&Zi(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(i(166));if(o=Ae.current,$a(r)){if(o=r.stateNode,a=r.memoizedProps,f=null,y=cn,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}o[bt]=r,o=!!(o.nodeValue===a||f!==null&&f.suppressHydrationWarning===!0||M_(o.nodeValue,a)),o||xr(r)}else o=Ac(o).createTextNode(f),o[bt]=r,r.stateNode=o}return ht(r),null;case 13:if(f=r.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=$a(r),f!==null&&f.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[bt]=r}else Ka(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ht(r),y=!1}else y=hg(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Xi(r),r):(Xi(r),null)}if(Xi(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=f!==null,o=o!==null&&o.memoizedState!==null,a){f=r.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==y&&(f.flags|=2048)}return a!==o&&a&&(r.child.flags|=8192),fc(r,r.updateQueue),ht(r),null;case 4:return In(),o===null&&wh(r.stateNode.containerInfo),ht(r),null;case 10:return Ji(r.type),ht(r),null;case 19:if(fe(kt),y=r.memoizedState,y===null)return ht(r),null;if(f=(r.flags&128)!==0,v=y.rendering,v===null)if(f)ul(y,!1);else{if(_t!==0||o!==null&&(o.flags&128)!==0)for(o=r.child;o!==null;){if(v=sc(o),v!==null){for(r.flags|=128,ul(y,!1),o=v.updateQueue,r.updateQueue=o,fc(r,o),r.subtreeFlags=0,o=a,a=r.child;a!==null;)ug(a,o),a=a.sibling;return le(kt,kt.current&1|2),r.child}o=o.sibling}y.tail!==null&&Xe()>mc&&(r.flags|=128,f=!0,ul(y,!1),r.lanes=4194304)}else{if(!f)if(o=sc(v),o!==null){if(r.flags|=128,f=!0,o=o.updateQueue,r.updateQueue=o,fc(r,o),ul(y,!0),y.tail===null&&y.tailMode==="hidden"&&!v.alternate&&!$e)return ht(r),null}else 2*Xe()-y.renderingStartTime>mc&&a!==536870912&&(r.flags|=128,f=!0,ul(y,!1),r.lanes=4194304);y.isBackwards?(v.sibling=r.child,r.child=v):(o=y.last,o!==null?o.sibling=v:r.child=v,y.last=v)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=Xe(),r.sibling=null,o=kt.current,le(kt,f?o&1|2:o&1),r):(ht(r),null);case 22:case 23:return Xi(r),xd(),f=r.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(a&536870912)!==0&&(r.flags&128)===0&&(ht(r),r.subtreeFlags&6&&(r.flags|=8192)):ht(r),a=r.updateQueue,a!==null&&fc(r,a.retryQueue),a=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==a&&(r.flags|=2048),o!==null&&fe(Dr),null;case 24:return a=null,o!==null&&(a=o.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ji(Pt),ht(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function VA(o,r){switch(pd(r),r.tag){case 1:return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 3:return Ji(Pt),In(),o=r.flags,(o&65536)!==0&&(o&128)===0?(r.flags=o&-65537|128,r):null;case 26:case 27:case 5:return Hn(r),null;case 13:if(Xi(r),o=r.memoizedState,o!==null&&o.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ka()}return o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 19:return fe(kt),null;case 4:return In(),null;case 10:return Ji(r.type),null;case 22:case 23:return Xi(r),xd(),o!==null&&fe(Dr),o=r.flags,o&65536?(r.flags=o&-65537|128,r):null;case 24:return Ji(Pt),null;case 25:return null;default:return null}}function Uy(o,r){switch(pd(r),r.tag){case 3:Ji(Pt),In();break;case 26:case 27:case 5:Hn(r);break;case 4:In();break;case 13:Xi(r);break;case 19:fe(kt);break;case 10:Ji(r.type);break;case 22:case 23:Xi(r),xd(),o!==null&&fe(Dr);break;case 24:Ji(Pt)}}function cl(o,r){try{var a=r.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var y=f.next;a=y;do{if((a.tag&o)===o){f=void 0;var v=a.create,A=a.inst;f=v(),A.destroy=f}a=a.next}while(a!==y)}}catch(I){at(r,r.return,I)}}function wo(o,r,a){try{var f=r.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var v=y.next;f=v;do{if((f.tag&o)===o){var A=f.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=r;var P=a,Y=I;try{Y()}catch(ee){at(y,P,ee)}}}f=f.next}while(f!==v)}}catch(ee){at(r,r.return,ee)}}function Ly(o){var r=o.updateQueue;if(r!==null){var a=o.stateNode;try{Ag(r,a)}catch(f){at(o,o.return,f)}}}function Oy(o,r,a){a.props=kr(o.type,o.memoizedProps),a.state=o.memoizedState;try{a.componentWillUnmount()}catch(f){at(o,r,f)}}function fl(o,r){try{var a=o.ref;if(a!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof a=="function"?o.refCleanup=a(f):a.current=f}}catch(y){at(o,r,y)}}function pi(o,r){var a=o.ref,f=o.refCleanup;if(a!==null)if(typeof f=="function")try{f()}catch(y){at(o,r,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){at(o,r,y)}else a.current=null}function Fy(o){var r=o.type,a=o.memoizedProps,f=o.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&f.focus();break e;case"img":a.src?f.src=a.src:a.srcSet&&(f.srcset=a.srcSet)}}catch(y){at(o,o.return,y)}}function ih(o,r,a){try{var f=o.stateNode;nI(f,o.type,a,r),f[At]=r}catch(y){at(o,o.return,y)}}function qy(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Vo(o.type)||o.tag===4}function oh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||qy(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Vo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function rh(o,r,a){var f=o.tag;if(f===5||f===6)o=o.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(o,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(o),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Cc));else if(f!==4&&(f===27&&Vo(o.type)&&(a=o.stateNode,r=null),o=o.child,o!==null))for(rh(o,r,a),o=o.sibling;o!==null;)rh(o,r,a),o=o.sibling}function dc(o,r,a){var f=o.tag;if(f===5||f===6)o=o.stateNode,r?a.insertBefore(o,r):a.appendChild(o);else if(f!==4&&(f===27&&Vo(o.type)&&(a=o.stateNode),o=o.child,o!==null))for(dc(o,r,a),o=o.sibling;o!==null;)dc(o,r,a),o=o.sibling}function By(o){var r=o.stateNode,a=o.memoizedProps;try{for(var f=o.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Jt(r,f,a),r[bt]=o,r[At]=a}catch(v){at(o,o.return,v)}}var ji=!1,Et=!1,sh=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,qt=null;function UA(o,r){if(o=o.containerInfo,bh=bc,o=jp(o),od(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{a=(a=o.ownerDocument)&&a.defaultView||window;var f=a.getSelection&&a.getSelection();if(f&&f.rangeCount!==0){a=f.anchorNode;var y=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,P=-1,Y=0,ee=0,ne=o,$=null;t:for(;;){for(var Q;ne!==a||y!==0&&ne.nodeType!==3||(I=A+y),ne!==v||f!==0&&ne.nodeType!==3||(P=A+f),ne.nodeType===3&&(A+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)$=ne,ne=Q;for(;;){if(ne===o)break t;if($===a&&++Y===y&&(I=A),$===v&&++ee===f&&(P=A),(Q=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=Q}a=I===-1||P===-1?null:{start:I,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nh={focusedElem:o,selectionRange:a},bc=!1,qt=r;qt!==null;)if(r=qt,o=r.child,(r.subtreeFlags&1024)!==0&&o!==null)o.return=r,qt=o;else for(;qt!==null;){switch(r=qt,v=r.alternate,o=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,a=r,y=v.memoizedProps,v=v.memoizedState,f=a.stateNode;try{var Ie=kr(a.type,y,a.elementType===a.type);o=f.getSnapshotBeforeUpdate(Ie,v),f.__reactInternalSnapshotBeforeUpdate=o}catch(Ee){at(a,a.return,Ee)}}break;case 3:if((o&1024)!==0){if(o=r.stateNode.containerInfo,a=o.nodeType,a===9)kh(o);else if(a===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":kh(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=r.sibling,o!==null){o.return=r.return,qt=o;break}qt=r.return}}function Gy(o,r,a){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Mo(o,a),f&4&&cl(5,a);break;case 1:if(Mo(o,a),f&4)if(o=a.stateNode,r===null)try{o.componentDidMount()}catch(A){at(a,a.return,A)}else{var y=kr(a.type,r.memoizedProps);r=r.memoizedState;try{o.componentDidUpdate(y,r,o.__reactInternalSnapshotBeforeUpdate)}catch(A){at(a,a.return,A)}}f&64&&Ly(a),f&512&&fl(a,a.return);break;case 3:if(Mo(o,a),f&64&&(o=a.updateQueue,o!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Ag(o,r)}catch(A){at(a,a.return,A)}}break;case 27:r===null&&f&4&&By(a);case 26:case 5:Mo(o,a),r===null&&f&4&&Fy(a),f&512&&fl(a,a.return);break;case 12:Mo(o,a);break;case 13:Mo(o,a),f&4&&$y(o,a),f&64&&(o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(a=YA.bind(null,a),uI(o,a))));break;case 22:if(f=a.memoizedState!==null||ji,!f){r=r!==null&&r.memoizedState!==null||Et,y=ji;var v=Et;ji=f,(Et=r)&&!v?xo(o,a,(a.subtreeFlags&8772)!==0):Mo(o,a),ji=y,Et=v}break;case 30:break;default:Mo(o,a)}}function zy(o){var r=o.alternate;r!==null&&(o.alternate=null,zy(r)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(r=o.stateNode,r!==null&&go(r)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var dt=null,hn=!1;function eo(o,r,a){for(a=a.child;a!==null;)Yy(o,r,a),a=a.sibling}function Yy(o,r,a){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(gt,a)}catch{}switch(a.tag){case 26:Et||pi(a,r),eo(o,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Et||pi(a,r);var f=dt,y=hn;Vo(a.type)&&(dt=a.stateNode,hn=!1),eo(o,r,a),Tl(a.stateNode),dt=f,hn=y;break;case 5:Et||pi(a,r);case 6:if(f=dt,y=hn,dt=null,eo(o,r,a),dt=f,hn=y,dt!==null)if(hn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(v){at(a,r,v)}else try{dt.removeChild(a.stateNode)}catch(v){at(a,r,v)}break;case 18:dt!==null&&(hn?(o=dt,P_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.stateNode),Ml(o)):P_(dt,a.stateNode));break;case 4:f=dt,y=hn,dt=a.stateNode.containerInfo,hn=!0,eo(o,r,a),dt=f,hn=y;break;case 0:case 11:case 14:case 15:Et||wo(2,a,r),Et||wo(4,a,r),eo(o,r,a);break;case 1:Et||(pi(a,r),f=a.stateNode,typeof f.componentWillUnmount=="function"&&Oy(a,r,f)),eo(o,r,a);break;case 21:eo(o,r,a);break;case 22:Et=(f=Et)||a.memoizedState!==null,eo(o,r,a),Et=f;break;default:eo(o,r,a)}}function $y(o,r){if(r.memoizedState===null&&(o=r.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ml(o)}catch(a){at(r,r.return,a)}}function LA(o){switch(o.tag){case 13:case 19:var r=o.stateNode;return r===null&&(r=o.stateNode=new Hy),r;case 22:return o=o.stateNode,r=o._retryCache,r===null&&(r=o._retryCache=new Hy),r;default:throw Error(i(435,o.tag))}}function ah(o,r){var a=LA(o);r.forEach(function(f){var y=$A.bind(null,o,f);a.has(f)||(a.add(f),f.then(y,y))})}function Tn(o,r){var a=r.deletions;if(a!==null)for(var f=0;f<a.length;f++){var y=a[f],v=o,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Vo(I.type)){dt=I.stateNode,hn=!1;break e}break;case 5:dt=I.stateNode,hn=!1;break e;case 3:case 4:dt=I.stateNode.containerInfo,hn=!0;break e}I=I.return}if(dt===null)throw Error(i(160));Yy(v,A,y),dt=null,hn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Ky(r,o),r=r.sibling}var Kn=null;function Ky(o,r){var a=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Tn(r,o),En(o),f&4&&(wo(3,o,o.return),cl(3,o),wo(5,o,o.return));break;case 1:Tn(r,o),En(o),f&512&&(Et||a===null||pi(a,a.return)),f&64&&ji&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(a=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=a===null?f:a.concat(f))));break;case 26:var y=Kn;if(Tn(r,o),En(o),f&512&&(Et||a===null||pi(a,a.return)),f&4){var v=a!==null?a.memoizedState:null;if(f=o.memoizedState,a===null)if(f===null)if(o.stateNode===null){e:{f=o.type,a=o.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":v=y.getElementsByTagName("title")[0],(!v||v[ur]||v[bt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(f),y.head.insertBefore(v,y.querySelector("head > title"))),Jt(v,f,a),v[bt]=o,vt(v),f=v;break e;case"link":var A=B_("link","href",y).get(f+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(f),Jt(v,f,a),y.head.appendChild(v);break;case"meta":if(A=B_("meta","content",y).get(f+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(f),Jt(v,f,a),y.head.appendChild(v);break;default:throw Error(i(468,f))}v[bt]=o,vt(v),f=v}o.stateNode=f}else H_(y,o.type,o.stateNode);else o.stateNode=q_(y,f,o.memoizedProps);else v!==f?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,f===null?H_(y,o.type,o.stateNode):q_(y,f,o.memoizedProps)):f===null&&o.stateNode!==null&&ih(o,o.memoizedProps,a.memoizedProps)}break;case 27:Tn(r,o),En(o),f&512&&(Et||a===null||pi(a,a.return)),a!==null&&f&4&&ih(o,o.memoizedProps,a.memoizedProps);break;case 5:if(Tn(r,o),En(o),f&512&&(Et||a===null||pi(a,a.return)),o.flags&32){y=o.stateNode;try{wn(y,"")}catch(Q){at(o,o.return,Q)}}f&4&&o.stateNode!=null&&(y=o.memoizedProps,ih(o,y,a!==null?a.memoizedProps:y)),f&1024&&(sh=!0);break;case 6:if(Tn(r,o),En(o),f&4){if(o.stateNode===null)throw Error(i(162));f=o.memoizedProps,a=o.stateNode;try{a.nodeValue=f}catch(Q){at(o,o.return,Q)}}break;case 3:if(wc=null,y=Kn,Kn=Ic(r.containerInfo),Tn(r,o),Kn=y,En(o),f&4&&a!==null&&a.memoizedState.isDehydrated)try{Ml(r.containerInfo)}catch(Q){at(o,o.return,Q)}sh&&(sh=!1,Jy(o));break;case 4:f=Kn,Kn=Ic(o.stateNode.containerInfo),Tn(r,o),En(o),Kn=f;break;case 12:Tn(r,o),En(o);break;case 13:Tn(r,o),En(o),o.child.flags&8192&&o.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(hh=Xe()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,ah(o,f)));break;case 22:y=o.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,Y=ji,ee=Et;if(ji=Y||y,Et=ee||P,Tn(r,o),Et=ee,ji=Y,En(o),f&8192)e:for(r=o.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(a===null||P||ji||Et||Vr(o)),a=null,r=o;;){if(r.tag===5||r.tag===26){if(a===null){P=a=r;try{if(v=P.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=P.stateNode;var ne=P.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;I.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Q){at(P,P.return,Q)}}}else if(r.tag===6){if(a===null){P=r;try{P.stateNode.nodeValue=y?"":P.memoizedProps}catch(Q){at(P,P.return,Q)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===o)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=o.updateQueue,f!==null&&(a=f.retryQueue,a!==null&&(f.retryQueue=null,ah(o,a))));break;case 19:Tn(r,o),En(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,ah(o,f)));break;case 30:break;case 21:break;default:Tn(r,o),En(o)}}function En(o){var r=o.flags;if(r&2){try{for(var a,f=o.return;f!==null;){if(qy(f)){a=f;break}f=f.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var y=a.stateNode,v=oh(o);dc(o,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(wn(A,""),a.flags&=-33);var I=oh(o);dc(o,I,A);break;case 3:case 4:var P=a.stateNode.containerInfo,Y=oh(o);rh(o,Y,P);break;default:throw Error(i(161))}}catch(ee){at(o,o.return,ee)}o.flags&=-3}r&4096&&(o.flags&=-4097)}function Jy(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var r=o;Jy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),o=o.sibling}}function Mo(o,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Gy(o,r.alternate,r),r=r.sibling}function Vr(o){for(o=o.child;o!==null;){var r=o;switch(r.tag){case 0:case 11:case 14:case 15:wo(4,r,r.return),Vr(r);break;case 1:pi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Oy(r,r.return,a),Vr(r);break;case 27:Tl(r.stateNode);case 26:case 5:pi(r,r.return),Vr(r);break;case 22:r.memoizedState===null&&Vr(r);break;case 30:Vr(r);break;default:Vr(r)}o=o.sibling}}function xo(o,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,y=o,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:xo(y,v,a),cl(4,v);break;case 1:if(xo(y,v,a),f=v,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){at(f,f.return,Y)}if(f=v,y=f.updateQueue,y!==null){var I=f.stateNode;try{var P=y.shared.hiddenCallbacks;if(P!==null)for(y.shared.hiddenCallbacks=null,y=0;y<P.length;y++)Cg(P[y],I)}catch(Y){at(f,f.return,Y)}}a&&A&64&&Ly(v),fl(v,v.return);break;case 27:By(v);case 26:case 5:xo(y,v,a),a&&f===null&&A&4&&Fy(v),fl(v,v.return);break;case 12:xo(y,v,a);break;case 13:xo(y,v,a),a&&A&4&&$y(y,v);break;case 22:v.memoizedState===null&&xo(y,v,a),fl(v,v.return);break;case 30:break;default:xo(y,v,a)}r=r.sibling}}function lh(o,r){var a=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(o!=null&&o.refCount++,a!=null&&Xa(a))}function uh(o,r){o=null,r.alternate!==null&&(o=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==o&&(r.refCount++,o!=null&&Xa(o))}function gi(o,r,a,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Qy(o,r,a,f),r=r.sibling}function Qy(o,r,a,f){var y=r.flags;switch(r.tag){case 0:case 11:case 15:gi(o,r,a,f),y&2048&&cl(9,r);break;case 1:gi(o,r,a,f);break;case 3:gi(o,r,a,f),y&2048&&(o=null,r.alternate!==null&&(o=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==o&&(r.refCount++,o!=null&&Xa(o)));break;case 12:if(y&2048){gi(o,r,a,f),o=r.stateNode;try{var v=r.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,r.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(P){at(r,r.return,P)}}else gi(o,r,a,f);break;case 13:gi(o,r,a,f);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?gi(o,r,a,f):dl(o,r):v._visibility&2?gi(o,r,a,f):(v._visibility|=2,Ps(o,r,a,f,(r.subtreeFlags&10256)!==0)),y&2048&&lh(A,r);break;case 24:gi(o,r,a,f),y&2048&&uh(r.alternate,r);break;default:gi(o,r,a,f)}}function Ps(o,r,a,f,y){for(y=y&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var v=o,A=r,I=a,P=f,Y=A.flags;switch(A.tag){case 0:case 11:case 15:Ps(v,A,I,P,y),cl(8,A);break;case 23:break;case 22:var ee=A.stateNode;A.memoizedState!==null?ee._visibility&2?Ps(v,A,I,P,y):dl(v,A):(ee._visibility|=2,Ps(v,A,I,P,y)),y&&Y&2048&&lh(A.alternate,A);break;case 24:Ps(v,A,I,P,y),y&&Y&2048&&uh(A.alternate,A);break;default:Ps(v,A,I,P,y)}r=r.sibling}}function dl(o,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=o,f=r,y=f.flags;switch(f.tag){case 22:dl(a,f),y&2048&&lh(f.alternate,f);break;case 24:dl(a,f),y&2048&&uh(f.alternate,f);break;default:dl(a,f)}r=r.sibling}}var hl=8192;function ks(o){if(o.subtreeFlags&hl)for(o=o.child;o!==null;)Xy(o),o=o.sibling}function Xy(o){switch(o.tag){case 26:ks(o),o.flags&hl&&o.memoizedState!==null&&SI(Kn,o.memoizedState,o.memoizedProps);break;case 5:ks(o);break;case 3:case 4:var r=Kn;Kn=Ic(o.stateNode.containerInfo),ks(o),Kn=r;break;case 22:o.memoizedState===null&&(r=o.alternate,r!==null&&r.memoizedState!==null?(r=hl,hl=16777216,ks(o),hl=r):ks(o));break;default:ks(o)}}function Wy(o){var r=o.alternate;if(r!==null&&(o=r.child,o!==null)){r.child=null;do r=o.sibling,o.sibling=null,o=r;while(o!==null)}}function ml(o){var r=o.deletions;if((o.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var f=r[a];qt=f,jy(f,o)}Wy(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Zy(o),o=o.sibling}function Zy(o){switch(o.tag){case 0:case 11:case 15:ml(o),o.flags&2048&&wo(9,o,o.return);break;case 3:ml(o);break;case 12:ml(o);break;case 22:var r=o.stateNode;o.memoizedState!==null&&r._visibility&2&&(o.return===null||o.return.tag!==13)?(r._visibility&=-3,hc(o)):ml(o);break;default:ml(o)}}function hc(o){var r=o.deletions;if((o.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var f=r[a];qt=f,jy(f,o)}Wy(o)}for(o=o.child;o!==null;){switch(r=o,r.tag){case 0:case 11:case 15:wo(8,r,r.return),hc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,hc(r));break;default:hc(r)}o=o.sibling}}function jy(o,r){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:wo(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var f=a.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Xa(a.memoizedState.cache)}if(f=a.child,f!==null)f.return=a,qt=f;else e:for(a=o;qt!==null;){f=qt;var y=f.sibling,v=f.return;if(zy(f),f===a){qt=null;break e}if(y!==null){y.return=v,qt=y;break e}qt=v}}}var OA={getCacheForType:function(o){var r=jt(Pt),a=r.data.get(o);return a===void 0&&(a=o(),r.data.set(o,a)),a}},FA=typeof WeakMap=="function"?WeakMap:Map,Ze=0,lt=null,Ve=null,Ge=0,je=0,Sn=null,bo=!1,Vs=!1,ch=!1,to=0,_t=0,No=0,Ur=0,fh=0,Un=0,Us=0,pl=null,mn=null,dh=!1,hh=0,mc=1/0,pc=null,Do=null,Kt=0,Po=null,Ls=null,Os=0,mh=0,ph=null,e_=null,gl=0,gh=null;function Cn(){if((Ze&2)!==0&&Ge!==0)return Ge&-Ge;if(j.T!==null){var o=Is;return o!==0?o:Ch()}return mo()}function t_(){Un===0&&(Un=(Ge&536870912)===0||$e?Ia():536870912);var o=Vn.current;return o!==null&&(o.flags|=32),Un}function An(o,r,a){(o===lt&&(je===2||je===9)||o.cancelPendingCommit!==null)&&(Fs(o,0),ko(o,Ge,Un,!1)),Pi(o,a),((Ze&2)===0||o!==lt)&&(o===lt&&((Ze&2)===0&&(Ur|=a),_t===4&&ko(o,Ge,Un,!1)),yi(o))}function n_(o,r,a){if((Ze&6)!==0)throw Error(i(327));var f=!a&&(r&124)===0&&(r&o.expiredLanes)===0||lr(o,r),y=f?HA(o,r):vh(o,r,!0),v=f;do{if(y===0){Vs&&!f&&ko(o,r,0,!1);break}else{if(a=o.current.alternate,v&&!qA(a)){y=vh(o,r,!1),v=!1;continue}if(y===2){if(v=r,o.errorRecoveryDisabledLanes&v)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var I=o;y=pl;var P=I.current.memoizedState.isDehydrated;if(P&&(Fs(I,A).flags|=256),A=vh(I,A,!1),A!==2){if(ch&&!P){I.errorRecoveryDisabledLanes|=v,Ur|=v,y=4;break e}v=mn,mn=y,v!==null&&(mn===null?mn=v:mn.push.apply(mn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Fs(o,0),ko(o,r,0,!0);break}e:{switch(f=o,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ko(f,r,Un,!bo);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=hh+300-Xe(),10<y)){if(ko(f,r,Un,!bo),ns(f,0,!0)!==0)break e;f.timeoutHandle=N_(i_.bind(null,f,a,mn,pc,dh,r,Un,Ur,Us,bo,v,2,-0,0),y);break e}i_(f,a,mn,pc,dh,r,Un,Ur,Us,bo,v,0,-0,0)}}break}while(!0);yi(o)}function i_(o,r,a,f,y,v,A,I,P,Y,ee,ne,$,Q){if(o.timeoutHandle=-1,ne=r.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Cl={stylesheets:null,count:0,unsuspend:EI},Xy(r),ne=CI(),ne!==null)){o.cancelPendingCommit=ne(c_.bind(null,o,r,v,a,f,y,A,I,P,ee,1,$,Q)),ko(o,v,A,!Y);return}c_(o,r,v,a,f,y,A,I,P)}function qA(o){for(var r=o;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var f=0;f<a.length;f++){var y=a[f],v=y.getSnapshot;y=y.value;try{if(!_n(v(),y))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===o)break;for(;r.sibling===null;){if(r.return===null||r.return===o)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ko(o,r,a,f){r&=~fh,r&=~Ur,o.suspendedLanes|=r,o.pingedLanes&=~r,f&&(o.warmLanes|=r),f=o.expirationTimes;for(var y=r;0<y;){var v=31-Zt(y),A=1<<v;f[v]=-1,y&=~A}a!==0&&ni(o,a,r)}function gc(){return(Ze&6)===0?(yl(0),!1):!0}function yh(){if(Ve!==null){if(je===0)var o=Ve.return;else o=Ve,Ki=br=null,kd(o),Ns=null,al=0,o=Ve;for(;o!==null;)Uy(o.alternate,o),o=o.return;Ve=null}}function Fs(o,r){var a=o.timeoutHandle;a!==-1&&(o.timeoutHandle=-1,oI(a)),a=o.cancelPendingCommit,a!==null&&(o.cancelPendingCommit=null,a()),yh(),lt=o,Ve=a=zi(o.current,null),Ge=r,je=0,Sn=null,bo=!1,Vs=lr(o,r),ch=!1,Us=Un=fh=Ur=No=_t=0,mn=pl=null,dh=!1,(r&8)!==0&&(r|=r&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=r;0<f;){var y=31-Zt(f),v=1<<y;r|=o[y],f&=~v}return to=r,Ou(),a}function o_(o,r){De=null,j.H=ic,r===Za||r===Ku?(r=Eg(),je=3):r===_g?(r=Eg(),je=4):je=r===Sy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Sn=r,Ve===null&&(_t=1,lc(o,Nn(r,o.current)))}function r_(){var o=j.H;return j.H=ic,o===null?ic:o}function s_(){var o=j.A;return j.A=OA,o}function _h(){_t=4,bo||(Ge&4194048)!==Ge&&Vn.current!==null||(Vs=!0),(No&134217727)===0&&(Ur&134217727)===0||lt===null||ko(lt,Ge,Un,!1)}function vh(o,r,a){var f=Ze;Ze|=2;var y=r_(),v=s_();(lt!==o||Ge!==r)&&(pc=null,Fs(o,r)),r=!1;var A=_t;e:do try{if(je!==0&&Ve!==null){var I=Ve,P=Sn;switch(je){case 8:yh(),A=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(r=!0);var Y=je;if(je=0,Sn=null,qs(o,I,P,Y),a&&Vs){A=0;break e}break;default:Y=je,je=0,Sn=null,qs(o,I,P,Y)}}BA(),A=_t;break}catch(ee){o_(o,ee)}while(!0);return r&&o.shellSuspendCounter++,Ki=br=null,Ze=f,j.H=y,j.A=v,Ve===null&&(lt=null,Ge=0,Ou()),A}function BA(){for(;Ve!==null;)a_(Ve)}function HA(o,r){var a=Ze;Ze|=2;var f=r_(),y=s_();lt!==o||Ge!==r?(pc=null,mc=Xe()+500,Fs(o,r)):Vs=lr(o,r);e:do try{if(je!==0&&Ve!==null){r=Ve;var v=Sn;t:switch(je){case 1:je=0,Sn=null,qs(o,r,v,1);break;case 2:case 9:if(vg(v)){je=0,Sn=null,l_(r);break}r=function(){je!==2&&je!==9||lt!==o||(je=7),yi(o)},v.then(r,r);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:vg(v)?(je=0,Sn=null,l_(r)):(je=0,Sn=null,qs(o,r,v,7));break;case 5:var A=null;switch(Ve.tag){case 26:A=Ve.memoizedState;case 5:case 27:var I=Ve;if(!A||G_(A)){je=0,Sn=null;var P=I.sibling;if(P!==null)Ve=P;else{var Y=I.return;Y!==null?(Ve=Y,yc(Y)):Ve=null}break t}}je=0,Sn=null,qs(o,r,v,5);break;case 6:je=0,Sn=null,qs(o,r,v,6);break;case 8:yh(),_t=6;break e;default:throw Error(i(462))}}GA();break}catch(ee){o_(o,ee)}while(!0);return Ki=br=null,j.H=f,j.A=y,Ze=a,Ve!==null?0:(lt=null,Ge=0,Ou(),_t)}function GA(){for(;Ve!==null&&!we();)a_(Ve)}function a_(o){var r=ky(o.alternate,o,to);o.memoizedProps=o.pendingProps,r===null?yc(o):Ve=r}function l_(o){var r=o,a=r.alternate;switch(r.tag){case 15:case 0:r=My(a,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=My(a,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:kd(r);default:Uy(a,r),r=Ve=ug(r,to),r=ky(a,r,to)}o.memoizedProps=o.pendingProps,r===null?yc(o):Ve=r}function qs(o,r,a,f){Ki=br=null,kd(r),Ns=null,al=0;var y=r.return;try{if(DA(o,y,r,a,Ge)){_t=1,lc(o,Nn(a,o.current)),Ve=null;return}}catch(v){if(y!==null)throw Ve=y,v;_t=1,lc(o,Nn(a,o.current)),Ve=null;return}r.flags&32768?($e||f===1?o=!0:Vs||(Ge&536870912)!==0?o=!1:(bo=o=!0,(f===2||f===9||f===3||f===6)&&(f=Vn.current,f!==null&&f.tag===13&&(f.flags|=16384))),u_(r,o)):yc(r)}function yc(o){var r=o;do{if((r.flags&32768)!==0){u_(r,bo);return}o=r.return;var a=kA(r.alternate,r,to);if(a!==null){Ve=a;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=o}while(r!==null);_t===0&&(_t=5)}function u_(o,r){do{var a=VA(o.alternate,o);if(a!==null){a.flags&=32767,Ve=a;return}if(a=o.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(o=o.sibling,o!==null)){Ve=o;return}Ve=o=a}while(o!==null);_t=6,Ve=null}function c_(o,r,a,f,y,v,A,I,P){o.cancelPendingCommit=null;do _c();while(Kt!==0);if((Ze&6)!==0)throw Error(i(327));if(r!==null){if(r===o.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=ud,wa(o,a,v,A,I,P),o===lt&&(Ve=lt=null,Ge=0),Ls=r,Po=o,Os=a,mh=v,ph=y,e_=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,KA(ti,function(){return p_(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=j.T,j.T=null,y=ue.p,ue.p=2,A=Ze,Ze|=4;try{UA(o,r,a)}finally{Ze=A,ue.p=y,j.T=f}}Kt=1,f_(),d_(),h_()}}function f_(){if(Kt===1){Kt=0;var o=Po,r=Ls,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var f=ue.p;ue.p=2;var y=Ze;Ze|=4;try{Ky(r,o);var v=Nh,A=jp(o.containerInfo),I=v.focusedElem,P=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&Zp(I.ownerDocument.documentElement,I)){if(P!==null&&od(I)){var Y=P.start,ee=P.end;if(ee===void 0&&(ee=Y),"selectionStart"in I)I.selectionStart=Y,I.selectionEnd=Math.min(ee,I.value.length);else{var ne=I.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var Q=$.getSelection(),Ie=I.textContent.length,Ee=Math.min(P.start,Ie),rt=P.end===void 0?Ee:Math.min(P.end,Ie);!Q.extend&&Ee>rt&&(A=rt,rt=Ee,Ee=A);var B=Wp(I,Ee),F=Wp(I,rt);if(B&&F&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==F.node||Q.focusOffset!==F.offset)){var z=ne.createRange();z.setStart(B.node,B.offset),Q.removeAllRanges(),Ee>rt?(Q.addRange(z),Q.extend(F.node,F.offset)):(z.setEnd(F.node,F.offset),Q.addRange(z))}}}}for(ne=[],Q=I;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ne.length;I++){var te=ne[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}bc=!!bh,Nh=bh=null}finally{Ze=y,ue.p=f,j.T=a}}o.current=r,Kt=2}}function d_(){if(Kt===2){Kt=0;var o=Po,r=Ls,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var f=ue.p;ue.p=2;var y=Ze;Ze|=4;try{Gy(o,r.alternate,r)}finally{Ze=y,ue.p=f,j.T=a}}Kt=3}}function h_(){if(Kt===4||Kt===3){Kt=0,st();var o=Po,r=Ls,a=Os,f=e_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,Ls=Po=null,m_(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(Do=null),is(a),r=r.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(gt,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=j.T,y=ue.p,ue.p=2,j.T=null;try{for(var v=o.onRecoverableError,A=0;A<f.length;A++){var I=f[A];v(I.value,{componentStack:I.stack})}}finally{j.T=r,ue.p=y}}(Os&3)!==0&&_c(),yi(o),y=o.pendingLanes,(a&4194090)!==0&&(y&42)!==0?o===gh?gl++:(gl=0,gh=o):gl=0,yl(0)}}function m_(o,r){(o.pooledCacheLanes&=r)===0&&(r=o.pooledCache,r!=null&&(o.pooledCache=null,Xa(r)))}function _c(o){return f_(),d_(),h_(),p_()}function p_(){if(Kt!==5)return!1;var o=Po,r=mh;mh=0;var a=is(Os),f=j.T,y=ue.p;try{ue.p=32>a?32:a,j.T=null,a=ph,ph=null;var v=Po,A=Os;if(Kt=0,Ls=Po=null,Os=0,(Ze&6)!==0)throw Error(i(331));var I=Ze;if(Ze|=4,Zy(v.current),Qy(v,v.current,A,a),Ze=I,yl(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(gt,v)}catch{}return!0}finally{ue.p=y,j.T=f,m_(o,r)}}function g_(o,r,a){r=Nn(a,r),r=Jd(o.stateNode,r,2),o=Co(o,r,2),o!==null&&(Pi(o,2),yi(o))}function at(o,r,a){if(o.tag===3)g_(o,o,a);else for(;r!==null;){if(r.tag===3){g_(r,o,a);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Do===null||!Do.has(f))){o=Nn(a,o),a=Ty(2),f=Co(r,a,2),f!==null&&(Ey(a,f,r,o),Pi(f,2),yi(f));break}}r=r.return}}function Th(o,r,a){var f=o.pingCache;if(f===null){f=o.pingCache=new FA;var y=new Set;f.set(r,y)}else y=f.get(r),y===void 0&&(y=new Set,f.set(r,y));y.has(a)||(ch=!0,y.add(a),o=zA.bind(null,o,r,a),r.then(o,o))}function zA(o,r,a){var f=o.pingCache;f!==null&&f.delete(r),o.pingedLanes|=o.suspendedLanes&a,o.warmLanes&=~a,lt===o&&(Ge&a)===a&&(_t===4||_t===3&&(Ge&62914560)===Ge&&300>Xe()-hh?(Ze&2)===0&&Fs(o,0):fh|=a,Us===Ge&&(Us=0)),yi(o)}function y_(o,r){r===0&&(r=Ra()),o=Es(o,r),o!==null&&(Pi(o,r),yi(o))}function YA(o){var r=o.memoizedState,a=0;r!==null&&(a=r.retryLane),y_(o,a)}function $A(o,r){var a=0;switch(o.tag){case 13:var f=o.stateNode,y=o.memoizedState;y!==null&&(a=y.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(r),y_(o,a)}function KA(o,r){return xi(o,r)}var vc=null,Bs=null,Eh=!1,Tc=!1,Sh=!1,Lr=0;function yi(o){o!==Bs&&o.next===null&&(Bs===null?vc=Bs=o:Bs=Bs.next=o),Tc=!0,Eh||(Eh=!0,QA())}function yl(o,r){if(!Sh&&Tc){Sh=!0;do for(var a=!1,f=vc;f!==null;){if(o!==0){var y=f.pendingLanes;if(y===0)var v=0;else{var A=f.suspendedLanes,I=f.pingedLanes;v=(1<<31-Zt(42|o)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,E_(f,v))}else v=Ge,v=ns(f,f===lt?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||lr(f,v)||(a=!0,E_(f,v));f=f.next}while(a);Sh=!1}}function JA(){__()}function __(){Tc=Eh=!1;var o=0;Lr!==0&&(iI()&&(o=Lr),Lr=0);for(var r=Xe(),a=null,f=vc;f!==null;){var y=f.next,v=v_(f,r);v===0?(f.next=null,a===null?vc=y:a.next=y,y===null&&(Bs=a)):(a=f,(o!==0||(v&3)!==0)&&(Tc=!0)),f=y}yl(o)}function v_(o,r){for(var a=o.suspendedLanes,f=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var A=31-Zt(v),I=1<<A,P=y[A];P===-1?((I&a)===0||(I&f)!==0)&&(y[A]=Aa(I,r)):P<=r&&(o.expiredLanes|=I),v&=~I}if(r=lt,a=Ge,a=ns(o,o===r?a:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,a===0||o===r&&(je===2||je===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&bi(f),o.callbackNode=null,o.callbackPriority=0;if((a&3)===0||lr(o,a)){if(r=a&-a,r===o.callbackPriority)return r;switch(f!==null&&bi(f),is(a)){case 2:case 8:a=Ni;break;case 32:a=ti;break;case 268435456:a=ts;break;default:a=ti}return f=T_.bind(null,o),a=xi(a,f),o.callbackPriority=r,o.callbackNode=a,r}return f!==null&&f!==null&&bi(f),o.callbackPriority=2,o.callbackNode=null,2}function T_(o,r){if(Kt!==0&&Kt!==5)return o.callbackNode=null,o.callbackPriority=0,null;var a=o.callbackNode;if(_c()&&o.callbackNode!==a)return null;var f=Ge;return f=ns(o,o===lt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:(n_(o,f,r),v_(o,Xe()),o.callbackNode!=null&&o.callbackNode===a?T_.bind(null,o):null)}function E_(o,r){if(_c())return null;n_(o,r,!0)}function QA(){rI(function(){(Ze&6)!==0?xi(or,JA):__()})}function Ch(){return Lr===0&&(Lr=Ia()),Lr}function S_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:us(""+o)}function C_(o,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,o.id&&a.setAttribute("form",o.id),r.parentNode.insertBefore(a,r),o=new FormData(o),a.parentNode.removeChild(a),o}function XA(o,r,a,f,y){if(r==="submit"&&a&&a.stateNode===y){var v=S_((y[At]||null).action),A=f.submitter;A&&(r=(r=A[At]||null)?S_(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var I=new cs("action","action",null,f,y);o.push({event:I,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Lr!==0){var P=A?C_(y,A):new FormData(y);Gd(a,{pending:!0,data:P,method:y.method,action:v},null,P)}}else typeof v=="function"&&(I.preventDefault(),P=A?C_(y,A):new FormData(y),Gd(a,{pending:!0,data:P,method:y.method,action:v},v,P))},currentTarget:y}]})}}for(var Ah=0;Ah<ld.length;Ah++){var Ih=ld[Ah],WA=Ih.toLowerCase(),ZA=Ih[0].toUpperCase()+Ih.slice(1);$n(WA,"on"+ZA)}$n(ng,"onAnimationEnd"),$n(ig,"onAnimationIteration"),$n(og,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(pA,"onTransitionRun"),$n(gA,"onTransitionStart"),$n(yA,"onTransitionCancel"),$n(rg,"onTransitionEnd"),Vi("onMouseEnter",["mouseout","mouseover"]),Vi("onMouseLeave",["mouseout","mouseover"]),Vi("onPointerEnter",["pointerout","pointerover"]),Vi("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function A_(o,r){r=(r&4)!==0;for(var a=0;a<o.length;a++){var f=o[a],y=f.event;f=f.listeners;e:{var v=void 0;if(r)for(var A=f.length-1;0<=A;A--){var I=f[A],P=I.instance,Y=I.currentTarget;if(I=I.listener,P!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=Y;try{v(y)}catch(ee){ac(ee)}y.currentTarget=null,v=P}else for(A=0;A<f.length;A++){if(I=f[A],P=I.instance,Y=I.currentTarget,I=I.listener,P!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=Y;try{v(y)}catch(ee){ac(ee)}y.currentTarget=null,v=P}}}}function Ue(o,r){var a=r[xa];a===void 0&&(a=r[xa]=new Set);var f=o+"__bubble";a.has(f)||(I_(r,o,2,!1),a.add(f))}function Rh(o,r,a){var f=0;r&&(f|=4),I_(a,o,f,r)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function wh(o){if(!o[Ec]){o[Ec]=!0,ba.forEach(function(a){a!=="selectionchange"&&(jA.has(a)||Rh(a,!1,o),Rh(a,!0,o))});var r=o.nodeType===9?o:o.ownerDocument;r===null||r[Ec]||(r[Ec]=!0,Rh("selectionchange",!1,r))}}function I_(o,r,a,f){switch(Q_(r)){case 2:var y=RI;break;case 8:y=wI;break;default:y=Bh}a=y.bind(null,r,a,o),y=void 0,!xn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),f?y!==void 0?o.addEventListener(r,a,{capture:!0,passive:y}):o.addEventListener(r,a,!0):y!==void 0?o.addEventListener(r,a,{passive:y}):o.addEventListener(r,a,!1)}function Mh(o,r,a,f,y){var v=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var I=f.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=f.return;A!==null;){var P=A.tag;if((P===3||P===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=ki(I),A===null)return;if(P=A.tag,P===5||P===6||P===26||P===27){f=v=A;continue e}I=I.parentNode}}f=f.return}Cu(function(){var Y=v,ee=Mn(a),ne=[];e:{var $=sg.get(o);if($!==void 0){var Q=cs,Ie=o;switch(o){case"keypress":if(li(a)===0)break e;case"keydown":case"keyup":Q=gs;break;case"focusin":Ie="focus",Q=hs;break;case"focusout":Ie="blur",Q=hs;break;case"beforeblur":case"afterblur":Q=hs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=ed;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Nu;break;case ng:case ig:case og:Q=ms;break;case rg:Q=Pu;break;case"scroll":case"scrollend":Q=Au;break;case"wheel":Q=ys;break;case"copy":case"cut":case"paste":Q=ps;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Ha;break;case"toggle":case"beforetoggle":Q=Vu}var Ee=(r&4)!==0,rt=!Ee&&(o==="scroll"||o==="scrollend"),B=Ee?$!==null?$+"Capture":null:$;Ee=[];for(var F=Y,z;F!==null;){var te=F;if(z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||z===null||B===null||(te=gr(F,B),te!=null&&Ee.push(vl(F,te,z))),rt)break;F=F.return}0<Ee.length&&($=new Q($,Ie,null,a,ee),ne.push({event:$,listeners:Ee}))}}if((r&7)===0){e:{if($=o==="mouseover"||o==="pointerover",Q=o==="mouseout"||o==="pointerout",$&&a!==Oi&&(Ie=a.relatedTarget||a.fromElement)&&(ki(Ie)||Ie[Rn]))break e;if((Q||$)&&($=ee.window===ee?ee:($=ee.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(Ie=a.relatedTarget||a.toElement,Q=Y,Ie=Ie?ki(Ie):null,Ie!==null&&(rt=l(Ie),Ee=Ie.tag,Ie!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(Ie=null)):(Q=null,Ie=Y),Q!==Ie)){if(Ee=bn,te="onMouseLeave",B="onMouseEnter",F="mouse",(o==="pointerout"||o==="pointerover")&&(Ee=Ha,te="onPointerLeave",B="onPointerEnter",F="pointer"),rt=Q==null?$:oi(Q),z=Ie==null?$:oi(Ie),$=new Ee(te,F+"leave",Q,a,ee),$.target=rt,$.relatedTarget=z,te=null,ki(ee)===Y&&(Ee=new Ee(B,F+"enter",Ie,a,ee),Ee.target=z,Ee.relatedTarget=rt,te=Ee),rt=te,Q&&Ie)t:{for(Ee=Q,B=Ie,F=0,z=Ee;z;z=Hs(z))F++;for(z=0,te=B;te;te=Hs(te))z++;for(;0<F-z;)Ee=Hs(Ee),F--;for(;0<z-F;)B=Hs(B),z--;for(;F--;){if(Ee===B||B!==null&&Ee===B.alternate)break t;Ee=Hs(Ee),B=Hs(B)}Ee=null}else Ee=null;Q!==null&&R_(ne,$,Q,Ee,!1),Ie!==null&&rt!==null&&R_(ne,rt,Ie,Ee,!0)}}e:{if($=Y?oi(Y):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var me=Yp;else if(Dt($))if($p)me=dA;else{me=cA;var Pe=uA}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Va(Y.elementType)&&(me=Yp):me=fA;if(me&&(me=me(o,Y))){Gi(ne,me,a,ee);break e}Pe&&Pe(o,$,Y),o==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&_o($,"number",$.value)}switch(Pe=Y?oi(Y):window,o){case"focusin":(Dt(Pe)||Pe.contentEditable==="true")&&(_s=Pe,rd=Y,Ya=null);break;case"focusout":Ya=rd=_s=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,eg(ne,a,ee);break;case"selectionchange":if(mA)break;case"keydown":case"keyup":eg(ne,a,ee)}var ge;if(fi)e:{switch(o){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Be?Z(o,a)&&(Se="onCompositionEnd"):o==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(C&&a.locale!=="ko"&&(Be||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Be&&(ge=La()):(ai=ee,vo="value"in ai?ai.value:ai.textContent,Be=!0)),Pe=Sc(Y,Se),0<Pe.length&&(Se=new qa(Se,o,null,a,ee),ne.push({event:Se,listeners:Pe}),ge?Se.data=ge:(ge=ce(a),ge!==null&&(Se.data=ge)))),(ge=T?Nt(o,a):He(o,a))&&(Se=Sc(Y,"onBeforeInput"),0<Se.length&&(Pe=new qa("onBeforeInput","beforeinput",null,a,ee),ne.push({event:Pe,listeners:Se}),Pe.data=ge)),XA(ne,o,Y,a,ee)}A_(ne,r)})}function vl(o,r,a){return{instance:o,listener:r,currentTarget:a}}function Sc(o,r){for(var a=r+"Capture",f=[];o!==null;){var y=o,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=gr(o,a),y!=null&&f.unshift(vl(o,y,v)),y=gr(o,r),y!=null&&f.push(vl(o,y,v))),o.tag===3)return f;o=o.return}return[]}function Hs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function R_(o,r,a,f,y){for(var v=r._reactName,A=[];a!==null&&a!==f;){var I=a,P=I.alternate,Y=I.stateNode;if(I=I.tag,P!==null&&P===f)break;I!==5&&I!==26&&I!==27||Y===null||(P=Y,y?(Y=gr(a,v),Y!=null&&A.unshift(vl(a,Y,P))):y||(Y=gr(a,v),Y!=null&&A.push(vl(a,Y,P)))),a=a.return}A.length!==0&&o.push({event:r,listeners:A})}var eI=/\r\n?/g,tI=/\u0000|\uFFFD/g;function w_(o){return(typeof o=="string"?o:""+o).replace(eI,`
`).replace(tI,"")}function M_(o,r){return r=w_(r),w_(o)===r}function Cc(){}function ot(o,r,a,f,y,v){switch(a){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||wn(o,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&wn(o,""+f);break;case"className":ri(o,"class",f);break;case"tabIndex":ri(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(o,a,f);break;case"style":ka(o,f,v);break;case"data":if(r!=="object"){ri(o,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||a!=="href")){o.removeAttribute(a);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(a);break}f=us(""+f),o.setAttribute(a,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(r!=="input"&&ot(o,r,"name",y.name,y,null),ot(o,r,"formEncType",y.formEncType,y,null),ot(o,r,"formMethod",y.formMethod,y,null),ot(o,r,"formTarget",y.formTarget,y,null)):(ot(o,r,"encType",y.encType,y,null),ot(o,r,"method",y.method,y,null),ot(o,r,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(a);break}f=us(""+f),o.setAttribute(a,f);break;case"onClick":f!=null&&(o.onclick=Cc);break;case"onScroll":f!=null&&Ue("scroll",o);break;case"onScrollEnd":f!=null&&Ue("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=a}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}a=us(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,""+f):o.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,""):o.removeAttribute(a);break;case"capture":case"download":f===!0?o.setAttribute(a,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(a,f):o.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(a,f):o.removeAttribute(a);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(a):o.setAttribute(a,f);break;case"popover":Ue("beforetoggle",o),Ue("toggle",o),yo(o,"popover",f);break;case"xlinkActuate":zt(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":zt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":zt(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":zt(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":zt(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":zt(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":zt(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":zt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":zt(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":yo(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Zf.get(a)||a,yo(o,a,f))}}function xh(o,r,a,f,y,v){switch(a){case"style":ka(o,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=a}}break;case"children":typeof f=="string"?wn(o,f):(typeof f=="number"||typeof f=="bigint")&&wn(o,""+f);break;case"onScroll":f!=null&&Ue("scroll",o);break;case"onScrollEnd":f!=null&&Ue("scrollend",o);break;case"onClick":f!=null&&(o.onclick=Cc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!os.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),r=a.slice(2,y?a.length-7:void 0),v=o[At]||null,v=v!=null?v[a]:null,typeof v=="function"&&o.removeEventListener(r,v,y),typeof f=="function")){typeof v!="function"&&v!==null&&(a in o?o[a]=null:o.hasAttribute(a)&&o.removeAttribute(a)),o.addEventListener(r,f,y);break e}a in o?o[a]=f:f===!0?o.setAttribute(a,""):yo(o,a,f)}}}function Jt(o,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",o),Ue("load",o);var f=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(o,r,v,A,a,null)}}y&&ot(o,r,"srcSet",a.srcSet,a,null),f&&ot(o,r,"src",a.src,a,null);return;case"input":Ue("invalid",o);var I=v=A=y=null,P=null,Y=null;for(f in a)if(a.hasOwnProperty(f)){var ee=a[f];if(ee!=null)switch(f){case"name":y=ee;break;case"type":A=ee;break;case"checked":P=ee;break;case"defaultChecked":Y=ee;break;case"value":v=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,r));break;default:ot(o,r,f,ee,a,null)}}hr(o,v,I,P,Y,A,y,!1),ls(o);return;case"select":Ue("invalid",o),f=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":f=I;default:ot(o,r,y,I,a,null)}r=v,a=A,o.multiple=!!f,r!=null?Li(o,!!f,r,!1):a!=null&&Li(o,!!f,a,!0);return;case"textarea":Ue("invalid",o),v=y=f=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":f=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:ot(o,r,A,I,a,null)}mr(o,f,y,v),ls(o);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(f=a[P],f!=null))switch(P){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ot(o,r,P,f,a,null)}return;case"dialog":Ue("beforetoggle",o),Ue("toggle",o),Ue("cancel",o),Ue("close",o);break;case"iframe":case"object":Ue("load",o);break;case"video":case"audio":for(f=0;f<_l.length;f++)Ue(_l[f],o);break;case"image":Ue("error",o),Ue("load",o);break;case"details":Ue("toggle",o);break;case"embed":case"source":case"link":Ue("error",o),Ue("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(f=a[Y],f!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(o,r,Y,f,a,null)}return;default:if(Va(r)){for(ee in a)a.hasOwnProperty(ee)&&(f=a[ee],f!==void 0&&xh(o,r,ee,f,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(f=a[I],f!=null&&ot(o,r,I,f,a,null))}function nI(o,r,a,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,P=null,Y=null,ee=null;for(Q in a){var ne=a[Q];if(a.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":P=ne;default:f.hasOwnProperty(Q)||ot(o,r,Q,null,f,ne)}}for(var $ in f){var Q=f[$];if(ne=a[$],f.hasOwnProperty($)&&(Q!=null||ne!=null))switch($){case"type":v=Q;break;case"name":y=Q;break;case"checked":Y=Q;break;case"defaultChecked":ee=Q;break;case"value":A=Q;break;case"defaultValue":I=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ne&&ot(o,r,$,Q,f,ne)}}yn(o,A,I,P,Y,ee,v,y);return;case"select":Q=A=I=$=null;for(v in a)if(P=a[v],a.hasOwnProperty(v)&&P!=null)switch(v){case"value":break;case"multiple":Q=P;default:f.hasOwnProperty(v)||ot(o,r,v,null,f,P)}for(y in f)if(v=f[y],P=a[y],f.hasOwnProperty(y)&&(v!=null||P!=null))switch(y){case"value":$=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==P&&ot(o,r,y,v,f,P)}r=I,a=A,f=Q,$!=null?Li(o,!!a,$,!1):!!f!=!!a&&(r!=null?Li(o,!!a,r,!0):Li(o,!!a,a?[]:"",!1));return;case"textarea":Q=$=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!f.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ot(o,r,I,null,f,y)}for(A in f)if(y=f[A],v=a[A],f.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":$=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&ot(o,r,A,y,f,v)}nt(o,$,Q);return;case"option":for(var Ie in a)if($=a[Ie],a.hasOwnProperty(Ie)&&$!=null&&!f.hasOwnProperty(Ie))switch(Ie){case"selected":o.selected=!1;break;default:ot(o,r,Ie,null,f,$)}for(P in f)if($=f[P],Q=a[P],f.hasOwnProperty(P)&&$!==Q&&($!=null||Q!=null))switch(P){case"selected":o.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ot(o,r,P,$,f,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)$=a[Ee],a.hasOwnProperty(Ee)&&$!=null&&!f.hasOwnProperty(Ee)&&ot(o,r,Ee,null,f,$);for(Y in f)if($=f[Y],Q=a[Y],f.hasOwnProperty(Y)&&$!==Q&&($!=null||Q!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:ot(o,r,Y,$,f,Q)}return;default:if(Va(r)){for(var rt in a)$=a[rt],a.hasOwnProperty(rt)&&$!==void 0&&!f.hasOwnProperty(rt)&&xh(o,r,rt,void 0,f,$);for(ee in f)$=f[ee],Q=a[ee],!f.hasOwnProperty(ee)||$===Q||$===void 0&&Q===void 0||xh(o,r,ee,$,f,Q);return}}for(var B in a)$=a[B],a.hasOwnProperty(B)&&$!=null&&!f.hasOwnProperty(B)&&ot(o,r,B,null,f,$);for(ne in f)$=f[ne],Q=a[ne],!f.hasOwnProperty(ne)||$===Q||$==null&&Q==null||ot(o,r,ne,$,f,Q)}var bh=null,Nh=null;function Ac(o){return o.nodeType===9?o:o.ownerDocument}function x_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b_(o,r){if(o===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&r==="foreignObject"?0:o}function Dh(o,r){return o==="textarea"||o==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ph=null;function iI(){var o=window.event;return o&&o.type==="popstate"?o===Ph?!1:(Ph=o,!0):(Ph=null,!1)}var N_=typeof setTimeout=="function"?setTimeout:void 0,oI=typeof clearTimeout=="function"?clearTimeout:void 0,D_=typeof Promise=="function"?Promise:void 0,rI=typeof queueMicrotask=="function"?queueMicrotask:typeof D_<"u"?function(o){return D_.resolve(null).then(o).catch(sI)}:N_;function sI(o){setTimeout(function(){throw o})}function Vo(o){return o==="head"}function P_(o,r){var a=r,f=0,y=0;do{var v=a.nextSibling;if(o.removeChild(a),v&&v.nodeType===8)if(a=v.data,a==="/$"){if(0<f&&8>f){a=f;var A=o.ownerDocument;if(a&1&&Tl(A.documentElement),a&2&&Tl(A.body),a&4)for(a=A.head,Tl(a),A=a.firstChild;A;){var I=A.nextSibling,P=A.nodeName;A[ur]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&A.rel.toLowerCase()==="stylesheet"||a.removeChild(A),A=I}}if(y===0){o.removeChild(v),Ml(r);return}y--}else a==="$"||a==="$?"||a==="$!"?y++:f=a.charCodeAt(0)-48;else f=0;a=v}while(a);Ml(r)}function kh(o){var r=o.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kh(a),go(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}o.removeChild(a)}}function aI(o,r,a,f){for(;o.nodeType===1;){var y=a;if(o.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[ur])switch(r){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(r==="input"&&o.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=Jn(o.nextSibling),o===null)break}return null}function lI(o,r,a){if(r==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!a||(o=Jn(o.nextSibling),o===null))return null;return o}function Vh(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function uI(o,r){var a=o.ownerDocument;if(o.data!=="$?"||a.readyState==="complete")r();else{var f=function(){r(),a.removeEventListener("DOMContentLoaded",f)};a.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function Jn(o){for(;o!=null;o=o.nextSibling){var r=o.nodeType;if(r===1||r===3)break;if(r===8){if(r=o.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return o}var Uh=null;function k_(o){o=o.previousSibling;for(var r=0;o;){if(o.nodeType===8){var a=o.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return o;r--}else a==="/$"&&r++}o=o.previousSibling}return null}function V_(o,r,a){switch(r=Ac(a),o){case"html":if(o=r.documentElement,!o)throw Error(i(452));return o;case"head":if(o=r.head,!o)throw Error(i(453));return o;case"body":if(o=r.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Tl(o){for(var r=o.attributes;r.length;)o.removeAttributeNode(r[0]);go(o)}var Ln=new Map,U_=new Set;function Ic(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var no=ue.d;ue.d={f:cI,r:fI,D:dI,C:hI,L:mI,m:pI,X:yI,S:gI,M:_I};function cI(){var o=no.f(),r=gc();return o||r}function fI(o){var r=ii(o);r!==null&&r.tag===5&&r.type==="form"?ny(r):no.r(o)}var Gs=typeof document>"u"?null:document;function L_(o,r,a){var f=Gs;if(f&&typeof r=="string"&&r){var y=It(r);y='link[rel="'+o+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),U_.has(y)||(U_.add(y),o={rel:o,crossOrigin:a,href:r},f.querySelector(y)===null&&(r=f.createElement("link"),Jt(r,"link",o),vt(r),f.head.appendChild(r)))}}function dI(o){no.D(o),L_("dns-prefetch",o,null)}function hI(o,r){no.C(o,r),L_("preconnect",o,r)}function mI(o,r,a){no.L(o,r,a);var f=Gs;if(f&&o&&r){var y='link[rel="preload"][as="'+It(r)+'"]';r==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+It(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+It(a.imageSizes)+'"]')):y+='[href="'+It(o)+'"]';var v=y;switch(r){case"style":v=zs(o);break;case"script":v=Ys(o)}Ln.has(v)||(o=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:o,as:r},a),Ln.set(v,o),f.querySelector(y)!==null||r==="style"&&f.querySelector(El(v))||r==="script"&&f.querySelector(Sl(v))||(r=f.createElement("link"),Jt(r,"link",o),vt(r),f.head.appendChild(r)))}}function pI(o,r){no.m(o,r);var a=Gs;if(a&&o){var f=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+It(f)+'"][href="'+It(o)+'"]',v=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ys(o)}if(!Ln.has(v)&&(o=_({rel:"modulepreload",href:o},r),Ln.set(v,o),a.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(v)))return}f=a.createElement("link"),Jt(f,"link",o),vt(f),a.head.appendChild(f)}}}function gI(o,r,a){no.S(o,r,a);var f=Gs;if(f&&o){var y=an(f).hoistableStyles,v=zs(o);r=r||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=f.querySelector(El(v)))I.loading=5;else{o=_({rel:"stylesheet",href:o,"data-precedence":r},a),(a=Ln.get(v))&&Lh(o,a);var P=A=f.createElement("link");vt(P),Jt(P,"link",o),P._p=new Promise(function(Y,ee){P.onload=Y,P.onerror=ee}),P.addEventListener("load",function(){I.loading|=1}),P.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Rc(A,r,f)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function yI(o,r){no.X(o,r);var a=Gs;if(a&&o){var f=an(a).hoistableScripts,y=Ys(o),v=f.get(y);v||(v=a.querySelector(Sl(y)),v||(o=_({src:o,async:!0},r),(r=Ln.get(y))&&Oh(o,r),v=a.createElement("script"),vt(v),Jt(v,"link",o),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(y,v))}}function _I(o,r){no.M(o,r);var a=Gs;if(a&&o){var f=an(a).hoistableScripts,y=Ys(o),v=f.get(y);v||(v=a.querySelector(Sl(y)),v||(o=_({src:o,async:!0,type:"module"},r),(r=Ln.get(y))&&Oh(o,r),v=a.createElement("script"),vt(v),Jt(v,"link",o),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(y,v))}}function O_(o,r,a,f){var y=(y=Ae.current)?Ic(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=zs(a.href),a=an(y).hoistableStyles,f=a.get(r),f||(f={type:"style",instance:null,count:0,state:null},a.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){o=zs(a.href);var v=an(y).hoistableStyles,A=v.get(o);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,A),(v=y.querySelector(El(o)))&&!v._p&&(A.instance=v,A.state.loading=5),Ln.has(o)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(o,a),v||vI(y,o,a,A.state))),r&&f===null)throw Error(i(528,""));return A}if(r&&f!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ys(a),a=an(y).hoistableScripts,f=a.get(r),f||(f={type:"script",instance:null,count:0,state:null},a.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function zs(o){return'href="'+It(o)+'"'}function El(o){return'link[rel="stylesheet"]['+o+"]"}function F_(o){return _({},o,{"data-precedence":o.precedence,precedence:null})}function vI(o,r,a,f){o.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=o.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),Jt(r,"link",a),vt(r),o.head.appendChild(r))}function Ys(o){return'[src="'+It(o)+'"]'}function Sl(o){return"script[async]"+o}function q_(o,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var f=o.querySelector('style[data-href~="'+It(a.href)+'"]');if(f)return r.instance=f,vt(f),f;var y=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),vt(f),Jt(f,"style",y),Rc(f,a.precedence,o),r.instance=f;case"stylesheet":y=zs(a.href);var v=o.querySelector(El(y));if(v)return r.state.loading|=4,r.instance=v,vt(v),v;f=F_(a),(y=Ln.get(y))&&Lh(f,y),v=(o.ownerDocument||o).createElement("link"),vt(v);var A=v;return A._p=new Promise(function(I,P){A.onload=I,A.onerror=P}),Jt(v,"link",f),r.state.loading|=4,Rc(v,a.precedence,o),r.instance=v;case"script":return v=Ys(a.src),(y=o.querySelector(Sl(v)))?(r.instance=y,vt(y),y):(f=a,(y=Ln.get(v))&&(f=_({},a),Oh(f,y)),o=o.ownerDocument||o,y=o.createElement("script"),vt(y),Jt(y,"link",f),o.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Rc(f,a.precedence,o));return r.instance}function Rc(o,r,a){for(var f=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,v=y,A=0;A<f.length;A++){var I=f[A];if(I.dataset.precedence===r)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(o,v.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(o,r.firstChild))}function Lh(o,r){o.crossOrigin==null&&(o.crossOrigin=r.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=r.referrerPolicy),o.title==null&&(o.title=r.title)}function Oh(o,r){o.crossOrigin==null&&(o.crossOrigin=r.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=r.referrerPolicy),o.integrity==null&&(o.integrity=r.integrity)}var wc=null;function B_(o,r,a){if(wc===null){var f=new Map,y=wc=new Map;y.set(a,f)}else y=wc,f=y.get(a),f||(f=new Map,y.set(a,f));if(f.has(o))return f;for(f.set(o,null),a=a.getElementsByTagName(o),y=0;y<a.length;y++){var v=a[y];if(!(v[ur]||v[bt]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=o+A;var I=f.get(A);I?I.push(v):f.set(A,[v])}}return f}function H_(o,r,a){o=o.ownerDocument||o,o.head.insertBefore(a,r==="title"?o.querySelector("head > title"):null)}function TI(o,r,a){if(a===1||r.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return o=r.disabled,typeof r.precedence=="string"&&o==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function G_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Cl=null;function EI(){}function SI(o,r,a){if(Cl===null)throw Error(i(475));var f=Cl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var y=zs(a.href),v=o.querySelector(El(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(f.count++,f=Mc.bind(f),o.then(f,f)),r.state.loading|=4,r.instance=v,vt(v);return}v=o.ownerDocument||o,a=F_(a),(y=Ln.get(y))&&Lh(a,y),v=v.createElement("link"),vt(v);var A=v;A._p=new Promise(function(I,P){A.onload=I,A.onerror=P}),Jt(v,"link",a),r.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(f.count++,r=Mc.bind(f),o.addEventListener("load",r),o.addEventListener("error",r))}}function CI(){if(Cl===null)throw Error(i(475));var o=Cl;return o.stylesheets&&o.count===0&&Fh(o,o.stylesheets),0<o.count?function(r){var a=setTimeout(function(){if(o.stylesheets&&Fh(o,o.stylesheets),o.unsuspend){var f=o.unsuspend;o.unsuspend=null,f()}},6e4);return o.unsuspend=r,function(){o.unsuspend=null,clearTimeout(a)}}:null}function Mc(){if(this.count--,this.count===0){if(this.stylesheets)Fh(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var xc=null;function Fh(o,r){o.stylesheets=null,o.unsuspend!==null&&(o.count++,xc=new Map,r.forEach(AI,o),xc=null,Mc.call(o))}function AI(o,r){if(!(r.state.loading&4)){var a=xc.get(o);if(a)var f=a.get(null);else{a=new Map,xc.set(o,a);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),f=A)}f&&a.set(null,f)}y=r.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||f,v===f&&a.set(null,y),a.set(A,y),this.count++,f=Mc.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),v?v.parentNode.insertBefore(y,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),r.state.loading|=4}}var Al={$$typeof:X,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function II(o,r,a,f,y,v,A,I){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function z_(o,r,a,f,y,v,A,I,P,Y,ee,ne){return o=new II(o,r,a,A,I,P,Y,ne),r=1,v===!0&&(r|=24),v=vn(3,null,null,r),o.current=v,v.stateNode=o,r=Td(),r.refCount++,o.pooledCache=r,r.refCount++,v.memoizedState={element:f,isDehydrated:a,cache:r},Ad(v),o}function Y_(o){return o?(o=Ss,o):Ss}function $_(o,r,a,f,y,v){y=Y_(y),f.context===null?f.context=y:f.pendingContext=y,f=So(r),f.payload={element:a},v=v===void 0?null:v,v!==null&&(f.callback=v),a=Co(o,f,r),a!==null&&(An(a,o,r),el(a,o,r))}function K_(o,r){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var a=o.retryLane;o.retryLane=a!==0&&a<r?a:r}}function qh(o,r){K_(o,r),(o=o.alternate)&&K_(o,r)}function J_(o){if(o.tag===13){var r=Es(o,67108864);r!==null&&An(r,o,67108864),qh(o,67108864)}}var bc=!0;function RI(o,r,a,f){var y=j.T;j.T=null;var v=ue.p;try{ue.p=2,Bh(o,r,a,f)}finally{ue.p=v,j.T=y}}function wI(o,r,a,f){var y=j.T;j.T=null;var v=ue.p;try{ue.p=8,Bh(o,r,a,f)}finally{ue.p=v,j.T=y}}function Bh(o,r,a,f){if(bc){var y=Hh(f);if(y===null)Mh(o,r,f,Nc,a),X_(o,f);else if(xI(y,o,r,a,f))f.stopPropagation();else if(X_(o,f),r&4&&-1<MI.indexOf(o)){for(;y!==null;){var v=ii(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Gn(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var P=1<<31-Zt(A);I.entanglements[1]|=P,A&=~P}yi(v),(Ze&6)===0&&(mc=Xe()+500,yl(0))}}break;case 13:I=Es(v,2),I!==null&&An(I,v,2),gc(),qh(v,2)}if(v=Hh(f),v===null&&Mh(o,r,f,Nc,a),v===y)break;y=v}y!==null&&f.stopPropagation()}else Mh(o,r,f,null,a)}}function Hh(o){return o=Mn(o),Gh(o)}var Nc=null;function Gh(o){if(Nc=null,o=ki(o),o!==null){var r=l(o);if(r===null)o=null;else{var a=r.tag;if(a===13){if(o=d(r),o!==null)return o;o=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;o=null}else r!==o&&(o=null)}}return Nc=o,null}function Q_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fn()){case or:return 2;case Ni:return 8;case ti:case hu:return 32;case ts:return 268435456;default:return 32}default:return 32}}var zh=!1,Uo=null,Lo=null,Oo=null,Il=new Map,Rl=new Map,Fo=[],MI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X_(o,r){switch(o){case"focusin":case"focusout":Uo=null;break;case"dragenter":case"dragleave":Lo=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Il.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(r.pointerId)}}function wl(o,r,a,f,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:r,domEventName:a,eventSystemFlags:f,nativeEvent:v,targetContainers:[y]},r!==null&&(r=ii(r),r!==null&&J_(r)),o):(o.eventSystemFlags|=f,r=o.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),o)}function xI(o,r,a,f,y){switch(r){case"focusin":return Uo=wl(Uo,o,r,a,f,y),!0;case"dragenter":return Lo=wl(Lo,o,r,a,f,y),!0;case"mouseover":return Oo=wl(Oo,o,r,a,f,y),!0;case"pointerover":var v=y.pointerId;return Il.set(v,wl(Il.get(v)||null,o,r,a,f,y)),!0;case"gotpointercapture":return v=y.pointerId,Rl.set(v,wl(Rl.get(v)||null,o,r,a,f,y)),!0}return!1}function W_(o){var r=ki(o.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){o.blockedOn=r,gu(o.priority,function(){if(a.tag===13){var f=Cn();f=ho(f);var y=Es(a,f);y!==null&&An(y,a,f),qh(a,f)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){o.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Dc(o){if(o.blockedOn!==null)return!1;for(var r=o.targetContainers;0<r.length;){var a=Hh(o.nativeEvent);if(a===null){a=o.nativeEvent;var f=new a.constructor(a.type,a);Oi=f,a.target.dispatchEvent(f),Oi=null}else return r=ii(a),r!==null&&J_(r),o.blockedOn=a,!1;r.shift()}return!0}function Z_(o,r,a){Dc(o)&&a.delete(r)}function bI(){zh=!1,Uo!==null&&Dc(Uo)&&(Uo=null),Lo!==null&&Dc(Lo)&&(Lo=null),Oo!==null&&Dc(Oo)&&(Oo=null),Il.forEach(Z_),Rl.forEach(Z_)}function Pc(o,r){o.blockedOn===r&&(o.blockedOn=null,zh||(zh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bI)))}var kc=null;function j_(o){kc!==o&&(kc=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){kc===o&&(kc=null);for(var r=0;r<o.length;r+=3){var a=o[r],f=o[r+1],y=o[r+2];if(typeof f!="function"){if(Gh(f||a)===null)continue;break}var v=ii(a);v!==null&&(o.splice(r,3),r-=3,Gd(v,{pending:!0,data:y,method:a.method,action:f},f,y))}}))}function Ml(o){function r(P){return Pc(P,o)}Uo!==null&&Pc(Uo,o),Lo!==null&&Pc(Lo,o),Oo!==null&&Pc(Oo,o),Il.forEach(r),Rl.forEach(r);for(var a=0;a<Fo.length;a++){var f=Fo[a];f.blockedOn===o&&(f.blockedOn=null)}for(;0<Fo.length&&(a=Fo[0],a.blockedOn===null);)W_(a),a.blockedOn===null&&Fo.shift();if(a=(o.ownerDocument||o).$$reactFormReplay,a!=null)for(f=0;f<a.length;f+=3){var y=a[f],v=a[f+1],A=y[At]||null;if(typeof v=="function")A||j_(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[At]||null)I=A.formAction;else if(Gh(y)!==null)continue}else I=A.action;typeof I=="function"?a[f+1]=I:(a.splice(f,3),f-=3),j_(a)}}}function Yh(o){this._internalRoot=o}Vc.prototype.render=Yh.prototype.render=function(o){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,f=Cn();$_(a,f,o,r,null,null)},Vc.prototype.unmount=Yh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var r=o.containerInfo;$_(o.current,2,null,o,null,null),gc(),r[Rn]=null}};function Vc(o){this._internalRoot=o}Vc.prototype.unstable_scheduleHydration=function(o){if(o){var r=mo();o={blockedOn:null,target:o,priority:r};for(var a=0;a<Fo.length&&r!==0&&r<Fo[a].priority;a++);Fo.splice(a,0,o),a===0&&W_(o)}};var ev=e.version;if(ev!=="19.1.1")throw Error(i(527,ev,"19.1.1"));ue.findDOMNode=function(o){var r=o._reactInternals;if(r===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=g(r),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var NI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uc.isDisabled&&Uc.supportsFiber)try{gt=Uc.inject(NI),We=Uc}catch{}}return bl.createRoot=function(o,r){if(!s(o))throw Error(i(299));var a=!1,f="",y=gy,v=yy,A=_y,I=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks)),r=z_(o,1,!1,null,null,a,f,y,v,A,I,null),o[Rn]=r.current,wh(o),new Yh(r)},bl.hydrateRoot=function(o,r,a){if(!s(o))throw Error(i(299));var f=!1,y="",v=gy,A=yy,I=_y,P=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),r=z_(o,1,!0,r,a??null,f,y,v,A,I,P,Y),r.context=Y_(null),a=r.current,f=Cn(),f=ho(f),y=So(f),y.callback=null,Co(a,y,f),a=f,r.current.lanes=a,Pi(r,a),yi(r),o[Rn]=r.current,wh(o),new Vc(r)},bl.version="19.1.1",bl}var cv;function BI(){if(cv)return Jh.exports;cv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jh.exports=qI(),Jh.exports}var HI=BI();const GI=n0(HI),zl=["","","","","","",""],Yc=["bg-sky-500","bg-emerald-500","bg-indigo-500","bg-pink-500","bg-blue-600","bg-teal-500","bg-purple-500","bg-rose-500"],zI=["gemini-2.5-flash","gemini-2.5-flash-lite"],YI="gemini-2.5-flash",$I=()=>{};var fv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},KI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[i++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],d=n[t++],h=n[t++],g=((s&7)<<18|(l&63)<<12|(d&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],d=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(l&63)<<6|d&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const l=n[s],d=s+1<n.length,h=d?n[s+1]:0,g=s+2<n.length,p=g?n[s+2]:0,_=l>>2,E=(l&3)<<4|h>>4;let S=(h&15)<<2|p>>6,x=p&63;g||(x=64,d||(S=64)),i.push(t[_],t[E],t[S],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(o0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||h==null||p==null||E==null)throw new JI;const S=l<<2|h>>4;if(i.push(S),p!==64){const x=h<<4&240|p>>2;if(i.push(x),E!==64){const U=p<<6&192|E;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class JI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QI=function(n){const e=o0(n);return r0.encodeByteArray(e,!0)},sf=function(n){return QI(n).replace(/\./g,"")},s0=function(n){try{return r0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=()=>XI().__FIREBASE_DEFAULTS__,ZI=()=>{if(typeof process>"u"||typeof fv>"u")return;const n=fv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&s0(n[1]);return e&&JSON.parse(e)},xf=()=>{try{return $I()||WI()||ZI()||jI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},a0=n=>{var e,t;return(t=(e=xf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},eR=n=>{const e=a0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},l0=()=>{var n;return(n=xf())==null?void 0:n.config},u0=n=>{var e;return(e=xf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function c0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[sf(JSON.stringify(t)),sf(JSON.stringify(d)),""].join(".")}const Ul={};function iR(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ul))Ul[e]?n.emulator.push(e):n.prod.push(e);return n}function oR(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dv=!1;function f0(n,e){if(typeof window>"u"||typeof document>"u"||!da(window.location.host)||Ul[n]===e||Ul[n]||dv)return;Ul[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=iR().prod.length>0;function d(){const S=document.getElementById(i);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{dv=!0,d()},S}function _(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=oR(i),x=t("text"),U=document.getElementById(x)||document.createElement("span"),q=t("learnmore"),H=document.getElementById(q)||document.createElement("a"),ie=t("preprendIcon"),K=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;h(X),_(H,q);const ae=p();g(K,ie),X.append(K,U,H,ae),document.body.appendChild(X)}l?(U.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function sR(){var e;const n=(e=xf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function uR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cR(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fR(){return!sR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function hR(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="FirebaseError";class jn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mR,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],d=l?pR(l,i):"Error",h=`${this.serviceName}: ${d} (${s}).`;return new jn(s,h,i)}}function pR(n,e){return n.replace(gR,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const gR=/\{\$([^}]+)}/g;function yR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const l=n[s],d=e[s];if(hv(l)&&hv(d)){if(!Gr(l,d))return!1}else if(l!==d)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function hv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function _R(n,e){const t=new vR(n,e);return t.subscribe.bind(t)}class vR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");TR(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Zh),s.error===void 0&&(s.error=Zh),s.complete===void 0&&(s.complete=Zh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(n){return n&&n._delegate?n._delegate:n}class zr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new tR;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CR(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});i.resolve(l)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&d.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const l=this.instances.get(i);return l&&e(l,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(n){return n===Or?void 0:n}function CR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ER(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const IR={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},RR=Le.INFO,wR={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},MR=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=wR[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=MR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const xR=(n,e)=>e.some(t=>n instanceof t);let mv,pv;function bR(){return mv||(mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return pv||(pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d0=new WeakMap,dm=new WeakMap,h0=new WeakMap,jh=new WeakMap,Xm=new WeakMap;function DR(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(Ko(n.result)),s()},d=()=>{i(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&d0.set(t,n)}).catch(()=>{}),Xm.set(e,n),e}function PR(n){if(dm.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),s()},d=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});dm.set(n,e)}let hm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||h0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ko(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kR(n){hm=n(hm)}function VR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(em(this),e,...t);return h0.set(i,e.sort?e.sort():[e]),Ko(i)}:NR().includes(n)?function(...e){return n.apply(em(this),e),Ko(d0.get(this))}:function(...e){return Ko(n.apply(em(this),e))}}function UR(n){return typeof n=="function"?VR(n):(n instanceof IDBTransaction&&PR(n),xR(n,bR())?new Proxy(n,hm):n)}function Ko(n){if(n instanceof IDBRequest)return DR(n);if(jh.has(n))return jh.get(n);const e=UR(n);return e!==n&&(jh.set(n,e),Xm.set(e,n)),e}const em=n=>Xm.get(n);function LR(n,e,{blocked:t,upgrade:i,blocking:s,terminated:l}={}){const d=indexedDB.open(n,e),h=Ko(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Ko(d.result),g.oldVersion,g.newVersion,Ko(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{l&&g.addEventListener("close",()=>l()),s&&g.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const OR=["get","getKey","getAll","getAllKeys","count"],FR=["put","add","delete","clear"],tm=new Map;function gv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=FR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||OR.includes(t)))return;const l=async function(d,...h){const g=this.transaction(d,s?"readwrite":"readonly");let p=g.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&g.done]))[0]};return tm.set(e,l),l}kR(n=>({...n,get:(e,t,i)=>gv(e,t)||n.get(e,t,i),has:(e,t)=>!!gv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function BR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mm="@firebase/app",yv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new Qm("@firebase/app"),HR="@firebase/app-compat",GR="@firebase/analytics-compat",zR="@firebase/analytics",YR="@firebase/app-check-compat",$R="@firebase/app-check",KR="@firebase/auth",JR="@firebase/auth-compat",QR="@firebase/database",XR="@firebase/data-connect",WR="@firebase/database-compat",ZR="@firebase/functions",jR="@firebase/functions-compat",ew="@firebase/installations",tw="@firebase/installations-compat",nw="@firebase/messaging",iw="@firebase/messaging-compat",ow="@firebase/performance",rw="@firebase/performance-compat",sw="@firebase/remote-config",aw="@firebase/remote-config-compat",lw="@firebase/storage",uw="@firebase/storage-compat",cw="@firebase/firestore",fw="@firebase/ai",dw="@firebase/firestore-compat",hw="firebase",mw="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",pw={[mm]:"fire-core",[HR]:"fire-core-compat",[zR]:"fire-analytics",[GR]:"fire-analytics-compat",[$R]:"fire-app-check",[YR]:"fire-app-check-compat",[KR]:"fire-auth",[JR]:"fire-auth-compat",[QR]:"fire-rtdb",[XR]:"fire-data-connect",[WR]:"fire-rtdb-compat",[ZR]:"fire-fn",[jR]:"fire-fn-compat",[ew]:"fire-iid",[tw]:"fire-iid-compat",[nw]:"fire-fcm",[iw]:"fire-fcm-compat",[ow]:"fire-perf",[rw]:"fire-perf-compat",[sw]:"fire-rc",[aw]:"fire-rc-compat",[lw]:"fire-gcs",[uw]:"fire-gcs-compat",[cw]:"fire-fst",[dw]:"fire-fst-compat",[fw]:"fire-vertex","fire-js":"fire-js",[hw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Map,gw=new Map,gm=new Map;function _v(n,e){try{n.container.addComponent(e)}catch(t){ao.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function oa(n){const e=n.name;if(gm.has(e))return ao.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,n);for(const t of af.values())_v(t,n);for(const t of gw.values())_v(t,n);return!0}function Wm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jo=new tu("app","Firebase",yw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=mw;function m0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:pm,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Jo.create("bad-app-name",{appName:String(s)});if(t||(t=l0()),!t)throw Jo.create("no-options");const l=af.get(s);if(l){if(Gr(t,l.options)&&Gr(i,l.config))return l;throw Jo.create("duplicate-app",{appName:s})}const d=new AR(s);for(const g of gm.values())d.addComponent(g);const h=new _w(t,i,d);return af.set(s,h),h}function p0(n=pm){const e=af.get(n);if(!e&&n===pm&&l0())return m0();if(!e)throw Jo.create("no-app",{appName:n});return e}function Qo(n,e,t){let i=pw[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const d=[`Unable to register library "${i}" with version "${e}":`];s&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ao.warn(d.join(" "));return}oa(new zr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="firebase-heartbeat-database",Tw=1,Yl="firebase-heartbeat-store";let nm=null;function g0(){return nm||(nm=LR(vw,Tw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Jo.create("idb-open",{originalErrorMessage:n.message})})),nm}async function Ew(n){try{const t=(await g0()).transaction(Yl),i=await t.objectStore(Yl).get(y0(n));return await t.done,i}catch(e){if(e instanceof jn)ao.warn(e.message);else{const t=Jo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ao.warn(t.message)}}}async function vv(n,e){try{const i=(await g0()).transaction(Yl,"readwrite");await i.objectStore(Yl).put(e,y0(n)),await i.done}catch(t){if(t instanceof jn)ao.warn(t.message);else{const i=Jo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ao.warn(i.message)}}}function y0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=1024,Cw=30;class Aw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Rw(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(d=>d.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>Cw){const d=ww(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ao.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tv(),{heartbeatsToSend:i,unsentEntries:s}=Iw(this._heartbeatsCache.heartbeats),l=sf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ao.warn(t),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function Iw(n,e=Sw){const t=[];let i=n.slice();for(const s of n){const l=t.find(d=>d.agent===s.agent);if(l){if(l.dates.push(s.date),Ev(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Ev(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Rw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?hR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ew(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ev(n){return sf(JSON.stringify({version:2,heartbeats:n})).length}function ww(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n){oa(new zr("platform-logger",e=>new qR(e),"PRIVATE")),oa(new zr("heartbeat",e=>new Aw(e),"PRIVATE")),Qo(mm,yv,n),Qo(mm,yv,"esm2020"),Qo("fire-js","")}Mw("");var xw="firebase",bw="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo(xw,bw,"app");function _0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nw=_0,v0=new tu("auth","Firebase",_0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new Qm("@firebase/auth");function Dw(n,...e){lf.logLevel<=Le.WARN&&lf.warn(`Auth (${ha}): ${n}`,...e)}function $c(n,...e){lf.logLevel<=Le.ERROR&&lf.error(`Auth (${ha}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(n,...e){throw jm(n,...e)}function Zn(n,...e){return jm(n,...e)}function Zm(n,e,t){const i={...Nw(),[e]:t};return new tu("auth","Firebase",i).create(e,{appName:n.name})}function Br(n){return Zm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pw(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ai(n,"argument-error"),Zm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return v0.create(n,...e)}function Re(n,e,...t){if(!n)throw jm(e,...t)}function oo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $c(e),new Error(e)}function lo(n,e){n||oo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function kw(){return Sv()==="http:"||Sv()==="https:"}function Sv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kw()||lR()||"connection"in navigator)?navigator.onLine:!0}function Uw(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,lo(t>e,"Short delay should be less than long delay!"),this.isMobile=rR()||uR()}get(){return Vw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n,e){lo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fw=new iu(3e4,6e4);function tp(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ma(n,e,t,i,s={}){return E0(n,s,async()=>{let l={},d={};i&&(e==="GET"?d=i:l={body:JSON.stringify(i)});const h=nu({key:n.config.apiKey,...d}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:g,...l};return aR()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&da(n.emulatorConfig.host)&&(p.credentials="include"),T0.fetch()(await S0(n,n.config.apiHost,t,h),p)})}async function E0(n,e,t){n._canInitEmulator=!1;const i={...Lw,...e};try{const s=new Bw(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Lc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const h=l.ok?d.errorMessage:d.error.message,[g,p]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(n,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Lc(n,"email-already-in-use",d);if(g==="USER_DISABLED")throw Lc(n,"user-disabled",d);const _=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Zm(n,_,p);Ai(n,_)}}catch(s){if(s instanceof jn)throw s;Ai(n,"network-request-failed",{message:String(s)})}}async function qw(n,e,t,i,s={}){const l=await ma(n,e,t,i,s);return"mfaPendingCredential"in l&&Ai(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function S0(n,e,t,i){const s=`${e}${t}?${i}`,l=n,d=l.config.emulator?ep(n.config,s):`${n.config.apiScheme}://${s}`;return Ow.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}class Bw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Zn(this.auth,"network-request-failed")),Fw.get())})}}function Lc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Zn(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(n,e){return ma(n,"POST","/v1/accounts:delete",e)}async function uf(n,e){return ma(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gw(n,e=!1){const t=Bn(n),i=await t.getIdToken(e),s=np(i);Re(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,d=l==null?void 0:l.sign_in_provider;return{claims:s,token:i,authTime:Ll(im(s.auth_time)),issuedAtTime:Ll(im(s.iat)),expirationTime:Ll(im(s.exp)),signInProvider:d||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function im(n){return Number(n)*1e3}function np(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const s=s0(t);return s?JSON.parse(s):($c("Failed to decode base64 JWT payload"),null)}catch(s){return $c("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Cv(n){const e=np(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof jn&&zw(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function zw({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cf(n){var E;const e=n.auth,t=await n.getIdToken(),i=await $l(n,uf(e,{idToken:t}));Re(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?C0(s.providerUserInfo):[],d=Kw(n.providerData,l),h=n.isAnonymous,g=!(n.email&&s.passwordHash)&&!(d!=null&&d.length),p=h?g:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:d,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function $w(n){const e=Bn(n);await cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Kw(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function C0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(n,e){const t=await E0(n,{},async()=>{const i=nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,d=await S0(n,s,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:h,body:i};return n.emulatorConfig&&da(n.emulatorConfig.host)&&(g.credentials="include"),T0.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Qw(n,e){return ma(n,"POST","/v2/accounts:revokeToken",tp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Cv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:l}=await Jw(e,t);this.updateTokensAndExpiration(i,s,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:l}=t,d=new Ws;return i&&(Re(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),s&&(Re(typeof s=="string","internal-error",{appName:e}),d.accessToken=s),l&&(Re(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ws,this.toJSON())}_performRefresh(){return oo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new Yw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _m(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await $l(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Gw(this,e)}reload(){return $w(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await cf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await $l(this,Hw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,h=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:x,providerData:U,stsTokenManager:q}=t;Re(E&&q,e,"internal-error");const H=Ws.fromJSON(this.name,q);Re(typeof E=="string",e,"internal-error"),Bo(i,e.name),Bo(s,e.name),Re(typeof S=="boolean",e,"internal-error"),Re(typeof x=="boolean",e,"internal-error"),Bo(l,e.name),Bo(d,e.name),Bo(h,e.name),Bo(g,e.name),Bo(p,e.name),Bo(_,e.name);const ie=new Xn({uid:E,auth:e,email:s,emailVerified:S,displayName:i,isAnonymous:x,photoURL:d,phoneNumber:l,tenantId:h,stsTokenManager:H,createdAt:p,lastLoginAt:_});return U&&Array.isArray(U)&&(ie.providerData=U.map(K=>({...K}))),g&&(ie._redirectEventId=g),ie}static async _fromIdTokenResponse(e,t,i=!1){const s=new Ws;s.updateFromServerResponse(t);const l=new Xn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await cf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Re(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?C0(s.providerUserInfo):[],d=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),h=new Ws;h.updateFromIdToken(i);const g=new Xn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:d}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function ro(n){lo(n instanceof Function,"Expected a class definition");let e=Av.get(n);return e?(lo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Av.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A0.type="NONE";const Iv=A0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n,e,t){return`firebase:${n}:${e}:${t}`}class Zs{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:l}=this.auth;this.fullUserKey=Kc(this.userKey,s.apiKey,l),this.fullPersistenceKey=Kc("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await uf(this.auth,{idToken:e}).catch(()=>{});return t?Xn._fromGetAccountInfoResponse(this.auth,t,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Zs(ro(Iv),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=s[0]||ro(Iv);const d=Kc(i,e.config.apiKey,e.name);let h=null;for(const p of t)try{const _=await p._get(d);if(_){let E;if(typeof _=="string"){const S=await uf(e,{idToken:_}).catch(()=>{});if(!S)break;E=await Xn._fromGetAccountInfoResponse(e,S,_)}else E=Xn._fromJSON(e,_);p!==l&&(h=E),l=p;break}}catch{}const g=s.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Zs(l,e,i):(l=g[0],h&&await l._set(d,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(d)}catch{}})),new Zs(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b0(e))return"Blackberry";if(N0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||w0(e))&&!e.includes("edge/"))return"Chrome";if(x0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function I0(n=sn()){return/firefox\//i.test(n)}function R0(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function w0(n=sn()){return/crios\//i.test(n)}function M0(n=sn()){return/iemobile/i.test(n)}function x0(n=sn()){return/android/i.test(n)}function b0(n=sn()){return/blackberry/i.test(n)}function N0(n=sn()){return/webos/i.test(n)}function ip(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Xw(n=sn()){var e;return ip(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Ww(){return cR()&&document.documentMode===10}function D0(n=sn()){return ip(n)||x0(n)||N0(n)||b0(n)||/windows phone/i.test(n)||M0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(n,e=[]){let t;switch(n){case"Browser":t=Rv(sn());break;case"Worker":t=`${Rv(sn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ha}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((d,h)=>{try{const g=e(l);d(g)}catch(g){h(g)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(n,e={}){return ma(n,"GET","/v2/passwordPolicy",tp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=6;class t1{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??e1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new Zw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ro(t)),this._initializationPromise=this.queue(async()=>{var i,s,l;if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await uf(this,{idToken:e}),i=await Xn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Qn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(l=this.redirectUser)==null?void 0:l._redirectEventId,h=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===h)&&(g!=null&&g.user)&&(i=g.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Br(this));const t=e?Bn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ro(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jw(this),t=new t1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Qw(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ro(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[ro(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(h,this,"internal-error"),h.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,s);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Dw(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function bf(n){return Bn(n)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=_R(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i1(n){op=n}function o1(n){return op.loadJS(n)}function r1(){return op.gapiScript}function s1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(n,e){const t=Wm(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Gr(l,e??{}))return s;Ai(s,"already-initialized")}return t.initialize({options:e})}function l1(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ro);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function u1(n,e,t){const i=bf(n);Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,l=k0(e),{host:d,port:h}=c1(e),g=h===null?"":`:${h}`,p={url:`${l}//${d}${g}/`},_=Object.freeze({host:d,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Re(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Re(Gr(p,i.config.emulator)&&Gr(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,da(d)?(c0(`${l}//${d}${g}`),f0("Auth",!0)):f1()}function k0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function c1(n){const e=k0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const l=s[1];return{host:l,port:Mv(i.substr(l.length+1))}}else{const[l,d]=i.split(":");return{host:l,port:Mv(d)}}}function Mv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function f1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oo("not implemented")}_getIdTokenResponse(e){return oo("not implemented")}_linkToIdToken(e,t){return oo("not implemented")}_getReauthenticationResolver(e){return oo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(n,e){return qw(n,"POST","/v1/accounts:signInWithIdp",tp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="http://localhost";class Yr extends V0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...l}=t;if(!i||!s)return null;const d=new Yr(i,s);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return js(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,js(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,js(e,t)}buildRequest(){const e={requestUri:d1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends ou{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ho.credential(e.oauthAccessToken)}catch{return null}}}Ho.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ho.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yr._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return io.credential(t,i)}catch{return null}}}io.GOOGLE_SIGN_IN_METHOD="google.com";io.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends ou{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Go.credential(e.oauthAccessToken)}catch{return null}}}Go.GITHUB_SIGN_IN_METHOD="github.com";Go.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends ou{constructor(){super("twitter.com")}static credential(e,t){return Yr._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return zo.credential(t,i)}catch{return null}}}zo.TWITTER_SIGN_IN_METHOD="twitter.com";zo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const l=await Xn._fromIdTokenResponse(e,i,s),d=xv(i);return new ra({user:l,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=xv(i);return new ra({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function xv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends jn{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,ff.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new ff(e,t,i,s)}}function U0(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ff._fromErrorAndOperation(n,l,e,i):l})}async function h1(n,e,t=!1){const i=await $l(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ra._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(n,e,t=!1){const{auth:i}=n;if(Qn(i.app))return Promise.reject(Br(i));const s="reauthenticate";try{const l=await $l(n,U0(i,s,e,n),t);Re(l.idToken,i,"internal-error");const d=np(l.idToken);Re(d,i,"internal-error");const{sub:h}=d;return Re(n.uid===h,i,"user-mismatch"),ra._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ai(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(n,e,t=!1){if(Qn(n.app))return Promise.reject(Br(n));const i="signIn",s=await U0(n,i,e),l=await ra._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(l.user),l}function g1(n,e,t,i){return Bn(n).onIdTokenChanged(e,t,i)}function y1(n,e,t){return Bn(n).beforeAuthStateChanged(e,t)}function _1(n,e,t,i){return Bn(n).onAuthStateChanged(e,t,i)}function v1(n){return Bn(n).signOut()}const df="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(df,"1"),this.storage.removeItem(df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=1e3,E1=10;class O0 extends L0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=D0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,h,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);Ww()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,E1):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},T1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}O0.type="LOCAL";const S1=O0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends L0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}F0.type="SESSION";const q0=F0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Nf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:l}=t.data,d=this.handlersMap[s];if(!(d!=null&&d.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(d).map(async p=>p(t.origin,l)),g=await C1(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,d;return new Promise((h,g)=>{const p=sp("",20);s.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),s.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function I1(n){vi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function R1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w1(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function M1(){return B0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="firebaseLocalStorageDb",x1=1,hf="firebaseLocalStorage",G0="fbase_key";class ru{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Df(n,e){return n.transaction([hf],e?"readwrite":"readonly").objectStore(hf)}function b1(){const n=indexedDB.deleteDatabase(H0);return new ru(n).toPromise()}function vm(){const n=indexedDB.open(H0,x1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(hf,{keyPath:G0})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(hf)?e(i):(i.close(),await b1(),e(await vm()))})})}async function bv(n,e,t){const i=Df(n,!0).put({[G0]:e,value:t});return new ru(i).toPromise()}async function N1(n,e){const t=Df(n,!1).get(e),i=await new ru(t).toPromise();return i===void 0?null:i.value}function Nv(n,e){const t=Df(n,!0).delete(e);return new ru(t).toPromise()}const D1=800,P1=3;class z0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>P1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nf._getInstance(M1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await R1(),!this.activeServiceWorker)return;this.sender=new A1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vm();return await bv(e,df,"1"),await Nv(e,df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>bv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>N1(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Df(s,!1).getAll();return new ru(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),D1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z0.type="LOCAL";const k1=z0;new iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(n,e){return e?ro(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends V0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return js(e,this._buildIdpRequest())}_linkToIdToken(e,t){return js(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return js(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function V1(n){return p1(n.auth,new ap(n),n.bypassAuthState)}function U1(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),m1(t,new ap(n),n.bypassAuthState)}async function L1(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),h1(t,new ap(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t,i,s,l=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:l,error:d,type:h}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V1;case"linkViaPopup":case"linkViaRedirect":return L1;case"reauthViaPopup":case"reauthViaRedirect":return U1;default:Ai(this.auth,"internal-error")}}resolve(e){lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new iu(2e3,1e4);async function F1(n,e,t){if(Qn(n.app))return Promise.reject(Zn(n,"operation-not-supported-in-this-environment"));const i=bf(n);Pw(n,e,rp);const s=Y0(i,t);return new Fr(i,"signInViaPopup",e,s).executeNotNull()}class Fr extends $0{constructor(e,t,i,s,l){super(e,t,s,l),this.provider=i,this.authWindow=null,this.pollId=null,Fr.currentPopupAction&&Fr.currentPopupAction.cancel(),Fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){lo(this.filter.length===1,"Popup operations only handle one event");const e=sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O1.get())};e()}}Fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="pendingRedirect",Jc=new Map;class B1 extends $0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{const i=await H1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Jc.set(this.auth._key(),e)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function H1(n,e){const t=Y1(e),i=z1(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function G1(n,e){Jc.set(n._key(),e)}function z1(n){return ro(n._redirectPersistence)}function Y1(n){return Kc(q1,n.config.apiKey,n.name)}async function $1(n,e,t=!1){if(Qn(n.app))return Promise.reject(Br(n));const i=bf(n),s=Y0(i,e),d=await new B1(i,s,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=600*1e3;class J1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Q1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!K0(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Zn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K1&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function K0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Q1(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(n,e={}){return ma(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z1=/^https?/;async function j1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await X1(n);for(const t of e)try{if(eM(t))return}catch{}Ai(n,"unauthorized-domain")}function eM(n){const e=ym(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!Z1.test(t))return!1;if(W1.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new iu(3e4,6e4);function Pv(){const n=vi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nM(n){return new Promise((e,t)=>{var s,l,d;function i(){Pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pv(),t(Zn(n,"network-request-failed"))},timeout:tM.get()})}if((l=(s=vi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((d=vi().gapi)!=null&&d.load)i();else{const h=s1("iframefcb");return vi()[h]=()=>{gapi.load?i():t(Zn(n,"network-request-failed"))},o1(`${r1()}?onload=${h}`).catch(g=>t(g))}}).catch(e=>{throw Qc=null,e})}let Qc=null;function iM(n){return Qc=Qc||nM(n),Qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new iu(5e3,15e3),rM="__/auth/iframe",sM="emulator/auth/iframe",aM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uM(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ep(e,sM):`https://${n.config.authDomain}/${rM}`,i={apiKey:e.apiKey,appName:n.name,v:ha},s=lM.get(n.config.apiHost);s&&(i.eid=s);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${nu(i).slice(1)}`}async function cM(n){const e=await iM(n),t=vi().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:uM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aM,dontclear:!0},i=>new Promise(async(s,l)=>{await i.restyle({setHideOnLeave:!1});const d=Zn(n,"network-request-failed"),h=vi().setTimeout(()=>{l(d)},oM.get());function g(){vi().clearTimeout(h),s(i)}i.ping(g).then(g,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dM=500,hM=600,mM="_blank",pM="http://localhost";class kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gM(n,e,t,i=dM,s=hM){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const g={...fM,width:i.toString(),height:s.toString(),top:l,left:d},p=sn().toLowerCase();t&&(h=w0(p)?mM:t),I0(p)&&(e=e||pM,g.scrollbars="yes");const _=Object.entries(g).reduce((S,[x,U])=>`${S}${x}=${U},`,"");if(Xw(p)&&h!=="_self")return yM(e||"",h),new kv(null);const E=window.open(e||"",h,_);Re(E,n,"popup-blocked");try{E.focus()}catch{}return new kv(E)}function yM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="__/auth/handler",vM="emulator/auth/handler",TM=encodeURIComponent("fac");async function Vv(n,e,t,i,s,l){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ha,eventId:s};if(e instanceof rp){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",yR(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))d[_]=E}if(e instanceof ou){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(d.scopes=_.join(","))}n.tenantId&&(d.tid=n.tenantId);const h=d;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const g=await n._getAppCheckToken(),p=g?`#${TM}=${encodeURIComponent(g)}`:"";return`${EM(n)}?${nu(h).slice(1)}${p}`}function EM({config:n}){return n.emulator?ep(n,vM):`https://${n.authDomain}/${_M}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="webStorageSupport";class SM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q0,this._completeRedirectFn=$1,this._overrideRedirectResult=G1}async _openPopup(e,t,i,s){var d;lo((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const l=await Vv(e,t,i,ym(),s);return gM(e,l,sp())}async _openRedirect(e,t,i,s){await this._originValidation(e);const l=await Vv(e,t,i,ym(),s);return I1(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(lo(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await cM(e),i=new J1(e);return t.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(om,{type:om},s=>{var d;const l=(d=s==null?void 0:s[0])==null?void 0:d[om];l!==void 0&&t(!!l),Ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=j1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return D0()||R0()||ip()}}const CM=SM;var Uv="@firebase/auth",Lv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RM(n){oa(new zr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=i.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P0(n)},p=new n1(i,s,l,g);return l1(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),oa(new zr("auth-internal",e=>{const t=bf(e.getProvider("auth").getImmediate());return(i=>new AM(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qo(Uv,Lv,IM(n)),Qo(Uv,Lv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=300,MM=u0("authIdTokenMaxAge")||wM;let Ov=null;const xM=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>MM)return;const s=t==null?void 0:t.token;Ov!==s&&(Ov=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bM(n=p0()){const e=Wm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=a1(n,{popupRedirectResolver:CM,persistence:[k1,S1,q0]}),i=u0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const d=xM(l.toString());y1(t,d,()=>d(t.currentUser)),g1(t,h=>d(h))}}const s=a0("auth");return s&&u1(t,`http://${s}`),t}function NM(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}i1({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const l=Zn("internal-error");l.customData=s,t(l)},i.type="text/javascript",i.charset="UTF-8",NM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RM("Browser");var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xo,J0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,R){function M(){}M.prototype=R.prototype,b.D=R.prototype,b.prototype=new M,b.prototype.constructor=b,b.C=function(N,V,O){for(var D=Array(arguments.length-2),et=2;et<arguments.length;et++)D[et-2]=arguments[et];return R.prototype[V].apply(N,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,R,M){M||(M=0);var N=Array(16);if(typeof R=="string")for(var V=0;16>V;++V)N[V]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(V=0;16>V;++V)N[V]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=b.g[0],M=b.g[1],V=b.g[2];var O=b.g[3],D=R+(O^M&(V^O))+N[0]+3614090360&4294967295;R=M+(D<<7&4294967295|D>>>25),D=O+(V^R&(M^V))+N[1]+3905402710&4294967295,O=R+(D<<12&4294967295|D>>>20),D=V+(M^O&(R^M))+N[2]+606105819&4294967295,V=O+(D<<17&4294967295|D>>>15),D=M+(R^V&(O^R))+N[3]+3250441966&4294967295,M=V+(D<<22&4294967295|D>>>10),D=R+(O^M&(V^O))+N[4]+4118548399&4294967295,R=M+(D<<7&4294967295|D>>>25),D=O+(V^R&(M^V))+N[5]+1200080426&4294967295,O=R+(D<<12&4294967295|D>>>20),D=V+(M^O&(R^M))+N[6]+2821735955&4294967295,V=O+(D<<17&4294967295|D>>>15),D=M+(R^V&(O^R))+N[7]+4249261313&4294967295,M=V+(D<<22&4294967295|D>>>10),D=R+(O^M&(V^O))+N[8]+1770035416&4294967295,R=M+(D<<7&4294967295|D>>>25),D=O+(V^R&(M^V))+N[9]+2336552879&4294967295,O=R+(D<<12&4294967295|D>>>20),D=V+(M^O&(R^M))+N[10]+4294925233&4294967295,V=O+(D<<17&4294967295|D>>>15),D=M+(R^V&(O^R))+N[11]+2304563134&4294967295,M=V+(D<<22&4294967295|D>>>10),D=R+(O^M&(V^O))+N[12]+1804603682&4294967295,R=M+(D<<7&4294967295|D>>>25),D=O+(V^R&(M^V))+N[13]+4254626195&4294967295,O=R+(D<<12&4294967295|D>>>20),D=V+(M^O&(R^M))+N[14]+2792965006&4294967295,V=O+(D<<17&4294967295|D>>>15),D=M+(R^V&(O^R))+N[15]+1236535329&4294967295,M=V+(D<<22&4294967295|D>>>10),D=R+(V^O&(M^V))+N[1]+4129170786&4294967295,R=M+(D<<5&4294967295|D>>>27),D=O+(M^V&(R^M))+N[6]+3225465664&4294967295,O=R+(D<<9&4294967295|D>>>23),D=V+(R^M&(O^R))+N[11]+643717713&4294967295,V=O+(D<<14&4294967295|D>>>18),D=M+(O^R&(V^O))+N[0]+3921069994&4294967295,M=V+(D<<20&4294967295|D>>>12),D=R+(V^O&(M^V))+N[5]+3593408605&4294967295,R=M+(D<<5&4294967295|D>>>27),D=O+(M^V&(R^M))+N[10]+38016083&4294967295,O=R+(D<<9&4294967295|D>>>23),D=V+(R^M&(O^R))+N[15]+3634488961&4294967295,V=O+(D<<14&4294967295|D>>>18),D=M+(O^R&(V^O))+N[4]+3889429448&4294967295,M=V+(D<<20&4294967295|D>>>12),D=R+(V^O&(M^V))+N[9]+568446438&4294967295,R=M+(D<<5&4294967295|D>>>27),D=O+(M^V&(R^M))+N[14]+3275163606&4294967295,O=R+(D<<9&4294967295|D>>>23),D=V+(R^M&(O^R))+N[3]+4107603335&4294967295,V=O+(D<<14&4294967295|D>>>18),D=M+(O^R&(V^O))+N[8]+1163531501&4294967295,M=V+(D<<20&4294967295|D>>>12),D=R+(V^O&(M^V))+N[13]+2850285829&4294967295,R=M+(D<<5&4294967295|D>>>27),D=O+(M^V&(R^M))+N[2]+4243563512&4294967295,O=R+(D<<9&4294967295|D>>>23),D=V+(R^M&(O^R))+N[7]+1735328473&4294967295,V=O+(D<<14&4294967295|D>>>18),D=M+(O^R&(V^O))+N[12]+2368359562&4294967295,M=V+(D<<20&4294967295|D>>>12),D=R+(M^V^O)+N[5]+4294588738&4294967295,R=M+(D<<4&4294967295|D>>>28),D=O+(R^M^V)+N[8]+2272392833&4294967295,O=R+(D<<11&4294967295|D>>>21),D=V+(O^R^M)+N[11]+1839030562&4294967295,V=O+(D<<16&4294967295|D>>>16),D=M+(V^O^R)+N[14]+4259657740&4294967295,M=V+(D<<23&4294967295|D>>>9),D=R+(M^V^O)+N[1]+2763975236&4294967295,R=M+(D<<4&4294967295|D>>>28),D=O+(R^M^V)+N[4]+1272893353&4294967295,O=R+(D<<11&4294967295|D>>>21),D=V+(O^R^M)+N[7]+4139469664&4294967295,V=O+(D<<16&4294967295|D>>>16),D=M+(V^O^R)+N[10]+3200236656&4294967295,M=V+(D<<23&4294967295|D>>>9),D=R+(M^V^O)+N[13]+681279174&4294967295,R=M+(D<<4&4294967295|D>>>28),D=O+(R^M^V)+N[0]+3936430074&4294967295,O=R+(D<<11&4294967295|D>>>21),D=V+(O^R^M)+N[3]+3572445317&4294967295,V=O+(D<<16&4294967295|D>>>16),D=M+(V^O^R)+N[6]+76029189&4294967295,M=V+(D<<23&4294967295|D>>>9),D=R+(M^V^O)+N[9]+3654602809&4294967295,R=M+(D<<4&4294967295|D>>>28),D=O+(R^M^V)+N[12]+3873151461&4294967295,O=R+(D<<11&4294967295|D>>>21),D=V+(O^R^M)+N[15]+530742520&4294967295,V=O+(D<<16&4294967295|D>>>16),D=M+(V^O^R)+N[2]+3299628645&4294967295,M=V+(D<<23&4294967295|D>>>9),D=R+(V^(M|~O))+N[0]+4096336452&4294967295,R=M+(D<<6&4294967295|D>>>26),D=O+(M^(R|~V))+N[7]+1126891415&4294967295,O=R+(D<<10&4294967295|D>>>22),D=V+(R^(O|~M))+N[14]+2878612391&4294967295,V=O+(D<<15&4294967295|D>>>17),D=M+(O^(V|~R))+N[5]+4237533241&4294967295,M=V+(D<<21&4294967295|D>>>11),D=R+(V^(M|~O))+N[12]+1700485571&4294967295,R=M+(D<<6&4294967295|D>>>26),D=O+(M^(R|~V))+N[3]+2399980690&4294967295,O=R+(D<<10&4294967295|D>>>22),D=V+(R^(O|~M))+N[10]+4293915773&4294967295,V=O+(D<<15&4294967295|D>>>17),D=M+(O^(V|~R))+N[1]+2240044497&4294967295,M=V+(D<<21&4294967295|D>>>11),D=R+(V^(M|~O))+N[8]+1873313359&4294967295,R=M+(D<<6&4294967295|D>>>26),D=O+(M^(R|~V))+N[15]+4264355552&4294967295,O=R+(D<<10&4294967295|D>>>22),D=V+(R^(O|~M))+N[6]+2734768916&4294967295,V=O+(D<<15&4294967295|D>>>17),D=M+(O^(V|~R))+N[13]+1309151649&4294967295,M=V+(D<<21&4294967295|D>>>11),D=R+(V^(M|~O))+N[4]+4149444226&4294967295,R=M+(D<<6&4294967295|D>>>26),D=O+(M^(R|~V))+N[11]+3174756917&4294967295,O=R+(D<<10&4294967295|D>>>22),D=V+(R^(O|~M))+N[2]+718787259&4294967295,V=O+(D<<15&4294967295|D>>>17),D=M+(O^(V|~R))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+R&4294967295,b.g[1]=b.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+V&4294967295,b.g[3]=b.g[3]+O&4294967295}i.prototype.u=function(b,R){R===void 0&&(R=b.length);for(var M=R-this.blockSize,N=this.B,V=this.h,O=0;O<R;){if(V==0)for(;O<=M;)s(this,b,O),O+=this.blockSize;if(typeof b=="string"){for(;O<R;)if(N[V++]=b.charCodeAt(O++),V==this.blockSize){s(this,N),V=0;break}}else for(;O<R;)if(N[V++]=b[O++],V==this.blockSize){s(this,N),V=0;break}}this.h=V,this.o+=R},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var R=1;R<b.length-8;++R)b[R]=0;var M=8*this.o;for(R=b.length-8;R<b.length;++R)b[R]=M&255,M/=256;for(this.u(b),b=Array(16),R=M=0;4>R;++R)for(var N=0;32>N;N+=8)b[M++]=this.g[R]>>>N&255;return b};function l(b,R){var M=h;return Object.prototype.hasOwnProperty.call(M,b)?M[b]:M[b]=R(b)}function d(b,R){this.h=R;for(var M=[],N=!0,V=b.length-1;0<=V;V--){var O=b[V]|0;N&&O==R||(M[V]=O,N=!1)}this.g=M}var h={};function g(b){return-128<=b&&128>b?l(b,function(R){return new d([R|0],0>R?-1:0)}):new d([b|0],0>b?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return E;if(0>b)return H(p(-b));for(var R=[],M=1,N=0;b>=M;N++)R[N]=b/M|0,M*=4294967296;return new d(R,0)}function _(b,R){if(b.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(b.charAt(0)=="-")return H(_(b.substring(1),R));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=p(Math.pow(R,8)),N=E,V=0;V<b.length;V+=8){var O=Math.min(8,b.length-V),D=parseInt(b.substring(V,V+O),R);8>O?(O=p(Math.pow(R,O)),N=N.j(O).add(p(D))):(N=N.j(M),N=N.add(p(D)))}return N}var E=g(0),S=g(1),x=g(16777216);n=d.prototype,n.m=function(){if(q(this))return-H(this).m();for(var b=0,R=1,M=0;M<this.g.length;M++){var N=this.i(M);b+=(0<=N?N:4294967296+N)*R,R*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(U(this))return"0";if(q(this))return"-"+H(this).toString(b);for(var R=p(Math.pow(b,6)),M=this,N="";;){var V=ae(M,R).g;M=ie(M,V.j(R));var O=((0<M.g.length?M.g[0]:M.h)>>>0).toString(b);if(M=V,U(M))return O+N;for(;6>O.length;)O="0"+O;N=O+N}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function U(b){if(b.h!=0)return!1;for(var R=0;R<b.g.length;R++)if(b.g[R]!=0)return!1;return!0}function q(b){return b.h==-1}n.l=function(b){return b=ie(this,b),q(b)?-1:U(b)?0:1};function H(b){for(var R=b.g.length,M=[],N=0;N<R;N++)M[N]=~b.g[N];return new d(M,~b.h).add(S)}n.abs=function(){return q(this)?H(this):this},n.add=function(b){for(var R=Math.max(this.g.length,b.g.length),M=[],N=0,V=0;V<=R;V++){var O=N+(this.i(V)&65535)+(b.i(V)&65535),D=(O>>>16)+(this.i(V)>>>16)+(b.i(V)>>>16);N=D>>>16,O&=65535,D&=65535,M[V]=D<<16|O}return new d(M,M[M.length-1]&-2147483648?-1:0)};function ie(b,R){return b.add(H(R))}n.j=function(b){if(U(this)||U(b))return E;if(q(this))return q(b)?H(this).j(H(b)):H(H(this).j(b));if(q(b))return H(this.j(H(b)));if(0>this.l(x)&&0>b.l(x))return p(this.m()*b.m());for(var R=this.g.length+b.g.length,M=[],N=0;N<2*R;N++)M[N]=0;for(N=0;N<this.g.length;N++)for(var V=0;V<b.g.length;V++){var O=this.i(N)>>>16,D=this.i(N)&65535,et=b.i(V)>>>16,ke=b.i(V)&65535;M[2*N+2*V]+=D*ke,K(M,2*N+2*V),M[2*N+2*V+1]+=O*ke,K(M,2*N+2*V+1),M[2*N+2*V+1]+=D*et,K(M,2*N+2*V+1),M[2*N+2*V+2]+=O*et,K(M,2*N+2*V+2)}for(N=0;N<R;N++)M[N]=M[2*N+1]<<16|M[2*N];for(N=R;N<2*R;N++)M[N]=0;return new d(M,0)};function K(b,R){for(;(b[R]&65535)!=b[R];)b[R+1]+=b[R]>>>16,b[R]&=65535,R++}function X(b,R){this.g=b,this.h=R}function ae(b,R){if(U(R))throw Error("division by zero");if(U(b))return new X(E,E);if(q(b))return R=ae(H(b),R),new X(H(R.g),H(R.h));if(q(R))return R=ae(b,H(R)),new X(H(R.g),R.h);if(30<b.g.length){if(q(b)||q(R))throw Error("slowDivide_ only works with positive integers.");for(var M=S,N=R;0>=N.l(b);)M=W(M),N=W(N);var V=J(M,1),O=J(N,1);for(N=J(N,2),M=J(M,2);!U(N);){var D=O.add(N);0>=D.l(b)&&(V=V.add(M),O=D),N=J(N,1),M=J(M,1)}return R=ie(b,V.j(R)),new X(V,R)}for(V=E;0<=b.l(R);){for(M=Math.max(1,Math.floor(b.m()/R.m())),N=Math.ceil(Math.log(M)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),O=p(M),D=O.j(R);q(D)||0<D.l(b);)M-=N,O=p(M),D=O.j(R);U(O)&&(O=S),V=V.add(O),b=ie(b,D)}return new X(V,b)}n.A=function(b){return ae(this,b).h},n.and=function(b){for(var R=Math.max(this.g.length,b.g.length),M=[],N=0;N<R;N++)M[N]=this.i(N)&b.i(N);return new d(M,this.h&b.h)},n.or=function(b){for(var R=Math.max(this.g.length,b.g.length),M=[],N=0;N<R;N++)M[N]=this.i(N)|b.i(N);return new d(M,this.h|b.h)},n.xor=function(b){for(var R=Math.max(this.g.length,b.g.length),M=[],N=0;N<R;N++)M[N]=this.i(N)^b.i(N);return new d(M,this.h^b.h)};function W(b){for(var R=b.g.length+1,M=[],N=0;N<R;N++)M[N]=b.i(N)<<1|b.i(N-1)>>>31;return new d(M,b.h)}function J(b,R){var M=R>>5;R%=32;for(var N=b.g.length-M,V=[],O=0;O<N;O++)V[O]=0<R?b.i(O+M)>>>R|b.i(O+M+1)<<32-R:b.i(O+M);return new d(V,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,J0=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=_,Xo=d}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q0,Dl,X0,Xc,Tm,W0,Z0,j0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,T,C){return m==Array.prototype||m==Object.prototype||(m[T]=C.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var T=0;T<m.length;++T){var C=m[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function s(m,T){if(T)e:{var C=i;m=m.split(".");for(var w=0;w<m.length-1;w++){var G=m[w];if(!(G in C))break e;C=C[G]}m=m[m.length-1],w=C[m],T=T(w),T!=w&&T!=null&&e(C,m,{configurable:!0,writable:!0,value:T})}}function l(m,T){m instanceof String&&(m+="");var C=0,w=!1,G={next:function(){if(!w&&C<m.length){var Z=C++;return{value:T(Z,m[Z]),done:!1}}return w=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(m){return m||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},h=this||self;function g(m){var T=typeof m;return T=T!="object"?T:m?Array.isArray(m)?"array":T:"null",T=="array"||T=="object"&&typeof m.length=="number"}function p(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function _(m,T,C){return m.call.apply(m.bind,arguments)}function E(m,T,C){if(!m)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,w),m.apply(T,G)}}return function(){return m.apply(T,arguments)}}function S(m,T,C){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function x(m,T){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),m.apply(this,w)}}function U(m,T){function C(){}C.prototype=T.prototype,m.aa=T.prototype,m.prototype=new C,m.prototype.constructor=m,m.Qb=function(w,G,Z){for(var ce=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ce[Be-2]=arguments[Be];return T.prototype[G].apply(w,ce)}}function q(m){const T=m.length;if(0<T){const C=Array(T);for(let w=0;w<T;w++)C[w]=m[w];return C}return[]}function H(m,T){for(let C=1;C<arguments.length;C++){const w=arguments[C];if(g(w)){const G=m.length||0,Z=w.length||0;m.length=G+Z;for(let ce=0;ce<Z;ce++)m[G+ce]=w[ce]}else m.push(w)}}class ie{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function K(m){return/^[\s\xa0]*$/.test(m)}function X(){var m=h.navigator;return m&&(m=m.userAgent)?m:""}function ae(m){return ae[" "](m),m}ae[" "]=function(){};var W=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function J(m,T,C){for(const w in m)T.call(C,m[w],w,m)}function b(m,T){for(const C in m)T.call(void 0,m[C],C,m)}function R(m){const T={};for(const C in m)T[C]=m[C];return T}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(m,T){let C,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(C in w)m[C]=w[C];for(let Z=0;Z<M.length;Z++)C=M[Z],Object.prototype.hasOwnProperty.call(w,C)&&(m[C]=w[C])}}function V(m){var T=1;m=m.split(":");const C=[];for(;0<T&&m.length;)C.push(m.shift()),T--;return m.length&&C.push(m.join(":")),C}function O(m){h.setTimeout(()=>{throw m},0)}function D(){var m=qe;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class et{constructor(){this.h=this.g=null}add(T,C){const w=ke.get();w.set(T,C),this.h?this.h.next=w:this.g=w,this.h=w}}var ke=new ie(()=>new j,m=>m.reset());class j{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,he=!1,qe=new et,L=()=>{const m=h.Promise.resolve(void 0);ue=()=>{m.then(re)}};var re=()=>{for(var m;m=D();){try{m.h.call(m.g)}catch(C){O(C)}var T=ke;T.j(m),100>T.h&&(T.h++,m.next=T.g,T.g=m)}he=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var _e=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const C=()=>{};h.addEventListener("test",C,T),h.removeEventListener("test",C,T)}catch{}return m})();function Ne(m,T){if(le.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var C=this.type=m.type,w=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget){if(W){e:{try{ae(T.nodeName);var G=!0;break e}catch{}G=!1}G||(T=null)}}else C=="mouseover"?T=m.fromElement:C=="mouseout"&&(T=m.toElement);this.relatedTarget=T,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ae[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ne.aa.h.call(this)}}U(Ne,le);var Ae={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),tt=0;function In(m,T,C,w,G){this.listener=m,this.proxy=null,this.src=T,this.type=C,this.capture=!!w,this.ha=G,this.key=++tt,this.da=this.fa=!1}function ei(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Hn(m){this.src=m,this.g={},this.h=0}Hn.prototype.add=function(m,T,C,w,G){var Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);var ce=xi(m,T,w,G);return-1<ce?(T=m[ce],C||(T.fa=!1)):(T=new In(T,this.src,Z,!!w,G),T.fa=C,m.push(T)),T};function Mi(m,T){var C=T.type;if(C in m.g){var w=m.g[C],G=Array.prototype.indexOf.call(w,T,void 0),Z;(Z=0<=G)&&Array.prototype.splice.call(w,G,1),Z&&(ei(T),m.g[C].length==0&&(delete m.g[C],m.h--))}}function xi(m,T,C,w){for(var G=0;G<m.length;++G){var Z=m[G];if(!Z.da&&Z.listener==T&&Z.capture==!!C&&Z.ha==w)return G}return-1}var bi="closure_lm_"+(1e6*Math.random()|0),we={};function st(m,T,C,w,G){if(Array.isArray(T)){for(var Z=0;Z<T.length;Z++)st(m,T[Z],C,w,G);return null}return C=mu(C),m&&m[Ct]?m.K(T,C,p(w)?!!w.capture:!1,G):Xe(m,T,C,!1,w,G)}function Xe(m,T,C,w,G,Z){if(!T)throw Error("Invalid event type");var ce=p(G)?!!G.capture:!!G,Be=ts(m);if(Be||(m[bi]=Be=new Hn(m)),C=Be.add(T,C,w,ce,Z),C.proxy)return C;if(w=fn(),C.proxy=w,w.src=m,w.listener=C,m.addEventListener)_e||(G=ce),G===void 0&&(G=!1),m.addEventListener(T.toString(),w,G);else if(m.attachEvent)m.attachEvent(ti(T.toString()),w);else if(m.addListener&&m.removeListener)m.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function fn(){function m(C){return T.call(m.src,m.listener,C)}const T=hu;return m}function or(m,T,C,w,G){if(Array.isArray(T))for(var Z=0;Z<T.length;Z++)or(m,T[Z],C,w,G);else w=p(w)?!!w.capture:!!w,C=mu(C),m&&m[Ct]?(m=m.i,T=String(T).toString(),T in m.g&&(Z=m.g[T],C=xi(Z,C,w,G),-1<C&&(ei(Z[C]),Array.prototype.splice.call(Z,C,1),Z.length==0&&(delete m.g[T],m.h--)))):m&&(m=ts(m))&&(T=m.g[T.toString()],m=-1,T&&(m=xi(T,C,w,G)),(C=-1<m?T[m]:null)&&Ni(C))}function Ni(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[Ct])Mi(T.i,m);else{var C=m.type,w=m.proxy;T.removeEventListener?T.removeEventListener(C,w,m.capture):T.detachEvent?T.detachEvent(ti(C),w):T.addListener&&T.removeListener&&T.removeListener(w),(C=ts(T))?(Mi(C,m),C.h==0&&(C.src=null,T[bi]=null)):ei(m)}}}function ti(m){return m in we?we[m]:we[m]="on"+m}function hu(m,T){if(m.da)m=!0;else{T=new Ne(T,this);var C=m.listener,w=m.ha||m.src;m.fa&&Ni(m),m=C.call(w,T)}return m}function ts(m){return m=m[bi],m instanceof Hn?m:null}var Ca="__closure_events_fn_"+(1e9*Math.random()>>>0);function mu(m){return typeof m=="function"?m:(m[Ca]||(m[Ca]=function(T){return m.handleEvent(T)}),m[Ca])}function gt(){fe.call(this),this.i=new Hn(this),this.M=this,this.F=null}U(gt,fe),gt.prototype[Ct]=!0,gt.prototype.removeEventListener=function(m,T,C,w){or(this,m,T,C,w)};function We(m,T){var C,w=m.F;if(w)for(C=[];w;w=w.F)C.push(w);if(m=m.M,w=T.type||T,typeof T=="string")T=new le(T,m);else if(T instanceof le)T.target=T.target||m;else{var G=T;T=new le(w,m),N(T,G)}if(G=!0,C)for(var Z=C.length-1;0<=Z;Z--){var ce=T.g=C[Z];G=gn(ce,w,!0,T)&&G}if(ce=T.g=m,G=gn(ce,w,!0,T)&&G,G=gn(ce,w,!1,T)&&G,C)for(Z=0;Z<C.length;Z++)ce=T.g=C[Z],G=gn(ce,w,!1,T)&&G}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var m=this.i,T;for(T in m.g){for(var C=m.g[T],w=0;w<C.length;w++)ei(C[w]);delete m.g[T],m.h--}}this.F=null},gt.prototype.K=function(m,T,C,w){return this.i.add(String(m),T,!1,C,w)},gt.prototype.L=function(m,T,C,w){return this.i.add(String(m),T,!0,C,w)};function gn(m,T,C,w){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();for(var G=!0,Z=0;Z<T.length;++Z){var ce=T[Z];if(ce&&!ce.da&&ce.capture==C){var Be=ce.listener,Nt=ce.ha||ce.src;ce.fa&&Mi(m.i,ce),G=Be.call(Nt,w)!==!1&&G}}return G&&!w.defaultPrevented}function Zt(m,T,C){if(typeof m=="function")C&&(m=S(m,C));else if(m&&typeof m.handleEvent=="function")m=S(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:h.setTimeout(m,T||0)}function pu(m){m.g=Zt(()=>{m.g=null,m.i&&(m.i=!1,pu(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class Jf extends fe{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:pu(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rr(m){fe.call(this),this.h=m,this.g={}}U(rr,fe);var sr=[];function ar(m){J(m.g,function(T,C){this.g.hasOwnProperty(C)&&Ni(T)},m),m.g={}}rr.prototype.N=function(){rr.aa.N.call(this),ar(this)},rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=h.JSON.stringify,ns=h.JSON.parse,lr=class{stringify(m){return h.JSON.stringify(m,void 0)}parse(m){return h.JSON.parse(m,void 0)}};function Aa(){}Aa.prototype.h=null;function Ia(m){return m.h||(m.h=m.i())}function Ra(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pi(){le.call(this,"d")}U(Pi,le);function wa(){le.call(this,"c")}U(wa,le);var ni={},Ma=null;function ho(){return Ma=Ma||new gt}ni.La="serverreachability";function is(m){le.call(this,ni.La,m)}U(is,le);function mo(m){const T=ho();We(T,new is(T))}ni.STAT_EVENT="statevent";function gu(m,T){le.call(this,ni.STAT_EVENT,m),this.stat=T}U(gu,le);function ft(m){const T=ho();We(T,new gu(T,m))}ni.Ma="timingevent";function bt(m,T){le.call(this,ni.Ma,m),this.size=T}U(bt,le);function At(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){m()},T)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function xa(m,T,C,w,G,Z){m.info(function(){if(m.g)if(Z)for(var ce="",Be=Z.split("&"),Nt=0;Nt<Be.length;Nt++){var He=Be[Nt].split("=");if(1<He.length){var Ot=He[0];He=He[1];var Dt=Ot.split("_");ce=2<=Dt.length&&Dt[1]=="type"?ce+(Ot+"="+He+"&"):ce+(Ot+"=redacted&")}}else ce=null;else ce=Z;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+T+`
`+C+`
`+ce})}function Qf(m,T,C,w,G,Z,ce){m.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+T+`
`+C+`
`+Z+" "+ce})}function po(m,T,C,w){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+ur(m,C)+(w?" "+w:"")})}function yu(m,T){m.info(function(){return"TIMEOUT: "+T})}Rn.prototype.info=function(){};function ur(m,T){if(!m.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(m=0;m<C.length;m++)if(Array.isArray(C[m])){var w=C[m];if(!(2>w.length)){var G=w[1];if(Array.isArray(G)&&!(1>G.length)){var Z=G[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ce=1;ce<G.length;ce++)G[ce]=""}}}}return Gn(C)}catch{return T}}var go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ki={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ii;function oi(){}U(oi,Aa),oi.prototype.g=function(){return new XMLHttpRequest},oi.prototype.i=function(){return{}},ii=new oi;function an(m,T,C,w){this.j=m,this.i=T,this.l=C,this.R=w||1,this.U=new rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var ba={},os={};function zn(m,T,C){m.L=1,m.v=mr(yn(T)),m.m=C,m.P=!0,Vi(m,null)}function Vi(m,T){m.F=Date.now(),cr(m),m.A=yn(m.v);var C=m.A,w=m.R;Array.isArray(w)||(w=[String(w)]),Ua(C.i,"t",w),m.C=0,C=m.j.J,m.h=new vt,m.g=Pu(m.j,C?T:null,!m.m),0<m.O&&(m.M=new Jf(S(m.Y,m,m.g),m.O)),T=m.U,C=m.g,w=m.ca;var G="readystatechange";Array.isArray(G)||(G&&(sr[0]=G.toString()),G=sr);for(var Z=0;Z<G.length;Z++){var ce=st(C,G[Z],w||T.handleEvent,!1,T.h||T);if(!ce)break;T.g[ce.key]=ce}T=m.H?R(m.H):{},m.m?(m.u||(m.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,T)):(m.u="GET",m.g.ea(m.A,m.u,null,T)),mo(),xa(m.i,m.u,m.A,m.l,m.R,m.m)}an.prototype.ca=function(m){m=m.target;const T=this.M;T&&bn(m)==3?T.j():this.Y(m)},an.prototype.Y=function(m){try{if(m==this.g)e:{const Dt=bn(this.g);var T=this.g.Ba();const Gi=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Dt!=4||T==7||(T==8||0>=Gi?mo(3):mo(2)),yo(this);var C=this.g.Z();this.X=C;t:if(_u(this)){var w=Iu(this.g);m="";var G=w.length,Z=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ri(this);var ce="";break t}this.h.i=new h.TextDecoder}for(T=0;T<G;T++)this.h.h=!0,m+=this.h.i.decode(w[T],{stream:!(Z&&T==G-1)});w.length=0,this.h.g+=m,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=C==200,Qf(this.i,this.u,this.A,this.l,this.R,Dt,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Nt=this.g;if((Be=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Be)){var He=Be;break t}}He=null}if(C=He)po(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fr(this,C);else{this.o=!1,this.s=3,ft(12),zt(this),ri(this);break e}}if(this.P){C=!0;let Yt;for(;!this.J&&this.C<ce.length;)if(Yt=vu(this,ce),Yt==os){Dt==4&&(this.s=4,ft(14),C=!1),po(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==ba){this.s=4,ft(15),po(this.i,this.l,ce,"[Invalid Chunk]"),C=!1;break}else po(this.i,this.l,Yt,null),fr(this,Yt);if(_u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||ce.length!=0||this.h.h||(this.s=1,ft(16),C=!1),this.o=this.o&&C,!C)po(this.i,this.l,ce,"[Invalid Chunked Response]"),zt(this),ri(this);else if(0<ce.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Sr(Ot),Ot.M=!0,ft(11))}}else po(this.i,this.l,ce,null),fr(this,ce);Dt==4&&zt(this),this.o&&!this.J&&(Dt==4?bu(this.j,this):(this.o=!1,cr(this)))}else ed(this.g),C==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),zt(this),ri(this)}}}catch{}finally{}};function _u(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function vu(m,T){var C=m.C,w=T.indexOf(`
`,C);return w==-1?os:(C=Number(T.substring(C,w)),isNaN(C)?ba:(w+=1,w+C>T.length?os:(T=T.slice(w,w+C),m.C=w+C,T)))}an.prototype.cancel=function(){this.J=!0,zt(this)};function cr(m){m.S=Date.now()+m.I,Tu(m,m.I)}function Tu(m,T){if(m.B!=null)throw Error("WatchDog timer not null");m.B=At(S(m.ba,m),T)}function yo(m){m.B&&(h.clearTimeout(m.B),m.B=null)}an.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(yu(this.i,this.A),this.L!=2&&(mo(),ft(17)),zt(this),this.s=2,ri(this)):Tu(this,this.S-m)};function ri(m){m.j.G==0||m.J||bu(m.j,m)}function zt(m){yo(m);var T=m.M;T&&typeof T.ma=="function"&&T.ma(),m.M=null,ar(m.U),m.g&&(T=m.g,m.g=null,T.abort(),T.ma())}function fr(m,T){try{var C=m.j;if(C.G!=0&&(C.g==m||Na(C.h,m))){if(!m.K&&Na(C.h,m)&&C.G==3){try{var w=C.Da.g.parse(T)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<m.F)gs(C),ms(C);else break e;Ba(C),ft(18)}}else C.za=G[1],0<C.za-C.T&&37500>G[2]&&C.F&&C.v==0&&!C.C&&(C.C=At(S(C.Za,C),6e3));if(1>=ss(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Hi(C,11)}else if((m.K||C.g==m)&&gs(C),!K(T))for(G=C.Da.g.parse(T),T=0;T<G.length;T++){let He=G[T];if(C.T=He[0],He=He[1],C.G==2)if(He[0]=="c"){C.K=He[1],C.ia=He[2];const Ot=He[3];Ot!=null&&(C.la=Ot,C.j.info("VER="+C.la));const Dt=He[4];Dt!=null&&(C.Aa=Dt,C.j.info("SVER="+C.Aa));const Gi=He[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(w=1.5*Gi,C.L=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const Yt=m.g;if(Yt){const di=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(di){var Z=w.h;Z.g||di.indexOf("spdy")==-1&&di.indexOf("quic")==-1&&di.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(as(Z,Z.h),Z.h=null))}if(w.D){const Ga=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ga&&(w.ya=Ga,nt(w.I,w.D,Ga))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-m.F,C.j.info("Handshake RTT: "+C.R+"ms")),w=C;var ce=m;if(w.qa=Du(w,w.J?w.ia:null,w.W),ce.K){ln(w.h,ce);var Be=ce,Nt=w.L;Nt&&(Be.I=Nt),Be.B&&(yo(Be),cr(Be)),w.g=ce}else Mu(w);0<C.i.length&&ps(C)}else He[0]!="stop"&&He[0]!="close"||Hi(C,7);else C.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Hi(C,7):Fa(C):He[0]!="noop"&&C.l&&C.l.ta(He),C.v=0)}}mo(4)}catch{}}var Eu=class{constructor(m,T){this.g=m,this.map=T}};function Ui(m){this.l=m||10,h.PerformanceNavigationTiming?(m=h.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rs(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ss(m){return m.h?1:m.g?m.g.size:0}function Na(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function as(m,T){m.g?m.g.add(T):m.h=T}function ln(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}Ui.prototype.cancel=function(){if(this.i=Da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Da(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const C of m.g.values())T=T.concat(C.D);return T}return q(m.i)}function Xf(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(g(m)){for(var T=[],C=m.length,w=0;w<C;w++)T.push(m[w]);return T}T=[],C=0;for(w in m)T[C++]=m[w];return T}function ls(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(g(m)||typeof m=="string"){var T=[];m=m.length;for(var C=0;C<m;C++)T.push(C);return T}T=[],C=0;for(const w in m)T[C++]=w;return T}}}function Pa(m,T){if(m.forEach&&typeof m.forEach=="function")m.forEach(T,void 0);else if(g(m)||typeof m=="string")Array.prototype.forEach.call(m,T,void 0);else for(var C=ls(m),w=Xf(m),G=w.length,Z=0;Z<G;Z++)T.call(void 0,w[Z],C&&C[Z],m)}var dr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wf(m,T){if(m){m=m.split("&");for(var C=0;C<m.length;C++){var w=m[C].indexOf("="),G=null;if(0<=w){var Z=m[C].substring(0,w);G=m[C].substring(w+1)}else Z=m[C];T(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function It(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof It){this.h=m.h,hr(this,m.j),this.o=m.o,this.g=m.g,_o(this,m.s),this.l=m.l;var T=m.i,C=new Oi;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Li(this,C),this.m=m.m}else m&&(T=String(m).match(dr))?(this.h=!1,hr(this,T[1]||"",!0),this.o=wn(T[2]||""),this.g=wn(T[3]||"",!0),_o(this,T[4]),this.l=wn(T[5]||"",!0),Li(this,T[6]||"",!0),this.m=wn(T[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}It.prototype.toString=function(){var m=[],T=this.j;T&&m.push(pr(T,ka,!0),":");var C=this.g;return(C||T=="file")&&(m.push("//"),(T=this.o)&&m.push(pr(T,ka,!0),"@"),m.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&m.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&m.push("/"),m.push(pr(C,C.charAt(0)=="/"?Zf:Va,!0))),(C=this.i.toString())&&m.push("?",C),(C=this.m)&&m.push("#",pr(C,us)),m.join("")};function yn(m){return new It(m)}function hr(m,T,C){m.j=C?wn(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function _o(m,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);m.s=T}else m.s=null}function Li(m,T,C){T instanceof Oi?(m.i=T,Cu(m.i,m.h)):(C||(T=pr(T,jf)),m.i=new Oi(T,m.h))}function nt(m,T,C){m.i.set(T,C)}function mr(m){return nt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function wn(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function pr(m,T,C){return typeof m=="string"?(m=encodeURI(m).replace(T,Su),C&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Su(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ka=/[#\/\?@]/g,Va=/[#\?:]/g,Zf=/[#\?]/g,jf=/[#\?@]/g,us=/#/g;function Oi(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Mn(m){m.g||(m.g=new Map,m.h=0,m.i&&Wf(m.i,function(T,C){m.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=Oi.prototype,n.add=function(m,T){Mn(this),this.i=null,m=si(this,m);var C=this.g.get(m);return C||this.g.set(m,C=[]),C.push(T),this.h+=1,this};function Fi(m,T){Mn(m),T=si(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function qi(m,T){return Mn(m),T=si(m,T),m.g.has(T)}n.forEach=function(m,T){Mn(this),this.g.forEach(function(C,w){C.forEach(function(G){m.call(T,G,w,this)},this)},this)},n.na=function(){Mn(this);const m=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let w=0;w<T.length;w++){const G=m[w];for(let Z=0;Z<G.length;Z++)C.push(T[w])}return C},n.V=function(m){Mn(this);let T=[];if(typeof m=="string")qi(this,m)&&(T=T.concat(this.g.get(si(this,m))));else{m=Array.from(this.g.values());for(let C=0;C<m.length;C++)T=T.concat(m[C])}return T},n.set=function(m,T){return Mn(this),this.i=null,m=si(this,m),qi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=this.V(m),0<m.length?String(m[0]):T):T};function Ua(m,T,C){Fi(m,T),0<C.length&&(m.i=null,m.g.set(si(m,T),q(C)),m.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var w=T[C];const Z=encodeURIComponent(String(w)),ce=this.V(w);for(w=0;w<ce.length;w++){var G=Z;ce[w]!==""&&(G+="="+encodeURIComponent(String(ce[w]))),m.push(G)}}return this.i=m.join("&")};function si(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function Cu(m,T){T&&!m.j&&(Mn(m),m.i=null,m.g.forEach(function(C,w){var G=w.toLowerCase();w!=G&&(Fi(this,w),Ua(this,G,C))},m)),m.j=T}function gr(m,T){const C=new Rn;if(h.Image){const w=new Image;w.onload=x(xn,C,"TestLoadImage: loaded",!0,T,w),w.onerror=x(xn,C,"TestLoadImage: error",!1,T,w),w.onabort=x(xn,C,"TestLoadImage: abort",!1,T,w),w.ontimeout=x(xn,C,"TestLoadImage: timeout",!1,T,w),h.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=m}else T(!1)}function Yn(m,T){const C=new Rn,w=new AbortController,G=setTimeout(()=>{w.abort(),xn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:w.signal}).then(Z=>{clearTimeout(G),Z.ok?xn(C,"TestPingServer: ok",!0,T):xn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(G),xn(C,"TestPingServer: error",!1,T)})}function xn(m,T,C,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(C)}catch{}}function yr(){this.g=new lr}function ai(m,T,C){const w=C||"";try{Pa(m,function(G,Z){let ce=G;p(G)&&(ce=Gn(G)),T.push(w+Z+"="+encodeURIComponent(ce))})}catch(G){throw T.push(w+"type="+encodeURIComponent("_badmap")),G}}function vo(m){this.l=m.Ub||null,this.j=m.eb||!1}U(vo,Aa),vo.prototype.g=function(){return new Bi(this.l,this.j)},vo.prototype.i=(function(m){return function(){return m}})({});function Bi(m,T){gt.call(this),this.D=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Bi,gt),n=Bi.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=T,this.readyState=1,ui(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(T.body=m),(this.D||h).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;La(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function La(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?li(this):ui(this),this.readyState==3&&La(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,li(this))},n.Qa=function(m){this.g&&(this.response=m,li(this))},n.ga=function(){this.g&&li(this)};function li(m){m.readyState=4,m.l=null,m.j=null,m.v=null,ui(m)}n.setRequestHeader=function(m,T){this.u.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,m.push(C[0]+": "+C[1]),C=T.next();return m.join(`\r
`)};function ui(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Oa(m){let T="";return J(m,function(C,w){T+=w,T+=":",T+=C,T+=`\r
`}),T}function Lt(m,T,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Oa(C),typeof m=="string"?C!=null&&encodeURIComponent(String(C)):nt(m,T,C))}function Je(m){gt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Je,gt);var cs=/^https?$/i,_r=["POST","PUT"];n=Je.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,T,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ii.g(),this.v=this.o?Ia(this.o):Ia(ii),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(Z){Au(this,Z);return}if(m=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)C.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Z of w.keys())C.set(Z,w.get(Z));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=h.FormData&&m instanceof h.FormData,!(0<=Array.prototype.indexOf.call(_r,T,void 0))||w||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ce]of C)this.g.setRequestHeader(Z,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vr(this),this.u=!0,this.g.send(m),this.u=!1}catch(Z){Au(this,Z)}};function Au(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.m=5,fs(m),ci(m)}function fs(m){m.A||(m.A=!0,We(m,"complete"),We(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,We(this,"complete"),We(this,"abort"),ci(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ci(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ds(this):this.bb())},n.bb=function(){ds(this)};function ds(m){if(m.h&&typeof d<"u"&&(!m.v[1]||bn(m)!=4||m.Z()!=2)){if(m.u&&bn(m)==4)Zt(m.Ea,0,m);else if(We(m,"readystatechange"),bn(m)==4){m.h=!1;try{const ce=m.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var w;if(w=ce===0){var G=String(m.D).match(dr)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),w=!cs.test(G?G.toLowerCase():"")}C=w}if(C)We(m,"complete"),We(m,"success");else{m.m=6;try{var Z=2<bn(m)?m.g.statusText:""}catch{Z=""}m.l=Z+" ["+m.Z()+"]",fs(m)}}finally{ci(m)}}}}function ci(m,T){if(m.g){vr(m);const C=m.g,w=m.v[0]?()=>{}:null;m.g=null,m.v=null,T||We(m,"ready");try{C.onreadystatechange=w}catch{}}}function vr(m){m.I&&(h.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function bn(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),ns(T)}};function Iu(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ed(m){const T={};m=(m.g&&2<=bn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<m.length;w++){if(K(m[w]))continue;var C=V(m[w]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Z=T[G]||[];T[G]=Z,Z.push(C)}b(T,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(m,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[m]||T}function hs(m){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tr("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tr("baseRetryDelayMs",5e3,m),this.cb=Tr("retryDelaySeedMs",1e4,m),this.Wa=Tr("forwardChannelMaxRetries",2,m),this.wa=Tr("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Ui(m&&m.concurrentRequestLimit),this.Da=new yr,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hs.prototype,n.la=8,n.G=1,n.connect=function(m,T,C,w){ft(0),this.W=m,this.H=T||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.I=Du(this,null,this.W),ps(this)};function Fa(m){if(Ru(m),m.G==3){var T=m.U++,C=yn(m.I);if(nt(C,"SID",m.K),nt(C,"RID",T),nt(C,"TYPE","terminate"),Er(m,C),T=new an(m,m.j,T),T.L=2,T.v=mr(yn(C)),C=!1,h.navigator&&h.navigator.sendBeacon)try{C=h.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&h.Image&&(new Image().src=T.v,C=!0),C||(T.g=Pu(T.j,null),T.g.ea(T.v)),T.F=Date.now(),cr(T)}Nu(m)}function ms(m){m.g&&(Sr(m),m.g.cancel(),m.g=null)}function Ru(m){ms(m),m.u&&(h.clearTimeout(m.u),m.u=null),gs(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&h.clearTimeout(m.s),m.s=null)}function ps(m){if(!rs(m.h)&&!m.s){m.s=!0;var T=m.Ga;ue||L(),he||(ue(),he=!0),qe.add(T,m),m.B=0}}function td(m,T){return ss(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=T.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=At(S(m.Ga,m,T),Ha(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const G=new an(this,this.j,m);let Z=this.o;if(this.S&&(Z?(Z=R(Z),N(Z,this.S)):Z=this.S),this.m!==null||this.O||(G.H=Z,Z=null),this.P)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(T+=w,4096<T){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=wu(this,G,T),C=yn(this.I),nt(C,"RID",m),nt(C,"CVER",22),this.D&&nt(C,"X-HTTP-Session-Id",this.D),Er(this,C),Z&&(this.O?T="headers="+encodeURIComponent(String(Oa(Z)))+"&"+T:this.m&&Lt(C,this.m,Z)),as(this.h,G),this.Ua&&nt(C,"TYPE","init"),this.P?(nt(C,"$req",T),nt(C,"SID","null"),G.T=!0,zn(G,C,null)):zn(G,C,T),this.G=2}}else this.G==3&&(m?qa(this,m):this.i.length==0||rs(this.h)||qa(this))};function qa(m,T){var C;T?C=T.l:C=m.U++;const w=yn(m.I);nt(w,"SID",m.K),nt(w,"RID",C),nt(w,"AID",m.T),Er(m,w),m.m&&m.o&&Lt(w,m.m,m.o),C=new an(m,m.j,C,m.B+1),m.m===null&&(C.H=m.o),T&&(m.i=T.D.concat(m.i)),T=wu(m,C,1e3),C.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),as(m.h,C),zn(C,w,T)}function Er(m,T){m.H&&J(m.H,function(C,w){nt(T,w,C)}),m.l&&Pa({},function(C,w){nt(T,w,C)})}function wu(m,T,C){C=Math.min(m.i.length,C);var w=m.l?S(m.l.Na,m.l,m):null;e:{var G=m.i;let Z=-1;for(;;){const ce=["count="+C];Z==-1?0<C?(Z=G[0].g,ce.push("ofs="+Z)):Z=0:ce.push("ofs="+Z);let Be=!0;for(let Nt=0;Nt<C;Nt++){let He=G[Nt].g;const Ot=G[Nt].map;if(He-=Z,0>He)Z=Math.max(0,G[Nt].g-100),Be=!1;else try{ai(Ot,ce,"req"+He+"_")}catch{w&&w(Ot)}}if(Be){w=ce.join("&");break e}}}return m=m.i.splice(0,C),T.D=m,w}function Mu(m){if(!m.g&&!m.u){m.Y=1;var T=m.Fa;ue||L(),he||(ue(),he=!0),qe.add(T,m),m.v=0}}function Ba(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=At(S(m.Fa,m),Ha(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=At(S(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),ms(this),xu(this))};function Sr(m){m.A!=null&&(h.clearTimeout(m.A),m.A=null)}function xu(m){m.g=new an(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var T=yn(m.qa);nt(T,"RID","rpc"),nt(T,"SID",m.K),nt(T,"AID",m.T),nt(T,"CI",m.F?"0":"1"),!m.F&&m.ja&&nt(T,"TO",m.ja),nt(T,"TYPE","xmlhttp"),Er(m,T),m.m&&m.o&&Lt(T,m.m,m.o),m.L&&(m.g.I=m.L);var C=m.g;m=m.ia,C.L=1,C.v=mr(yn(T)),C.m=null,C.P=!0,Vi(C,m)}n.Za=function(){this.C!=null&&(this.C=null,ms(this),Ba(this),ft(19))};function gs(m){m.C!=null&&(h.clearTimeout(m.C),m.C=null)}function bu(m,T){var C=null;if(m.g==T){gs(m),Sr(m),m.g=null;var w=2}else if(Na(m.h,T))C=T.D,ln(m.h,T),w=1;else return;if(m.G!=0){if(T.o)if(w==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var G=m.B;w=ho(),We(w,new bt(w,C)),ps(m)}else Mu(m);else if(G=T.s,G==3||G==0&&0<T.X||!(w==1&&td(m,T)||w==2&&Ba(m)))switch(C&&0<C.length&&(T=m.h,T.i=T.i.concat(C)),G){case 1:Hi(m,5);break;case 4:Hi(m,10);break;case 3:Hi(m,6);break;default:Hi(m,2)}}}function Ha(m,T){let C=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(C*=2),C*T}function Hi(m,T){if(m.j.info("Error code "+T),T==2){var C=S(m.fb,m),w=m.Xa;const G=!w;w=new It(w||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||hr(w,"https"),mr(w),G?gr(w.toString(),C):Yn(w.toString(),C)}else ft(2);m.G=0,m.l&&m.l.sa(T),Nu(m),Ru(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Nu(m){if(m.G=0,m.ka=[],m.l){const T=Da(m.h);(T.length!=0||m.i.length!=0)&&(H(m.ka,T),H(m.ka,m.i),m.h.i.length=0,q(m.i),m.i.length=0),m.l.ra()}}function Du(m,T,C){var w=C instanceof It?yn(C):new It(C);if(w.g!="")T&&(w.g=T+"."+w.g),_o(w,w.s);else{var G=h.location;w=G.protocol,T=T?T+"."+G.hostname:G.hostname,G=+G.port;var Z=new It(null);w&&hr(Z,w),T&&(Z.g=T),G&&_o(Z,G),C&&(Z.l=C),w=Z}return C=m.D,T=m.ya,C&&T&&nt(w,C,T),nt(w,"VER",m.la),Er(m,w),w}function Pu(m,T,C){if(T&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Ca&&!m.pa?new Je(new vo({eb:C})):new Je(m.pa),T.Ha(m.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}n=ku.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ys(){}ys.prototype.g=function(m,T){return new un(m,T)};function un(m,T){gt.call(this),this.g=new hs(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(m?m["X-WebChannel-Client-Profile"]=T.va:m={"X-WebChannel-Client-Profile":T.va}),this.g.S=m,(m=T&&T.Sb)&&!K(m)&&(this.g.m=m),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!K(T)&&(this.g.D=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new fi(this)}U(un,gt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Fa(this.g)},un.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var C={};C.__data__=m,m=C}else this.u&&(C={},C.__data__=Gn(m),m=C);T.i.push(new Eu(T.Ya++,m)),T.G==3&&ps(T)},un.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,un.aa.N.call(this)};function Vu(m){Pi.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const C in T){m=C;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}U(Vu,Pi);function Uu(){wa.call(this),this.status=1}U(Uu,wa);function fi(m){this.g=m}U(fi,ku),fi.prototype.ua=function(){We(this.g,"a")},fi.prototype.ta=function(m){We(this.g,new Vu(m))},fi.prototype.sa=function(m){We(this.g,new Uu)},fi.prototype.ra=function(){We(this.g,"b")},ys.prototype.createWebChannel=ys.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,j0=function(){return new ys},Z0=function(){return ho()},W0=ni,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},go.NO_ERROR=0,go.TIMEOUT=8,go.HTTP_ERROR=6,Xc=go,ki.COMPLETE="complete",X0=ki,Ra.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Dl=Ra,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Q0=Je}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore",Bv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Qm("@firebase/firestore");function $s(){return $r.logLevel}function de(n,...e){if($r.logLevel<=Le.DEBUG){const t=e.map(lp);$r.debug(`Firestore (${pa}): ${n}`,...t)}}function uo(n,...e){if($r.logLevel<=Le.ERROR){const t=e.map(lp);$r.error(`Firestore (${pa}): ${n}`,...t)}}function sa(n,...e){if($r.logLevel<=Le.WARN){const t=e.map(lp);$r.warn(`Firestore (${pa}): ${n}`,...t)}}function lp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,eS(n,i,t)}function eS(n,e,t){let i=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw uo(i),new Error(i)}function Qe(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||eS(e,s,i)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class PM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kM{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let i=this.i;const s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let l=new Wo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wo,e.enqueueRetryable((()=>s(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await s(this.currentUser)}))},h=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>h(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wo)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string",31837,{l:i}),new tS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class VM{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UM{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new VM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const s=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=OM(40);for(let l=0;l<s.length;++l)i.length<20&&s[l]<t&&(i+=e.charAt(s[l]%62))}return i}}function Oe(n,e){return n<e?-1:n>e?1:0}function Em(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),l=e.charAt(i);if(s!==l)return rm(s)===rm(l)?Oe(s,l):rm(s)?1:-1}return Oe(n.length,e.length)}const FM=55296,qM=57343;function rm(n){const e=n.charCodeAt(0);return e>=FM&&e<=qM}function aa(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="__name__";class _i{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return _i.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _i?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const l=_i.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const i=_i.isNumericId(e),s=_i.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?_i.extractNumericId(e).compare(_i.extractNumericId(t)):Em(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xo.fromString(e.substring(4,e.length-2))}}class mt extends _i{construct(e,t,i){return new mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const BM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends _i{construct(e,t,i){return new Xt(e,t,i)}static isValidIdentifier(e){return BM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gv}static keyField(){return new Xt([Gv])}static fromServerFormat(e){const t=[];let i="",s=0;const l=()=>{if(i.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ye(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,s+=2}else h==="`"?(d=!d,s++):h!=="."||d?(i+=h,s++):(l(),s++)}if(l(),d)throw new ye(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(mt.fromString(e))}static fromName(e){return new Te(mt.fromString(e).popFirst(5))}static empty(){return new Te(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(n,e,t){if(!t)throw new ye(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GM(n,e,t,i){if(e===!0&&i===!0)throw new ye(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zv(n){if(!Te.isDocumentKey(n))throw new ye(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function Kl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cp(n);throw new ye(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function su(n,e){if(!nS(n))throw new ye(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const d=n[i];if(s&&typeof d!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ye(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=-62135596800,$v=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*$v);return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Yv)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$v}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(su(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:xt("string",ct._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new ct(0,0))}static max(){return new Me(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function zM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new Zo(s,Te.empty(),e)}function YM(n){return new Zo(n.readTime,n.key,Jl)}class Zo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Zo(Me.min(),Te.empty(),Jl)}static max(){return new Zo(Me.max(),Te.empty(),Jl)}}function $M(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ga(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==KM)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((i,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,i)=>{t(e)}))}static reject(e){return new oe(((t,i)=>{i(e)}))}static waitFor(e){return new oe(((t,i)=>{let s=0,l=0,d=!1;e.forEach((h=>{++s,h.next((()=>{++l,d&&l===s&&t()}),(g=>i(g)))})),d=!0,l===s&&t()}))}static or(e){let t=oe.resolve(!1);for(const i of e)t=t.next((s=>s?oe.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,l)=>{i.push(t.call(this,s,l))})),this.waitFor(i)}static mapArray(e,t){return new oe(((i,s)=>{const l=e.length,d=new Array(l);let h=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((_=>{d[p]=_,++h,h===l&&i(d)}),(_=>s(_)))}}))}static doWhile(e,t){return new oe(((i,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):i()};l()}))}}function QM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ya(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=-1;function kf(n){return n==null}function mf(n){return n===0&&1/n==-1/0}function XM(n){return typeof n=="number"&&Number.isInteger(n)&&!mf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="";function WM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Kv(e)),e=ZM(n.get(t),e);return Kv(e)}function ZM(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case iS:t+="";break;default:t+=l}}return t}function Kv(n){return n+iS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function oS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,i,s,l){this.key=e,this.value=t,this.color=i??Qt.RED,this.left=s??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,l){return new Qt(e??this.key,t??this.value,i??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const l=i(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,i),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Qt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,i,s,l){return this}insert(e,t,i){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new Ut(Xt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new rS("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let d=0;d<s.length;++d)l+=String.fromCharCode(s[d]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const jM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=jM.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function er(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="server_timestamp",aS="__type__",lS="__previous_value__",uS="__local_write_time__";function dp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[aS])==null?void 0:i.stringValue)===sS}function Vf(n){const e=n.mapValue.fields[lS];return dp(e)?Vf(e):e}function Ql(n){const e=jo(n.mapValue.fields[uS].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,i,s,l,d,h,g,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_}}const pf="(default)";class Xl{constructor(e,t){this.projectId=e,this.database=t||pf}static empty(){return new Xl("","")}get isDefaultDatabase(){return this.database===pf}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="__type__",tx="__max__",qc={mapValue:{}},fS="__vector__",gf="value";function tr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dp(n)?4:ix(n)?9007199254740991:nx(n)?10:11:Ce(28295,{value:n})}function Ii(n,e){if(n===e)return!0;const t=tr(n);if(t!==tr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ql(n).isEqual(Ql(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const d=jo(s.timestampValue),h=jo(l.timestampValue);return d.seconds===h.seconds&&d.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return er(s.bytesValue).isEqual(er(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return St(s.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return St(s.integerValue)===St(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const d=St(s.doubleValue),h=St(l.doubleValue);return d===h?mf(d)===mf(h):isNaN(d)&&isNaN(h)}return!1})(n,e);case 9:return aa(n.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(s,l){const d=s.mapValue.fields||{},h=l.mapValue.fields||{};if(Jv(d)!==Jv(h))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(h[g]===void 0||!Ii(d[g],h[g])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function Wl(n,e){return(n.values||[]).find((t=>Ii(t,e)))!==void 0}function la(n,e){if(n===e)return 0;const t=tr(n),i=tr(e);if(t!==i)return Oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(l,d){const h=St(l.integerValue||l.doubleValue),g=St(d.integerValue||d.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1})(n,e);case 3:return Xv(n.timestampValue,e.timestampValue);case 4:return Xv(Ql(n),Ql(e));case 5:return Em(n.stringValue,e.stringValue);case 6:return(function(l,d){const h=er(l),g=er(d);return h.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,d){const h=l.split("/"),g=d.split("/");for(let p=0;p<h.length&&p<g.length;p++){const _=Oe(h[p],g[p]);if(_!==0)return _}return Oe(h.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,d){const h=Oe(St(l.latitude),St(d.latitude));return h!==0?h:Oe(St(l.longitude),St(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Wv(n.arrayValue,e.arrayValue);case 10:return(function(l,d){var S,x,U,q;const h=l.fields||{},g=d.fields||{},p=(S=h[gf])==null?void 0:S.arrayValue,_=(x=g[gf])==null?void 0:x.arrayValue,E=Oe(((U=p==null?void 0:p.values)==null?void 0:U.length)||0,((q=_==null?void 0:_.values)==null?void 0:q.length)||0);return E!==0?E:Wv(p,_)})(n.mapValue,e.mapValue);case 11:return(function(l,d){if(l===qc.mapValue&&d===qc.mapValue)return 0;if(l===qc.mapValue)return 1;if(d===qc.mapValue)return-1;const h=l.fields||{},g=Object.keys(h),p=d.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const S=Em(g[E],_[E]);if(S!==0)return S;const x=la(h[g[E]],p[_[E]]);if(x!==0)return x}return Oe(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function Xv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=jo(n),i=jo(e),s=Oe(t.seconds,i.seconds);return s!==0?s:Oe(t.nanos,i.nanos)}function Wv(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const l=la(t[s],i[s]);if(l)return l}return Oe(t.length,i.length)}function ua(n){return Sm(n)}function Sm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=jo(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return er(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const l of t.values||[])s?s=!1:i+=",",i+=Sm(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const d of i)l?l=!1:s+=",",s+=`${d}:${Sm(t.fields[d])}`;return s+"}"})(n.mapValue):Ce(61005,{value:n})}function Wc(n){switch(tr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vf(n);return e?16+Wc(e):16;case 5:return 2*n.stringValue.length;case 6:return er(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,l)=>s+Wc(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Qr(i.fields,((l,d)=>{s+=l.length+Wc(d)})),s})(n.mapValue);default:throw Ce(13486,{value:n})}}function Cm(n){return!!n&&"integerValue"in n}function hp(n){return!!n&&"arrayValue"in n}function Zv(n){return!!n&&"nullValue"in n}function jv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zc(n){return!!n&&"mapValue"in n}function nx(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cS])==null?void 0:i.stringValue)===fS}function Ol(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Qr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ol(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(n.arrayValue.values[t]);return e}return{...n}}function ix(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Zc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=Xt.emptyPath(),i={},s=[];e.forEach(((d,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,i,s),i={},s=[],t=h.popLast()}d?i[h.lastSegment()]=Ol(d):s.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,s)}delete(e){const t=this.field(e.popLast());Zc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Zc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Qr(t,((s,l)=>e[s]=l));for(const s of i)delete e[s]}clone(){return new On(Ol(this.value))}}function dS(n){const e=[];return Qr(n.fields,((t,i)=>{const s=new Xt([t]);if(Zc(i)){const l=dS(i.mapValue).fields;if(l.length===0)e.push(s);else for(const d of l)e.push(s.child(d))}else e.push(s)})),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,i,s,l,d,h){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=l,this.data=d,this.documentState=h}static newInvalidDocument(e){return new on(e,0,Me.min(),Me.min(),Me.min(),On.empty(),0)}static newFoundDocument(e,t,i,s){return new on(e,1,t,Me.min(),i,s,0)}static newNoDocument(e,t){return new on(e,2,t,Me.min(),Me.min(),On.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Me.min(),Me.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t){this.position=e,this.inclusive=t}}function eT(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const l=e[s],d=n.position[s];if(l.field.isKeyField()?i=Te.comparator(Te.fromName(d.referenceValue),t.key):i=la(d,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function tT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ii(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t="asc"){this.field=e,this.dir=t}}function ox(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{}class Vt extends hS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sx(e,t,i):t==="array-contains"?new ux(e,i):t==="in"?new cx(e,i):t==="not-in"?new fx(e,i):t==="array-contains-any"?new dx(e,i):new Vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ax(e,i):new lx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(la(t,this.value)):t!==null&&tr(this.value)===tr(t)&&this.matchesComparison(la(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends hS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ri(e,t)}matches(e){return mS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mS(n){return n.op==="and"}function pS(n){return rx(n)&&mS(n)}function rx(n){for(const e of n.filters)if(e instanceof Ri)return!1;return!0}function Am(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+ua(n.value);if(pS(n))return n.filters.map((e=>Am(e))).join(",");{const e=n.filters.map((t=>Am(t))).join(",");return`${n.op}(${e})`}}function gS(n,e){return n instanceof Vt?(function(i,s){return s instanceof Vt&&i.op===s.op&&i.field.isEqual(s.field)&&Ii(i.value,s.value)})(n,e):n instanceof Ri?(function(i,s){return s instanceof Ri&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((l,d,h)=>l&&gS(d,s.filters[h])),!0):!1})(n,e):void Ce(19439)}function yS(n){return n instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ua(t.value)}`})(n):n instanceof Ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(yS).join(" ,")+"}"})(n):"Filter"}class sx extends Vt{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class ax extends Vt{constructor(e,t){super(e,"in",t),this.keys=_S("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lx extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=_S("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _S(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class ux extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hp(t)&&Wl(t.arrayValue,this.value)}}class cx extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wl(this.value.arrayValue,t)}}class fx extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wl(this.value.arrayValue,t)}}class dx extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Wl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t=null,i=[],s=[],l=null,d=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=l,this.startAt=d,this.endAt=h,this.Te=null}}function nT(n,e=null,t=[],i=[],s=null,l=null,d=null){return new hx(n,e,t,i,s,l,d)}function mp(n){const e=xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Am(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),kf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ua(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ua(i))).join(",")),e.Te=t}return e.Te}function pp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ox(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tT(n.startAt,e.startAt)&&tT(n.endAt,e.endAt)}function Im(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t=null,i=[],s=[],l=null,d="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=l,this.limitType=d,this.startAt=h,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mx(n,e,t,i,s,l,d,h){return new Uf(n,e,t,i,s,l,d,h)}function gp(n){return new Uf(n)}function iT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function px(n){return n.collectionGroup!==null}function Fl(n){const e=xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let h=new Ut(Xt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new _f(l,i))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new _f(Xt.keyField(),i))}return e.Ie}function Ti(n){const e=xe(n);return e.Ee||(e.Ee=gx(e,Fl(n))),e.Ee}function gx(n,e){if(n.limitType==="F")return nT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new _f(s.field,l)}));const t=n.endAt?new yf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new yf(n.startAt.position,n.startAt.inclusive):null;return nT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Rm(n,e,t){return new Uf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lf(n,e){return pp(Ti(n),Ti(e))&&n.limitType===e.limitType}function vS(n){return`${mp(Ti(n))}|lt:${n.limitType}`}function Ks(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>yS(s))).join(", ")}]`),kf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>ua(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>ua(s))).join(",")),`Target(${i})`})(Ti(n))}; limitType=${n.limitType})`}function Of(n,e){return e.isFoundDocument()&&(function(i,s){const l=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Te.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,s){for(const l of Fl(i))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const l of i.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(d,h,g){const p=eT(d,h,g);return d.inclusive?p<=0:p<0})(i.startAt,Fl(i),s)||i.endAt&&!(function(d,h,g){const p=eT(d,h,g);return d.inclusive?p>=0:p>0})(i.endAt,Fl(i),s))})(n,e)}function yx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TS(n){return(e,t)=>{let i=!1;for(const s of Fl(n)){const l=_x(s,e,t);if(l!==0)return l;i=i||s.field.isKeyField()}return 0}}function _x(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,d,h){const g=d.data.field(l),p=h.data.field(l);return g!==null&&p!==null?la(g,p):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,l]of i)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,((t,i)=>{for(const[s,l]of i)e(s,l)}))}isEmpty(){return oS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new pt(Te.comparator);function co(){return vx}const ES=new pt(Te.comparator);function Pl(...n){let e=ES;for(const t of n)e=e.insert(t.key,t);return e}function SS(n){let e=ES;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function qr(){return ql()}function CS(){return ql()}function ql(){return new Xr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Tx=new pt(Te.comparator),Ex=new Ut(Te.comparator);function Fe(...n){let e=Ex;for(const t of n)e=e.add(t);return e}const Sx=new Ut(Oe);function Cx(){return Sx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mf(e)?"-0":e}}function AS(n){return{integerValue:""+n}}function Ax(n,e){return XM(e)?AS(e):yp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this._=void 0}}function Ix(n,e,t){return n instanceof vf?(function(s,l){const d={fields:{[aS]:{stringValue:sS},[uS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&dp(l)&&(l=Vf(l)),l&&(d.fields[lS]=l),{mapValue:d}})(t,e):n instanceof Zl?RS(n,e):n instanceof jl?wS(n,e):(function(s,l){const d=IS(s,l),h=oT(d)+oT(s.Ae);return Cm(d)&&Cm(s.Ae)?AS(h):yp(s.serializer,h)})(n,e)}function Rx(n,e,t){return n instanceof Zl?RS(n,e):n instanceof jl?wS(n,e):t}function IS(n,e){return n instanceof Tf?(function(i){return Cm(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class vf extends Ff{}class Zl extends Ff{constructor(e){super(),this.elements=e}}function RS(n,e){const t=MS(e);for(const i of n.elements)t.some((s=>Ii(s,i)))||t.push(i);return{arrayValue:{values:t}}}class jl extends Ff{constructor(e){super(),this.elements=e}}function wS(n,e){let t=MS(e);for(const i of n.elements)t=t.filter((s=>!Ii(s,i)));return{arrayValue:{values:t}}}class Tf extends Ff{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oT(n){return St(n.integerValue||n.doubleValue)}function MS(n){return hp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function wx(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Zl&&s instanceof Zl||i instanceof jl&&s instanceof jl?aa(i.elements,s.elements,Ii):i instanceof Tf&&s instanceof Tf?Ii(i.Ae,s.Ae):i instanceof vf&&s instanceof vf})(n.transform,e.transform)}class Mx{constructor(e,t){this.version=e,this.transformResults=t}}class so{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new so}static exists(e){return new so(void 0,e)}static updateTime(e){return new so(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qf{}function xS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new NS(n.key,so.none()):new au(n.key,n.data,so.none());{const t=n.data,i=On.empty();let s=new Ut(Xt.comparator);for(let l of e.fields)if(!s.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?i.delete(l):i.set(l,d),s=s.add(l)}return new Wr(n.key,i,new Wn(s.toArray()),so.none())}}function xx(n,e,t){n instanceof au?(function(s,l,d){const h=s.value.clone(),g=sT(s.fieldTransforms,l,d.transformResults);h.setAll(g),l.convertToFoundDocument(d.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Wr?(function(s,l,d){if(!jc(s.precondition,l))return void l.convertToUnknownDocument(d.version);const h=sT(s.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(bS(s)),g.setAll(h),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(n,e,t):(function(s,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Bl(n,e,t,i){return n instanceof au?(function(l,d,h,g){if(!jc(l.precondition,d))return h;const p=l.value.clone(),_=aT(l.fieldTransforms,g,d);return p.setAll(_),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof Wr?(function(l,d,h,g){if(!jc(l.precondition,d))return h;const p=aT(l.fieldTransforms,g,d),_=d.data;return _.setAll(bS(l)),_.setAll(p),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,d,h){return jc(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):h})(n,e,t)}function bx(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),l=IS(i.transform,s||null);l!=null&&(t===null&&(t=On.empty()),t.set(i.field,l))}return t||null}function rT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&aa(i,s,((l,d)=>wx(l,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class au extends qf{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wr extends qf{constructor(e,t,i,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function bS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function sT(n,e,t){const i=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const l=n[s],d=l.transform,h=e.data.field(l.field);i.set(l.field,Rx(d,h,t[s]))}return i}function aT(n,e,t){const i=new Map;for(const s of n){const l=s.transform,d=t.data.field(s.field);i.set(s.field,Ix(l,d,e))}return i}class NS extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nx extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&xx(l,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Bl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Bl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=CS();return this.mutations.forEach((s=>{const l=e.get(s.key),d=l.overlayedDocument;let h=this.applyToLocalView(d,l.mutatedFields);h=t.has(s.key)?null:h;const g=xS(d,h);g!==null&&i.set(s.key,g),d.isValidDocument()||d.convertToNoDocument(Me.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,((t,i)=>rT(t,i)))&&aa(this.baseMutations,e.baseMutations,((t,i)=>rT(t,i)))}}class _p{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Qe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return Tx})();const l=e.mutations;for(let d=0;d<l.length;d++)s=s.insert(l[d].key,i[d].version);return new _p(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,ze;function Vx(n){switch(n){case se.OK:return Ce(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function DS(n){if(n===void 0)return uo("GRPC error has no .code"),se.UNKNOWN;switch(n){case Mt.OK:return se.OK;case Mt.CANCELLED:return se.CANCELLED;case Mt.UNKNOWN:return se.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return se.INTERNAL;case Mt.UNAVAILABLE:return se.UNAVAILABLE;case Mt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Mt.NOT_FOUND:return se.NOT_FOUND;case Mt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Mt.ABORTED:return se.ABORTED;case Mt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Mt.DATA_LOSS:return se.DATA_LOSS;default:return Ce(39323,{code:n})}}(ze=Mt||(Mt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=new Xo([4294967295,4294967295],0);function lT(n){const e=Ux().encode(n),t=new J0;return t.update(e),new Uint8Array(t.digest())}function uT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Xo([t,i],0),new Xo([s,l],0)]}class vp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new kl(`Invalid padding: ${t}`);if(i<0)throw new kl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new kl(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new kl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Xo.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Xo.fromNumber(i)));return s.compare(Lx)===1&&(s=new Xo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lT(e),[i,s]=uT(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(i,s,l);if(!this.we(d))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new vp(l,s,t);return i.forEach((h=>d.insert(h))),d}insert(e){if(this.ge===0)return;const t=lT(e),[i,s]=uT(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(i,s,l);this.Se(d)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,i,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Bf(Me.min(),s,new pt(Oe),co(),Fe())}}class lu{constructor(e,t,i,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new lu(i,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class PS{constructor(e,t){this.targetId=e,this.Ce=t}}class kS{constructor(e,t,i=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class cT{constructor(){this.ve=0,this.Fe=fT(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),i=Fe();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Ce(38017,{changeType:l})}})),new lu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=fT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ox{constructor(e){this.Ge=e,this.ze=new Map,this.je=co(),this.Je=Bc(),this.He=Bc(),this.Ye=new pt(Oe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Im(l))if(i===0){const d=new Te(l.path);this.et(t,d,on.newNoDocument(d,Me.min()))}else Qe(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const h=this.ut(e),g=h?this.ct(h,e,d):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:l=0}=t;let d,h;try{d=er(i).toUint8Array()}catch(g){if(g instanceof rS)return sa("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new vp(d,s,l)}catch(g){return sa(g instanceof kl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((l=>{const d=this.Ge.ht(),h=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const h=this.ot(d);if(h){if(l.current&&Im(h.target)){const g=new Te(h.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,on.newNoDocument(g,e))}l.Be&&(t.set(d,l.ke()),l.qe())}}));let i=Fe();this.He.forEach(((l,d)=>{let h=!0;d.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const s=new Bf(e,t,this.Ye,this.je,i);return this.je=co(),this.Je=Bc(),this.He=Bc(),this.Ye=new pt(Oe),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new cT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ut(Oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ut(Oe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bc(){return new pt(Te.comparator)}function fT(){return new pt(Te.comparator)}const Fx={asc:"ASCENDING",desc:"DESCENDING"},qx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bx={and:"AND",or:"OR"};class Hx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wm(n,e){return n.useProto3Json||kf(e)?e:{value:e}}function Ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Gx(n,e){return Ef(n,e.toTimestamp())}function Ei(n){return Qe(!!n,49232),Me.fromTimestamp((function(t){const i=jo(t);return new ct(i.seconds,i.nanos)})(n))}function Tp(n,e){return Mm(n,e).canonicalString()}function Mm(n,e){const t=(function(s){return new mt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function US(n){const e=mt.fromString(n);return Qe(BS(e),10190,{key:e.toString()}),e}function xm(n,e){return Tp(n.databaseId,e.path)}function sm(n,e){const t=US(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(OS(t))}function LS(n,e){return Tp(n.databaseId,e)}function zx(n){const e=US(n);return e.length===4?mt.emptyPath():OS(e)}function bm(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OS(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dT(n,e,t){return{name:xm(n,e),fields:t.value.mapValue.fields}}function Yx(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(Qe(_===void 0||typeof _=="string",58123),Wt.fromBase64String(_||"")):(Qe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Wt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,h=d&&(function(p){const _=p.code===void 0?se.UNKNOWN:DS(p.code);return new ye(_,p.message||"")})(d);t=new kS(i,s,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sm(n,i.document.name),l=Ei(i.document.updateTime),d=i.document.createTime?Ei(i.document.createTime):Me.min(),h=new On({mapValue:{fields:i.document.fields}}),g=on.newFoundDocument(s,l,d,h),p=i.targetIds||[],_=i.removedTargetIds||[];t=new ef(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sm(n,i.document),l=i.readTime?Ei(i.readTime):Me.min(),d=on.newNoDocument(s,l),h=i.removedTargetIds||[];t=new ef([],h,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sm(n,i.document),l=i.removedTargetIds||[];t=new ef([],l,s,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:l}=i,d=new kx(s,l),h=i.targetId;t=new PS(h,d)}}return t}function $x(n,e){let t;if(e instanceof au)t={update:dT(n,e.key,e.value)};else if(e instanceof NS)t={delete:xm(n,e.key)};else if(e instanceof Wr)t={update:dT(n,e.key,e.data),updateMask:tb(e.fieldMask)};else{if(!(e instanceof Nx))return Ce(16599,{Vt:e.type});t={verify:xm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,d){const h=d.transform;if(h instanceof vf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Zl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof jl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Tf)return{fieldPath:d.field.canonicalString(),increment:h.Ae};throw Ce(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:Gx(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function Kx(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(s,l){let d=s.updateTime?Ei(s.updateTime):Ei(l);return d.isEqual(Me.min())&&(d=Ei(l)),new Mx(d,s.transformResults||[])})(t,e)))):[]}function Jx(n,e){return{documents:[LS(n,e.path)]}}function Qx(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=LS(n,s);const l=(function(p){if(p.length!==0)return qS(Ri.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(p){if(p.length!==0)return p.map((_=>(function(S){return{field:Js(S.field),direction:Zx(S.dir)}})(_)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const h=wm(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function Xx(n){let e=zx(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Qe(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const S=FS(E);return S instanceof Ri&&pS(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(E){return E.map((S=>(function(U){return new _f(Qs(U.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(E){let S;return S=typeof E=="object"?E.value:E,kf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,x=E.values||[];return new yf(x,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,x=E.values||[];return new yf(x,S)})(t.endAt)),mx(e,s,d,l,h,"F",g,p)}function Wx(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Qs(t.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Qs(t.unaryFilter.field);return Vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Qs(t.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Qs(t.unaryFilter.field);return Vt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Vt.create(Qs(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ri.create(t.compositeFilter.filters.map((i=>FS(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function Zx(n){return Fx[n]}function jx(n){return qx[n]}function eb(n){return Bx[n]}function Js(n){return{fieldPath:n.canonicalString()}}function Qs(n){return Xt.fromServerFormat(n.fieldPath)}function qS(n){return n instanceof Vt?(function(t){if(t.op==="=="){if(jv(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NAN"}};if(Zv(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jv(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NAN"}};if(Zv(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(t.field),op:jx(t.op),value:t.value}}})(n):n instanceof Ri?(function(t){const i=t.getFilters().map((s=>qS(s)));return i.length===1?i[0]:{compositeFilter:{op:eb(t.op),filters:i}}})(n):Ce(54877,{filter:n})}function tb(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t,i,s,l=Me.min(),d=Me.min(),h=Wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new Yo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.yt=e}}function ib(n){const e=Xx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.Cn=new rb}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Zo.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Zo.min())}updateCollectionGroup(e,t,i){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class rb{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ut(mt.comparator),l=!s.has(i);return this.index[t]=s.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ut(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HS=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(HS,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ca(0)}static cr(){return new ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="LruGarbageCollector",sb=1048576;function pT([n,e],[t,i]){const s=Oe(n,t);return s===0?Oe(e,i):s}class ab{constructor(e){this.Ir=e,this.buffer=new Ut(pT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();pT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lb{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(mT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ya(t)?de(mT,"Ignoring IndexedDB error during garbage collection: ",t):await ga(t)}await this.Vr(3e5)}))}}class ub{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Pf.ce);const i=new ab(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(hT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,l,d,h,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,d=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,h=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(p=Date.now(),$s()<=Le.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${s} in `+(h-d)+`ms
	Removed ${l} targets in `+(g-h)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function cb(n,e){return new ub(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.changes=new Xr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?oe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Bl(i.mutation,s,Wn.empty(),ct.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Fe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Fe()){const s=qr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((l=>{let d=Pl();return l.forEach(((h,g)=>{d=d.insert(h,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=qr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Fe())))}populateOverlays(e,t,i){const s=[];return i.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((d,h)=>{t.set(d,h)}))}))}computeViews(e,t,i,s){let l=co();const d=ql(),h=(function(){return ql()})();return t.forEach(((g,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof Wr)?l=l.insert(p.key,p):_!==void 0?(d.set(p.key,_.mutation.getFieldMask()),Bl(_.mutation,p,_.mutation.getFieldMask(),ct.now())):d.set(p.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,_)=>d.set(p,_))),t.forEach(((p,_)=>h.set(p,new db(_,d.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=ql();let s=new pt(((d,h)=>d-h)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const h of d)h.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let _=i.get(g)||Wn.empty();_=h.applyToLocalView(p,_),i.set(g,_);const E=(s.get(h.batchId)||Fe()).add(g);s=s.insert(h.batchId,E)}))})).next((()=>{const d=[],h=s.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),p=g.key,_=g.value,E=CS();_.forEach((S=>{if(!l.has(S)){const x=xS(t.get(S),i.get(S));x!==null&&E.set(S,x),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,E))}return oe.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):px(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((l=>{const d=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-l.size):oe.resolve(qr());let h=Jl,g=l;return d.next((p=>oe.forEach(p,((_,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),l.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,Fe()))).next((_=>({batchId:h,changes:SS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let s=Pl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const l=t.collectionGroup;let d=Pl();return this.indexManager.getCollectionParents(e,l).next((h=>oe.forEach(h,(g=>{const p=(function(E,S){return new Uf(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next((_=>{_.forEach(((E,S)=>{d=d.insert(E,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,s)))).next((d=>{l.forEach(((g,p)=>{const _=p.getKey();d.get(_)===null&&(d=d.insert(_,on.newInvalidDocument(_)))}));let h=Pl();return d.forEach(((g,p)=>{const _=l.get(g);_!==void 0&&Bl(_.mutation,p,Wn.empty(),ct.now()),Of(t,p)&&(h=h.insert(g,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ei(s.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:ib(s.bundledQuery),readTime:Ei(s.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.overlays=new pt(Te.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=qr();return oe.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&i.set(s,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),oe.resolve()}getOverlaysForCollection(e,t,i){const s=qr(),l=t.length+1,d=new Te(t.child("")),h=this.overlays.getIteratorFrom(d);for(;h.hasNext();){const g=h.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>i&&s.set(g.getKey(),g)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let l=new pt(((p,_)=>p-_));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=l.get(p.largestBatchId);_===null&&(_=qr(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const h=qr(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>h.set(p,_))),!(h.size()>=s)););return oe.resolve(h)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const d=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new Px(t,i));let l=this.qr.get(t);l===void 0&&(l=Fe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this.Qr=new Ut(Ht.$r),this.Ur=new Ut(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Ht(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Te(new mt([])),i=new Ht(t,e),s=new Ht(t,e+1),l=[];return this.Ur.forEachInRange([i,s],(d=>{this.Gr(d),l.push(d.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new mt([])),i=new Ht(t,e),s=new Ht(t,e+1);let l=Fe();return this.Ur.forEachInRange([i,s],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new Ht(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||Oe(e.Yr,t.Yr)}static Kr(e,t){return Oe(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Ht.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Dx(l,t,i,s);this.mutationQueue.push(d);for(const h of s)this.Zr=this.Zr.add(new Ht(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),l=s<0?0:s;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?fp:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ht(t,0),s=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,s],(d=>{const h=this.Xr(d.Yr);l.push(h)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ut(Oe);return t.forEach((s=>{const l=new Ht(s,0),d=new Ht(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,d],(h=>{i=i.add(h.Yr)}))})),oe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let l=i;Te.isDocumentKey(l)||(l=l.child(""));const d=new Ht(new Te(l),0);let h=new Ut(Oe);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(h=h.add(g.Yr)),!0)}),d),oe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return oe.forEach(t.mutations,(s=>{const l=new Ht(s.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Ht(t,0),s=this.Zr.firstAfterOrEqual(i);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.ri=e,this.docs=(function(){return new pt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),l=s?s.size:0,d=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return oe.resolve(i?i.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let i=co();return t.forEach((s=>{const l=this.docs.get(s);i=i.insert(s,l?l.document.mutableCopy():on.newInvalidDocument(s))})),oe.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let l=co();const d=t.path,h=new Te(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||$M(YM(_),i)<=0||(s.has(_.key)||Of(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,i,s){Ce(9500)}ii(e,t){return oe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new vb(this)}getSize(e){return oe.resolve(this.size)}}class vb extends fb{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.persistence=e,this.si=new Xr((t=>mp(t)),pp),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Ep,this.targetCount=0,this.ai=ca.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,i){let s=0;const l=[];return this.si.forEach(((d,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(d),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),oe.waitFor(l).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return oe.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),oe.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((d=>{l.push(s.markPotentiallyOrphaned(e,d))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return oe.resolve(i)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Pf(0),this.li=!1,this.li=!0,this.hi=new gb,this.referenceDelegate=e(this),this.Pi=new Tb(this),this.indexManager=new ob,this.remoteDocumentCache=(function(s){return new _b(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new nb(t),this.Ii=new mb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new yb(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const s=new Eb(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((l=>this.referenceDelegate.di(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Eb extends JM{constructor(e){super(),this.currentSequenceNumber=e}}class Sp{constructor(e){this.persistence=e,this.Ri=new Ep,this.Vi=null}static mi(e){return new Sp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),oe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(i=>{const s=Te.fromPath(i);return this.gi(e,s).next((l=>{l||t.removeEntry(s,Me.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Sf{constructor(e,t){this.persistence=e,this.pi=new Xr((i=>WM(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=cb(this,t)}static mi(e,t){return new Sf(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((i,s)=>this.br(e,i,s).next((l=>l?oe.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ii(e,(d=>this.br(e,d,t).next((h=>{h||(i++,l.removeEntry(d,Me.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wc(e.data.value)),t}br(e,t,i){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return oe.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=Fe(),s=Fe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Cp(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fR()?8:QM(sn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const l={result:null};return this.ys(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ws(e,t,s,i).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new Sb;return this.Ss(e,t,d).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,d,h.size)}))})).next((()=>l.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?($s()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ks(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):($s()<=Le.DEBUG&&de("QueryEngine","Query:",Ks(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?($s()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ks(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):oe.resolve())}ys(e,t){if(iT(t))return oe.resolve(null);let i=Ti(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Rm(t,null,"F"),i=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const d=Fe(...l);return this.ps.getDocuments(e,d).next((h=>this.indexManager.getMinOffset(e,i).next((g=>{const p=this.Ds(t,h);return this.Cs(t,p,d,g.readTime)?this.ys(e,Rm(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,i,s){return iT(t)||s.isEqual(Me.min())?oe.resolve(null):this.ps.getDocuments(e,i).next((l=>{const d=this.Ds(t,l);return this.Cs(t,d,i,s)?oe.resolve(null):($s()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ks(t)),this.vs(e,d,t,zM(s,Jl)).next((h=>h)))}))}Ds(e,t){let i=new Ut(TS(e));return t.forEach(((s,l)=>{Of(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Ss(e,t,i){return $s()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ks(t)),this.ps.getDocumentsMatchingQuery(e,t,Zo.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="LocalStore",Ab=3e8;class Ib{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new pt(Oe),this.xs=new Xr((l=>mp(l)),pp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Rb(n,e,t,i){return new Ib(n,e,t,i)}async function zS(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((l=>(s=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const d=[],h=[];let g=Fe();for(const p of s){d.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of l){h.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(i,g).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:h})))}))}))}function wb(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,g,p,_){const E=p.batch,S=E.keys();let x=oe.resolve();return S.forEach((U=>{x=x.next((()=>_.getEntry(g,U))).next((q=>{const H=p.docVersions.get(U);Qe(H!==null,48541),q.version.compareTo(H)<0&&(E.applyToRemoteDocument(q,p),q.isValidDocument()&&(q.setReadTime(p.commitVersion),_.addEntry(q)))}))})),x.next((()=>h.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let g=Fe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(g=g.add(h.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function YS(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Mb(n,e){const t=xe(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((_,E)=>{const S=s.get(E);if(!S)return;h.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E))));let x=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(Wt.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,i)),s=s.insert(E,x),(function(q,H,ie){return q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=Ab?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(S,x,_)&&h.push(t.Pi.updateTargetData(l,x))}));let g=co(),p=Fe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),h.push(xb(l,d,e.documentUpdates).next((_=>{g=_.ks,p=_.qs}))),!i.isEqual(Me.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));h.push(_)}return oe.waitFor(h).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=s,l)))}function xb(n,e,t){let i=Fe(),s=Fe();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let d=co();return t.forEach(((h,g)=>{const p=l.get(h);g.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),g.isNoDocument()&&g.version.isEqual(Me.min())?(e.removeEntry(h,g.readTime),d=d.insert(h,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),d=d.insert(h,g)):de(Ap,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",g.version)})),{ks:d,qs:s}}))}function bb(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=fp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Nb(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((l=>l?(s=l,oe.resolve(s)):t.Pi.allocateTargetId(i).next((d=>(s=new Yo(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Nm(n,e,t){const i=xe(n),s=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(d=>i.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!ya(d))throw d;de(Ap,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function gT(n,e,t){const i=xe(n);let s=Me.min(),l=Fe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,p,_){const E=xe(g),S=E.xs.get(_);return S!==void 0?oe.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,_)})(i,d,Ti(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,h.targetId).next((g=>{l=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,t?s:Me.min(),t?l:Fe()))).next((h=>(Db(i,yx(e),h),{documents:h,Qs:l})))))}function Db(n,e,t){let i=n.Os.get(e)||Me.min();t.forEach(((s,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class yT{constructor(){this.activeTargetIds=Cx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pb{constructor(){this.Mo=new yT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="ConnectivityMonitor";class vT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(_T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(_T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc=null;function Dm(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="RestConnection",Vb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ub{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===pf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,l){const d=Dm(),h=this.zo(e,t.toUriEncodedString());de(am,`Sending RPC '${e}' ${d}:`,h,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,s,l);const{host:p}=new URL(h),_=da(p);return this.Jo(e,h,g,i,_).then((E=>(de(am,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw sa(am,`RPC '${e}' ${d} failed with error: `,E,"url: ",h,"request:",i),E}))}Ho(e,t,i,s,l,d){return this.Go(e,t,i,s,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),i&&i.headers.forEach(((s,l)=>e[l]=s))}zo(e,t){const i=Vb[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class Ob extends Ub{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,l){const d=Dm();return new Promise(((h,g)=>{const p=new Q0;p.setWithCredentials(!0),p.listenOnce(X0.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Xc.NO_ERROR:const E=p.getResponseJson();de(tn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),h(E);break;case Xc.TIMEOUT:de(tn,`RPC '${e}' ${d} timed out`),g(new ye(se.DEADLINE_EXCEEDED,"Request time out"));break;case Xc.HTTP_ERROR:const S=p.getStatus();if(de(tn,`RPC '${e}' ${d} failed with status:`,S,"response text:",p.getResponseText()),S>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const U=x==null?void 0:x.error;if(U&&U.status&&U.message){const q=(function(ie){const K=ie.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(K)>=0?K:se.UNKNOWN})(U.status);g(new ye(q,U.message))}else g(new ye(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ye(se.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{de(tn,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(s);de(tn,`RPC '${e}' ${d} sending request:`,s),p.send(t,"POST",_,i,15)}))}T_(e,t,i){const s=Dm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=j0(),h=Z0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const _=l.join("");de(tn,`Creating RPC '${e}' stream ${s}: ${_}`,g);const E=d.createWebChannel(_,g);this.I_(E);let S=!1,x=!1;const U=new Lb({Yo:H=>{x?de(tn,`Not sending because RPC '${e}' stream ${s} is closed:`,H):(S||(de(tn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),de(tn,`RPC '${e}' stream ${s} sending:`,H),E.send(H))},Zo:()=>E.close()}),q=(H,ie,K)=>{H.listen(ie,(X=>{try{K(X)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return q(E,Dl.EventType.OPEN,(()=>{x||(de(tn,`RPC '${e}' stream ${s} transport opened.`),U.o_())})),q(E,Dl.EventType.CLOSE,(()=>{x||(x=!0,de(tn,`RPC '${e}' stream ${s} transport closed`),U.a_(),this.E_(E))})),q(E,Dl.EventType.ERROR,(H=>{x||(x=!0,sa(tn,`RPC '${e}' stream ${s} transport errored. Name:`,H.name,"Message:",H.message),U.a_(new ye(se.UNAVAILABLE,"The operation could not be completed")))})),q(E,Dl.EventType.MESSAGE,(H=>{var ie;if(!x){const K=H.data[0];Qe(!!K,16349);const X=K,ae=(X==null?void 0:X.error)||((ie=X[0])==null?void 0:ie.error);if(ae){de(tn,`RPC '${e}' stream ${s} received error:`,ae);const W=ae.status;let J=(function(M){const N=Mt[M];if(N!==void 0)return DS(N)})(W),b=ae.message;J===void 0&&(J=se.INTERNAL,b="Unknown error status: "+W+" with message "+ae.message),x=!0,U.a_(new ye(J,b)),E.close()}else de(tn,`RPC '${e}' stream ${s} received:`,K),U.u_(K)}})),q(h,W0.STAT_EVENT,(H=>{H.stat===Tm.PROXY?de(tn,`RPC '${e}' stream ${s} detected buffering proxy`):H.stat===Tm.NOPROXY&&de(tn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n){return new Hx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t,i=1e3,s=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="PersistentStream";class KS{constructor(e,t,i,s,l,d,h,g){this.Mi=e,this.S_=i,this.b_=s,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(uo(t.toString()),uo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new ye(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(TT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(TT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fb extends KS{constructor(e,t,i,s,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Yx(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Me.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Me.min():d.readTime?Ei(d.readTime):Me.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=bm(this.serializer),t.addTarget=(function(l,d){let h;const g=d.target;if(h=Im(g)?{documents:Jx(l,g)}:{query:Qx(l,g).ft},h.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){h.resumeToken=VS(l,d.resumeToken);const p=wm(l,d.expectedCount);p!==null&&(h.expectedCount=p)}else if(d.snapshotVersion.compareTo(Me.min())>0){h.readTime=Ef(l,d.snapshotVersion.toTimestamp());const p=wm(l,d.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const i=Wx(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=bm(this.serializer),t.removeTarget=e,this.q_(t)}}class qb extends KS{constructor(e,t,i,s,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,d),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Kx(e.writeResults,e.commitTime),i=Ei(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=bm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$x(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{}class Hb extends Bb{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Go(e,Mm(t,i),s,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(se.UNKNOWN,l.toString())}))}Ho(e,t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,h])=>this.connection.Ho(e,Mm(t,i),s,d,h,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(se.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Gb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(uo(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="RemoteStore";class zb{constructor(e,t,i,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{Zr(this)&&(de(Kr,"Restarting streams for network reachability change."),await(async function(g){const p=xe(g);p.Ea.add(4),await uu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Gf(p)})(this))}))})),this.Ra=new Gb(i,s)}}async function Gf(n){if(Zr(n))for(const e of n.da)await e(!0)}async function uu(n){for(const e of n.da)await e(!1)}function JS(n,e){const t=xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mp(t)?wp(t):_a(t).O_()&&Rp(t,e))}function Ip(n,e){const t=xe(n),i=_a(t);t.Ia.delete(e),i.O_()&&QS(t,e),t.Ia.size===0&&(i.O_()?i.L_():Zr(t)&&t.Ra.set("Unknown"))}function Rp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).Y_(e)}function QS(n,e){n.Va.Ue(e),_a(n).Z_(e)}function wp(n){n.Va=new Ox({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.Ra.ua()}function Mp(n){return Zr(n)&&!_a(n).x_()&&n.Ia.size>0}function Zr(n){return xe(n).Ea.size===0}function XS(n){n.Va=void 0}async function Yb(n){n.Ra.set("Online")}async function $b(n){n.Ia.forEach(((e,t)=>{Rp(n,e)}))}async function Kb(n,e){XS(n),Mp(n)?(n.Ra.ha(e),wp(n)):n.Ra.set("Unknown")}async function Jb(n,e,t){if(n.Ra.set("Online"),e instanceof kS&&e.state===2&&e.cause)try{await(async function(s,l){const d=l.cause;for(const h of l.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,d),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(i){de(Kr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Cf(n,i)}else if(e instanceof ef?n.Va.Ze(e):e instanceof PS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Me.min()))try{const i=await YS(n.localStore);t.compareTo(i)>=0&&await(function(l,d){const h=l.Va.Tt(d);return h.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(g.resumeToken,d))}})),h.targetMismatches.forEach(((g,p)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(Wt.EMPTY_BYTE_STRING,_.snapshotVersion)),QS(l,g);const E=new Yo(_.target,g,p,_.sequenceNumber);Rp(l,E)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){de(Kr,"Failed to raise snapshot:",i),await Cf(n,i)}}async function Cf(n,e,t){if(!ya(e))throw e;n.Ea.add(1),await uu(n),n.Ra.set("Offline"),t||(t=()=>YS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(Kr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Gf(n)}))}function WS(n,e){return e().catch((t=>Cf(n,t,e)))}async function zf(n){const e=xe(n),t=nr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fp;for(;Qb(e);)try{const s=await bb(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,Xb(e,s)}catch(s){await Cf(e,s)}ZS(e)&&jS(e)}function Qb(n){return Zr(n)&&n.Ta.length<10}function Xb(n,e){n.Ta.push(e);const t=nr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ZS(n){return Zr(n)&&!nr(n).x_()&&n.Ta.length>0}function jS(n){nr(n).start()}async function Wb(n){nr(n).ra()}async function Zb(n){const e=nr(n);for(const t of n.Ta)e.ea(t.mutations)}async function jb(n,e,t){const i=n.Ta.shift(),s=_p.from(i,e,t);await WS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await zf(n)}async function eN(n,e){e&&nr(n).X_&&await(async function(i,s){if((function(d){return Vx(d)&&d!==se.ABORTED})(s.code)){const l=i.Ta.shift();nr(i).B_(),await WS(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,s))),await zf(i)}})(n,e),ZS(n)&&jS(n)}async function ET(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),de(Kr,"RemoteStore received new credentials");const i=Zr(t);t.Ea.add(3),await uu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gf(t)}async function tN(n,e){const t=xe(n);e?(t.Ea.delete(2),await Gf(t)):e||(t.Ea.add(2),await uu(t),t.Ra.set("Unknown"))}function _a(n){return n.ma||(n.ma=(function(t,i,s){const l=xe(t);return l.sa(),new Fb(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Xo:Yb.bind(null,n),t_:$b.bind(null,n),r_:Kb.bind(null,n),H_:Jb.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Mp(n)?wp(n):n.Ra.set("Unknown")):(await n.ma.stop(),XS(n))}))),n.ma}function nr(n){return n.fa||(n.fa=(function(t,i,s){const l=xe(t);return l.sa(),new qb(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Wb.bind(null,n),r_:eN.bind(null,n),ta:Zb.bind(null,n),na:jb.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await zf(n)):(await n.fa.stop(),n.Ta.length>0&&(de(Kr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,i,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=l,this.deferred=new Wo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,l){const d=Date.now()+i,h=new xp(e,t,d,s,l);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bp(n,e){if(uo("AsyncQueue",`${e}: ${n}`),ya(n))return new ye(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{static emptySet(e){return new ea(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=Pl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ea)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ea;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.ga=new pt(Te.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class fa{constructor(e,t,i,s,l,d,h,g,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,l){const d=[];return t.forEach((h=>{d.push({type:0,doc:h})})),new fa(e,t,ea.emptySet(t),d,i,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iN{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=xe(t),l=s.queries;s.queries=CT(),l.forEach(((d,h)=>{for(const g of h.Sa)g.onError(i)}))})(this,new ye(se.ABORTED,"Firestore shutting down"))}}function CT(){return new Xr((n=>vS(n)),Lf)}async function oN(n,e){const t=xe(n);let i=3;const s=e.query;let l=t.queries.get(s);l?!l.ba()&&e.Da()&&(i=2):(l=new nN,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(d){const h=bp(d,`Initialization of query '${Ks(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Np(t)}async function rN(n,e){const t=xe(n),i=e.query;let s=3;const l=t.queries.get(i);if(l){const d=l.Sa.indexOf(e);d>=0&&(l.Sa.splice(d,1),l.Sa.length===0?s=e.Da()?0:1:!l.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function sN(n,e){const t=xe(n);let i=!1;for(const s of e){const l=s.query,d=t.queries.get(l);if(d){for(const h of d.Sa)h.Fa(s)&&(i=!0);d.wa=s}}i&&Np(t)}function aN(n,e,t){const i=xe(n),s=i.queries.get(e);if(s)for(const l of s.Sa)l.onError(t);i.queries.delete(e)}function Np(n){n.Ca.forEach((e=>{e.next()}))}var Pm,AT;(AT=Pm||(Pm={})).Ma="default",AT.Cache="cache";class lN{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new fa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.key=e}}class tC{constructor(e){this.key=e}}class uN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=TS(e),this.tu=new ea(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ST,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=s,h=!1;const g=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const S=s.get(_),x=Of(this.query,E)?E:null,U=!!S&&this.mutatedKeys.has(S.key),q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let H=!1;S&&x?S.data.isEqual(x.data)?U!==q&&(i.track({type:3,doc:x}),H=!0):this.su(S,x)||(i.track({type:2,doc:x}),H=!0,(g&&this.eu(x,g)>0||p&&this.eu(x,p)<0)&&(h=!0)):!S&&x?(i.track({type:0,doc:x}),H=!0):S&&!x&&(i.track({type:1,doc:S}),H=!0,(g||p)&&(h=!0)),H&&(x?(d=d.add(x),l=q?l.add(_):l.delete(_)):(d=d.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:d,iu:i,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,E)=>(function(x,U){const q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:H})}};return q(x)-q(U)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),s=s??!1;const h=t&&!s?this._u():[],g=this.Xa.size===0&&this.current&&!s?1:0,p=g!==this.Za;return this.Za=g,d.length!==0||p?{snapshot:new fa(this.query,e.tu,l,d,e.mutatedKeys,g===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ST,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new tC(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new eC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return fa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Dp="SyncEngine";class cN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class fN{constructor(e){this.key=e,this.hu=!1}}class dN{constructor(e,t,i,s,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Xr((h=>vS(h)),Lf),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Te.comparator),this.Au=new Map,this.Ru=new Ep,this.Vu={},this.mu=new Map,this.fu=ca.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hN(n,e,t=!0){const i=aC(n);let s;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await nC(i,e,t,!0),s}async function mN(n,e){const t=aC(n);await nC(t,e,!0,!1)}async function nC(n,e,t,i){const s=await Nb(n.localStore,Ti(e)),l=s.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await pN(n,e,l,d==="current",s.resumeToken)),n.isPrimaryClient&&t&&JS(n.remoteStore,s),h}async function pN(n,e,t,i,s){n.pu=(E,S,x)=>(async function(q,H,ie,K){let X=H.view.ru(ie);X.Cs&&(X=await gT(q.localStore,H.query,!1).then((({documents:b})=>H.view.ru(b,X))));const ae=K&&K.targetChanges.get(H.targetId),W=K&&K.targetMismatches.get(H.targetId)!=null,J=H.view.applyChanges(X,q.isPrimaryClient,ae,W);return RT(q,H.targetId,J.au),J.snapshot})(n,E,S,x);const l=await gT(n.localStore,e,!0),d=new uN(e,l.Qs),h=d.ru(l.documents),g=lu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=d.applyChanges(h,n.isPrimaryClient,g);RT(n,t,p.au);const _=new cN(e,t,d);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function gN(n,e,t){const i=xe(n),s=i.Tu.get(e),l=i.Iu.get(s.targetId);if(l.length>1)return i.Iu.set(s.targetId,l.filter((d=>!Lf(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Nm(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Ip(i.remoteStore,s.targetId),km(i,s.targetId)})).catch(ga)):(km(i,s.targetId),await Nm(i.localStore,s.targetId,!0))}async function yN(n,e){const t=xe(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ip(t.remoteStore,i.targetId))}async function _N(n,e,t){const i=IN(n);try{const s=await(function(d,h){const g=xe(d),p=ct.now(),_=h.reduce(((x,U)=>x.add(U.key)),Fe());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let U=co(),q=Fe();return g.Ns.getEntries(x,_).next((H=>{U=H,U.forEach(((ie,K)=>{K.isValidDocument()||(q=q.add(ie))}))})).next((()=>g.localDocuments.getOverlayedDocuments(x,U))).next((H=>{E=H;const ie=[];for(const K of h){const X=bx(K,E.get(K.key).overlayedDocument);X!=null&&ie.push(new Wr(K.key,X,dS(X.value.mapValue),so.exists(!0)))}return g.mutationQueue.addMutationBatch(x,p,ie,h)})).next((H=>{S=H;const ie=H.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(x,H.batchId,ie)}))})).then((()=>({batchId:S.batchId,changes:SS(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(d,h,g){let p=d.Vu[d.currentUser.toKey()];p||(p=new pt(Oe)),p=p.insert(h,g),d.Vu[d.currentUser.toKey()]=p})(i,s.batchId,t),await cu(i,s.changes),await zf(i.remoteStore)}catch(s){const l=bp(s,"Failed to persist write");t.reject(l)}}async function iC(n,e){const t=xe(n);try{const i=await Mb(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const d=t.Au.get(l);d&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?d.hu=!0:s.modifiedDocuments.size>0?Qe(d.hu,14607):s.removedDocuments.size>0&&(Qe(d.hu,42227),d.hu=!1))})),await cu(t,i,e)}catch(i){await ga(i)}}function IT(n,e,t){const i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((l,d)=>{const h=d.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(d,h){const g=xe(d);g.onlineState=h;let p=!1;g.queries.forEach(((_,E)=>{for(const S of E.Sa)S.va(h)&&(p=!0)})),p&&Np(g)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vN(n,e,t){const i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),l=s&&s.key;if(l){let d=new pt(Te.comparator);d=d.insert(l,on.newNoDocument(l,Me.min()));const h=Fe().add(l),g=new Bf(Me.min(),new Map,new pt(Oe),d,h);await iC(i,g),i.du=i.du.remove(l),i.Au.delete(e),Pp(i)}else await Nm(i.localStore,e,!1).then((()=>km(i,e,t))).catch(ga)}async function TN(n,e){const t=xe(n),i=e.batch.batchId;try{const s=await wb(t.localStore,e);rC(t,i,null),oC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await cu(t,s)}catch(s){await ga(s)}}async function EN(n,e,t){const i=xe(n);try{const s=await(function(d,h){const g=xe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,h).next((E=>(Qe(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,h))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);rC(i,e,t),oC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await cu(i,s)}catch(s){await ga(s)}}function oC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function rC(n,e,t){const i=xe(n);let s=i.Vu[i.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||sC(n,i)}))}function sC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ip(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Pp(n))}function RT(n,e,t){for(const i of t)i instanceof eC?(n.Ru.addReference(i.key,e),SN(n,i)):i instanceof tC?(de(Dp,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||sC(n,i.key)):Ce(19791,{wu:i})}function SN(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(de(Dp,"New document in limbo: "+t),n.Eu.add(i),Pp(n))}function Pp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(mt.fromString(e)),i=n.fu.next();n.Au.set(i,new fN(t)),n.du=n.du.insert(t,i),JS(n.remoteStore,new Yo(Ti(gp(t.path)),i,"TargetPurposeLimboResolution",Pf.ce))}}async function cu(n,e,t){const i=xe(n),s=[],l=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,g)=>{d.push(i.pu(g,e,t).then((p=>{var _;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){s.push(p);const E=Cp.As(g.targetId,p);l.push(E)}})))})),await Promise.all(d),i.Pu.H_(s),await(async function(g,p){const _=xe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>oe.forEach(p,(S=>oe.forEach(S.Es,(x=>_.persistence.referenceDelegate.addReference(E,S.targetId,x))).next((()=>oe.forEach(S.ds,(x=>_.persistence.referenceDelegate.removeReference(E,S.targetId,x)))))))))}catch(E){if(!ya(E))throw E;de(Ap,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const x=_.Ms.get(S),U=x.snapshotVersion,q=x.withLastLimboFreeSnapshotVersion(U);_.Ms=_.Ms.insert(S,q)}}})(i.localStore,l))}async function CN(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){de(Dp,"User change. New user:",e.toKey());const i=await zS(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((h=>{h.forEach((g=>{g.reject(new ye(se.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cu(t,i.Ls)}}function AN(n,e){const t=xe(n),i=t.Au.get(e);if(i&&i.hu)return Fe().add(i.key);{let s=Fe();const l=t.Iu.get(e);if(!l)return s;for(const d of l){const h=t.Tu.get(d);s=s.unionWith(h.view.nu)}return s}}function aC(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vN.bind(null,e),e.Pu.H_=sN.bind(null,e.eventManager),e.Pu.yu=aN.bind(null,e.eventManager),e}function IN(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EN.bind(null,e),e}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Rb(this.persistence,new Cb,e.initialUser,this.serializer)}Cu(e){return new GS(Sp.mi,this.serializer)}Du(e){return new Pb}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class RN extends Af{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Sf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new lb(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new GS((i=>Sf.mi(i,t)),this.serializer)}}class Vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>IT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=CN.bind(null,this.syncEngine),await tN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iN})()}createDatastore(e){const t=Hf(e.databaseInfo.databaseId),i=(function(l){return new Ob(l)})(e.databaseInfo);return(function(l,d,h,g){return new Hb(l,d,h,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,l,d,h){return new zb(i,s,l,d,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>IT(this.syncEngine,t,0)),(function(){return vT.v()?new vT:new kb})())}createSyncEngine(e,t){return(function(s,l,d,h,g,p,_){const E=new dN(s,l,d,h,g,p);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=xe(s);de(Kr,"RemoteStore shutting down."),l.Ea.add(5),await uu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):uo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="FirestoreClient";class MN{constructor(e,t,i,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=nn.UNAUTHENTICATED,this.clientId=up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async d=>{de(ir,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(de(ir,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=bp(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function um(n,e){n.asyncQueue.verifyOperationInProgress(),de(ir,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await zS(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function wT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await xN(n);de(ir,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>ET(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>ET(e.remoteStore,s))),n._onlineComponents=e}async function xN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ir,"Using user provided OfflineComponentProvider");try{await um(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;sa("Error using user provided cache. Falling back to memory cache: "+t),await um(n,new Af)}}else de(ir,"Using default OfflineComponentProvider"),await um(n,new RN(void 0));return n._offlineComponents}async function lC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ir,"Using user provided OnlineComponentProvider"),await wT(n,n._uninitializedComponentsProvider._online)):(de(ir,"Using default OnlineComponentProvider"),await wT(n,new Vm))),n._onlineComponents}function bN(n){return lC(n).then((e=>e.syncEngine))}async function NN(n){const e=await lC(n),t=e.eventManager;return t.onListen=hN.bind(null,e.syncEngine),t.onUnlisten=gN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yN.bind(null,e.syncEngine),t}function DN(n,e,t={}){const i=new Wo;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,h,g,p){const _=new wN({next:S=>{_.Nu(),d.enqueueAndForget((()=>rN(l,E)));const x=S.docs.has(h);!x&&S.fromCache?p.reject(new ye(se.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&g&&g.source==="server"?p.reject(new ye(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new lN(gp(h.path),_,{includeMetadataChanges:!0,qa:!0});return oN(l,E)})(await NN(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firestore.googleapis.com",xT=!0;class bT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cC,this.ssl=xT}else this.host=e.host,this.ssl=e.ssl??xT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sb)throw new ye(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new DM;switch(i.type){case"firstParty":return new UM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=MT.get(t);i&&(de("ComponentProvider","Removing Datastore"),MT.delete(t),i.terminate())})(this),Promise.resolve()}}function PN(n,e,t,i={}){var p;n=Kl(n,kp);const s=da(e),l=n._getSettings(),d={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(c0(`https://${h}`),f0("Firestore",!0)),l.host!==cC&&l.host!==h&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:h,ssl:s,emulatorOptions:i};if(!Gr(g,d)&&(n._setSettings(g),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=nn.MOCK_USER;else{_=nR(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ye(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new nn(S)}n._authCredentials=new PM(new tS(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vp(this.firestore,e,this._query)}}class Gt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(su(t,Gt._jsonSchema))return new Gt(e,i||null,new Te(mt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:xt("string",Gt._jsonSchemaVersion),referencePath:xt("string")};class eu extends Vp{constructor(e,t,i){super(e,t,gp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new Te(e))}withConverter(e){return new eu(this.firestore,e,this._path)}}function fC(n,e,...t){if(n=Bn(n),arguments.length===1&&(e=up.newId()),HM("doc","path",e),n instanceof kp){const i=mt.fromString(e,...t);return zv(i),new Gt(n,null,new Te(i))}{if(!(n instanceof Gt||n instanceof eu))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return zv(i),new Gt(n.firestore,n instanceof eu?n.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="AsyncQueue";class DT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const i=lm();i&&de(NT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=lm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Wo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ya(e))throw e;de(NT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,uo("INTERNAL UNHANDLED ERROR: ",PT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=xp.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:PT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function PT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Up extends kp{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new DT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DT(e),this._firestoreClient=void 0,await e}}}function kN(n,e){const t=typeof n=="object"?n:p0(),i=typeof n=="string"?n:pf,s=Wm(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const l=eR("firestore");l&&PN(s,...l)}return s}function dC(n){if(n._terminated)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VN(n),n._firestoreClient}function VN(n){var i,s,l;const e=n._freezeSettings(),t=(function(h,g,p,_){return new ex(h,g,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,uC(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new MN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const g=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn(Wt.fromBase64String(e))}catch(t){throw new ye(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(su(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:xt("string",Fn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Si._jsonSchemaVersion}}static fromJSON(e){if(su(e,Si._jsonSchema))return new Si(e.latitude,e.longitude)}}Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:xt("string",Si._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(su(e,Ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ci(e.vectorValues);throw new ye(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ci._jsonSchemaVersion="firestore/vectorValue/1.0",Ci._jsonSchema={type:xt("string",Ci._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=/^__.*__$/;class LN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,t,this.fieldTransforms):new au(e,this.data,t,this.fieldTransforms)}}function mC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class Op{constructor(e,t,i,s,l,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Op({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return If(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mC(this.Ac)&&UN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ON{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Hf(e)}Cc(e,t,i,s=!1){return new Op({Ac:e,methodName:t,Dc:i,path:Xt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FN(n){const e=n._freezeSettings(),t=Hf(n._databaseId);return new ON(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qN(n,e,t,i,s,l={}){const d=n.Cc(l.merge||l.mergeFields?2:0,e,t,s);_C("Data must be an object, but it was:",d,i);const h=gC(i,d);let g,p;if(l.merge)g=new Wn(d.fieldMask),p=d.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=BN(e,E,t);if(!d.contains(S))throw new ye(se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);GN(_,S)||_.push(S)}g=new Wn(_),p=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=d.fieldTransforms;return new LN(new On(h),g,p)}function pC(n,e){if(yC(n=Bn(n)))return _C("Unsupported field value:",e,n),gC(n,e);if(n instanceof hC)return(function(i,s){if(!mC(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const l=[];let d=0;for(const h of i){let g=pC(h,s.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(n,e)}return(function(i,s){if((i=Bn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ax(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ct.fromDate(i);return{timestampValue:Ef(s.serializer,l)}}if(i instanceof ct){const l=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ef(s.serializer,l)}}if(i instanceof Si)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Fn)return{bytesValue:VS(s.serializer,i._byteString)};if(i instanceof Gt){const l=s.databaseId,d=i.firestore._databaseId;if(!d.isEqual(l))throw s.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Tp(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Ci)return(function(d,h){return{mapValue:{fields:{[cS]:{stringValue:fS},[gf]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return yp(h.serializer,p)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${cp(i)}`)})(n,e)}function gC(n,e){const t={};return oS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(n,((i,s)=>{const l=pC(s,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function yC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Si||n instanceof Fn||n instanceof Gt||n instanceof hC||n instanceof Ci)}function _C(n,e,t){if(!yC(t)||!nS(t)){const i=cp(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function BN(n,e,t){if((e=Bn(e))instanceof Lp)return e._internalPath;if(typeof e=="string")return vC(n,e);throw If("Field path arguments must be of type string or ",n,!1,void 0,t)}const HN=new RegExp("[~\\*/\\[\\]]");function vC(n,e,t){if(e.search(HN)>=0)throw If(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lp(...e.split("."))._internalPath}catch{throw If(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function If(n,e,t,i,s){const l=i&&!i.isEmpty(),d=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${i}`),d&&(g+=` in document ${s}`),g+=")"),new ye(se.INVALID_ARGUMENT,h+n+g)}function GN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t,i,s,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(EC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zN extends TC{data(){return super.data()}}function EC(n,e){return typeof e=="string"?vC(n,e):e instanceof Lp?e._internalPath:e._delegate._internalPath}class YN{convertValue(e,t="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Qr(e,((s,l)=>{i[s]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,s,l;const t=(l=(s=(i=e.fields)==null?void 0:i[gf].arrayValue)==null?void 0:s.values)==null?void 0:l.map((d=>St(d.doubleValue)));return new Ci(t)}convertGeoPoint(e){return new Si(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Vf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const t=jo(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mt.fromString(e);Qe(BS(i),9688,{name:e});const s=new Xl(i.get(1),i.get(3)),l=new Te(i.popFirst(5));return s.isEqual(t)||uo(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Vl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hr extends TC{constructor(e,t,i,s,l,d){super(e,t,i,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(EC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Hr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hr._jsonSchema={type:xt("string",Hr._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class tf extends Hr{data(e={}){return super.data(e)}}class Hl{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Vl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new tf(this._firestore,this._userDataWriter,i.key,i,new Vl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map((h=>{const g=new tf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Vl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const g=new tf(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Vl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return h.type!==0&&(p=d.indexOf(h.doc.key),d=d.delete(h.doc.key)),h.type!==1&&(d=d.add(h.doc),_=d.indexOf(h.doc.key)),{type:KN(h.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(n){n=Kl(n,Gt);const e=Kl(n.firestore,Up);return DN(dC(e),n._key).then((t=>ZN(e,n,t)))}Hl._jsonSchemaVersion="firestore/querySnapshot/1.0",Hl._jsonSchema={type:xt("string",Hl._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class QN extends YN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}function XN(n,e,t){n=Kl(n,Gt);const i=Kl(n.firestore,Up),s=$N(n.converter,e);return WN(i,[qN(FN(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,so.none())])}function WN(n,e){return(function(i,s){const l=new Wo;return i.asyncQueue.enqueueAndForget((async()=>_N(await bN(i),s,l))),l.promise})(dC(n),e)}function ZN(n,e,t){const i=t.docs.get(e._key),s=new QN(n);return new Hr(n,s,e._key,i,new Vl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){pa=s})(ha),oa(new zr("firestore",((i,{instanceIdentifier:s,options:l})=>{const d=i.getProvider("app").getImmediate(),h=new Up(new kM(i.getProvider("auth-internal")),new LM(d,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(p.options.projectId,_)})(d,s),d);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Qo(qv,Bv,e),Qo(qv,Bv,"esm2020")})();const Um={apiKey:"AIzaSyBQPhgF-vn3-4_zcjfVPo5igOzX8NkKKt8",authDomain:"tablit-b6e78.firebaseapp.com",projectId:"tablit-b6e78",storageBucket:"tablit-b6e78.appspot.com",messagingSenderId:"993416386108",appId:"1:993416386108:web:1e6d42be34beb6a8efd539",measurementId:"G-YJP77FD8GZ"},SC=m0(Um),Fp=bM(SC),CC=kN(SC),AC=new io;AC.setCustomParameters({prompt:"select_account"});const IC=n=>({uid:n.uid,displayName:n.displayName,photoURL:n.photoURL}),jN=n=>{const e={};return Array.isArray(n)&&n.forEach((t,i)=>{Array.isArray(t)&&t.forEach((s,l)=>{s&&s.length>0&&(e[`${i}-${l}`]=s)})}),e},eD=(n,e)=>{const i=e.periods||7,s=Array(7).fill(0).map(()=>Array(i).fill(0).map(()=>[]));if(!n)return s;for(const l in n){const[d,h]=l.split("-").map(Number);d<7&&h<i&&(s[d][h]=n[l])}return s},RC=(n,e)=>{throw console.error(`Firestore ${e} Error:`,n),n instanceof jn&&(n.code==="permission-denied"?alert(`Firestore  (permission-denied)


Firestore

---  ---

 1. Firebase: https://console.firebase.google.com/
 2.  (${Um.projectId})  > Firestore Database
 3. 
 4. :

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      // 
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}

 5. 



`):(n.code==="unavailable"||n.message.includes("offline")||n.message.includes("Failed to get document"))&&alert(`Firestore 


FirebaseFirestore

---  ---

 1. Firestore 
   - Firebase: https://console.firebase.google.com/
   -  (${Um.projectId})  > Firestore Database
   - 
   - 
   - : asia-northeast1

 2. API
   - 
   - : https://console.cloud.google.com/apis/library/firestore.googleapis.com
   - Cloud Firestore API

`)),n},tD=async()=>{try{const n=await F1(Fp,AC);return IC(n.user)}catch(n){throw n instanceof jn?(console.error("Firebase Auth Error:",{code:n.code,message:n.message}),n.code==="auth/popup-blocked"?alert(""):n.code==="auth/popup-closed-by-user"?console.log("Login popup was closed by the user."):n.code==="auth/configuration-not-found"?alert(`Google (auth/configuration-not-found)

Firebase
Firebase

---  ---

 1. Google 
   - Firebase: https://console.firebase.google.com/
   -  > Authentication > Sign-in method
   - Google

 2. 
   - Authentication > Settings
   - : localhost

 3. Firebase
   -  > 
   -  'firebaseConfig'  'firebaseConfig.ts' 

3`):alert("")):(console.error("An unexpected error occurred during sign-in:",n),alert("")),n}},nD=()=>v1(Fp),iD=n=>_1(Fp,e=>{n(e?IC(e):null)}),oD=async(n,e)=>{try{const t={...e,timetables:e.timetables.map(s=>({...s,grid:jN(s.grid)}))},i=fC(CC,"users",n);await XN(i,{timetableData:t})}catch(t){RC(t,"")}},rD=async n=>{try{const e=fC(CC,"users",n),t=await JN(e);if(t.exists()){const i=t.data().timetableData;return{...i,timetables:i.timetables.map(l=>({...l,grid:eD(l.grid,l.settings)}))}}else return null}catch(e){return RC(e,""),null}},cm=()=>({id:`timetable-${Date.now()}`,name:"",settings:{days:zl.slice(0,5),periods:7},grid:Array(7).fill(0).map(()=>Array(7).fill(0).map(()=>[]))}),sD=n=>{const[e,t]=ve.useState([]),[i,s]=ve.useState(null),[l,d]=ve.useState("idle"),[h,g]=ve.useState(!0),p=ve.useRef(null);ve.useEffect(()=>{(async()=>{g(!0);try{let J=null,b=null;if(n){const R=await rD(n.uid);R&&(J=R.timetables,b=R.activeTimetableId)}else{const R=localStorage.getItem("timetables"),M=localStorage.getItem("activeTimetableId");R&&(J=JSON.parse(R),b=M)}if(J&&J.length>0)t(J),b&&J.some(R=>R.id===b)?s(b):s(J[0].id);else{const R=cm();t([R]),s(R.id)}}catch(J){console.error("Failed to load data:",J);const b=cm();t([b]),s(b.id)}finally{g(!1),d("idle")}})()},[n]),ve.useEffect(()=>{if(!(h||e.length===0))return d("saving"),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{const W={timetables:e,activeTimetableId:i};try{n?oD(n.uid,W):(localStorage.setItem("timetables",JSON.stringify(e)),i&&localStorage.setItem("activeTimetableId",i)),d("saved"),setTimeout(()=>d("idle"),2e3)}catch(J){console.error("Failed to save data:",J),d("idle")}},1e3),()=>{p.current&&clearTimeout(p.current)}},[e,i,n,h]);const _=e.find(W=>W.id===i),E=ve.useCallback(W=>{t(J=>J.map(b=>b.id===i?W:b))},[i]),S=W=>{const J={...cm(),name:W,id:`timetable-${Date.now()}`};t(b=>[...b,J]),s(J.id)},x=ve.useCallback(W=>{try{const J=JSON.parse(W);if(typeof J.name!="string"||typeof J.settings!="object"||!Array.isArray(J.grid))throw new Error("Invalid timetable format.");const b={...J,id:`timetable-${Date.now()}`};return t(R=>[...R,b]),s(b.id),!0}catch(J){return console.error("Failed to import timetable:",J),!1}},[]),U=W=>{t(J=>{const b=J.filter(R=>R.id!==W);return i===W&&s(b.length>0?b[0].id:null),b})},q=ve.useCallback(W=>{if(!_)return;const J=Array(zl.length).fill(0).map((b,R)=>Array(W.periods).fill(0).map((M,N)=>{var O;const V=zl[R];return _.settings.days.includes(V)&&R<_.settings.days.length&&N<_.settings.periods?((O=_.grid[R])==null?void 0:O[N])||[]:[]}));E({..._,settings:W,grid:J})},[_,E]),H=ve.useCallback((W,J,b)=>{if(!_)return;const R=_.grid.map(V=>V.map(O=>[...O])),M=R[J][b],N=M.findIndex(V=>V.id===W.id);N>-1?M[N]=W:M.push(W),E({..._,grid:R})},[_,E]),ie=ve.useCallback((W,J,b)=>{if(!_)return;const R=_.grid.map(M=>M.map(N=>[...N]));R[J][b]=R[J][b].filter(M=>M.id!==W),E({..._,grid:R})},[_,E]),K=ve.useCallback((W,J,b)=>{if(!_)return;const R=_.grid.map(M=>M.map(N=>[...N]));R[J.dayIndex][J.periodIndex]=R[J.dayIndex][J.periodIndex].filter(M=>M.id!==W.id),R[b.dayIndex][b.periodIndex].push(W),E({..._,grid:R})},[_,E]),X=ve.useCallback((W,J,b)=>{t(R=>{const M=R.findIndex(et=>et.id===b);if(M===-1)return R;const N=[...R],V={...N[M]};let O=!1;const D=V.grid.map(et=>et.map(ke=>ke.map(j=>{if(j.id===J){const ue=j.tasks.findIndex(he=>he.id===W);if(ue>-1){O=!0;const he=[...j.tasks];return he[ue]={...he[ue],completed:!he[ue].completed},{...j,tasks:he}}}return j})));return O?(N[M]={...V,grid:D},N):R})},[]),ae=_?[...new Set(_.grid.flat(2).map(W=>W.id))].map(W=>_.grid.flat(2).find(J=>J.id===W)).reduce((W,J)=>W+((J==null?void 0:J.credits)||0),0):0;return{timetables:e,activeTimetable:_,activeTimetableId:i,setActiveTimetableId:s,addTimetable:S,importTimetable:x,deleteTimetable:U,updateTimetableSettings:q,saveSubject:H,deleteSubject:ie,moveSubject:K,toggleTaskCompletion:X,totalCredits:ae,saveStatus:l,isLoading:h}},qp=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),wC=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),fu=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),MC=({className:n})=>k.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),aD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),lD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),uD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),cD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),fD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),dD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),hD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),mD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),pD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),gD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:n,children:k.jsx("path",{d:"M3.105 2.289a.75.75 0 00-.826.95l1.414 4.949a.75.75 0 00.95.826L11.25 8.25l-5.607-1.402a.75.75 0 00-.95.826l1.414 4.949a.75.75 0 00.95.826L11.25 11.75l-5.607-1.402a.75.75 0 00-.95.826l1.414 4.949a.75.75 0 00.95.826L16.25 12l-12.2-9.148a.75.75 0 00-.945-.563z"})}),yD=({className:n})=>k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:n,children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12z"})}),_D=({status:n})=>{if(n==="idle")return null;const t={saving:{icon:k.jsx(pD,{className:"w-4 h-4 animate-spin"}),text:"...",color:"text-gray-700 dark:text-gray-300"},saved:{icon:k.jsx(mD,{className:"w-4 h-4"}),text:"",color:"text-emerald-600 dark:text-emerald-400"}}[n];return k.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-medium px-2 py-1 rounded-full bg-black/5 dark:bg-white/10 ${t.color}`,children:[t.icon,k.jsx("span",{children:t.text})]})},vD=({timetables:n,activeTimetableId:e,setActiveTimetableId:t,onAddTimetable:i,onDeleteTimetable:s,onOpenSettings:l,onOpenTaskList:d,totalCredits:h,theme:g,toggleTheme:p,onExport:_,onImport:E,user:S,onLogin:x,onLogout:U,saveStatus:q})=>k.jsxs("header",{className:"sticky top-0 z-30 p-4 bg-gray-100/80 dark:bg-gray-900/70 backdrop-blur-lg shadow-md border-b border-black/10 dark:border-white/10 flex flex-wrap justify-between items-center gap-4",children:[k.jsx("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap",children:e?k.jsxs(k.Fragment,{children:[k.jsx("select",{value:e,onChange:H=>t(H.target.value),className:"bg-gray-200/50 dark:bg-gray-700/50 border border-black/10 dark:border-white/10 rounded-lg py-2 px-3 focus:outline-none focus:ring-2 focus:ring-sky-500 transition-colors",children:n.map(H=>k.jsx("option",{value:H.id,className:"bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white",children:H.name},H.id))}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:k.jsx(qp,{className:"w-5 h-5"})}),k.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors text-red-500 hover:text-red-600",title:"",children:k.jsx(wC,{className:"w-5 h-5"})})]}),k.jsxs("div",{className:"block md:hidden bg-sky-500/20 text-sky-800 dark:text-sky-200 text-sm font-bold px-3 py-1.5 rounded-full",children:[": ",h]}),k.jsxs("div",{className:"hidden md:block bg-sky-500/20 text-sky-800 dark:text-sky-200 text-sm font-bold px-3 py-1.5 rounded-full",children:[": ",h]}),k.jsx(_D,{status:q})]}):k.jsx("button",{onClick:i,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})}),k.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[k.jsxs("label",{htmlFor:"import-file",className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors cursor-pointer",title:" (.tmx)",children:[k.jsx(fD,{className:"w-6 h-6"}),k.jsx("input",{id:"import-file",type:"file",accept:".tmx",className:"hidden",onChange:E})]}),k.jsx("button",{onClick:_,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:" (.tmx)",children:k.jsx(cD,{className:"w-6 h-6"})}),k.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:k.jsx(yD,{className:"w-6 h-6"})}),k.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:k.jsx(MC,{className:"w-6 h-6"})}),k.jsx("button",{onClick:p,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:g==="light"?k.jsx(uD,{className:"w-6 h-6"}):k.jsx(lD,{className:"w-6 h-6"})}),k.jsx("div",{className:"border-l border-gray-300 dark:border-gray-600 pl-2 ml-1",children:S?k.jsxs("div",{className:"flex items-center gap-2",children:[S.photoURL?k.jsx("img",{src:S.photoURL,alt:"profile",className:"w-8 h-8 rounded-full border-2 border-gray-300 dark:border-gray-500"}):k.jsx(dD,{className:"w-8 h-8 text-gray-500 dark:text-gray-400"}),k.jsx("button",{onClick:U,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors",title:"",children:k.jsx(hD,{className:"w-6 h-6"})})]}):k.jsx("button",{onClick:x,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold text-sm py-2 px-4 rounded-lg transition-colors",children:"Google"})})]})]}),TD=({subject:n,onClick:e,dayIndex:t,periodIndex:i,onContextMenu:s})=>{const l=ve.useRef(null),d=ve.useRef(!1),h=U=>{const q={subject:n,from:{dayIndex:t,periodIndex:i}};U.dataTransfer.setData("application/json",JSON.stringify(q)),U.currentTarget.style.opacity="0.5",U.currentTarget.style.transform="scale(0.95)"},g=U=>{U.currentTarget.style.opacity="1",U.currentTarget.style.transform="scale(1)"},p=n.tasks.filter(U=>!U.completed).length,_=U=>{d.current=!1,l.current=setTimeout(()=>{const q=U.touches[0],H={...U,clientX:q.clientX,clientY:q.clientY,preventDefault:()=>U.preventDefault(),stopPropagation:()=>U.stopPropagation()};s(H),d.current=!0},500)},E=()=>{l.current&&clearTimeout(l.current)},S=()=>{l.current&&clearTimeout(l.current)},x=()=>{d.current||e()};return k.jsxs("div",{draggable:!0,onDragStart:h,onDragEnd:g,onClick:x,onContextMenu:s,onTouchStart:_,onTouchEnd:E,onTouchMove:S,className:`${n.color} rounded-lg p-1.5 text-white text-xs cursor-pointer transition-all duration-200 shadow-lg hover:shadow-xl hover:-translate-y-0.5 flex flex-col justify-between h-full`,children:[k.jsxs("div",{children:[k.jsx("p",{className:"font-bold text-sm leading-tight break-words",children:n.name}),k.jsx("p",{className:"text-white/80 break-words",children:n.room})]}),p>0&&k.jsx("div",{className:"mt-1 flex items-center self-end",children:k.jsx("span",{className:"text-xs bg-white/30 text-white rounded-full px-1.5 py-0.5 font-bold",children:p})})]})},ED=({x:n,y:e,items:t,onClose:i})=>{const s=ve.useRef(null);return ve.useEffect(()=>{const l=d=>{s.current&&!s.current.contains(d.target)&&i()};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[i]),k.jsx("div",{ref:s,className:"fixed z-50 bg-gray-100/70 dark:bg-gray-800/70 backdrop-blur-md rounded-lg shadow-2xl border border-black/10 dark:border-white/10 p-1.5 min-w-[150px] fade-in",style:{top:e,left:n},onContextMenu:l=>l.preventDefault(),children:k.jsx("ul",{className:"space-y-1",children:t.map((l,d)=>k.jsx("li",{children:k.jsx("button",{onClick:l.onClick,disabled:l.disabled,className:"w-full text-left px-3 py-1.5 text-sm rounded-md flex items-center gap-2 hover:bg-sky-500 hover:text-white disabled:opacity-50 disabled:hover:bg-transparent disabled:text-gray-500 dark:disabled:text-gray-400 transition-colors",children:l.label})},d))})})},SD=({timetable:n,onAddSubject:e,onEditSubject:t,onMoveSubject:i,onDeleteSubject:s,onCopySubject:l,onPasteSubject:d,copiedSubject:h})=>{const{settings:g,grid:p}=n,[_,E]=ve.useState(null),S=ve.useRef(null),x=ve.useRef(null);ve.useEffect(()=>{const J=()=>E(null);return window.addEventListener("click",J),()=>window.removeEventListener("click",J)},[]),ve.useEffect(()=>{const J=x.current;if(!J||!window.matchMedia("(max-width: 768px)").matches)return;const M=["","","","","","",""][new Date().getDay()],N=g.days.indexOf(M);if(N===-1)return;const V=J.firstElementChild;if(!V)return;const O=V.querySelector(`[data-day-header-index="${N}"]`);O&&(J.scrollLeft=O.offsetLeft)},[g.days]);const U=J=>{J.preventDefault(),J.currentTarget.classList.add("bg-sky-400/30")},q=J=>{J.currentTarget.classList.remove("bg-sky-400/30")},H=(J,b,R)=>{J.preventDefault(),J.currentTarget.classList.remove("bg-sky-400/30");const M=J.dataTransfer.getData("application/json");if(M){const{subject:N,from:V}=JSON.parse(M);i(N,V,{dayIndex:b,periodIndex:R})}},ie=(J,b,R,M)=>{J.preventDefault(),J.stopPropagation(),E({x:J.clientX,y:J.clientY,items:[{label:"",onClick:()=>{l(b),E(null)}},{label:"",onClick:()=>{s(b.id,R,M),E(null)}}]})},K=(J,b,R)=>{J.preventDefault(),E({x:J.clientX,y:J.clientY,items:[{label:"",onClick:()=>{d(b,R),E(null)},disabled:!h}]})},X=J=>{const b=J.currentTarget,R=parseInt(b.dataset.dayindex,10),M=parseInt(b.dataset.periodindex,10);isNaN(R)||isNaN(M)||(S.current=setTimeout(()=>{const N=J.touches[0],V={...J,clientX:N.clientX,clientY:N.clientY,preventDefault:()=>J.preventDefault(),stopPropagation:()=>J.stopPropagation()};K(V,R,M)},500))},ae=()=>{S.current&&clearTimeout(S.current)},W=()=>{S.current&&clearTimeout(S.current)};return k.jsxs("div",{ref:x,className:"p-2 md:p-8 flex-grow fade-in overflow-auto md:overflow-x-auto h-[calc(100vh-120px)] md:h-auto",children:[k.jsxs("div",{className:"grid gap-0.5 md:gap-1 bg-gray-500/10 backdrop-blur-md rounded-2xl p-1 md:p-2 border border-black/10 dark:border-white/10 min-w-[768px]",style:{gridTemplateColumns:`auto repeat(${g.days.length}, 1fr)`},children:[k.jsx("div",{className:"sticky top-0 left-0 z-20 p-2 bg-gray-100 dark:bg-gray-900 md:static"}),g.days.map((J,b)=>k.jsx("div",{"data-day-header-index":b,className:"sticky top-0 z-10 text-center font-bold py-3 text-xs md:text-base text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-900 md:static",children:J},b)),Array.from({length:g.periods}).map((J,b)=>k.jsxs(i0.Fragment,{children:[k.jsx("div",{className:"sticky left-0 z-10 text-center font-bold px-1 md:px-2 py-4 text-xs md:text-base text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-900 md:static",children:b+1}),g.days.map((R,M)=>{var O;const N=CD.indexOf(R),V=((O=p[N])==null?void 0:O[b])||[];return k.jsxs("div",{className:"min-h-[90px] md:min-h-[110px] bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 rounded-lg p-1 flex flex-col gap-1 transition-colors duration-300",onDragOver:U,onDragLeave:q,onDrop:D=>H(D,N,b),onContextMenu:D=>K(D,N,b),onTouchStart:X,onTouchEnd:ae,onTouchMove:W,"data-dayindex":N,"data-periodindex":b,children:[V.map(D=>k.jsx(TD,{subject:D,onClick:()=>t(D,N,b),dayIndex:N,periodIndex:b,onContextMenu:et=>ie(et,D,N,b)},D.id)),k.jsx("button",{onClick:()=>e(N,b),className:"mt-auto w-full flex-grow flex items-center justify-center text-gray-400/50 hover:bg-black/5 dark:hover:bg-white/5 rounded-md transition-colors",children:k.jsx(qp,{className:"w-5 h-5"})})]},`${M}-${b}`)})]},b))]}),_&&k.jsx(ED,{..._,onClose:()=>E(null)})]})},CD=["","","","","","",""],kT={name:"",room:"",credits:0,memo:"",color:Yc[0],tasks:[]},AD=({isOpen:n,onClose:e,onSave:t,onDelete:i,subjectData:s})=>{const[l,d]=ve.useState({...kT,id:`subject-${Date.now()}`}),[h,g]=ve.useState(""),[p,_]=ve.useState("");ve.useEffect(()=>{n&&(s.subject?d(s.subject):d({...kT,id:`subject-${Date.now()}`,color:Yc[Math.floor(Math.random()*Yc.length)]}))},[n,s]);const E=K=>{const{name:X,value:ae}=K.target;d(W=>({...W,[X]:X==="credits"?parseInt(ae)||0:ae}))},S=K=>{d(X=>({...X,color:K}))},x=()=>{if(h.trim()==="")return;const K={id:`task-${Date.now()}`,content:h,dueDate:p,completed:!1};d(X=>({...X,tasks:[...X.tasks,K]})),g(""),_("")},U=K=>{d(X=>({...X,tasks:X.tasks.map(ae=>ae.id===K?{...ae,completed:!ae.completed}:ae)}))},q=K=>{d(X=>({...X,tasks:X.tasks.filter(ae=>ae.id!==K)}))},H=()=>{t(l,s.dayIndex,s.periodIndex),e()},ie=()=>{i&&s.subject&&(i(s.subject.id,s.dayIndex,s.periodIndex),e())};return k.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:k.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[k.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[k.jsx("h2",{className:"text-xl font-bold",children:s.subject?"":""}),k.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:k.jsx(fu,{className:"w-6 h-6"})})]}),k.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.jsx("input",{name:"name",value:l.name,onChange:E,placeholder:"",className:"md:col-span-2 bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),k.jsx("input",{name:"room",value:l.room,onChange:E,placeholder:"",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),k.jsx("input",{name:"credits",type:"number",value:l.credits,onChange:E,placeholder:"",className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"})]}),k.jsx("textarea",{name:"memo",value:l.memo,onChange:E,placeholder:"",className:"w-full bg-black/5 dark:bg-white/5 p-2 rounded-md h-24 resize-none focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),k.jsx("div",{className:"flex flex-wrap gap-2",children:Yc.map(K=>k.jsx("button",{onClick:()=>S(K),className:`w-8 h-8 rounded-full ${K} transition-transform hover:scale-110 ${l.color===K?"ring-2 ring-offset-2 ring-offset-gray-100 dark:ring-offset-gray-900 ring-sky-500":""}`},K))}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),k.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:l.tasks.map(K=>k.jsxs("div",{className:"flex items-center gap-2 bg-black/5 dark:bg-white/5 p-2 rounded-md",children:[k.jsx("input",{type:"checkbox",checked:K.completed,onChange:()=>U(K.id),className:"form-checkbox h-5 w-5 rounded bg-gray-300 dark:bg-gray-600 border-gray-400 dark:border-gray-500 text-sky-600 focus:ring-sky-500"}),k.jsxs("div",{className:"flex-grow",children:[k.jsx("p",{className:`${K.completed?"line-through text-gray-500":""}`,children:K.content}),K.dueDate&&k.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[": ",K.dueDate]})]}),k.jsx("button",{onClick:()=>q(K.id),className:"p-1 rounded-full text-gray-500 hover:bg-red-500/20 hover:text-red-500",children:k.jsx(wC,{className:"w-4 h-4"})})]},K.id))}),k.jsxs("div",{className:"mt-4 flex gap-2",children:[k.jsx("input",{value:h,onChange:K=>g(K.target.value),placeholder:"",className:"flex-grow bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500"}),k.jsx("input",{type:"date",value:p,onChange:K=>_(K.target.value),className:"bg-black/5 dark:bg-white/5 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500"}),k.jsx("button",{onClick:x,className:"bg-sky-600 hover:bg-sky-700 text-white p-2 rounded-md",children:k.jsx(qp,{className:"w-5 h-5"})})]})]})]}),k.jsxs("div",{className:"p-4 flex justify-between items-center border-t border-black/10 dark:border-white/10 mt-auto",children:[k.jsx("div",{children:s.subject&&i&&k.jsx("button",{onClick:ie,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})}),k.jsx("button",{onClick:H,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})]})]})})},ID=({isOpen:n,onClose:e,onSave:t,currentSettings:i})=>{const[s,l]=ve.useState(i);if(ve.useEffect(()=>{n&&l(i)},[n,i]),!n)return null;const d=p=>{const _=s.days.includes(p)?s.days.filter(S=>S!==p):[...s.days,p],E=zl.filter(S=>_.includes(S));l(S=>({...S,days:E}))},h=p=>{const _=Math.max(1,Math.min(10,parseInt(p.target.value)||1));l(E=>({...E,periods:_}))},g=()=>{t(s),e()};return k.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:k.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[k.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[k.jsx("h2",{className:"text-xl font-bold",children:""}),k.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:k.jsx(fu,{className:"w-6 h-6"})})]}),k.jsxs("div",{className:"p-6 space-y-6",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"text-lg font-semibold mb-3",children:""}),k.jsx("div",{className:"flex flex-wrap gap-2",children:zl.map(p=>k.jsxs("button",{onClick:()=>d(p),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${s.days.includes(p)?"bg-sky-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[p,""]},p))})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("input",{type:"range",min:"1",max:"10",value:s.periods,onChange:h,className:"w-full h-2 bg-gray-300 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-sky-600"}),k.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 rounded-md px-3 py-1 font-bold",children:s.periods})]})]})]}),k.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10",children:k.jsx("button",{onClick:g,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RD,wD;function MD(){return{geminiUrl:RD,vertexUrl:wD}}function xD(n,e,t,i){var s,l;if(!(n!=null&&n.baseUrl)){const d=MD();return e?(s=d.vertexUrl)!==null&&s!==void 0?s:t:(l=d.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jr{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(n,e,t){for(let l=0;l<e.length-1;l++){const d=e[l];if(d.endsWith("[]")){const h=d.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[h])){const g=n[h];if(Array.isArray(t))for(let p=0;p<g.length;p++){const _=g[p];c(_,e.slice(l+1),t[p])}else for(const p of g)c(p,e.slice(l+1),t)}return}else if(d.endsWith("[0]")){const h=d.slice(0,-3);h in n||(n[h]=[{}]);const g=n[h];c(g[0],e.slice(l+1),t);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function u(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const l=n[s];return Array.isArray(l)?l.map(d=>u(d,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(VT||(VT={}));var UT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(UT||(UT={}));var $o;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})($o||($o={}));var LT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(LT||(LT={}));var OT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(OT||(OT={}));var FT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(FT||(FT={}));var qT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(qT||(qT={}));var BT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(BT||(BT={}));var HT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(HT||(HT={}));var GT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(GT||(GT={}));var zT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(zT||(zT={}));var YT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(YT||(YT={}));var $T;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($T||($T={}));var KT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(KT||(KT={}));var JT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(JT||(JT={}));var Rf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Rf||(Rf={}));var QT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(QT||(QT={}));var Om;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Om||(Om={}));var XT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(XT||(XT={}));var WT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(WT||(WT={}));var ZT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ZT||(ZT={}));var jT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(jT||(jT={}));var eE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(eE||(eE={}));var tE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tE||(tE={}));var nE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(nE||(nE={}));var iE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(iE||(iE={}));var oE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(oE||(oE={}));var rE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(rE||(rE={}));var sE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sE||(sE={}));var aE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aE||(aE={}));var lE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lE||(lE={}));var uE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(uE||(uE={}));var cE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(cE||(cE={}));var fE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(fE||(fE={}));var dE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(dE||(dE={}));var hE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(hE||(hE={}));var mE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(mE||(mE={}));var pE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(pE||(pE={}));var gE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gE||(gE={}));var yE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yE||(yE={}));var _E;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(_E||(_E={}));var vE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vE||(vE={}));var TE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(TE||(TE={}));var EE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(EE||(EE={}));var SE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(SE||(SE={}));var Xs;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Xs||(Xs={}));class Fm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Nl{get text(){var e,t,i,s,l,d,h,g;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const E=[];for(const S of(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[x,U]of Object.entries(S))x!=="text"&&x!=="thought"&&(U!==null||U!==void 0)&&E.push(x);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,t,i,s,l,d,h,g;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const E of(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[S,x]of Object.entries(E))S!=="inlineData"&&(x!==null||x!==void 0)&&_.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,s,l,d,h,g;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,s,l,d,h,g,p;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,s,l,d,h,g,p;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(h=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class CE{}class AE{}class bD{}class ND{}class DD{}class PD{}class IE{}class RE{}class wE{}class kD{}class ME{}class wf{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new wf;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,t){const s=e.response;if(s){const l=new ME,d=s.videos;l.generatedVideos=d==null?void 0:d.map(h=>({video:{uri:h.gcsUri,videoBytes:h.bytesBase64Encoded?Lm(h.bytesBase64Encoded):void 0,mimeType:h.mimeType}})),l.raiMediaFilteredCount=s.raiMediaFilteredCount,l.raiMediaFilteredReasons=s.raiMediaFilteredReasons,i.response=l}}else{const s=e.response;if(s){const l=new ME,d=s.generateVideoResponse,h=d==null?void 0:d.generatedSamples;l.generatedVideos=h==null?void 0:h.map(g=>{const p=g.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Lm(p==null?void 0:p.encodedVideo):void 0,mimeType:g.encoding}}}),l.raiMediaFilteredCount=d==null?void 0:d.raiMediaFilteredCount,l.raiMediaFilteredReasons=d==null?void 0:d.raiMediaFilteredReasons,i.response=l}}return i}}class xE{}class bE{}class NE{}class VD{}class UD{}class LD{}class DE{}class OD{get text(){var e,t,i;let s="",l=!1;const d=[];for(const h of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&d.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,s+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,t,i;let s="";const l=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,g]of Object.entries(d))h!=="inlineData"&&g!==null&&l.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(s+=atob(d.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class FD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ke(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function xC(n,e){const t=Ke(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function bC(n){return Array.isArray(n)?n.map(e=>Mf(e)):[Mf(n)]}function Mf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function NC(n){const e=Mf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function DC(n){const e=Mf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function PE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function PC(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>PE(e)):[PE(n)]}function qm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function kE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function VE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return qm(n)?n:{role:"user",parts:PC(n)}}function kC(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=rn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function qn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(kE(n)||VE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],i=qm(n[0]);for(const s of n){const l=qm(s);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(kE(s)||VE(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:PC(t)}),e}function qD(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values($o).includes(t[0].toUpperCase())?t[0].toUpperCase():$o.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values($o).includes(i.toUpperCase())?i.toUpperCase():$o.TYPE_UNSPECIFIED})}}function ta(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&qD(n.type,e);for(const[d,h]of Object.entries(n))if(h!=null)if(d=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values($o).includes(h.toUpperCase())?h.toUpperCase():$o.TYPE_UNSPECIFIED}else if(t.includes(d))e[d]=ta(h);else if(i.includes(d)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(ta(p))}e[d]=g}else if(s.includes(d)){const g={};for(const[p,_]of Object.entries(h))g[p]=ta(_);e[d]=g}else{if(d==="additionalProperties")continue;e[d]=h}return e}function Bp(n){return ta(n)}function Hp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Gp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function va(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ta(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ta(e.response));return n}function Ta(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function BD(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function fo(n,e){if(typeof e!="string")throw new Error("name must be a string");return BD(n,e,"cachedContents")}function VC(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function es(n){return Lm(n)}function HD(n){return n!=null&&typeof n=="object"&&"name"in n}function GD(n){return n!=null&&typeof n=="object"&&"video"in n}function zD(n){return n!=null&&typeof n=="object"&&"uri"in n}function UC(n){var e;let t;if(HD(n)&&(t=n.name),!(zD(n)&&(t=n.uri,t===void 0))&&!(GD(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function LC(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function OC(n){for(const e of["models","tunedModels","publisherModels"])if(YD(n,e))return n[e];return[]}function YD(n,e){return n!==null&&typeof n=="object"&&e in n}function $D(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function KD(n,e={}){const t=[],i=new Set;for(const s of n){const l=s.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const d=$D(s,e);d.functionDeclarations&&t.push(...d.functionDeclarations)}return{functionDeclarations:t}}function FC(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function JD(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ea(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function qC(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QD(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function XD(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function WD(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function ZD(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],QD(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],XD(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],WD(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function BC(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>ZD(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function jD(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const g=u(n,["items"]);g!=null&&c(e,["items"],g);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const _=u(n,["maxLength"]);_!=null&&c(e,["maxLength"],_);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const x=u(n,["minItems"]);x!=null&&c(e,["minItems"],x);const U=u(n,["minLength"]);U!=null&&c(e,["minLength"],U);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const H=u(n,["minimum"]);H!=null&&c(e,["minimum"],H);const ie=u(n,["nullable"]);ie!=null&&c(e,["nullable"],ie);const K=u(n,["pattern"]);K!=null&&c(e,["pattern"],K);const X=u(n,["properties"]);X!=null&&c(e,["properties"],X);const ae=u(n,["propertyOrdering"]);ae!=null&&c(e,["propertyOrdering"],ae);const W=u(n,["required"]);W!=null&&c(e,["required"],W);const J=u(n,["title"]);J!=null&&c(e,["title"],J);const b=u(n,["type"]);return b!=null&&c(e,["type"],b),e}function e2(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&c(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function t2(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function n2(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function i2(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],n2(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function o2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function r2(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],o2(t)),e}function s2(){return{}}function a2(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function l2(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>t2(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],i2(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],r2(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],s2());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],a2(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function u2(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function c2(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function f2(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],c2(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function d2(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],u2(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],f2(i)),e}function h2(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function HC(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],h2(t)),e}function m2(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],HC(i)),e}function p2(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>m2(s))),c(e,["speakerVoiceConfigs"],i)}return e}function g2(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],HC(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],p2(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function y2(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function _2(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],BC(rn(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(i,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const _=u(e,["stopSequences"]);_!=null&&c(i,["stopSequences"],_);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const x=u(e,["presencePenalty"]);x!=null&&c(i,["presencePenalty"],x);const U=u(e,["frequencyPenalty"]);U!=null&&c(i,["frequencyPenalty"],U);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const H=u(e,["responseMimeType"]);H!=null&&c(i,["responseMimeType"],H);const ie=u(e,["responseSchema"]);ie!=null&&c(i,["responseSchema"],jD(Bp(ie)));const K=u(e,["responseJsonSchema"]);if(K!=null&&c(i,["responseJsonSchema"],K),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=u(e,["safetySettings"]);if(t!==void 0&&X!=null){let V=X;Array.isArray(V)&&(V=V.map(O=>e2(O))),c(t,["safetySettings"],V)}const ae=u(e,["tools"]);if(t!==void 0&&ae!=null){let V=Ta(ae);Array.isArray(V)&&(V=V.map(O=>l2(va(O)))),c(t,["tools"],V)}const W=u(e,["toolConfig"]);if(t!==void 0&&W!=null&&c(t,["toolConfig"],d2(W)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=u(e,["cachedContent"]);t!==void 0&&J!=null&&c(t,["cachedContent"],fo(n,J));const b=u(e,["responseModalities"]);b!=null&&c(i,["responseModalities"],b);const R=u(e,["mediaResolution"]);R!=null&&c(i,["mediaResolution"],R);const M=u(e,["speechConfig"]);if(M!=null&&c(i,["speechConfig"],g2(Hp(M))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=u(e,["thinkingConfig"]);return N!=null&&c(i,["thinkingConfig"],y2(N)),i}function v2(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["request","model"],Ke(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>BC(h))),c(t,["request","contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["request","generationConfig"],_2(n,l,t)),t}function T2(n,e){const t={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&c(t,["fileName"],i);const s=u(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>v2(n,d))),c(t,["requests","requests"],l)}return t}function E2(n,e){const t={},i=u(n,["displayName"]);if(e!==void 0&&i!=null&&c(e,["batch","displayName"],i),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function UE(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["src"]);s!=null&&c(t,["batch","inputConfig"],T2(n,FC(n,s)));const l=u(e,["config"]);return l!=null&&c(t,["config"],E2(l,t)),t}function S2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Ea(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function C2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Ea(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function A2(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);if(e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function I2(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],A2(t,e)),e}function R2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Ea(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function w2(n){const e={},t=u(n,["format"]);t!=null&&c(e,["instancesFormat"],t);const i=u(n,["gcsUri"]);i!=null&&c(e,["gcsSource","uris"],i);const s=u(n,["bigqueryUri"]);if(s!=null&&c(e,["bigquerySource","inputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function M2(n){const e={},t=u(n,["format"]);t!=null&&c(e,["predictionsFormat"],t);const i=u(n,["gcsUri"]);i!=null&&c(e,["gcsDestination","outputUriPrefix"],i);const s=u(n,["bigqueryUri"]);if(s!=null&&c(e,["bigqueryDestination","outputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function x2(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["dest"]);return e!==void 0&&s!=null&&c(e,["outputConfig"],M2(JD(s))),t}function b2(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],Ke(n,i));const s=u(e,["src"]);s!=null&&c(t,["inputConfig"],w2(FC(n,s)));const l=u(e,["config"]);return l!=null&&c(t,["config"],x2(l,t)),t}function N2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Ea(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function D2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Ea(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function P2(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function k2(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],P2(t,e)),e}function V2(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],Ea(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function U2(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function L2(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function O2(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function F2(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],U2(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],L2(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],O2(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function q2(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>F2(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function B2(n){const e={},t=u(n,["citationSources"]);return t!=null&&c(e,["citations"],t),e}function H2(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function G2(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>H2(s))),c(e,["urlMetadata"],i)}return e}function z2(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],q2(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],B2(i));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],G2(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(n,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const _=u(n,["logprobsResult"]);_!=null&&c(e,["logprobsResult"],_);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function Y2(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>z2(p))),c(e,["candidates"],g)}const s=u(n,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const l=u(n,["promptFeedback"]);l!=null&&c(e,["promptFeedback"],l);const d=u(n,["responseId"]);d!=null&&c(e,["responseId"],d);const h=u(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function GC(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["code"]);i!=null&&c(e,["code"],i);const s=u(n,["message"]);return s!=null&&c(e,["message"],s),e}function $2(n){const e={},t=u(n,["response"]);t!=null&&c(e,["response"],Y2(t));const i=u(n,["error"]);return i!=null&&c(e,["error"],GC(i)),e}function K2(n){const e={},t=u(n,["responsesFile"]);t!=null&&c(e,["fileName"],t);const i=u(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>$2(l))),c(e,["inlinedResponses"],s)}return e}function nf(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata","displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["metadata","state"]);s!=null&&c(e,["state"],qC(s));const l=u(n,["metadata","createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["metadata","endTime"]);d!=null&&c(e,["endTime"],d);const h=u(n,["metadata","updateTime"]);h!=null&&c(e,["updateTime"],h);const g=u(n,["metadata","model"]);g!=null&&c(e,["model"],g);const p=u(n,["metadata","output"]);return p!=null&&c(e,["dest"],K2(p)),e}function J2(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>nf(d))),c(e,["batchJobs"],l)}return e}function Q2(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);return l!=null&&c(e,["error"],GC(l)),e}function zC(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["code"]);i!=null&&c(e,["code"],i);const s=u(n,["message"]);return s!=null&&c(e,["message"],s),e}function X2(n){const e={},t=u(n,["instancesFormat"]);t!=null&&c(e,["format"],t);const i=u(n,["gcsSource","uris"]);i!=null&&c(e,["gcsUri"],i);const s=u(n,["bigquerySource","inputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function W2(n){const e={},t=u(n,["predictionsFormat"]);t!=null&&c(e,["format"],t);const i=u(n,["gcsDestination","outputUriPrefix"]);i!=null&&c(e,["gcsUri"],i);const s=u(n,["bigqueryDestination","outputUri"]);return s!=null&&c(e,["bigqueryUri"],s),e}function Bm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],qC(s));const l=u(n,["error"]);l!=null&&c(e,["error"],zC(l));const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["startTime"]);h!=null&&c(e,["startTime"],h);const g=u(n,["endTime"]);g!=null&&c(e,["endTime"],g);const p=u(n,["updateTime"]);p!=null&&c(e,["updateTime"],p);const _=u(n,["model"]);_!=null&&c(e,["model"],_);const E=u(n,["inputConfig"]);E!=null&&c(e,["src"],X2(E));const S=u(n,["outputConfig"]);return S!=null&&c(e,["dest"],W2(S)),e}function Z2(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Bm(d))),c(e,["batchJobs"],l)}return e}function j2(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);return l!=null&&c(e,["error"],zC(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Jr||(Jr={}));class du{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!i||Object.keys(i).length===0?d={config:{}}:typeof i=="object"?d=Object.assign({},i):d=i,d.config&&(d.config.pageToken=t.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(l=(s=d.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eP extends jr{constructor(e){super(),this.apiClient=e,this.create=async t=>{var i,s;if(this.apiClient.isVertexAI()){const d=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${d}`;else throw new Error("Unsupported source:"+t.src)}else if(Array.isArray(t.src)||typeof t.src!="string"&&t.src.inlinedRequests){let l="",d={};const h=UE(this.apiClient,t);l=pe("{model}:batchGenerateContent",h._url),d=h._query;const _=h.batch.inputConfig.requests,E=_.requests,S=[];for(const U of E){const q=U;if(q.systemInstruction){const H=q.systemInstruction;delete q.systemInstruction;const ie=q.request;ie.systemInstruction=H,q.request=ie}S.push(q)}return _.requests=S,delete h.config,delete h._url,delete h._query,this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(U=>U.json()).then(U=>nf(U))}return await this.createInternal(t)},this.list=async(t={})=>new du(Jr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}async createInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=b2(this.apiClient,e);return h=pe("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Bm(_))}else{const p=UE(this.apiClient,e);return h=pe("{model}:batchGenerateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>nf(_))}}async get(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=N2(this.apiClient,e);return h=pe("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Bm(_))}else{const p=S2(this.apiClient,e);return h=pe("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>nf(_))}}async cancel(e){var t,i,s,l;let d="",h={};if(this.apiClient.isVertexAI()){const g=D2(this.apiClient,e);d=pe("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=C2(this.apiClient,e);d=pe("batches/{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=k2(e);return h=pe("batchPredictionJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=Z2(_),S=new DE;return Object.assign(S,E),S})}else{const p=I2(e);return h=pe("batches",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=J2(_),S=new DE;return Object.assign(S,E),S})}}async delete(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=V2(this.apiClient,e);return h=pe("batchPredictionJobs/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>j2(_))}else{const p=R2(this.apiClient,e);return h=pe("batches/{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>Q2(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tP(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function nP(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function iP(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function oP(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],tP(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],nP(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],iP(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function LE(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>oP(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function rP(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function sP(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function aP(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],sP(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function lP(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function uP(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],lP(t)),e}function cP(){return{}}function fP(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function dP(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>rP(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],aP(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],uP(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],cP());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],fP(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function hP(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function mP(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function pP(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],mP(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function gP(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],hP(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],pP(i)),e}function yP(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const l=u(n,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let _=qn(d);Array.isArray(_)&&(_=_.map(E=>LE(E))),c(e,["contents"],_)}const h=u(n,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],LE(rn(h)));const g=u(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(E=>dP(E))),c(e,["tools"],_)}const p=u(n,["toolConfig"]);if(e!==void 0&&p!=null&&c(e,["toolConfig"],gP(p)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function _P(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],xC(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],yP(s,t)),t}function vP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],fo(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function TP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],fo(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function EP(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),t}function SP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],fo(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],EP(s,t)),t}function CP(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function AP(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],CP(t,e)),e}function IP(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function RP(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function wP(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function MP(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],IP(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],RP(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],wP(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function OE(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>MP(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function xP(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function bP(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function NP(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],bP(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function DP(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function PP(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],DP(t)),e}function kP(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function VP(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function UP(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],VP(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function LP(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],UP(t)),e}function OP(){return{}}function FP(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function qP(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>xP(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],NP(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],PP(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],kP(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],LP(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],OP());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],FP(p));const _=u(n,["codeExecution"]);return _!=null&&c(e,["codeExecution"],_),e}function BP(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function HP(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function GP(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],HP(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function zP(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],BP(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],GP(i)),e}function YP(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&c(e,["expireTime"],s);const l=u(n,["displayName"]);e!==void 0&&l!=null&&c(e,["displayName"],l);const d=u(n,["contents"]);if(e!==void 0&&d!=null){let E=qn(d);Array.isArray(E)&&(E=E.map(S=>OE(S))),c(e,["contents"],E)}const h=u(n,["systemInstruction"]);e!==void 0&&h!=null&&c(e,["systemInstruction"],OE(rn(h)));const g=u(n,["tools"]);if(e!==void 0&&g!=null){let E=g;Array.isArray(E)&&(E=E.map(S=>qP(S))),c(e,["tools"],E)}const p=u(n,["toolConfig"]);e!==void 0&&p!=null&&c(e,["toolConfig"],zP(p));const _=u(n,["kmsKeyName"]);return e!==void 0&&_!=null&&c(e,["encryption_spec","kmsKeyName"],_),t}function $P(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["model"],xC(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],YP(s,t)),t}function KP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],fo(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function JP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],fo(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function QP(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&c(e,["ttl"],i);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&c(e,["expireTime"],s),t}function XP(n,e){const t={},i=u(e,["name"]);i!=null&&c(t,["_url","name"],fo(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],QP(s,t)),t}function WP(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function ZP(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],WP(t,e)),e}function of(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["model"]);s!=null&&c(e,["model"],s);const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(n,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(n,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function jP(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function ek(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>of(d))),c(e,["cachedContents"],l)}return e}function rf(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["model"]);s!=null&&c(e,["model"],s);const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["updateTime"]);d!=null&&c(e,["updateTime"],d);const h=u(n,["expireTime"]);h!=null&&c(e,["expireTime"],h);const g=u(n,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function tk(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function nk(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>rf(d))),c(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ik extends jr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new du(Jr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=$P(this.apiClient,e);return h=pe("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>rf(_))}else{const p=_P(this.apiClient,e);return h=pe("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>of(_))}}async get(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=KP(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>rf(_))}else{const p=vP(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>of(_))}}async delete(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=JP(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=tk(_),S=new bE;return Object.assign(S,E),S})}else{const p=TP(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=jP(_),S=new bE;return Object.assign(S,E),S})}}async update(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=XP(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>rf(_))}else{const p=SP(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>of(_))}}async listInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=ZP(e);return h=pe("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=nk(_),S=new NE;return Object.assign(S,E),S})}else{const p=AP(e);return h=pe("cachedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=ek(_),S=new NE;return Object.assign(S,E),S})}}}function FE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ut(n){return this instanceof ut?(this.v=n,this):new ut(n)}function na(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),s[Symbol.asyncIterator]=function(){return this},s;function d(x){return function(U){return Promise.resolve(U).then(x,E)}}function h(x,U){i[x]&&(s[x]=function(q){return new Promise(function(H,ie){l.push([x,q,H,ie])>1||g(x,q)})},U&&(s[x]=U(s[x])))}function g(x,U){try{p(i[x](U))}catch(q){S(l[0][3],q)}}function p(x){x.value instanceof ut?Promise.resolve(x.value.v).then(_,E):S(l[0][2],x)}function _(x){g("next",x)}function E(x){g("throw",x)}function S(x,U){x(U),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Gl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof FE=="function"?FE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(d){return new Promise(function(h,g){d=n[l](d),s(h,g,d.done,d.value)})}}function s(l,d,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ok(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:YC(t)}function YC(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function rk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function qE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let l=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),l&&!YC(n[i])&&(l=!1),i++;l?e.push(...s):e.pop()}return e}class sk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ak(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ak{constructor(e,t,i,s={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),rk(l)}async sendMessage(e){var t;await this.sendPromise;const i=rn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,d,h;const g=await s,p=(d=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content,_=g.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];_!=null&&(S=(h=_.slice(E))!==null&&h!==void 0?h:[]);const x=p?[p]:[];this.recordHistory(i,x,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=rn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?qE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,s;return na(this,arguments,function*(){var d,h,g,p;const _=[];try{for(var E=!0,S=Gl(e),x;x=yield ut(S.next()),d=x.done,!d;E=!0){p=x.value,E=!1;const U=p;if(ok(U)){const q=(s=(i=U.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;q!==void 0&&_.push(q)}yield yield ut(U)}}catch(U){h={error:U}}finally{try{!E&&!d&&(g=S.return)&&(yield ut(g.call(S)))}finally{if(h)throw h.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(l=>l.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...qE(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Yf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lk(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&c(e,["_query","pageToken"],s),t}function uk(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],lk(t,e)),e}function ck(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["message"]);i!=null&&c(e,["message"],i);const s=u(n,["code"]);return s!=null&&c(e,["code"],s),e}function fk(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const l=u(n,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(n,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(n,["sha256Hash"]);p!=null&&c(e,["sha256Hash"],p);const _=u(n,["uri"]);_!=null&&c(e,["uri"],_);const E=u(n,["downloadUri"]);E!=null&&c(e,["downloadUri"],E);const S=u(n,["state"]);S!=null&&c(e,["state"],S);const x=u(n,["source"]);x!=null&&c(e,["source"],x);const U=u(n,["videoMetadata"]);U!=null&&c(e,["videoMetadata"],U);const q=u(n,["error"]);return q!=null&&c(e,["error"],ck(q)),e}function dk(n){const e={},t=u(n,["file"]);t!=null&&c(e,["file"],fk(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function hk(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","file"],UC(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function mk(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","file"],UC(t));const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function pk(n){const e={},t=u(n,["details"]);t!=null&&c(e,["details"],t);const i=u(n,["message"]);i!=null&&c(e,["message"],i);const s=u(n,["code"]);return s!=null&&c(e,["code"],s),e}function Hm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["mimeType"]);s!=null&&c(e,["mimeType"],s);const l=u(n,["sizeBytes"]);l!=null&&c(e,["sizeBytes"],l);const d=u(n,["createTime"]);d!=null&&c(e,["createTime"],d);const h=u(n,["expirationTime"]);h!=null&&c(e,["expirationTime"],h);const g=u(n,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(n,["sha256Hash"]);p!=null&&c(e,["sha256Hash"],p);const _=u(n,["uri"]);_!=null&&c(e,["uri"],_);const E=u(n,["downloadUri"]);E!=null&&c(e,["downloadUri"],E);const S=u(n,["state"]);S!=null&&c(e,["state"],S);const x=u(n,["source"]);x!=null&&c(e,["source"],x);const U=u(n,["videoMetadata"]);U!=null&&c(e,["videoMetadata"],U);const q=u(n,["error"]);return q!=null&&c(e,["error"],pk(q)),e}function gk(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Hm(d))),c(e,["files"],l)}return e}function yk(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function _k(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vk extends jr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new du(Jr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Hm(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=uk(e);return l=pe("files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=gk(g),_=new VD;return Object.assign(_,p),_})}}async createInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dk(e);return l=pe("upload/v1beta/files",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const p=yk(g),_=new UD;return Object.assign(_,p),_})}}async get(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=hk(e);return l=pe("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>Hm(g))}}async delete(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mk(e);return l=pe("files/{file}",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=_k(g),_=new LD;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tk(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function $C(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],Tk(t)),e}function Ek(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],$C(i)),e}function Sk(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Ek(s))),c(e,["speakerVoiceConfigs"],i)}return e}function Ck(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],$C(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],Sk(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function Ak(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function Ik(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Rk(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function wk(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],Ak(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],Ik(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],Rk(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function Mk(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>wk(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function xk(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function bk(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function Nk(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],bk(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Dk(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function Pk(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],Dk(t)),e}function kk(){return{}}function Vk(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function Uk(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>xk(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],Nk(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],Pk(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],kk());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],Vk(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function Lk(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function BE(){return{}}function Ok(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function Fk(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],Ok(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function qk(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function Bk(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],qk(i)),e}function Hk(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function Gk(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const _=u(n,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Ck(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=u(n,["systemInstruction"]);e!==void 0&&x!=null&&c(e,["setup","systemInstruction"],Mk(rn(x)));const U=u(n,["tools"]);if(e!==void 0&&U!=null){let W=Ta(U);Array.isArray(W)&&(W=W.map(J=>Uk(va(J)))),c(e,["setup","tools"],W)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],Lk(q));const H=u(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&c(e,["setup","inputAudioTranscription"],BE());const ie=u(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&c(e,["setup","outputAudioTranscription"],BE());const K=u(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&c(e,["setup","realtimeInputConfig"],Fk(K));const X=u(n,["contextWindowCompression"]);e!==void 0&&X!=null&&c(e,["setup","contextWindowCompression"],Bk(X));const ae=u(n,["proactivity"]);return e!==void 0&&ae!=null&&c(e,["setup","proactivity"],Hk(ae)),t}function zk(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],Gk(s,t)),t}function Yk(){return{}}function $k(){return{}}function Kk(n){const e={},t=u(n,["media"]);t!=null&&c(e,["mediaChunks"],bC(t));const i=u(n,["audio"]);i!=null&&c(e,["audio"],DC(i));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const l=u(n,["video"]);l!=null&&c(e,["video"],NC(l));const d=u(n,["text"]);return d!=null&&c(e,["text"],d),u(n,["activityStart"])!=null&&c(e,["activityStart"],Yk()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],$k()),e}function KC(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["weight"]);return i!=null&&c(e,["weight"],i),e}function Jk(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>KC(s))),c(e,["weightedPrompts"],i)}return e}function JC(n){const e={},t=u(n,["temperature"]);t!=null&&c(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&c(e,["topK"],i);const s=u(n,["seed"]);s!=null&&c(e,["seed"],s);const l=u(n,["guidance"]);l!=null&&c(e,["guidance"],l);const d=u(n,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(n,["density"]);h!=null&&c(e,["density"],h);const g=u(n,["brightness"]);g!=null&&c(e,["brightness"],g);const p=u(n,["scale"]);p!=null&&c(e,["scale"],p);const _=u(n,["muteBass"]);_!=null&&c(e,["muteBass"],_);const E=u(n,["muteDrums"]);E!=null&&c(e,["muteDrums"],E);const S=u(n,["onlyBassAndDrums"]);S!=null&&c(e,["onlyBassAndDrums"],S);const x=u(n,["musicGenerationMode"]);return x!=null&&c(e,["musicGenerationMode"],x),e}function Qk(n){const e={},t=u(n,["musicGenerationConfig"]);return t!=null&&c(e,["musicGenerationConfig"],JC(t)),e}function QC(n){const e={},t=u(n,["model"]);return t!=null&&c(e,["model"],t),e}function XC(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>KC(s))),c(e,["weightedPrompts"],i)}return e}function Gm(n){const e={},t=u(n,["setup"]);t!=null&&c(e,["setup"],QC(t));const i=u(n,["clientContent"]);i!=null&&c(e,["clientContent"],XC(i));const s=u(n,["musicGenerationConfig"]);s!=null&&c(e,["musicGenerationConfig"],JC(s));const l=u(n,["playbackControl"]);return l!=null&&c(e,["playbackControl"],l),e}function Xk(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function Wk(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],Xk(t)),e}function Zk(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&c(e,["voiceConfig"],Wk(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function jk(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function eV(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function tV(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function nV(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],jk(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],eV(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],tV(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function iV(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>nV(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function oV(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function rV(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function sV(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],rV(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function aV(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function lV(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],aV(t)),e}function uV(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function cV(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function fV(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],cV(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function dV(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],fV(t)),e}function hV(){return{}}function mV(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function pV(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>oV(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],sV(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],lV(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],uV(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],dV(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],hV());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],mV(p));const _=u(n,["codeExecution"]);return _!=null&&c(e,["codeExecution"],_),e}function gV(n){const e={},t=u(n,["handle"]);t!=null&&c(e,["handle"],t);const i=u(n,["transparent"]);return i!=null&&c(e,["transparent"],i),e}function HE(){return{}}function yV(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function _V(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],yV(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function vV(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function TV(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],vV(i)),e}function EV(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function SV(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const _=u(n,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],Zk(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=u(n,["systemInstruction"]);e!==void 0&&x!=null&&c(e,["setup","systemInstruction"],iV(rn(x)));const U=u(n,["tools"]);if(e!==void 0&&U!=null){let W=Ta(U);Array.isArray(W)&&(W=W.map(J=>pV(va(J)))),c(e,["setup","tools"],W)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],gV(q));const H=u(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&c(e,["setup","inputAudioTranscription"],HE());const ie=u(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&c(e,["setup","outputAudioTranscription"],HE());const K=u(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&c(e,["setup","realtimeInputConfig"],_V(K));const X=u(n,["contextWindowCompression"]);e!==void 0&&X!=null&&c(e,["setup","contextWindowCompression"],TV(X));const ae=u(n,["proactivity"]);return e!==void 0&&ae!=null&&c(e,["setup","proactivity"],EV(ae)),t}function CV(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],SV(s,t)),t}function AV(){return{}}function IV(){return{}}function RV(n){const e={},t=u(n,["media"]);t!=null&&c(e,["mediaChunks"],bC(t));const i=u(n,["audio"]);i!=null&&c(e,["audio"],DC(i));const s=u(n,["audioStreamEnd"]);s!=null&&c(e,["audioStreamEnd"],s);const l=u(n,["video"]);l!=null&&c(e,["video"],NC(l));const d=u(n,["text"]);return d!=null&&c(e,["text"],d),u(n,["activityStart"])!=null&&c(e,["activityStart"],AV()),u(n,["activityEnd"])!=null&&c(e,["activityEnd"],IV()),e}function wV(){return{}}function MV(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function xV(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function bV(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function NV(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],MV(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],xV(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],bV(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function DV(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>NV(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function GE(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["finished"]);return i!=null&&c(e,["finished"],i),e}function PV(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function kV(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>PV(s))),c(e,["urlMetadata"],i)}return e}function VV(n){const e={},t=u(n,["modelTurn"]);t!=null&&c(e,["modelTurn"],DV(t));const i=u(n,["turnComplete"]);i!=null&&c(e,["turnComplete"],i);const s=u(n,["interrupted"]);s!=null&&c(e,["interrupted"],s);const l=u(n,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const d=u(n,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(n,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],GE(h));const g=u(n,["outputTranscription"]);g!=null&&c(e,["outputTranscription"],GE(g));const p=u(n,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],kV(p)),e}function UV(n){const e={},t=u(n,["id"]);t!=null&&c(e,["id"],t);const i=u(n,["args"]);i!=null&&c(e,["args"],i);const s=u(n,["name"]);return s!=null&&c(e,["name"],s),e}function LV(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>UV(s))),c(e,["functionCalls"],i)}return e}function OV(n){const e={},t=u(n,["ids"]);return t!=null&&c(e,["ids"],t),e}function Gc(n){const e={},t=u(n,["modality"]);t!=null&&c(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&c(e,["tokenCount"],i),e}function FV(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const s=u(n,["responseTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const l=u(n,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(n,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(n,["promptTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(x=>Gc(x))),c(e,["promptTokensDetails"],S)}const p=u(n,["cacheTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(x=>Gc(x))),c(e,["cacheTokensDetails"],S)}const _=u(n,["responseTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(x=>Gc(x))),c(e,["responseTokensDetails"],S)}const E=u(n,["toolUsePromptTokensDetails"]);if(E!=null){let S=E;Array.isArray(S)&&(S=S.map(x=>Gc(x))),c(e,["toolUsePromptTokensDetails"],S)}return e}function qV(n){const e={},t=u(n,["timeLeft"]);return t!=null&&c(e,["timeLeft"],t),e}function BV(n){const e={},t=u(n,["newHandle"]);t!=null&&c(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&c(e,["resumable"],i);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&c(e,["lastConsumedClientMessageIndex"],s),e}function HV(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],wV());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],VV(i));const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],LV(s));const l=u(n,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],OV(l));const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],FV(d));const h=u(n,["goAway"]);h!=null&&c(e,["goAway"],qV(h));const g=u(n,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],BV(g)),e}function GV(){return{}}function zV(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["weight"]);return i!=null&&c(e,["weight"],i),e}function YV(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>zV(s))),c(e,["weightedPrompts"],i)}return e}function $V(n){const e={},t=u(n,["temperature"]);t!=null&&c(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&c(e,["topK"],i);const s=u(n,["seed"]);s!=null&&c(e,["seed"],s);const l=u(n,["guidance"]);l!=null&&c(e,["guidance"],l);const d=u(n,["bpm"]);d!=null&&c(e,["bpm"],d);const h=u(n,["density"]);h!=null&&c(e,["density"],h);const g=u(n,["brightness"]);g!=null&&c(e,["brightness"],g);const p=u(n,["scale"]);p!=null&&c(e,["scale"],p);const _=u(n,["muteBass"]);_!=null&&c(e,["muteBass"],_);const E=u(n,["muteDrums"]);E!=null&&c(e,["muteDrums"],E);const S=u(n,["onlyBassAndDrums"]);S!=null&&c(e,["onlyBassAndDrums"],S);const x=u(n,["musicGenerationMode"]);return x!=null&&c(e,["musicGenerationMode"],x),e}function KV(n){const e={},t=u(n,["clientContent"]);t!=null&&c(e,["clientContent"],YV(t));const i=u(n,["musicGenerationConfig"]);return i!=null&&c(e,["musicGenerationConfig"],$V(i)),e}function JV(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);i!=null&&c(e,["mimeType"],i);const s=u(n,["sourceMetadata"]);return s!=null&&c(e,["sourceMetadata"],KV(s)),e}function QV(n){const e={},t=u(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>JV(s))),c(e,["audioChunks"],i)}return e}function XV(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["filteredReason"]);return i!=null&&c(e,["filteredReason"],i),e}function WV(n){const e={};u(n,["setupComplete"])!=null&&c(e,["setupComplete"],GV());const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],QV(i));const s=u(n,["filteredPrompt"]);return s!=null&&c(e,["filteredPrompt"],XV(s)),e}function ZV(n){const e={},t=u(n,["sessionId"]);return t!=null&&c(e,["sessionId"],t),e}function jV(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function eU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function tU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function nU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],jV(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],eU(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],tU(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function iU(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>nU(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function zE(n){const e={},t=u(n,["text"]);t!=null&&c(e,["text"],t);const i=u(n,["finished"]);return i!=null&&c(e,["finished"],i),e}function oU(n){const e={},t=u(n,["modelTurn"]);t!=null&&c(e,["modelTurn"],iU(t));const i=u(n,["turnComplete"]);i!=null&&c(e,["turnComplete"],i);const s=u(n,["interrupted"]);s!=null&&c(e,["interrupted"],s);const l=u(n,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const d=u(n,["generationComplete"]);d!=null&&c(e,["generationComplete"],d);const h=u(n,["inputTranscription"]);h!=null&&c(e,["inputTranscription"],zE(h));const g=u(n,["outputTranscription"]);return g!=null&&c(e,["outputTranscription"],zE(g)),e}function rU(n){const e={},t=u(n,["args"]);t!=null&&c(e,["args"],t);const i=u(n,["name"]);return i!=null&&c(e,["name"],i),e}function sU(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>rU(s))),c(e,["functionCalls"],i)}return e}function aU(n){const e={},t=u(n,["ids"]);return t!=null&&c(e,["ids"],t),e}function zc(n){const e={},t=u(n,["modality"]);t!=null&&c(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&c(e,["tokenCount"],i),e}function lU(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&c(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&c(e,["cachedContentTokenCount"],i);const s=u(n,["candidatesTokenCount"]);s!=null&&c(e,["responseTokenCount"],s);const l=u(n,["toolUsePromptTokenCount"]);l!=null&&c(e,["toolUsePromptTokenCount"],l);const d=u(n,["thoughtsTokenCount"]);d!=null&&c(e,["thoughtsTokenCount"],d);const h=u(n,["totalTokenCount"]);h!=null&&c(e,["totalTokenCount"],h);const g=u(n,["promptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(U=>zc(U))),c(e,["promptTokensDetails"],x)}const p=u(n,["cacheTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(U=>zc(U))),c(e,["cacheTokensDetails"],x)}const _=u(n,["candidatesTokensDetails"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(U=>zc(U))),c(e,["responseTokensDetails"],x)}const E=u(n,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(U=>zc(U))),c(e,["toolUsePromptTokensDetails"],x)}const S=u(n,["trafficType"]);return S!=null&&c(e,["trafficType"],S),e}function uU(n){const e={},t=u(n,["timeLeft"]);return t!=null&&c(e,["timeLeft"],t),e}function cU(n){const e={},t=u(n,["newHandle"]);t!=null&&c(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&c(e,["resumable"],i);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&c(e,["lastConsumedClientMessageIndex"],s),e}function fU(n){const e={},t=u(n,["setupComplete"]);t!=null&&c(e,["setupComplete"],ZV(t));const i=u(n,["serverContent"]);i!=null&&c(e,["serverContent"],oU(i));const s=u(n,["toolCall"]);s!=null&&c(e,["toolCall"],sU(s));const l=u(n,["toolCallCancellation"]);l!=null&&c(e,["toolCallCancellation"],aU(l));const d=u(n,["usageMetadata"]);d!=null&&c(e,["usageMetadata"],lU(d));const h=u(n,["goAway"]);h!=null&&c(e,["goAway"],uU(h));const g=u(n,["sessionResumptionUpdate"]);return g!=null&&c(e,["sessionResumptionUpdate"],cU(g)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dU(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function hU(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function mU(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function pU(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],dU(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],hU(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],mU(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function $f(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>pU(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function gU(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const g=u(n,["items"]);g!=null&&c(e,["items"],g);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const _=u(n,["maxLength"]);_!=null&&c(e,["maxLength"],_);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const x=u(n,["minItems"]);x!=null&&c(e,["minItems"],x);const U=u(n,["minLength"]);U!=null&&c(e,["minLength"],U);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const H=u(n,["minimum"]);H!=null&&c(e,["minimum"],H);const ie=u(n,["nullable"]);ie!=null&&c(e,["nullable"],ie);const K=u(n,["pattern"]);K!=null&&c(e,["pattern"],K);const X=u(n,["properties"]);X!=null&&c(e,["properties"],X);const ae=u(n,["propertyOrdering"]);ae!=null&&c(e,["propertyOrdering"],ae);const W=u(n,["required"]);W!=null&&c(e,["required"],W);const J=u(n,["title"]);J!=null&&c(e,["title"],J);const b=u(n,["type"]);return b!=null&&c(e,["type"],b),e}function yU(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&c(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&c(e,["threshold"],i),e}function _U(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function vU(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function TU(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],vU(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function EU(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function SU(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],EU(t)),e}function CU(){return{}}function AU(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function IU(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>_U(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],TU(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],SU(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],CU());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],AU(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function RU(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function wU(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function MU(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],wU(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function xU(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],RU(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],MU(i)),e}function bU(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function WC(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],bU(t)),e}function NU(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],WC(i)),e}function DU(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>NU(s))),c(e,["speakerVoiceConfigs"],i)}return e}function PU(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],WC(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],DU(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function kU(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function VU(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],$f(rn(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(i,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const _=u(e,["stopSequences"]);_!=null&&c(i,["stopSequences"],_);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const x=u(e,["presencePenalty"]);x!=null&&c(i,["presencePenalty"],x);const U=u(e,["frequencyPenalty"]);U!=null&&c(i,["frequencyPenalty"],U);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const H=u(e,["responseMimeType"]);H!=null&&c(i,["responseMimeType"],H);const ie=u(e,["responseSchema"]);ie!=null&&c(i,["responseSchema"],gU(Bp(ie)));const K=u(e,["responseJsonSchema"]);if(K!=null&&c(i,["responseJsonSchema"],K),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=u(e,["safetySettings"]);if(t!==void 0&&X!=null){let V=X;Array.isArray(V)&&(V=V.map(O=>yU(O))),c(t,["safetySettings"],V)}const ae=u(e,["tools"]);if(t!==void 0&&ae!=null){let V=Ta(ae);Array.isArray(V)&&(V=V.map(O=>IU(va(O)))),c(t,["tools"],V)}const W=u(e,["toolConfig"]);if(t!==void 0&&W!=null&&c(t,["toolConfig"],xU(W)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=u(e,["cachedContent"]);t!==void 0&&J!=null&&c(t,["cachedContent"],fo(n,J));const b=u(e,["responseModalities"]);b!=null&&c(i,["responseModalities"],b);const R=u(e,["mediaResolution"]);R!=null&&c(i,["mediaResolution"],R);const M=u(e,["speechConfig"]);if(M!=null&&c(i,["speechConfig"],PU(Hp(M))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=u(e,["thinkingConfig"]);return N!=null&&c(i,["thinkingConfig"],kU(N)),i}function YE(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>$f(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["generationConfig"],VU(n,l,t)),t}function UU(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&c(e,["requests[]","taskType"],i);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["requests[]","title"],s);const l=u(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&c(e,["requests[]","outputDimensionality"],l),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function LU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["contents"]);s!=null&&c(t,["requests[]","content"],kC(n,s));const l=u(e,["config"]);l!=null&&c(t,["config"],UU(l,t));const d=u(e,["model"]);return d!==void 0&&c(t,["requests[]","model"],Ke(n,d)),t}function OU(n,e){const t={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=u(n,["guidanceScale"]);if(e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=u(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&c(e,["parameters","safetySetting"],d);const h=u(n,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const g=u(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&c(e,["parameters","includeSafetyAttributes"],g);const p=u(n,["includeRaiReason"]);e!==void 0&&p!=null&&c(e,["parameters","includeRaiReason"],p);const _=u(n,["language"]);e!==void 0&&_!=null&&c(e,["parameters","language"],_);const E=u(n,["outputMimeType"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","mimeType"],E);const S=u(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&c(e,["parameters","outputOptions","compressionQuality"],S),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const x=u(n,["imageSize"]);if(e!==void 0&&x!=null&&c(e,["parameters","sampleImageSize"],x),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function FU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["config"]);return l!=null&&c(t,["config"],OU(l,t)),t}function qU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function BU(n,e,t){const i={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const l=u(e,["pageToken"]);t!==void 0&&l!=null&&c(t,["_query","pageToken"],l);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const h=u(e,["queryBase"]);return t!==void 0&&h!=null&&c(t,["_url","models_url"],LC(n,h)),i}function HU(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],BU(n,i,t)),t}function GU(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const l=u(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),t}function zU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],GU(s,t)),t}function YU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function $U(n){const e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function KU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>$f(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],$U(l)),t}function ZC(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=u(n,["imageBytes"]);t!=null&&c(e,["bytesBase64Encoded"],es(t));const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function JU(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);if(e!==void 0&&s!=null&&c(e,["instances[0]","image"],ZC(s)),u(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return t}function QU(n,e){const t={},i=u(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(n,["durationSeconds"]);if(e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=u(n,["aspectRatio"]);if(e!==void 0&&l!=null&&c(e,["parameters","aspectRatio"],l),u(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=u(n,["personGeneration"]);if(e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=u(n,["negativePrompt"]);e!==void 0&&h!=null&&c(e,["parameters","negativePrompt"],h);const g=u(n,["enhancePrompt"]);if(e!==void 0&&g!=null&&c(e,["parameters","enhancePrompt"],g),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function XU(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["image"]);if(l!=null&&c(t,["instances[0]","image"],ZC(l)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const d=u(e,["source"]);d!=null&&c(t,["config"],JU(d,t));const h=u(e,["config"]);return h!=null&&c(t,["config"],QU(h,t)),t}function WU(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function ZU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function jU(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function eL(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],WU(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],ZU(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],jU(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function Sa(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>eL(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function tL(n){const e={},t=u(n,["anyOf"]);t!=null&&c(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&c(e,["default"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["enum"]);l!=null&&c(e,["enum"],l);const d=u(n,["example"]);d!=null&&c(e,["example"],d);const h=u(n,["format"]);h!=null&&c(e,["format"],h);const g=u(n,["items"]);g!=null&&c(e,["items"],g);const p=u(n,["maxItems"]);p!=null&&c(e,["maxItems"],p);const _=u(n,["maxLength"]);_!=null&&c(e,["maxLength"],_);const E=u(n,["maxProperties"]);E!=null&&c(e,["maxProperties"],E);const S=u(n,["maximum"]);S!=null&&c(e,["maximum"],S);const x=u(n,["minItems"]);x!=null&&c(e,["minItems"],x);const U=u(n,["minLength"]);U!=null&&c(e,["minLength"],U);const q=u(n,["minProperties"]);q!=null&&c(e,["minProperties"],q);const H=u(n,["minimum"]);H!=null&&c(e,["minimum"],H);const ie=u(n,["nullable"]);ie!=null&&c(e,["nullable"],ie);const K=u(n,["pattern"]);K!=null&&c(e,["pattern"],K);const X=u(n,["properties"]);X!=null&&c(e,["properties"],X);const ae=u(n,["propertyOrdering"]);ae!=null&&c(e,["propertyOrdering"],ae);const W=u(n,["required"]);W!=null&&c(e,["required"],W);const J=u(n,["title"]);J!=null&&c(e,["title"],J);const b=u(n,["type"]);return b!=null&&c(e,["type"],b),e}function nL(n){const e={},t=u(n,["featureSelectionPreference"]);return t!=null&&c(e,["featureSelectionPreference"],t),e}function iL(n){const e={},t=u(n,["method"]);t!=null&&c(e,["method"],t);const i=u(n,["category"]);i!=null&&c(e,["category"],i);const s=u(n,["threshold"]);return s!=null&&c(e,["threshold"],s),e}function oL(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&c(e,["description"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["parameters"]);s!=null&&c(e,["parameters"],s);const l=u(n,["parametersJsonSchema"]);l!=null&&c(e,["parametersJsonSchema"],l);const d=u(n,["response"]);d!=null&&c(e,["response"],d);const h=u(n,["responseJsonSchema"]);return h!=null&&c(e,["responseJsonSchema"],h),e}function rL(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function sL(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&c(e,["timeRangeFilter"],rL(t));const i=u(n,["excludeDomains"]);return i!=null&&c(e,["excludeDomains"],i),e}function aL(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function lL(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],aL(t)),e}function uL(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&c(e,["excludeDomains"],t),e}function cL(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&c(e,["apiKeyString"],t),e}function fL(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&c(e,["apiKeyConfig"],cL(t));const i=u(n,["authType"]);i!=null&&c(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&c(e,["googleServiceAccountConfig"],s);const l=u(n,["httpBasicAuthConfig"]);l!=null&&c(e,["httpBasicAuthConfig"],l);const d=u(n,["oauthConfig"]);d!=null&&c(e,["oauthConfig"],d);const h=u(n,["oidcConfig"]);return h!=null&&c(e,["oidcConfig"],h),e}function dL(n){const e={},t=u(n,["authConfig"]);return t!=null&&c(e,["authConfig"],fL(t)),e}function hL(){return{}}function mL(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function jC(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(S=>oL(S))),c(e,["functionDeclarations"],E)}const i=u(n,["retrieval"]);i!=null&&c(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&c(e,["googleSearch"],sL(s));const l=u(n,["googleSearchRetrieval"]);l!=null&&c(e,["googleSearchRetrieval"],lL(l));const d=u(n,["enterpriseWebSearch"]);d!=null&&c(e,["enterpriseWebSearch"],uL(d));const h=u(n,["googleMaps"]);h!=null&&c(e,["googleMaps"],dL(h)),u(n,["urlContext"])!=null&&c(e,["urlContext"],hL());const p=u(n,["computerUse"]);p!=null&&c(e,["computerUse"],mL(p));const _=u(n,["codeExecution"]);return _!=null&&c(e,["codeExecution"],_),e}function pL(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&c(e,["allowedFunctionNames"],i),e}function gL(n){const e={},t=u(n,["latitude"]);t!=null&&c(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&c(e,["longitude"],i),e}function yL(n){const e={},t=u(n,["latLng"]);t!=null&&c(e,["latLng"],gL(t));const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function _L(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&c(e,["functionCallingConfig"],pL(t));const i=u(n,["retrievalConfig"]);return i!=null&&c(e,["retrievalConfig"],yL(i)),e}function vL(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function TL(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],vL(t)),e}function EL(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&c(e,["voiceConfig"],TL(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&c(e,["languageCode"],i),e}function SL(n){const e={},t=u(n,["includeThoughts"]);t!=null&&c(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&c(e,["thinkingBudget"],i),e}function CL(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&c(t,["systemInstruction"],Sa(rn(s)));const l=u(e,["temperature"]);l!=null&&c(i,["temperature"],l);const d=u(e,["topP"]);d!=null&&c(i,["topP"],d);const h=u(e,["topK"]);h!=null&&c(i,["topK"],h);const g=u(e,["candidateCount"]);g!=null&&c(i,["candidateCount"],g);const p=u(e,["maxOutputTokens"]);p!=null&&c(i,["maxOutputTokens"],p);const _=u(e,["stopSequences"]);_!=null&&c(i,["stopSequences"],_);const E=u(e,["responseLogprobs"]);E!=null&&c(i,["responseLogprobs"],E);const S=u(e,["logprobs"]);S!=null&&c(i,["logprobs"],S);const x=u(e,["presencePenalty"]);x!=null&&c(i,["presencePenalty"],x);const U=u(e,["frequencyPenalty"]);U!=null&&c(i,["frequencyPenalty"],U);const q=u(e,["seed"]);q!=null&&c(i,["seed"],q);const H=u(e,["responseMimeType"]);H!=null&&c(i,["responseMimeType"],H);const ie=u(e,["responseSchema"]);ie!=null&&c(i,["responseSchema"],tL(Bp(ie)));const K=u(e,["responseJsonSchema"]);K!=null&&c(i,["responseJsonSchema"],K);const X=u(e,["routingConfig"]);X!=null&&c(i,["routingConfig"],X);const ae=u(e,["modelSelectionConfig"]);ae!=null&&c(i,["modelConfig"],nL(ae));const W=u(e,["safetySettings"]);if(t!==void 0&&W!=null){let ke=W;Array.isArray(ke)&&(ke=ke.map(j=>iL(j))),c(t,["safetySettings"],ke)}const J=u(e,["tools"]);if(t!==void 0&&J!=null){let ke=Ta(J);Array.isArray(ke)&&(ke=ke.map(j=>jC(va(j)))),c(t,["tools"],ke)}const b=u(e,["toolConfig"]);t!==void 0&&b!=null&&c(t,["toolConfig"],_L(b));const R=u(e,["labels"]);t!==void 0&&R!=null&&c(t,["labels"],R);const M=u(e,["cachedContent"]);t!==void 0&&M!=null&&c(t,["cachedContent"],fo(n,M));const N=u(e,["responseModalities"]);N!=null&&c(i,["responseModalities"],N);const V=u(e,["mediaResolution"]);V!=null&&c(i,["mediaResolution"],V);const O=u(e,["speechConfig"]);O!=null&&c(i,["speechConfig"],EL(Hp(O)));const D=u(e,["audioTimestamp"]);D!=null&&c(i,["audioTimestamp"],D);const et=u(e,["thinkingConfig"]);return et!=null&&c(i,["thinkingConfig"],SL(et)),i}function $E(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>Sa(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["generationConfig"],CL(n,l,t)),t}function AL(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&c(e,["instances[]","task_type"],i);const s=u(n,["title"]);e!==void 0&&s!=null&&c(e,["instances[]","title"],s);const l=u(n,["outputDimensionality"]);e!==void 0&&l!=null&&c(e,["parameters","outputDimensionality"],l);const d=u(n,["mimeType"]);e!==void 0&&d!=null&&c(e,["instances[]","mimeType"],d);const h=u(n,["autoTruncate"]);return e!==void 0&&h!=null&&c(e,["parameters","autoTruncate"],h),t}function IL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["contents"]);s!=null&&c(t,["instances[]","content"],kC(n,s));const l=u(e,["config"]);return l!=null&&c(t,["config"],AL(l,t)),t}function RL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const l=u(n,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(n,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(n,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const _=u(n,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const E=u(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&c(e,["parameters","includeSafetyAttributes"],E);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const x=u(n,["language"]);e!==void 0&&x!=null&&c(e,["parameters","language"],x);const U=u(n,["outputMimeType"]);e!==void 0&&U!=null&&c(e,["parameters","outputOptions","mimeType"],U);const q=u(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&c(e,["parameters","outputOptions","compressionQuality"],q);const H=u(n,["addWatermark"]);e!==void 0&&H!=null&&c(e,["parameters","addWatermark"],H);const ie=u(n,["imageSize"]);e!==void 0&&ie!=null&&c(e,["parameters","sampleImageSize"],ie);const K=u(n,["enhancePrompt"]);return e!==void 0&&K!=null&&c(e,["parameters","enhancePrompt"],K),t}function wL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["config"]);return l!=null&&c(t,["config"],RL(l,t)),t}function wi(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["imageBytes"]);i!=null&&c(e,["bytesBase64Encoded"],es(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function ML(n){const e={},t=u(n,["maskMode"]);t!=null&&c(e,["maskMode"],t);const i=u(n,["segmentationClasses"]);i!=null&&c(e,["maskClasses"],i);const s=u(n,["maskDilation"]);return s!=null&&c(e,["dilation"],s),e}function xL(n){const e={},t=u(n,["controlType"]);t!=null&&c(e,["controlType"],t);const i=u(n,["enableControlImageComputation"]);return i!=null&&c(e,["computeControl"],i),e}function bL(n){const e={},t=u(n,["styleDescription"]);return t!=null&&c(e,["styleDescription"],t),e}function NL(n){const e={},t=u(n,["subjectType"]);t!=null&&c(e,["subjectType"],t);const i=u(n,["subjectDescription"]);return i!=null&&c(e,["subjectDescription"],i),e}function DL(n){const e={},t=u(n,["referenceImage"]);t!=null&&c(e,["referenceImage"],wi(t));const i=u(n,["referenceId"]);i!=null&&c(e,["referenceId"],i);const s=u(n,["referenceType"]);s!=null&&c(e,["referenceType"],s);const l=u(n,["maskImageConfig"]);l!=null&&c(e,["maskImageConfig"],ML(l));const d=u(n,["controlImageConfig"]);d!=null&&c(e,["controlImageConfig"],xL(d));const h=u(n,["styleImageConfig"]);h!=null&&c(e,["styleImageConfig"],bL(h));const g=u(n,["subjectImageConfig"]);return g!=null&&c(e,["subjectImageConfig"],NL(g)),e}function PL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&c(e,["parameters","negativePrompt"],s);const l=u(n,["numberOfImages"]);e!==void 0&&l!=null&&c(e,["parameters","sampleCount"],l);const d=u(n,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);const h=u(n,["guidanceScale"]);e!==void 0&&h!=null&&c(e,["parameters","guidanceScale"],h);const g=u(n,["seed"]);e!==void 0&&g!=null&&c(e,["parameters","seed"],g);const p=u(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&c(e,["parameters","safetySetting"],p);const _=u(n,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const E=u(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&c(e,["parameters","includeSafetyAttributes"],E);const S=u(n,["includeRaiReason"]);e!==void 0&&S!=null&&c(e,["parameters","includeRaiReason"],S);const x=u(n,["language"]);e!==void 0&&x!=null&&c(e,["parameters","language"],x);const U=u(n,["outputMimeType"]);e!==void 0&&U!=null&&c(e,["parameters","outputOptions","mimeType"],U);const q=u(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&c(e,["parameters","outputOptions","compressionQuality"],q);const H=u(n,["addWatermark"]);e!==void 0&&H!=null&&c(e,["parameters","addWatermark"],H);const ie=u(n,["editMode"]);e!==void 0&&ie!=null&&c(e,["parameters","editMode"],ie);const K=u(n,["baseSteps"]);return e!==void 0&&K!=null&&c(e,["parameters","editConfig","baseSteps"],K),t}function kL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>DL(g))),c(t,["instances[0]","referenceImages"],h)}const d=u(e,["config"]);return d!=null&&c(t,["config"],PL(d,t)),t}function VL(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const s=u(n,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const l=u(n,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);const d=u(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&c(e,["parameters","outputOptions","compressionQuality"],d);const h=u(n,["enhanceInputImage"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],h);const g=u(n,["imagePreservationFactor"]);e!==void 0&&g!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const p=u(n,["numberOfImages"]);e!==void 0&&p!=null&&c(e,["parameters","sampleCount"],p);const _=u(n,["mode"]);return e!==void 0&&_!=null&&c(e,["parameters","mode"],_),t}function UL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["image"]);s!=null&&c(t,["instances[0]","image"],wi(s));const l=u(e,["upscaleFactor"]);l!=null&&c(t,["parameters","upscaleConfig","upscaleFactor"],l);const d=u(e,["config"]);return d!=null&&c(t,["config"],VL(d,t)),t}function LL(n){const e={},t=u(n,["productImage"]);return t!=null&&c(e,["image"],wi(t)),e}function OL(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["personImage"]);e!==void 0&&s!=null&&c(e,["instances[0]","personImage","image"],wi(s));const l=u(n,["productImages"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>LL(h))),c(e,["instances[0]","productImages"],d)}return t}function FL(n,e){const t={},i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["baseSteps"]);e!==void 0&&s!=null&&c(e,["parameters","editConfig","baseSteps"],s);const l=u(n,["outputGcsUri"]);e!==void 0&&l!=null&&c(e,["parameters","storageUri"],l);const d=u(n,["seed"]);e!==void 0&&d!=null&&c(e,["parameters","seed"],d);const h=u(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&c(e,["parameters","safetySetting"],h);const g=u(n,["personGeneration"]);e!==void 0&&g!=null&&c(e,["parameters","personGeneration"],g);const p=u(n,["addWatermark"]);e!==void 0&&p!=null&&c(e,["parameters","addWatermark"],p);const _=u(n,["outputMimeType"]);e!==void 0&&_!=null&&c(e,["parameters","outputOptions","mimeType"],_);const E=u(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&c(e,["parameters","outputOptions","compressionQuality"],E);const S=u(n,["enhancePrompt"]);return e!==void 0&&S!=null&&c(e,["parameters","enhancePrompt"],S),t}function qL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["source"]);s!=null&&c(t,["config"],OL(s,t));const l=u(e,["config"]);return l!=null&&c(t,["config"],FL(l,t)),t}function BL(n){const e={},t=u(n,["image"]);return t!=null&&c(e,["image"],wi(t)),e}function HL(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],wi(s));const l=u(n,["scribbleImage"]);return e!==void 0&&l!=null&&c(e,["instances[0]","scribble"],BL(l)),t}function GL(n,e){const t={},i=u(n,["mode"]);e!==void 0&&i!=null&&c(e,["parameters","mode"],i);const s=u(n,["maxPredictions"]);e!==void 0&&s!=null&&c(e,["parameters","maxPredictions"],s);const l=u(n,["confidenceThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","confidenceThreshold"],l);const d=u(n,["maskDilation"]);e!==void 0&&d!=null&&c(e,["parameters","maskDilation"],d);const h=u(n,["binaryColorThreshold"]);return e!==void 0&&h!=null&&c(e,["parameters","binaryColorThreshold"],h),t}function zL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["source"]);s!=null&&c(t,["config"],HL(s,t));const l=u(e,["config"]);return l!=null&&c(t,["config"],GL(l,t)),t}function YL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function $L(n,e,t){const i={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const l=u(e,["pageToken"]);t!==void 0&&l!=null&&c(t,["_query","pageToken"],l);const d=u(e,["filter"]);t!==void 0&&d!=null&&c(t,["_query","filter"],d);const h=u(e,["queryBase"]);return t!==void 0&&h!=null&&c(t,["_url","models_url"],LC(n,h)),i}function KL(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],$L(n,i,t)),t}function JL(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);const l=u(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&c(e,["defaultCheckpointId"],l),t}function QL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],JL(s,t)),t}function XL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","name"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],s),t}function WL(n,e){const t={},i=u(n,["systemInstruction"]);e!==void 0&&i!=null&&c(e,["systemInstruction"],Sa(rn(i)));const s=u(n,["tools"]);if(e!==void 0&&s!=null){let d=s;Array.isArray(d)&&(d=d.map(h=>jC(h))),c(e,["tools"],d)}const l=u(n,["generationConfig"]);return e!==void 0&&l!=null&&c(e,["generationConfig"],l),t}function ZL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>Sa(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],WL(l,t)),t}function jL(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["contents"]);if(s!=null){let d=qn(s);Array.isArray(d)&&(d=d.map(h=>Sa(h))),c(t,["contents"],d)}const l=u(e,["config"]);return l!=null&&c(t,["config"],l),t}function eA(n){const e={},t=u(n,["uri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["videoBytes"]);i!=null&&c(e,["bytesBase64Encoded"],es(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function e4(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&c(e,["instances[0]","prompt"],i);const s=u(n,["image"]);e!==void 0&&s!=null&&c(e,["instances[0]","image"],wi(s));const l=u(n,["video"]);return e!==void 0&&l!=null&&c(e,["instances[0]","video"],eA(l)),t}function t4(n){const e={},t=u(n,["image"]);t!=null&&c(e,["image"],wi(t));const i=u(n,["referenceType"]);return i!=null&&c(e,["referenceType"],i),e}function n4(n,e){const t={},i=u(n,["numberOfVideos"]);e!==void 0&&i!=null&&c(e,["parameters","sampleCount"],i);const s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&c(e,["parameters","storageUri"],s);const l=u(n,["fps"]);e!==void 0&&l!=null&&c(e,["parameters","fps"],l);const d=u(n,["durationSeconds"]);e!==void 0&&d!=null&&c(e,["parameters","durationSeconds"],d);const h=u(n,["seed"]);e!==void 0&&h!=null&&c(e,["parameters","seed"],h);const g=u(n,["aspectRatio"]);e!==void 0&&g!=null&&c(e,["parameters","aspectRatio"],g);const p=u(n,["resolution"]);e!==void 0&&p!=null&&c(e,["parameters","resolution"],p);const _=u(n,["personGeneration"]);e!==void 0&&_!=null&&c(e,["parameters","personGeneration"],_);const E=u(n,["pubsubTopic"]);e!==void 0&&E!=null&&c(e,["parameters","pubsubTopic"],E);const S=u(n,["negativePrompt"]);e!==void 0&&S!=null&&c(e,["parameters","negativePrompt"],S);const x=u(n,["enhancePrompt"]);e!==void 0&&x!=null&&c(e,["parameters","enhancePrompt"],x);const U=u(n,["generateAudio"]);e!==void 0&&U!=null&&c(e,["parameters","generateAudio"],U);const q=u(n,["lastFrame"]);e!==void 0&&q!=null&&c(e,["instances[0]","lastFrame"],wi(q));const H=u(n,["referenceImages"]);if(e!==void 0&&H!=null){let K=H;Array.isArray(K)&&(K=K.map(X=>t4(X))),c(e,["instances[0]","referenceImages"],K)}const ie=u(n,["compressionQuality"]);return e!==void 0&&ie!=null&&c(e,["parameters","compressionQuality"],ie),t}function i4(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["_url","model"],Ke(n,i));const s=u(e,["prompt"]);s!=null&&c(t,["instances[0]","prompt"],s);const l=u(e,["image"]);l!=null&&c(t,["instances[0]","image"],wi(l));const d=u(e,["video"]);d!=null&&c(t,["instances[0]","video"],eA(d));const h=u(e,["source"]);h!=null&&c(t,["config"],e4(h,t));const g=u(e,["config"]);return g!=null&&c(t,["config"],n4(g,t)),t}function o4(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function r4(n){const e={},t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function s4(n){const e={},t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function a4(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],o4(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],r4(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],s4(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function l4(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>a4(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function u4(n){const e={},t=u(n,["citationSources"]);return t!=null&&c(e,["citations"],t),e}function c4(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function f4(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>c4(s))),c(e,["urlMetadata"],i)}return e}function d4(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],l4(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],u4(i));const s=u(n,["tokenCount"]);s!=null&&c(e,["tokenCount"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],f4(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(n,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const _=u(n,["logprobsResult"]);_!=null&&c(e,["logprobsResult"],_);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function KE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(p=>d4(p))),c(e,["candidates"],g)}const s=u(n,["modelVersion"]);s!=null&&c(e,["modelVersion"],s);const l=u(n,["promptFeedback"]);l!=null&&c(e,["promptFeedback"],l);const d=u(n,["responseId"]);d!=null&&c(e,["responseId"],d);const h=u(n,["usageMetadata"]);return h!=null&&c(e,["usageMetadata"],h),e}function h4(n){const e={},t=u(n,["values"]);return t!=null&&c(e,["values"],t),e}function m4(){return{}}function p4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>h4(d))),c(e,["embeddings"],l)}return u(n,["metadata"])!=null&&c(e,["metadata"],m4()),e}function g4(n){const e={},t=u(n,["bytesBase64Encoded"]);t!=null&&c(e,["imageBytes"],es(t));const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function tA(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function y4(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],g4(t));const i=u(n,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);const s=u(n,["_self"]);return s!=null&&c(e,["safetyAttributes"],tA(s)),e}function _4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>y4(d))),c(e,["generatedImages"],l)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],tA(s)),e}function v4(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function zm(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["version"]);l!=null&&c(e,["version"],l);const d=u(n,["_self"]);d!=null&&c(e,["tunedModelInfo"],v4(d));const h=u(n,["inputTokenLimit"]);h!=null&&c(e,["inputTokenLimit"],h);const g=u(n,["outputTokenLimit"]);g!=null&&c(e,["outputTokenLimit"],g);const p=u(n,["supportedGenerationMethods"]);return p!=null&&c(e,["supportedActions"],p),e}function T4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["_self"]);if(s!=null){let l=OC(s);Array.isArray(l)&&(l=l.map(d=>zm(d))),c(e,["models"],l)}return e}function E4(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function S4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["totalTokens"]);i!=null&&c(e,["totalTokens"],i);const s=u(n,["cachedContentTokenCount"]);return s!=null&&c(e,["cachedContentTokenCount"],s),e}function C4(n){const e={},t=u(n,["video","uri"]);t!=null&&c(e,["uri"],t);const i=u(n,["video","encodedVideo"]);i!=null&&c(e,["videoBytes"],es(i));const s=u(n,["encoding"]);return s!=null&&c(e,["mimeType"],s),e}function A4(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],C4(t)),e}function I4(n){const e={},t=u(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(d=>A4(d))),c(e,["generatedVideos"],l)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function R4(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);l!=null&&c(e,["error"],l);const d=u(n,["response","generateVideoResponse"]);return d!=null&&c(e,["response"],I4(d)),e}function w4(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function M4(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["data"]);i!=null&&c(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function x4(n){const e={},t=u(n,["displayName"]);t!=null&&c(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&c(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function b4(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],w4(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],M4(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],x4(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function N4(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>b4(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function D4(n){const e={},t=u(n,["citations"]);return t!=null&&c(e,["citations"],t),e}function P4(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&c(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&c(e,["urlRetrievalStatus"],i),e}function k4(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>P4(s))),c(e,["urlMetadata"],i)}return e}function V4(n){const e={},t=u(n,["content"]);t!=null&&c(e,["content"],N4(t));const i=u(n,["citationMetadata"]);i!=null&&c(e,["citationMetadata"],D4(i));const s=u(n,["finishMessage"]);s!=null&&c(e,["finishMessage"],s);const l=u(n,["finishReason"]);l!=null&&c(e,["finishReason"],l);const d=u(n,["urlContextMetadata"]);d!=null&&c(e,["urlContextMetadata"],k4(d));const h=u(n,["avgLogprobs"]);h!=null&&c(e,["avgLogprobs"],h);const g=u(n,["groundingMetadata"]);g!=null&&c(e,["groundingMetadata"],g);const p=u(n,["index"]);p!=null&&c(e,["index"],p);const _=u(n,["logprobsResult"]);_!=null&&c(e,["logprobsResult"],_);const E=u(n,["safetyRatings"]);return E!=null&&c(e,["safetyRatings"],E),e}function JE(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(_=>V4(_))),c(e,["candidates"],p)}const s=u(n,["createTime"]);s!=null&&c(e,["createTime"],s);const l=u(n,["modelVersion"]);l!=null&&c(e,["modelVersion"],l);const d=u(n,["promptFeedback"]);d!=null&&c(e,["promptFeedback"],d);const h=u(n,["responseId"]);h!=null&&c(e,["responseId"],h);const g=u(n,["usageMetadata"]);return g!=null&&c(e,["usageMetadata"],g),e}function U4(n){const e={},t=u(n,["truncated"]);t!=null&&c(e,["truncated"],t);const i=u(n,["token_count"]);return i!=null&&c(e,["tokenCount"],i),e}function L4(n){const e={},t=u(n,["values"]);t!=null&&c(e,["values"],t);const i=u(n,["statistics"]);return i!=null&&c(e,["statistics"],U4(i)),e}function O4(n){const e={},t=u(n,["billableCharacterCount"]);return t!=null&&c(e,["billableCharacterCount"],t),e}function F4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>L4(d))),c(e,["embeddings"],l)}const s=u(n,["metadata"]);return s!=null&&c(e,["metadata"],O4(s)),e}function nA(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["gcsUri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["imageBytes"],es(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function iA(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&c(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&c(e,["scores"],i);const s=u(n,["contentType"]);return s!=null&&c(e,["contentType"],s),e}function Kf(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["image"],nA(t));const i=u(n,["raiFilteredReason"]);i!=null&&c(e,["raiFilteredReason"],i);const s=u(n,["_self"]);s!=null&&c(e,["safetyAttributes"],iA(s));const l=u(n,["prompt"]);return l!=null&&c(e,["enhancedPrompt"],l),e}function q4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Kf(d))),c(e,["generatedImages"],l)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&c(e,["positivePromptSafetyAttributes"],iA(s)),e}function B4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Kf(l))),c(e,["generatedImages"],s)}return e}function H4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Kf(l))),c(e,["generatedImages"],s)}return e}function G4(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Kf(s))),c(e,["generatedImages"],i)}return e}function z4(n){const e={},t=u(n,["label"]);t!=null&&c(e,["label"],t);const i=u(n,["score"]);return i!=null&&c(e,["score"],i),e}function Y4(n){const e={},t=u(n,["_self"]);t!=null&&c(e,["mask"],nA(t));const i=u(n,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>z4(l))),c(e,["labels"],s)}return e}function $4(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Y4(s))),c(e,["generatedMasks"],i)}return e}function K4(n){const e={},t=u(n,["endpoint"]);t!=null&&c(e,["name"],t);const i=u(n,["deployedModelId"]);return i!=null&&c(e,["deployedModelId"],i),e}function J4(n){const e={},t=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&c(e,["createTime"],i);const s=u(n,["updateTime"]);return s!=null&&c(e,["updateTime"],s),e}function Q4(n){const e={},t=u(n,["checkpointId"]);t!=null&&c(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&c(e,["epoch"],i);const s=u(n,["step"]);return s!=null&&c(e,["step"],s),e}function Ym(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["displayName"]);i!=null&&c(e,["displayName"],i);const s=u(n,["description"]);s!=null&&c(e,["description"],s);const l=u(n,["versionId"]);l!=null&&c(e,["version"],l);const d=u(n,["deployedModels"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(S=>K4(S))),c(e,["endpoints"],E)}const h=u(n,["labels"]);h!=null&&c(e,["labels"],h);const g=u(n,["_self"]);g!=null&&c(e,["tunedModelInfo"],J4(g));const p=u(n,["defaultCheckpointId"]);p!=null&&c(e,["defaultCheckpointId"],p);const _=u(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(S=>Q4(S))),c(e,["checkpoints"],E)}return e}function X4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["_self"]);if(s!=null){let l=OC(s);Array.isArray(l)&&(l=l.map(d=>Ym(d))),c(e,["models"],l)}return e}function W4(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&c(e,["sdkHttpResponse"],t),e}function Z4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["totalTokens"]);return i!=null&&c(e,["totalTokens"],i),e}function j4(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["tokensInfo"]);return i!=null&&c(e,["tokensInfo"],i),e}function e6(n){const e={},t=u(n,["gcsUri"]);t!=null&&c(e,["uri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&c(e,["videoBytes"],es(i));const s=u(n,["mimeType"]);return s!=null&&c(e,["mimeType"],s),e}function t6(n){const e={},t=u(n,["_self"]);return t!=null&&c(e,["video"],e6(t)),e}function n6(n){const e={},t=u(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(d=>t6(d))),c(e,["generatedVideos"],l)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&c(e,["raiMediaFilteredCount"],i);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&c(e,["raiMediaFilteredReasons"],s),e}function i6(n){const e={},t=u(n,["name"]);t!=null&&c(e,["name"],t);const i=u(n,["metadata"]);i!=null&&c(e,["metadata"],i);const s=u(n,["done"]);s!=null&&c(e,["done"],s);const l=u(n,["error"]);l!=null&&c(e,["error"],l);const d=u(n,["response"]);return d!=null&&c(e,["response"],n6(d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o6="Content-Type",r6="X-Server-Timeout",s6="User-Agent",$m="x-goog-api-client",a6="1.16.0",l6=`google-genai-sdk/${a6}`,u6="v1beta1",c6="v1beta",QE=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class f6{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:u6,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:c6,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[d,h]of Object.entries(e.queryParams))s.searchParams.append(d,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(t))typeof l=="object"?i[s]=Object.assign(Object.assign({},i[s]),l):l!==void 0&&(i[s]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const s=new AbortController,l=s.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>s.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=l}return t&&t.extraBody!==null&&d6(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await XE(s),new Fm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await XE(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return na(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let d="";for(;;){const{done:h,value:g}=yield ut(s.read());if(h){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(g,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),x=S.status,U=S.code,q=`got status: ${x}. ${JSON.stringify(E)}`;if(U>=400&&U<600)throw new Yf({message:q,status:U})}}catch(E){if(E.name==="ApiError")throw E}d+=p;let _=d.match(QE);for(;_;){const E=_[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ut(new Fm(S)),d=d.slice(_[0].length),_=d.match(QE)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=l6+" "+this.clientOptions.userAgentExtra;return e[s6]=t,e[$m]=t,e[o6]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))t.append(i,s);e.timeout&&e.timeout>0&&t.append(r6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,d=await l.stat(e);s.sizeBytes=String(d.size);const h=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:d.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=h;const g=await this.fetchUploadUrl(s,t);return l.upload(e,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let s={};t!=null&&t.httpOptions?s=t.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},d=await this.request({path:pe("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:s});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(i=d==null?void 0:d.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function XE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Yf({message:s,status:t}):new Error(s)}}function d6(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,d){const h=Object.assign({},l);for(const g in d)if(Object.prototype.hasOwnProperty.call(d,g)){const p=d[g],_=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?h[g]=i(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h6="mcp_used/unknown";let m6=!1;function oA(n){for(const e of n)if(p6(e)||typeof e=="object"&&"inputSchema"in e)return!0;return m6}function rA(n){var e;const t=(e=n[$m])!==null&&e!==void 0?e:"";n[$m]=(t+` ${h6}`).trimStart()}function p6(n){return n!==null&&typeof n=="object"&&n instanceof zp}function g6(n,e=100){return na(this,arguments,function*(){let i,s=0;for(;s<e;){const l=yield ut(n.listTools({cursor:i}));for(const d of l.tools)yield yield ut(d),s++;if(!l.nextCursor)break;i=l.nextCursor}})}class zp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new zp(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const l={},d=[];for(const _ of this.mcpClients)try{for(var h=!0,g=(t=void 0,Gl(g6(_))),p;p=await g.next(),e=p.done,!e;h=!0){s=p.value,h=!1;const E=s;d.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(E){t={error:E}}finally{try{!h&&!e&&(i=g.return)&&await i.call(g)}finally{if(t)throw t.error}}this.mcpTools=d,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),KD(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const d=await s.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:d.isError?{error:d}:d}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function y6(n,e,t){const i=new FD;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data);const l=WV(s);Object.assign(i,l),e(i)}class _6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),d=E6(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const _=new Promise(X=>{p=X}),E=e.callbacks,S=function(){p({})},x=this.apiClient,U={onopen:S,onmessage:X=>{y6(x,E.onmessage,X)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(X){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(X){}},q=this.webSocketFactory.create(g,T6(d),U);q.connect(),await _;const H=Ke(this.apiClient,e.model),ie=QC({model:H}),K=Gm({setup:ie});return q.send(JSON.stringify(K)),new v6(q,this.apiClient)}}class v6{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Jk(e),i=XC(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Qk(e),i=Gm(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=Gm({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Xs.PLAY)}pause(){this.sendPlaybackControl(Xs.PAUSE)}stop(){this.sendPlaybackControl(Xs.STOP)}resetContext(){this.sendPlaybackControl(Xs.RESET_CONTEXT)}close(){this.conn.close()}}function T6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function E6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function C6(n,e,t){const i=new OD;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const l=JSON.parse(s);if(n.isVertexAI()){const d=fU(l);Object.assign(i,d)}else{const d=HV(l);Object.assign(i,d)}e(i)}class A6{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new _6(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,l,d,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&oA(e.config.tools)&&rA(E);const S=M6(E);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const M=this.apiClient.getApiKey();let N="BidiGenerateContent",V="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",V="access_token"),_=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${N}?${V}=${M}`}let x=()=>{};const U=new Promise(M=>{x=M}),q=e.callbacks,H=function(){var M;(M=q==null?void 0:q.onopen)===null||M===void 0||M.call(q),x({})},ie=this.apiClient,K={onopen:H,onmessage:M=>{C6(ie,q.onmessage,M)},onerror:(t=q==null?void 0:q.onerror)!==null&&t!==void 0?t:function(M){},onclose:(i=q==null?void 0:q.onclose)!==null&&i!==void 0?i:function(M){}},X=this.webSocketFactory.create(_,w6(S),K);X.connect(),await U;let ae=Ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const M=this.apiClient.getProject(),N=this.apiClient.getLocation();ae=`projects/${M}/locations/${N}/`+ae}let W={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Rf.AUDIO]}:e.config.responseModalities=[Rf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(h=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[],b=[];for(const M of J)if(this.isCallableTool(M)){const N=M;b.push(await N.tool())}else b.push(M);b.length>0&&(e.config.tools=b);const R={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=CV(this.apiClient,R):W=zk(this.apiClient,R),delete W.config,X.send(JSON.stringify(W)),new R6(X,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const I6={turnComplete:!0};class R6{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=qn(t.turns),e.isVertexAI()?i=i.map(s=>Sa(s)):i=i.map(s=>$f(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(S6)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},I6),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:RV(e)}:t={realtimeInput:Kk(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function w6(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function M6(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WE=10;function ZE(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const d of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ia(d)){s=!0;break}if(!s)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function ia(n){return"callTool"in n&&typeof n.callTool=="function"}function x6(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>ia(s)))!==null&&i!==void 0?i:!1}function b6(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>!ia(s)))!==null&&i!==void 0?i:!1}function jE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N6 extends jr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,l,d,h;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!x6(t)||ZE(t.config))return await this.generateContentInternal(g);if(b6(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,_;const E=qn(g.contents),S=(l=(s=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:WE;let x=0;for(;x<S&&(p=await this.generateContentInternal(g),!(!p.functionCalls||p.functionCalls.length===0));){const U=p.candidates[0].content,q=[];for(const H of(h=(d=t.config)===null||d===void 0?void 0:d.tools)!==null&&h!==void 0?h:[])if(ia(H)){const K=await H.callTool(p.functionCalls);q.push(...K)}x++,_={role:"user",parts:q},g.contents=qn(g.contents),g.contents.push(U),g.contents.push(_),jE(g.config)&&(E.push(U),E.push(_))}return jE(g.config)&&(p.automaticFunctionCallingHistory=E),p},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),ZE(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let l;const d=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((s=g==null?void 0:g.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:d.push(g);let h;return l?h={generatedImages:d,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:h={generatedImages:d,sdkHttpResponse:i.sdkHttpResponse},h}),this.list=async t=>{var i;const d={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((i=d.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new du(Jr.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(d),d)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const d=await Promise.all(l.map(async g=>ia(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(h.config.tools=d,e.config&&e.config.tools&&oA(e.config.tools)){const g=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),rA(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var t,i,s;const l=new Map;for(const d of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(ia(d)){const h=d,g=await h.tool();for(const p of(s=g.functionDeclarations)!==null&&s!==void 0?s:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var t,i,s;const l=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:WE;let d=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,_,E){var S,x;return na(this,arguments,function*(){for(var U,q,H,ie;h<l;){d&&(h++,d=!1);const W=yield ut(p.processParamsMaybeAddMcpUsage(E)),J=yield ut(p.generateContentStreamInternal(W)),b=[],R=[];try{for(var K=!0,X=(q=void 0,Gl(J)),ae;ae=yield ut(X.next()),U=ae.done,!U;K=!0){ie=ae.value,K=!1;const M=ie;if(yield yield ut(M),M.candidates&&(!((S=M.candidates[0])===null||S===void 0)&&S.content)){R.push(M.candidates[0].content);for(const N of(x=M.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(h<l&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(N.functionCall.name)){const V=yield ut(_.get(N.functionCall.name).callTool([N.functionCall]));b.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(M){q={error:M}}finally{try{!K&&!U&&(H=X.return)&&(yield ut(H.call(X)))}finally{if(q)throw q.error}}if(b.length>0){d=!0;const M=new Nl;M.candidates=[{content:{role:"user",parts:b}}],yield yield ut(M);const N=[];N.push(...R),N.push({role:"user",parts:b});const V=qn(E.contents).concat(N);E.contents=V}else break}})})(this,g,e)}async generateContentInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=$E(this.apiClient,e);return h=pe("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=JE(_),S=new Nl;return Object.assign(S,E),S})}else{const p=YE(this.apiClient,e);return h=pe("{model}:generateContent",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=KE(_),S=new Nl;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=$E(this.apiClient,e);return h=pe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),d.then(function(E){return na(this,arguments,function*(){var S,x,U,q;try{for(var H=!0,ie=Gl(E),K;K=yield ut(ie.next()),S=K.done,!S;H=!0){q=K.value,H=!1;const X=q,ae=JE(yield ut(X.json()));ae.sdkHttpResponse={headers:X.headers};const W=new Nl;Object.assign(W,ae),yield yield ut(W)}}catch(X){x={error:X}}finally{try{!H&&!S&&(U=ie.return)&&(yield ut(U.call(ie)))}finally{if(x)throw x.error}}})})}else{const p=YE(this.apiClient,e);return h=pe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),d.then(function(E){return na(this,arguments,function*(){var S,x,U,q;try{for(var H=!0,ie=Gl(E),K;K=yield ut(ie.next()),S=K.done,!S;H=!0){q=K.value,H=!1;const X=q,ae=KE(yield ut(X.json()));ae.sdkHttpResponse={headers:X.headers};const W=new Nl;Object.assign(W,ae),yield yield ut(W)}}catch(X){x={error:X}}finally{try{!H&&!S&&(U=ie.return)&&(yield ut(U.call(ie)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=IL(this.apiClient,e);return h=pe("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=F4(_),S=new CE;return Object.assign(S,E),S})}else{const p=LU(this.apiClient,e);return h=pe("{model}:batchEmbedContents",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=p4(_),S=new CE;return Object.assign(S,E),S})}}async generateImagesInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=wL(this.apiClient,e);return h=pe("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=q4(_),S=new AE;return Object.assign(S,E),S})}else{const p=FU(this.apiClient,e);return h=pe("{model}:predict",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=_4(_),S=new AE;return Object.assign(S,E),S})}}async editImageInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=kL(this.apiClient,e);return l=pe("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=B4(g),_=new bD;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=UL(this.apiClient,e);return l=pe("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=H4(g),_=new ND;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=qL(this.apiClient,e);return l=pe("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const p=G4(g),_=new DD;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=zL(this.apiClient,e);return l=pe("{model}:predict",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s.then(g=>{const p=$4(g),_=new PD;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=YL(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Ym(_))}else{const p=qU(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>zm(_))}}async listInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=KL(this.apiClient,e);return h=pe("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=X4(_),S=new IE;return Object.assign(S,E),S})}else{const p=HU(this.apiClient,e);return h=pe("{models_url}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=T4(_),S=new IE;return Object.assign(S,E),S})}}async update(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=QL(this.apiClient,e);return h=pe("{model}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>Ym(_))}else{const p=zU(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>zm(_))}}async delete(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=XL(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=W4(_),S=new RE;return Object.assign(S,E),S})}else{const p=YU(this.apiClient,e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=E4(_),S=new RE;return Object.assign(S,E),S})}}async countTokens(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=ZL(this.apiClient,e);return h=pe("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=Z4(_),S=new wE;return Object.assign(S,E),S})}else{const p=KU(this.apiClient,e);return h=pe("{model}:countTokens",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=S4(_),S=new wE;return Object.assign(S,E),S})}}async computeTokens(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=jL(this.apiClient,e);return l=pe("{model}:computeTokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>{const p=j4(g),_=new kD;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=i4(this.apiClient,e);return h=pe("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d.then(_=>{const E=i6(_),S=new wf;return Object.assign(S,E),S})}else{const p=XU(this.apiClient,e);return h=pe("{model}:predictLongRunning",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d.then(_=>{const E=R4(_),S=new wf;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function P6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["operationName"],t);const i=u(n,["resourceName"]);i!=null&&c(e,["_url","resourceName"],i);const s=u(n,["config"]);return s!=null&&c(e,["config"],s),e}function k6(n){const e={},t=u(n,["operationName"]);t!=null&&c(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V6 extends jr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:d,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=k6(e);return h=pe("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),d}else{const p=D6(e);return h=pe("{operationName}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),d}}async fetchPredictVideosOperationInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=P6(e);return l=pe("{resourceName}:fetchPredictOperation",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U6(n){const e={},t=u(n,["voiceName"]);return t!=null&&c(e,["voiceName"],t),e}function sA(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&c(e,["prebuiltVoiceConfig"],U6(t)),e}function L6(n){const e={},t=u(n,["speaker"]);t!=null&&c(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&c(e,["voiceConfig"],sA(i)),e}function O6(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>L6(s))),c(e,["speakerVoiceConfigs"],i)}return e}function F6(n){const e={},t=u(n,["voiceConfig"]);t!=null&&c(e,["voiceConfig"],sA(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&c(e,["multiSpeakerVoiceConfig"],O6(i));const s=u(n,["languageCode"]);return s!=null&&c(e,["languageCode"],s),e}function q6(n){const e={},t=u(n,["fps"]);t!=null&&c(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&c(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&c(e,["startOffset"],s),e}function B6(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&c(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function H6(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&c(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function G6(n){const e={},t=u(n,["videoMetadata"]);t!=null&&c(e,["videoMetadata"],q6(t));const i=u(n,["thought"]);i!=null&&c(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&c(e,["inlineData"],B6(s));const l=u(n,["fileData"]);l!=null&&c(e,["fileData"],H6(l));const d=u(n,["thoughtSignature"]);d!=null&&c(e,["thoughtSignature"],d);const h=u(n,["codeExecutionResult"]);h!=null&&c(e,["codeExecutionResult"],h);const g=u(n,["executableCode"]);g!=null&&c(e,["executableCode"],g);const p=u(n,["functionCall"]);p!=null&&c(e,["functionCall"],p);const _=u(n,["functionResponse"]);_!=null&&c(e,["functionResponse"],_);const E=u(n,["text"]);return E!=null&&c(e,["text"],E),e}function z6(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>G6(l))),c(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&c(e,["role"],i),e}function Y6(n){const e={},t=u(n,["behavior"]);t!=null&&c(e,["behavior"],t);const i=u(n,["description"]);i!=null&&c(e,["description"],i);const s=u(n,["name"]);s!=null&&c(e,["name"],s);const l=u(n,["parameters"]);l!=null&&c(e,["parameters"],l);const d=u(n,["parametersJsonSchema"]);d!=null&&c(e,["parametersJsonSchema"],d);const h=u(n,["response"]);h!=null&&c(e,["response"],h);const g=u(n,["responseJsonSchema"]);return g!=null&&c(e,["responseJsonSchema"],g),e}function $6(n){const e={},t=u(n,["startTime"]);t!=null&&c(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&c(e,["endTime"],i),e}function K6(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&c(e,["timeRangeFilter"],$6(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function J6(n){const e={},t=u(n,["mode"]);t!=null&&c(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&c(e,["dynamicThreshold"],i),e}function Q6(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&c(e,["dynamicRetrievalConfig"],J6(t)),e}function X6(){return{}}function W6(n){const e={},t=u(n,["environment"]);return t!=null&&c(e,["environment"],t),e}function Z6(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let g=t;Array.isArray(g)&&(g=g.map(p=>Y6(p))),c(e,["functionDeclarations"],g)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&c(e,["googleSearch"],K6(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&c(e,["googleSearchRetrieval"],Q6(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&c(e,["urlContext"],X6());const d=u(n,["computerUse"]);d!=null&&c(e,["computerUse"],W6(d));const h=u(n,["codeExecution"]);return h!=null&&c(e,["codeExecution"],h),e}function j6(n){const e={},t=u(n,["handle"]);if(t!=null&&c(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function e0(){return{}}function e3(n){const e={},t=u(n,["disabled"]);t!=null&&c(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&c(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&c(e,["endOfSpeechSensitivity"],s);const l=u(n,["prefixPaddingMs"]);l!=null&&c(e,["prefixPaddingMs"],l);const d=u(n,["silenceDurationMs"]);return d!=null&&c(e,["silenceDurationMs"],d),e}function t3(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&c(e,["automaticActivityDetection"],e3(t));const i=u(n,["activityHandling"]);i!=null&&c(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&c(e,["turnCoverage"],s),e}function n3(n){const e={},t=u(n,["targetTokens"]);return t!=null&&c(e,["targetTokens"],t),e}function i3(n){const e={},t=u(n,["triggerTokens"]);t!=null&&c(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&c(e,["slidingWindow"],n3(i)),e}function o3(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&c(e,["proactiveAudio"],t),e}function r3(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","responseModalities"],s);const l=u(n,["temperature"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","temperature"],l);const d=u(n,["topP"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","topP"],d);const h=u(n,["topK"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","topK"],h);const g=u(n,["maxOutputTokens"]);e!==void 0&&g!=null&&c(e,["setup","generationConfig","maxOutputTokens"],g);const p=u(n,["mediaResolution"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","mediaResolution"],p);const _=u(n,["seed"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","seed"],_);const E=u(n,["speechConfig"]);e!==void 0&&E!=null&&c(e,["setup","generationConfig","speechConfig"],F6(Gp(E)));const S=u(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);const x=u(n,["systemInstruction"]);e!==void 0&&x!=null&&c(e,["setup","systemInstruction"],z6(rn(x)));const U=u(n,["tools"]);if(e!==void 0&&U!=null){let W=Ta(U);Array.isArray(W)&&(W=W.map(J=>Z6(va(J)))),c(e,["setup","tools"],W)}const q=u(n,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],j6(q));const H=u(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&c(e,["setup","inputAudioTranscription"],e0());const ie=u(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&c(e,["setup","outputAudioTranscription"],e0());const K=u(n,["realtimeInputConfig"]);e!==void 0&&K!=null&&c(e,["setup","realtimeInputConfig"],t3(K));const X=u(n,["contextWindowCompression"]);e!==void 0&&X!=null&&c(e,["setup","contextWindowCompression"],i3(X));const ae=u(n,["proactivity"]);return e!==void 0&&ae!=null&&c(e,["setup","proactivity"],o3(ae)),t}function s3(n,e){const t={},i=u(e,["model"]);i!=null&&c(t,["setup","model"],Ke(n,i));const s=u(e,["config"]);return s!=null&&c(t,["config"],r3(s,t)),t}function a3(n,e,t){const i={},s=u(e,["expireTime"]);t!==void 0&&s!=null&&c(t,["expireTime"],s);const l=u(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&c(t,["newSessionExpireTime"],l);const d=u(e,["uses"]);t!==void 0&&d!=null&&c(t,["uses"],d);const h=u(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&c(t,["bidiGenerateContentSetup"],s3(n,h));const g=u(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&c(t,["fieldMask"],g),i}function l3(n,e){const t={},i=u(e,["config"]);return i!=null&&c(t,["config"],a3(n,i,t)),t}function u3(n){const e={},t=u(n,["name"]);return t!=null&&c(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(l=>`${t}.${l}`);e.push(...s)}else e.push(t)}return e.join(",")}function f3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const l=c3(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];s.length>0&&(h=s.map(p=>d.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class d3 extends jr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=l3(this.apiClient,e);l=pe("auth_tokens",h._url),d=h._query,delete h.config,delete h._url,delete h._query;const g=f3(h,e.config);return s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>u3(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function m3(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function p3(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],m3(t,e)),e}function g3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function y3(n){const e={},t=u(n,["textInput"]);t!=null&&c(e,["textInput"],t);const i=u(n,["output"]);return i!=null&&c(e,["output"],i),e}function _3(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=u(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>y3(s))),c(e,["examples","examples"],i)}return e}function v3(n,e){const t={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=u(n,["epochCount"]);e!==void 0&&s!=null&&c(e,["tuningTask","hyperparameters","epochCount"],s);const l=u(n,["learningRateMultiplier"]);if(l!=null&&c(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=u(n,["batchSize"]);e!==void 0&&d!=null&&c(e,["tuningTask","hyperparameters","batchSize"],d);const h=u(n,["learningRate"]);return e!==void 0&&h!=null&&c(e,["tuningTask","hyperparameters","learningRate"],h),t}function T3(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["preTunedModel"]);i!=null&&c(e,["preTunedModel"],i);const s=u(n,["trainingDataset"]);s!=null&&c(e,["tuningTask","trainingData"],_3(s));const l=u(n,["config"]);return l!=null&&c(e,["config"],v3(l,e)),e}function E3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function S3(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&c(e,["_query","pageToken"],s);const l=u(n,["filter"]);return e!==void 0&&l!=null&&c(e,["_query","filter"],l),t}function C3(n){const e={},t=u(n,["config"]);return t!=null&&c(e,["config"],S3(t,e)),e}function A3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&c(e,["config"],i),e}function I3(n,e){const t={},i=u(n,["gcsUri"]);e!==void 0&&i!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=u(n,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s),u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function R3(n,e){const t={},i=u(n,["gcsUri"]);i!=null&&c(t,["validationDatasetUri"],i);const s=u(n,["vertexDatasetResource"]);return e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s),t}function w3(n,e){const t={},i=u(n,["validationDataset"]);e!==void 0&&i!=null&&c(e,["supervisedTuningSpec"],R3(i,t));const s=u(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&c(e,["tunedModelDisplayName"],s);const l=u(n,["description"]);e!==void 0&&l!=null&&c(e,["description"],l);const d=u(n,["epochCount"]);e!==void 0&&d!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const h=u(n,["learningRateMultiplier"]);e!==void 0&&h!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],h);const g=u(n,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const p=u(n,["preTunedModelCheckpointId"]);p!=null&&c(t,["preTunedModel","checkpointId"],p);const _=u(n,["adapterSize"]);if(e!==void 0&&_!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_),u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function M3(n){const e={},t=u(n,["baseModel"]);t!=null&&c(e,["baseModel"],t);const i=u(n,["preTunedModel"]);i!=null&&c(e,["preTunedModel"],i);const s=u(n,["trainingDataset"]);s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],I3(s,e));const l=u(n,["config"]);return l!=null&&c(e,["config"],w3(l,e)),e}function x3(n){const e={},t=u(n,["name"]);t!=null&&c(e,["model"],t);const i=u(n,["name"]);return i!=null&&c(e,["endpoint"],i),e}function aA(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],VC(s));const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["tuningTask","startTime"]);d!=null&&c(e,["startTime"],d);const h=u(n,["tuningTask","completeTime"]);h!=null&&c(e,["endTime"],h);const g=u(n,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(n,["description"]);p!=null&&c(e,["description"],p);const _=u(n,["baseModel"]);_!=null&&c(e,["baseModel"],_);const E=u(n,["_self"]);E!=null&&c(e,["tunedModel"],x3(E));const S=u(n,["customBaseModel"]);S!=null&&c(e,["customBaseModel"],S);const x=u(n,["experiment"]);x!=null&&c(e,["experiment"],x);const U=u(n,["labels"]);U!=null&&c(e,["labels"],U);const q=u(n,["outputUri"]);q!=null&&c(e,["outputUri"],q);const H=u(n,["pipelineJob"]);H!=null&&c(e,["pipelineJob"],H);const ie=u(n,["serviceAccount"]);ie!=null&&c(e,["serviceAccount"],ie);const K=u(n,["tunedModelDisplayName"]);return K!=null&&c(e,["tunedModelDisplayName"],K),e}function b3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>aA(d))),c(e,["tuningJobs"],l)}return e}function N3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["metadata"]);s!=null&&c(e,["metadata"],s);const l=u(n,["done"]);l!=null&&c(e,["done"],l);const d=u(n,["error"]);return d!=null&&c(e,["error"],d),e}function D3(n){const e={},t=u(n,["checkpointId"]);t!=null&&c(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&c(e,["epoch"],i);const s=u(n,["step"]);s!=null&&c(e,["step"],s);const l=u(n,["endpoint"]);return l!=null&&c(e,["endpoint"],l),e}function P3(n){const e={},t=u(n,["model"]);t!=null&&c(e,["model"],t);const i=u(n,["endpoint"]);i!=null&&c(e,["endpoint"],i);const s=u(n,["checkpoints"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>D3(d))),c(e,["checkpoints"],l)}return e}function Km(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&c(e,["name"],i);const s=u(n,["state"]);s!=null&&c(e,["state"],VC(s));const l=u(n,["createTime"]);l!=null&&c(e,["createTime"],l);const d=u(n,["startTime"]);d!=null&&c(e,["startTime"],d);const h=u(n,["endTime"]);h!=null&&c(e,["endTime"],h);const g=u(n,["updateTime"]);g!=null&&c(e,["updateTime"],g);const p=u(n,["error"]);p!=null&&c(e,["error"],p);const _=u(n,["description"]);_!=null&&c(e,["description"],_);const E=u(n,["baseModel"]);E!=null&&c(e,["baseModel"],E);const S=u(n,["tunedModel"]);S!=null&&c(e,["tunedModel"],P3(S));const x=u(n,["preTunedModel"]);x!=null&&c(e,["preTunedModel"],x);const U=u(n,["supervisedTuningSpec"]);U!=null&&c(e,["supervisedTuningSpec"],U);const q=u(n,["tuningDataStats"]);q!=null&&c(e,["tuningDataStats"],q);const H=u(n,["encryptionSpec"]);H!=null&&c(e,["encryptionSpec"],H);const ie=u(n,["partnerModelTuningSpec"]);ie!=null&&c(e,["partnerModelTuningSpec"],ie);const K=u(n,["customBaseModel"]);K!=null&&c(e,["customBaseModel"],K);const X=u(n,["experiment"]);X!=null&&c(e,["experiment"],X);const ae=u(n,["labels"]);ae!=null&&c(e,["labels"],ae);const W=u(n,["outputUri"]);W!=null&&c(e,["outputUri"],W);const J=u(n,["pipelineJob"]);J!=null&&c(e,["pipelineJob"],J);const b=u(n,["serviceAccount"]);b!=null&&c(e,["serviceAccount"],b);const R=u(n,["tunedModelDisplayName"]);return R!=null&&c(e,["tunedModelDisplayName"],R),e}function k3(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&c(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&c(e,["nextPageToken"],i);const s=u(n,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Km(d))),c(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V3 extends jr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new du(Jr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel},s=Object.assign(Object.assign({},t),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),s=await this.tuneMldevInternal(i);let l="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?l=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(l=s.name.split("/operations/")[0]),{name:l,state:Om.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=E3(e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>Km(_))}else{const p=h3(e);return h=pe("{name}",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>aA(_))}}async listInternal(e){var t,i,s,l;let d,h="",g={};if(this.apiClient.isVertexAI()){const p=C3(e);return h=pe("tuningJobs",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=k3(_),S=new xE;return Object.assign(S,E),S})}else{const p=p3(e);return h=pe("tunedModels",p._url),g=p._query,delete p.config,delete p._url,delete p._query,d=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:_.headers},S})),d.then(_=>{const E=b3(_),S=new xE;return Object.assign(S,E),S})}}async cancel(e){var t,i,s,l;let d="",h={};if(this.apiClient.isVertexAI()){const g=A3(e);d=pe("{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=g3(e);d=pe("{name}:cancel",g._url),h=g._query,delete g.config,delete g._url,delete g._query,await this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI()){const h=M3(e);return l=pe("tuningJobs",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>Km(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=T3(e);return l=pe("tunedModels",h._url),d=h._query,delete h.config,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),s.then(g=>N3(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U3{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const L3=1024*1024*8,O3=3,F3=1e3,q3=2,fm="x-goog-upload-status";async function B3(n,e,t){var i,s,l;let d=0,h=0,g=new Fm(new Response),p="upload";for(d=n.size;h<d;){const E=Math.min(L3,d-h),S=n.slice(h,h+E);h+E>=d&&(p+=", finalize");let x=0,U=F3;for(;x<O3&&(g=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(h),"Content-Length":String(E)}}}),!(!((i=g==null?void 0:g.headers)===null||i===void 0)&&i[fm]));)x++,await G3(U),U=U*q3;if(h+=E,((s=g==null?void 0:g.headers)===null||s===void 0?void 0:s[fm])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const _=await(g==null?void 0:g.json());if(((l=g==null?void 0:g.headers)===null||l===void 0?void 0:l[fm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return _.file}async function H3(n){return{size:n.size,type:n.type}}function G3(n){return new Promise(e=>setTimeout(e,n))}class z3{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await B3(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await H3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y3{create(e,t,i){return new $3(e,t,i)}}class $3{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t0="x-goog-api-key";class K3{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(t0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(t0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J3="gl-node/";class Q3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=xD(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new K3(this.apiKey);this.apiClient=new f6({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:J3+"web",uploader:new z3,downloader:new U3}),this.models=new N6(this.apiClient),this.live=new A6(this.apiClient,s,new Y3),this.batches=new eP(this.apiClient),this.chats=new sk(this.models,this.apiClient),this.caches=new ik(this.apiClient),this.files=new vk(this.apiClient),this.operations=new V6(this.apiClient),this.authTokens=new d3(this.apiClient),this.tunings=new V3(this.apiClient)}}const X3=async(n,e,t,i)=>{const s=t||"PLACEHOLDER_API_KEY";if(!n)throw new Error(": ");const l=new Q3({apiKey:s}),d=["","","","","","",""],h=[];n.grid.forEach((_,E)=>{if(E<d.length){const S=d[E];_.forEach((x,U)=>{x&&x.length>0&&x.forEach(q=>{h.push({day:S,period:U+1,name:q.name,room:q.room,credits:q.credits,memo:q.memo,tasks:q.tasks.filter(H=>!H.completed).map(H=>({content:H.content,dueDate:H.dueDate}))})})})}});const g={name:n.name,schedule:h},p=`


# 
- 
- 
- Markdown
- 

#  (JSON)
#  'schedule' (day)(period)
${JSON.stringify(g,null,2)}

# 
"${i}"


`;try{return await l.models.generateContentStream({model:e,contents:[{role:"user",parts:[{text:p}]}]})}catch(_){throw console.error("Error analyzing with Gemini API:",_),_ instanceof Error&&_.message.includes("API key not valid")?new Error(": API"):new Error("AI")}},W3=({isOpen:n,onClose:e,onSave:t,currentModel:i,currentApiKey:s})=>{const[l,d]=ve.useState(i),[h,g]=ve.useState(s);if(ve.useEffect(()=>{n&&(d(i),g(s))},[n,i,s]),!n)return null;const p=()=>{t(l,h),e()};return k.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:k.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-md shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[k.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[k.jsx("h2",{className:"text-xl font-bold",children:"AI"}),k.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:k.jsx(fu,{className:"w-6 h-6"})})]}),k.jsxs("div",{className:"p-6 space-y-6",children:[k.jsxs("div",{children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:"API (Gemini)"}),k.jsx("input",{type:"password",value:h,onChange:_=>g(_.target.value),placeholder:"Gemini API",className:"w-full bg-gray-200/50 dark:bg-gray-700/50 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 placeholder:text-gray-500","aria-label":"Gemini API Key"}),k.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["API",k.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 dark:text-sky-400 hover:underline ml-1",children:""})]})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-lg font-semibold mb-2",children:""}),k.jsx("select",{value:l,onChange:_=>d(_.target.value),className:"w-full bg-gray-200/50 dark:bg-gray-700/50 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500","aria-label":"AI Model",children:zI.map(_=>k.jsx("option",{value:_,className:"bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white",children:_},_))})]})]}),k.jsx("div",{className:"p-4 flex justify-end items-center border-t border-black/10 dark:border-white/10",children:k.jsx("button",{onClick:p,className:"bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:""})})]})})},Z3=({isOpen:n,onClose:e,timetable:t,model:i,apiKey:s,onSaveSettings:l,user:d})=>{var K;const[h,g]=ve.useState([]),[p,_]=ve.useState(!1),[E,S]=ve.useState(""),[x,U]=ve.useState(!1),q=ve.useRef(null),H=()=>{var X;(X=q.current)==null||X.scrollIntoView({behavior:"smooth"})};ve.useEffect(()=>{H()},[h]),ve.useEffect(()=>{n&&h.length===0&&g([{role:"model",text:`
`}])},[n,h.length]);const ie=async X=>{if(X.preventDefault(),!E.trim()||p)return;const ae=E;g(W=>[...W,{role:"user",text:ae},{role:"model",text:""}]),S(""),_(!0);try{const W=await X3(t,i,s,ae);for await(const J of W){const b=J.text;g(R=>{const M=R.length-1,N=[...R];return N[M]={...N[M],text:N[M].text+b},N})}}catch(W){const J=W instanceof Error?W.message:"";g(b=>{const R=b.length-1,M=[...b];return M[R]={...M[R],text:J},M})}finally{_(!1)}};return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:`fixed inset-0 bg-black/30 flex justify-end z-40 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:k.jsxs("div",{className:`w-full max-w-md h-full bg-gray-100/90 dark:bg-gray-900/90 backdrop-blur-xl border-l border-black/10 dark:border-white/10 shadow-2xl flex flex-col transition-transform duration-300 ${n?"translate-x-0":"translate-x-full"}`,children:[k.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[k.jsx("h2",{className:"text-xl font-bold",children:"AI"}),k.jsxs("div",{children:[k.jsx("button",{onClick:()=>U(!0),className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",title:"AI",children:k.jsx(MC,{className:"w-6 h-6"})}),k.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 ml-2",title:"",children:k.jsx(fu,{className:"w-6 h-6"})})]})]}),k.jsxs("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[h.map((X,ae)=>k.jsx("div",{className:`flex ${X.role==="user"?"justify-end":"justify-start"}`,children:k.jsx("div",{className:`max-w-xs md:max-w-sm lg:max-w-md p-3 rounded-2xl ${X.role==="user"?"bg-sky-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:X.role==="model"?k.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:window.marked?window.marked.parse(X.text):X.text.replace(/</g,"&lt;").replace(/>/g,"&gt;")}}):k.jsx("p",{className:"whitespace-pre-wrap",children:X.text})})},ae)),p&&((K=h[h.length-1])==null?void 0:K.text)===""&&k.jsx("div",{className:"flex justify-start",children:k.jsx("div",{className:"p-3 rounded-2xl bg-gray-200 dark:bg-gray-700",children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse"}),k.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse [animation-delay:0.2s]"}),k.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse [animation-delay:0.4s]"})]})})}),k.jsx("div",{ref:q})]}),k.jsx("div",{className:"p-4 border-t border-black/10 dark:border-white/10 mt-auto",children:k.jsxs("form",{onSubmit:ie,className:"flex items-center gap-2",children:[k.jsx("input",{type:"text",value:E,onChange:X=>S(X.target.value),placeholder:p?"AI...":"...",className:"w-full bg-gray-200/50 dark:bg-gray-800/50 p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-500 border border-transparent focus:border-sky-500 transition-colors placeholder:text-gray-500",disabled:p,"aria-label":""}),k.jsx("button",{type:"submit",disabled:p||!E.trim(),className:"bg-sky-600 hover:bg-sky-700 text-white p-3 rounded-lg transition-colors disabled:bg-sky-400 disabled:cursor-not-allowed flex-shrink-0","aria-label":"",children:k.jsx(gD,{className:"w-5 h-5"})})]})})]})}),k.jsx(W3,{isOpen:x,onClose:()=>U(!1),onSave:l,currentModel:i,currentApiKey:s})]})},j3=({isOpen:n,onClose:e,tasks:t,onToggleTask:i})=>{if(!n)return null;const s=[...t].sort((p,_)=>{if(p.completed!==_.completed)return p.completed?1:-1;const E=p.dueDate?new Date(p.dueDate).getTime():1/0,S=_.dueDate?new Date(_.dueDate).getTime():1/0;return E!==S?E-S:p.content.localeCompare(_.content)}),l=s.filter(p=>!p.completed),d=s.filter(p=>p.completed),h=new Date;h.setHours(0,0,0,0);const g=({task:p})=>{const _=p.dueDate&&!p.completed&&new Date(p.dueDate)<h;return k.jsxs("div",{className:"flex items-center gap-3 bg-black/5 dark:bg-white/5 p-3 rounded-lg",children:[k.jsx("input",{type:"checkbox",checked:p.completed,onChange:()=>i(p.id,p.subjectId,p.timetableId),className:"form-checkbox h-5 w-5 rounded bg-gray-300 dark:bg-gray-600 border-gray-400 dark:border-gray-500 text-sky-600 focus:ring-sky-500 flex-shrink-0"}),k.jsxs("div",{className:"flex-grow",children:[k.jsx("p",{className:`font-semibold ${p.completed?"line-through text-gray-500 dark:text-gray-400":""}`,children:p.content}),k.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-1",children:[k.jsx("span",{className:`w-2 h-2 rounded-full ${p.subjectColor}`}),k.jsx("span",{children:p.subjectName}),k.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"/"}),k.jsx("span",{children:p.timetableName})]})]}),p.dueDate&&k.jsx("p",{className:`text-sm font-medium flex-shrink-0 ${_?"text-red-500 font-bold":"text-gray-600 dark:text-gray-300"}`,children:p.dueDate})]})};return k.jsx("div",{className:`fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,children:k.jsxs("div",{className:`bg-gray-100/95 dark:bg-gray-900/95 backdrop-blur-xl border border-black/10 dark:border-white/10 rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl transition-transform duration-300 ${n?"scale-100":"scale-95"}`,children:[k.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-black/10 dark:border-white/10",children:[k.jsx("h2",{className:"text-xl font-bold",children:""}),k.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:k.jsx(fu,{className:"w-6 h-6"})})]}),k.jsx("div",{className:"p-6 overflow-y-auto space-y-6",children:t.length===0?k.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:""}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{children:[k.jsxs("h3",{className:"text-lg font-semibold mb-3",children:[" (",l.length,")"]}),k.jsx("div",{className:"space-y-2",children:l.length>0?l.map(p=>k.jsx(g,{task:p},p.id)):k.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:""})})]}),d.length>0&&k.jsxs("div",{children:[k.jsxs("h3",{className:"text-lg font-semibold mb-3",children:[" (",d.length,")"]}),k.jsx("div",{className:"space-y-2",children:d.map(p=>k.jsx(g,{task:p},p.id))})]})]})})]})})};function eO(){const[n,e]=ve.useState(null),[t,i]=ve.useState(!0),{timetables:s,activeTimetable:l,activeTimetableId:d,setActiveTimetableId:h,addTimetable:g,importTimetable:p,deleteTimetable:_,updateTimetableSettings:E,saveSubject:S,deleteSubject:x,moveSubject:U,toggleTaskCompletion:q,totalCredits:H,saveStatus:ie,isLoading:K}=sD(n),[X,ae]=ve.useState(YI),[W,J]=ve.useState(""),[b,R]=ve.useState(()=>{if(typeof window<"u"&&window.localStorage){const we=window.localStorage.getItem("theme");if(we==="light"||we==="dark")return we;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"});ve.useEffect(()=>{const we=iD(fn=>{e(fn),i(!1)}),st=localStorage.getItem("geminiModel");st&&ae(st);const Xe=localStorage.getItem("geminiApiKey");return Xe&&J(Xe),()=>we()},[]),ve.useEffect(()=>{const we=window.document.documentElement;we.classList.remove(b==="dark"?"light":"dark"),we.classList.add(b),localStorage.setItem("theme",b),document.body.classList.remove("glassmorphism-bg","dark"),b==="dark"?document.body.classList.add("dark","glassmorphism-bg"):document.body.classList.add("glassmorphism-bg")},[b]);const M=()=>{R(we=>we==="light"?"dark":"light")},N=async()=>{try{await tD()}catch(we){console.error("Login failed",we)}},V=async()=>{try{await nD()}catch(we){console.error("Logout failed",we)}},[O,D]=ve.useState(!1),[et,ke]=ve.useState(!1),[j,ue]=ve.useState(!1),[he,qe]=ve.useState(!1),[L,re]=ve.useState({subject:null,dayIndex:0,periodIndex:0}),[fe,le]=ve.useState(null),_e=(we,st)=>{re({subject:null,dayIndex:we,periodIndex:st}),D(!0)},Ne=(we,st,Xe)=>{re({subject:we,dayIndex:st,periodIndex:Xe}),D(!0)},Ae=()=>{const we=prompt(":",` ${s.length+1}`);we&&g(we)},Ct=()=>{l&&window.confirm(`${l.name}`)&&_(l.id)},tt=()=>{if(!l)return;const we=JSON.stringify(l,null,2),st=new Blob([we],{type:"application/json"}),Xe=URL.createObjectURL(st),fn=document.createElement("a");fn.href=Xe,fn.download=`${l.name}.tmx`,document.body.appendChild(fn),fn.click(),document.body.removeChild(fn),URL.revokeObjectURL(Xe)},In=we=>{var fn;const st=(fn=we.target.files)==null?void 0:fn[0];if(!st)return;const Xe=new FileReader;Xe.onload=or=>{var ti;const Ni=(ti=or.target)==null?void 0:ti.result;typeof Ni=="string"&&(p(Ni)||alert(""))},Xe.readAsText(st),we.target.value=""},ei=we=>{E(we)},Hn=(we,st)=>{ae(we),J(st),localStorage.setItem("geminiModel",we),localStorage.setItem("geminiApiKey",st)},Mi=we=>{const{id:st,...Xe}=we;le(Xe)},xi=(we,st)=>{if(fe){const Xe={...fe,id:`subject-${Date.now()}`};S(Xe,we,st)}},bi=s.flatMap(we=>we.grid.flat(2).flatMap(st=>st.tasks.map(Xe=>({...Xe,subjectName:st.name,subjectColor:st.color,subjectId:st.id,timetableId:we.id,timetableName:we.name}))));return t||K?k.jsx("div",{className:"min-h-screen flex justify-center items-center",children:k.jsx("div",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"..."})}):k.jsxs("div",{className:"min-h-screen text-gray-800 dark:text-white font-sans transition-colors duration-300",children:[k.jsx(vD,{timetables:s,activeTimetableId:d,setActiveTimetableId:h,onAddTimetable:Ae,onDeleteTimetable:Ct,onOpenSettings:()=>ke(!0),onOpenTaskList:()=>qe(!0),totalCredits:H,theme:b,toggleTheme:M,onExport:tt,onImport:In,user:n,onLogin:N,onLogout:V,saveStatus:ie}),k.jsx("main",{children:l?k.jsx(SD,{timetable:l,onAddSubject:_e,onEditSubject:Ne,onMoveSubject:U,onDeleteSubject:x,onCopySubject:Mi,onPasteSubject:xi,copiedSubject:fe}):k.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-100px)]",children:k.jsx("p",{className:"text-2xl text-gray-500 dark:text-gray-400",children:""})})}),k.jsx("button",{onClick:()=>ue(!0),className:"fixed bottom-6 right-6 bg-sky-600 hover:bg-sky-700 text-white p-4 rounded-full shadow-lg z-30 transition-transform hover:scale-110",title:"AI","aria-label":"AI",children:k.jsx(aD,{className:"w-8 h-8"})}),k.jsx(AD,{isOpen:O,onClose:()=>D(!1),onSave:S,onDelete:x,subjectData:L}),l&&k.jsx(ID,{isOpen:et,onClose:()=>ke(!1),onSave:ei,currentSettings:l.settings}),k.jsx(Z3,{isOpen:j,onClose:()=>ue(!1),timetable:l,model:X,apiKey:W,onSaveSettings:Hn,user:n}),k.jsx(j3,{isOpen:he,onClose:()=>qe(!1),tasks:bi,onToggleTask:q})]})}const lA=document.getElementById("root");if(!lA)throw new Error("Could not find root element to mount to");const tO=GI.createRoot(lA);tO.render(k.jsx(i0.StrictMode,{children:k.jsx(eO,{})}));
